var eX=Object.defineProperty;var tX=(t,e,n)=>e in t?eX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var te=(t,e,n)=>(tX(t,typeof e!="symbol"?e+"":e,n),n),mN=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var D=(t,e,n)=>(mN(t,e,"read from private field"),n?n.call(t):e.get(t)),se=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},G=(t,e,n,r)=>(mN(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var Dw=(t,e,n,r)=>({set _(s){G(t,e,s,n)},get _(){return D(t,e,r)}}),ye=(t,e,n)=>(mN(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function Qh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ol(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var w9={exports:{}},l2={},b9={exports:{}},Mt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PE=Symbol.for("react.element"),nX=Symbol.for("react.portal"),rX=Symbol.for("react.fragment"),sX=Symbol.for("react.strict_mode"),iX=Symbol.for("react.profiler"),oX=Symbol.for("react.provider"),aX=Symbol.for("react.context"),cX=Symbol.for("react.forward_ref"),lX=Symbol.for("react.suspense"),uX=Symbol.for("react.memo"),dX=Symbol.for("react.lazy"),Y5=Symbol.iterator;function hX(t){return t===null||typeof t!="object"?null:(t=Y5&&t[Y5]||t["@@iterator"],typeof t=="function"?t:null)}var v9={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E9=Object.assign,A9={};function fw(t,e,n){this.props=t,this.context=e,this.refs=A9,this.updater=n||v9}fw.prototype.isReactComponent={};fw.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fw.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function x9(){}x9.prototype=fw.prototype;function u4(t,e,n){this.props=t,this.context=e,this.refs=A9,this.updater=n||v9}var d4=u4.prototype=new x9;d4.constructor=u4;E9(d4,fw.prototype);d4.isPureReactComponent=!0;var Z5=Array.isArray,S9=Object.prototype.hasOwnProperty,h4={current:null},C9={key:!0,ref:!0,__self:!0,__source:!0};function _9(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)S9.call(e,r)&&!C9.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:PE,type:t,key:i,ref:o,props:s,_owner:h4.current}}function fX(t,e){return{$$typeof:PE,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function f4(t){return typeof t=="object"&&t!==null&&t.$$typeof===PE}function pX(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Q5=/\/+/g;function gN(t,e){return typeof t=="object"&&t!==null&&t.key!=null?pX(""+t.key):e.toString(36)}function Fx(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case PE:case nX:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+gN(o,0):r,Z5(s)?(n="",t!=null&&(n=t.replace(Q5,"$&/")+"/"),Fx(s,e,n,"",function(l){return l})):s!=null&&(f4(s)&&(s=fX(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Q5,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Z5(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+gN(i,a);o+=Fx(i,e,n,c,s)}else if(c=hX(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+gN(i,a++),o+=Fx(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function EA(t,e,n){if(t==null)return t;var r=[],s=0;return Fx(t,r,"","",function(i){return e.call(n,i,s++)}),r}function mX(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Vi={current:null},jx={transition:null},gX={ReactCurrentDispatcher:Vi,ReactCurrentBatchConfig:jx,ReactCurrentOwner:h4};function I9(){throw Error("act(...) is not supported in production builds of React.")}Mt.Children={map:EA,forEach:function(t,e,n){EA(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return EA(t,function(){e++}),e},toArray:function(t){return EA(t,function(e){return e})||[]},only:function(t){if(!f4(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Mt.Component=fw;Mt.Fragment=rX;Mt.Profiler=iX;Mt.PureComponent=u4;Mt.StrictMode=sX;Mt.Suspense=lX;Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gX;Mt.act=I9;Mt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=E9({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=h4.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)S9.call(e,c)&&!C9.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:PE,type:t.type,key:s,ref:i,props:r,_owner:o}};Mt.createContext=function(t){return t={$$typeof:aX,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:oX,_context:t},t.Consumer=t};Mt.createElement=_9;Mt.createFactory=function(t){var e=_9.bind(null,t);return e.type=t,e};Mt.createRef=function(){return{current:null}};Mt.forwardRef=function(t){return{$$typeof:cX,render:t}};Mt.isValidElement=f4;Mt.lazy=function(t){return{$$typeof:dX,_payload:{_status:-1,_result:t},_init:mX}};Mt.memo=function(t,e){return{$$typeof:uX,type:t,compare:e===void 0?null:e}};Mt.startTransition=function(t){var e=jx.transition;jx.transition={};try{t()}finally{jx.transition=e}};Mt.unstable_act=I9;Mt.useCallback=function(t,e){return Vi.current.useCallback(t,e)};Mt.useContext=function(t){return Vi.current.useContext(t)};Mt.useDebugValue=function(){};Mt.useDeferredValue=function(t){return Vi.current.useDeferredValue(t)};Mt.useEffect=function(t,e){return Vi.current.useEffect(t,e)};Mt.useId=function(){return Vi.current.useId()};Mt.useImperativeHandle=function(t,e,n){return Vi.current.useImperativeHandle(t,e,n)};Mt.useInsertionEffect=function(t,e){return Vi.current.useInsertionEffect(t,e)};Mt.useLayoutEffect=function(t,e){return Vi.current.useLayoutEffect(t,e)};Mt.useMemo=function(t,e){return Vi.current.useMemo(t,e)};Mt.useReducer=function(t,e,n){return Vi.current.useReducer(t,e,n)};Mt.useRef=function(t){return Vi.current.useRef(t)};Mt.useState=function(t){return Vi.current.useState(t)};Mt.useSyncExternalStore=function(t,e,n){return Vi.current.useSyncExternalStore(t,e,n)};Mt.useTransition=function(){return Vi.current.useTransition()};Mt.version="18.3.1";b9.exports=Mt;var Z=b9.exports;const we=Qh(Z);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yX=Z,wX=Symbol.for("react.element"),bX=Symbol.for("react.fragment"),vX=Object.prototype.hasOwnProperty,EX=yX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AX={key:!0,ref:!0,__self:!0,__source:!0};function N9(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)vX.call(e,r)&&!AX.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:wX,type:t,key:i,ref:o,props:s,_owner:EX.current}}l2.Fragment=bX;l2.jsx=N9;l2.jsxs=N9;w9.exports=l2;var v=w9.exports,Xk={},T9={exports:{}},ta={},k9={exports:{}},P9={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(T,R){var B=T.length;T.push(R);e:for(;0<B;){var O=B-1>>>1,S=T[O];if(0<s(S,R))T[O]=R,T[B]=S,B=O;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var R=T[0],B=T.pop();if(B!==R){T[0]=B;e:for(var O=0,S=T.length,z=S>>>1;O<z;){var Y=2*(O+1)-1,J=T[Y],ae=Y+1,pe=T[ae];if(0>s(J,B))ae<S&&0>s(pe,J)?(T[O]=pe,T[ae]=B,O=ae):(T[O]=J,T[Y]=B,O=Y);else if(ae<S&&0>s(pe,B))T[O]=pe,T[ae]=B,O=ae;else break e}}return R}function s(T,R){var B=T.sortIndex-R.sortIndex;return B!==0?B:T.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,E=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(T){for(var R=n(l);R!==null;){if(R.callback===null)r(l);else if(R.startTime<=T)r(l),R.sortIndex=R.expirationTime,e(c,R);else break;R=n(l)}}function N(T){if(m=!1,w(T),!p)if(n(c)!==null)p=!0,A(_);else{var R=n(l);R!==null&&I(N,R.startTime-T)}}function _(T,R){p=!1,m&&(m=!1,b(F),F=-1),f=!0;var B=h;try{for(w(R),d=n(c);d!==null&&(!(d.expirationTime>R)||T&&!H());){var O=d.callback;if(typeof O=="function"){d.callback=null,h=d.priorityLevel;var S=O(d.expirationTime<=R);R=t.unstable_now(),typeof S=="function"?d.callback=S:d===n(c)&&r(c),w(R)}else r(c);d=n(c)}if(d!==null)var z=!0;else{var Y=n(l);Y!==null&&I(N,Y.startTime-R),z=!1}return z}finally{d=null,h=B,f=!1}}var L=!1,U=null,F=-1,M=5,W=-1;function H(){return!(t.unstable_now()-W<M)}function K(){if(U!==null){var T=t.unstable_now();W=T;var R=!0;try{R=U(!0,T)}finally{R?P():(L=!1,U=null)}}else L=!1}var P;if(typeof x=="function")P=function(){x(K)};else if(typeof MessageChannel<"u"){var y=new MessageChannel,g=y.port2;y.port1.onmessage=K,P=function(){g.postMessage(null)}}else P=function(){E(K,0)};function A(T){U=T,L||(L=!0,P())}function I(T,R){F=E(function(){T(t.unstable_now())},R)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(T){T.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,A(_))},t.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<T?Math.floor(1e3/T):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(T){switch(h){case 1:case 2:case 3:var R=3;break;default:R=h}var B=h;h=R;try{return T()}finally{h=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(T,R){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var B=h;h=T;try{return R()}finally{h=B}},t.unstable_scheduleCallback=function(T,R,B){var O=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?O+B:O):B=O,T){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=B+S,T={id:u++,callback:R,priorityLevel:T,startTime:B,expirationTime:S,sortIndex:-1},B>O?(T.sortIndex=B,e(l,T),n(c)===null&&T===n(l)&&(m?(b(F),F=-1):m=!0,I(N,B-O))):(T.sortIndex=S,e(c,T),p||f||(p=!0,A(_))),T},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(T){var R=h;return function(){var B=h;h=R;try{return T.apply(this,arguments)}finally{h=B}}}})(P9);k9.exports=P9;var xX=k9.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SX=Z,Jo=xX;function be(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var R9=new Set,C1={};function vm(t,e){Ny(t,e),Ny(t+"Capture",e)}function Ny(t,e){for(C1[t]=e,t=0;t<e.length;t++)R9.add(e[t])}var Hu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eP=Object.prototype.hasOwnProperty,CX=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,J5={},X5={};function _X(t){return eP.call(X5,t)?!0:eP.call(J5,t)?!1:CX.test(t)?X5[t]=!0:(J5[t]=!0,!1)}function IX(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function NX(t,e,n,r){if(e===null||typeof e>"u"||IX(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ki(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Hs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Hs[t]=new Ki(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Hs[e]=new Ki(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Hs[t]=new Ki(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Hs[t]=new Ki(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Hs[t]=new Ki(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Hs[t]=new Ki(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Hs[t]=new Ki(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Hs[t]=new Ki(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Hs[t]=new Ki(t,5,!1,t.toLowerCase(),null,!1,!1)});var p4=/[\-:]([a-z])/g;function m4(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(p4,m4);Hs[e]=new Ki(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(p4,m4);Hs[e]=new Ki(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(p4,m4);Hs[e]=new Ki(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Hs[t]=new Ki(t,1,!1,t.toLowerCase(),null,!1,!1)});Hs.xlinkHref=new Ki("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Hs[t]=new Ki(t,1,!1,t.toLowerCase(),null,!0,!0)});function g4(t,e,n,r){var s=Hs.hasOwnProperty(e)?Hs[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(NX(e,n,s,r)&&(n=null),r||s===null?_X(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var nd=SX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,AA=Symbol.for("react.element"),Fg=Symbol.for("react.portal"),jg=Symbol.for("react.fragment"),y4=Symbol.for("react.strict_mode"),tP=Symbol.for("react.profiler"),O9=Symbol.for("react.provider"),M9=Symbol.for("react.context"),w4=Symbol.for("react.forward_ref"),nP=Symbol.for("react.suspense"),rP=Symbol.for("react.suspense_list"),b4=Symbol.for("react.memo"),Md=Symbol.for("react.lazy"),D9=Symbol.for("react.offscreen"),e6=Symbol.iterator;function Bw(t){return t===null||typeof t!="object"?null:(t=e6&&t[e6]||t["@@iterator"],typeof t=="function"?t:null)}var or=Object.assign,yN;function yb(t){if(yN===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);yN=e&&e[1]||""}return`
`+yN+t}var wN=!1;function bN(t,e){if(!t||wN)return"";wN=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{wN=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?yb(t):""}function TX(t){switch(t.tag){case 5:return yb(t.type);case 16:return yb("Lazy");case 13:return yb("Suspense");case 19:return yb("SuspenseList");case 0:case 2:case 15:return t=bN(t.type,!1),t;case 11:return t=bN(t.type.render,!1),t;case 1:return t=bN(t.type,!0),t;default:return""}}function sP(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case jg:return"Fragment";case Fg:return"Portal";case tP:return"Profiler";case y4:return"StrictMode";case nP:return"Suspense";case rP:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case M9:return(t.displayName||"Context")+".Consumer";case O9:return(t._context.displayName||"Context")+".Provider";case w4:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case b4:return e=t.displayName||null,e!==null?e:sP(t.type)||"Memo";case Md:e=t._payload,t=t._init;try{return sP(t(e))}catch{}}return null}function kX(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sP(e);case 8:return e===y4?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fh(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function B9(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function PX(t){var e=B9(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xA(t){t._valueTracker||(t._valueTracker=PX(t))}function L9(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=B9(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function aC(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function iP(t,e){var n=e.checked;return or({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function t6(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fh(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function U9(t,e){e=e.checked,e!=null&&g4(t,"checked",e,!1)}function oP(t,e){U9(t,e);var n=Fh(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?aP(t,e.type,n):e.hasOwnProperty("defaultValue")&&aP(t,e.type,Fh(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function n6(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function aP(t,e,n){(e!=="number"||aC(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var wb=Array.isArray;function m0(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fh(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function cP(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(be(91));return or({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function r6(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(be(92));if(wb(n)){if(1<n.length)throw Error(be(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fh(n)}}function F9(t,e){var n=Fh(e.value),r=Fh(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function s6(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function j9(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lP(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?j9(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var SA,$9=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(SA=SA||document.createElement("div"),SA.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=SA.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _1(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Hb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RX=["Webkit","ms","Moz","O"];Object.keys(Hb).forEach(function(t){RX.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Hb[e]=Hb[t]})});function z9(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Hb.hasOwnProperty(t)&&Hb[t]?(""+e).trim():e+"px"}function W9(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=z9(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var OX=or({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uP(t,e){if(e){if(OX[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(be(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(be(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(be(61))}if(e.style!=null&&typeof e.style!="object")throw Error(be(62))}}function dP(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hP=null;function v4(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fP=null,g0=null,y0=null;function i6(t){if(t=ME(t)){if(typeof fP!="function")throw Error(be(280));var e=t.stateNode;e&&(e=p2(e),fP(t.stateNode,t.type,e))}}function H9(t){g0?y0?y0.push(t):y0=[t]:g0=t}function V9(){if(g0){var t=g0,e=y0;if(y0=g0=null,i6(t),e)for(t=0;t<e.length;t++)i6(e[t])}}function K9(t,e){return t(e)}function q9(){}var vN=!1;function G9(t,e,n){if(vN)return t(e,n);vN=!0;try{return K9(t,e,n)}finally{vN=!1,(g0!==null||y0!==null)&&(q9(),V9())}}function I1(t,e){var n=t.stateNode;if(n===null)return null;var r=p2(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(be(231,e,typeof n));return n}var pP=!1;if(Hu)try{var Lw={};Object.defineProperty(Lw,"passive",{get:function(){pP=!0}}),window.addEventListener("test",Lw,Lw),window.removeEventListener("test",Lw,Lw)}catch{pP=!1}function MX(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var Vb=!1,cC=null,lC=!1,mP=null,DX={onError:function(t){Vb=!0,cC=t}};function BX(t,e,n,r,s,i,o,a,c){Vb=!1,cC=null,MX.apply(DX,arguments)}function LX(t,e,n,r,s,i,o,a,c){if(BX.apply(this,arguments),Vb){if(Vb){var l=cC;Vb=!1,cC=null}else throw Error(be(198));lC||(lC=!0,mP=l)}}function Em(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Y9(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function o6(t){if(Em(t)!==t)throw Error(be(188))}function UX(t){var e=t.alternate;if(!e){if(e=Em(t),e===null)throw Error(be(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return o6(s),t;if(i===r)return o6(s),e;i=i.sibling}throw Error(be(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(be(189))}}if(n.alternate!==r)throw Error(be(190))}if(n.tag!==3)throw Error(be(188));return n.stateNode.current===n?t:e}function Z9(t){return t=UX(t),t!==null?Q9(t):null}function Q9(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Q9(t);if(e!==null)return e;t=t.sibling}return null}var J9=Jo.unstable_scheduleCallback,a6=Jo.unstable_cancelCallback,FX=Jo.unstable_shouldYield,jX=Jo.unstable_requestPaint,Er=Jo.unstable_now,$X=Jo.unstable_getCurrentPriorityLevel,E4=Jo.unstable_ImmediatePriority,X9=Jo.unstable_UserBlockingPriority,uC=Jo.unstable_NormalPriority,zX=Jo.unstable_LowPriority,e7=Jo.unstable_IdlePriority,u2=null,vl=null;function WX(t){if(vl&&typeof vl.onCommitFiberRoot=="function")try{vl.onCommitFiberRoot(u2,t,void 0,(t.current.flags&128)===128)}catch{}}var bc=Math.clz32?Math.clz32:KX,HX=Math.log,VX=Math.LN2;function KX(t){return t>>>=0,t===0?32:31-(HX(t)/VX|0)|0}var CA=64,_A=4194304;function bb(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function dC(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=bb(a):(i&=o,i!==0&&(r=bb(i)))}else o=n&~s,o!==0?r=bb(o):i!==0&&(r=bb(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-bc(e),s=1<<n,r|=t[n],e&=~s;return r}function qX(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GX(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-bc(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=qX(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function gP(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function t7(){var t=CA;return CA<<=1,!(CA&4194240)&&(CA=64),t}function EN(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function RE(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-bc(e),t[e]=n}function YX(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-bc(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function A4(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-bc(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var En=0;function n7(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var r7,x4,s7,i7,o7,yP=!1,IA=[],xh=null,Sh=null,Ch=null,N1=new Map,T1=new Map,Vd=[],ZX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function c6(t,e){switch(t){case"focusin":case"focusout":xh=null;break;case"dragenter":case"dragleave":Sh=null;break;case"mouseover":case"mouseout":Ch=null;break;case"pointerover":case"pointerout":N1.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":T1.delete(e.pointerId)}}function Uw(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ME(e),e!==null&&x4(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function QX(t,e,n,r,s){switch(e){case"focusin":return xh=Uw(xh,t,e,n,r,s),!0;case"dragenter":return Sh=Uw(Sh,t,e,n,r,s),!0;case"mouseover":return Ch=Uw(Ch,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return N1.set(i,Uw(N1.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,T1.set(i,Uw(T1.get(i)||null,t,e,n,r,s)),!0}return!1}function a7(t){var e=Gf(t.target);if(e!==null){var n=Em(e);if(n!==null){if(e=n.tag,e===13){if(e=Y9(n),e!==null){t.blockedOn=e,o7(t.priority,function(){s7(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $x(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wP(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);hP=r,n.target.dispatchEvent(r),hP=null}else return e=ME(n),e!==null&&x4(e),t.blockedOn=n,!1;e.shift()}return!0}function l6(t,e,n){$x(t)&&n.delete(e)}function JX(){yP=!1,xh!==null&&$x(xh)&&(xh=null),Sh!==null&&$x(Sh)&&(Sh=null),Ch!==null&&$x(Ch)&&(Ch=null),N1.forEach(l6),T1.forEach(l6)}function Fw(t,e){t.blockedOn===e&&(t.blockedOn=null,yP||(yP=!0,Jo.unstable_scheduleCallback(Jo.unstable_NormalPriority,JX)))}function k1(t){function e(s){return Fw(s,t)}if(0<IA.length){Fw(IA[0],t);for(var n=1;n<IA.length;n++){var r=IA[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xh!==null&&Fw(xh,t),Sh!==null&&Fw(Sh,t),Ch!==null&&Fw(Ch,t),N1.forEach(e),T1.forEach(e),n=0;n<Vd.length;n++)r=Vd[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Vd.length&&(n=Vd[0],n.blockedOn===null);)a7(n),n.blockedOn===null&&Vd.shift()}var w0=nd.ReactCurrentBatchConfig,hC=!0;function XX(t,e,n,r){var s=En,i=w0.transition;w0.transition=null;try{En=1,S4(t,e,n,r)}finally{En=s,w0.transition=i}}function eee(t,e,n,r){var s=En,i=w0.transition;w0.transition=null;try{En=4,S4(t,e,n,r)}finally{En=s,w0.transition=i}}function S4(t,e,n,r){if(hC){var s=wP(t,e,n,r);if(s===null)PN(t,e,r,fC,n),c6(t,r);else if(QX(s,t,e,n,r))r.stopPropagation();else if(c6(t,r),e&4&&-1<ZX.indexOf(t)){for(;s!==null;){var i=ME(s);if(i!==null&&r7(i),i=wP(t,e,n,r),i===null&&PN(t,e,r,fC,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else PN(t,e,r,null,n)}}var fC=null;function wP(t,e,n,r){if(fC=null,t=v4(r),t=Gf(t),t!==null)if(e=Em(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Y9(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fC=t,null}function c7(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($X()){case E4:return 1;case X9:return 4;case uC:case zX:return 16;case e7:return 536870912;default:return 16}default:return 16}}var mh=null,C4=null,zx=null;function l7(){if(zx)return zx;var t,e=C4,n=e.length,r,s="value"in mh?mh.value:mh.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return zx=s.slice(t,1<r?1-r:void 0)}function Wx(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function NA(){return!0}function u6(){return!1}function na(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?NA:u6,this.isPropagationStopped=u6,this}return or(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=NA)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=NA)},persist:function(){},isPersistent:NA}),e}var pw={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_4=na(pw),OE=or({},pw,{view:0,detail:0}),tee=na(OE),AN,xN,jw,d2=or({},OE,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:I4,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==jw&&(jw&&t.type==="mousemove"?(AN=t.screenX-jw.screenX,xN=t.screenY-jw.screenY):xN=AN=0,jw=t),AN)},movementY:function(t){return"movementY"in t?t.movementY:xN}}),d6=na(d2),nee=or({},d2,{dataTransfer:0}),ree=na(nee),see=or({},OE,{relatedTarget:0}),SN=na(see),iee=or({},pw,{animationName:0,elapsedTime:0,pseudoElement:0}),oee=na(iee),aee=or({},pw,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cee=na(aee),lee=or({},pw,{data:0}),h6=na(lee),uee={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fee(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hee[t])?!!e[t]:!1}function I4(){return fee}var pee=or({},OE,{key:function(t){if(t.key){var e=uee[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Wx(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dee[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:I4,charCode:function(t){return t.type==="keypress"?Wx(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wx(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mee=na(pee),gee=or({},d2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),f6=na(gee),yee=or({},OE,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:I4}),wee=na(yee),bee=or({},pw,{propertyName:0,elapsedTime:0,pseudoElement:0}),vee=na(bee),Eee=or({},d2,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Aee=na(Eee),xee=[9,13,27,32],N4=Hu&&"CompositionEvent"in window,Kb=null;Hu&&"documentMode"in document&&(Kb=document.documentMode);var See=Hu&&"TextEvent"in window&&!Kb,u7=Hu&&(!N4||Kb&&8<Kb&&11>=Kb),p6=String.fromCharCode(32),m6=!1;function d7(t,e){switch(t){case"keyup":return xee.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function h7(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $g=!1;function Cee(t,e){switch(t){case"compositionend":return h7(e);case"keypress":return e.which!==32?null:(m6=!0,p6);case"textInput":return t=e.data,t===p6&&m6?null:t;default:return null}}function _ee(t,e){if($g)return t==="compositionend"||!N4&&d7(t,e)?(t=l7(),zx=C4=mh=null,$g=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return u7&&e.locale!=="ko"?null:e.data;default:return null}}var Iee={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function g6(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Iee[t.type]:e==="textarea"}function f7(t,e,n,r){H9(r),e=pC(e,"onChange"),0<e.length&&(n=new _4("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var qb=null,P1=null;function Nee(t){S7(t,0)}function h2(t){var e=Hg(t);if(L9(e))return t}function Tee(t,e){if(t==="change")return e}var p7=!1;if(Hu){var CN;if(Hu){var _N="oninput"in document;if(!_N){var y6=document.createElement("div");y6.setAttribute("oninput","return;"),_N=typeof y6.oninput=="function"}CN=_N}else CN=!1;p7=CN&&(!document.documentMode||9<document.documentMode)}function w6(){qb&&(qb.detachEvent("onpropertychange",m7),P1=qb=null)}function m7(t){if(t.propertyName==="value"&&h2(P1)){var e=[];f7(e,P1,t,v4(t)),G9(Nee,e)}}function kee(t,e,n){t==="focusin"?(w6(),qb=e,P1=n,qb.attachEvent("onpropertychange",m7)):t==="focusout"&&w6()}function Pee(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return h2(P1)}function Ree(t,e){if(t==="click")return h2(e)}function Oee(t,e){if(t==="input"||t==="change")return h2(e)}function Mee(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _c=typeof Object.is=="function"?Object.is:Mee;function R1(t,e){if(_c(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!eP.call(e,s)||!_c(t[s],e[s]))return!1}return!0}function b6(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function v6(t,e){var n=b6(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=b6(n)}}function g7(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?g7(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function y7(){for(var t=window,e=aC();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=aC(t.document)}return e}function T4(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Dee(t){var e=y7(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&g7(n.ownerDocument.documentElement,n)){if(r!==null&&T4(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=v6(n,i);var o=v6(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Bee=Hu&&"documentMode"in document&&11>=document.documentMode,zg=null,bP=null,Gb=null,vP=!1;function E6(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vP||zg==null||zg!==aC(r)||(r=zg,"selectionStart"in r&&T4(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gb&&R1(Gb,r)||(Gb=r,r=pC(bP,"onSelect"),0<r.length&&(e=new _4("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=zg)))}function TA(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wg={animationend:TA("Animation","AnimationEnd"),animationiteration:TA("Animation","AnimationIteration"),animationstart:TA("Animation","AnimationStart"),transitionend:TA("Transition","TransitionEnd")},IN={},w7={};Hu&&(w7=document.createElement("div").style,"AnimationEvent"in window||(delete Wg.animationend.animation,delete Wg.animationiteration.animation,delete Wg.animationstart.animation),"TransitionEvent"in window||delete Wg.transitionend.transition);function f2(t){if(IN[t])return IN[t];if(!Wg[t])return t;var e=Wg[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in w7)return IN[t]=e[n];return t}var b7=f2("animationend"),v7=f2("animationiteration"),E7=f2("animationstart"),A7=f2("transitionend"),x7=new Map,A6="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jh(t,e){x7.set(t,e),vm(e,[t])}for(var NN=0;NN<A6.length;NN++){var TN=A6[NN],Lee=TN.toLowerCase(),Uee=TN[0].toUpperCase()+TN.slice(1);Jh(Lee,"on"+Uee)}Jh(b7,"onAnimationEnd");Jh(v7,"onAnimationIteration");Jh(E7,"onAnimationStart");Jh("dblclick","onDoubleClick");Jh("focusin","onFocus");Jh("focusout","onBlur");Jh(A7,"onTransitionEnd");Ny("onMouseEnter",["mouseout","mouseover"]);Ny("onMouseLeave",["mouseout","mouseover"]);Ny("onPointerEnter",["pointerout","pointerover"]);Ny("onPointerLeave",["pointerout","pointerover"]);vm("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vm("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vm("onBeforeInput",["compositionend","keypress","textInput","paste"]);vm("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vm("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vm("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fee=new Set("cancel close invalid load scroll toggle".split(" ").concat(vb));function x6(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,LX(r,e,void 0,t),t.currentTarget=null}function S7(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;x6(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;x6(s,a,l),i=c}}}if(lC)throw t=mP,lC=!1,mP=null,t}function Hn(t,e){var n=e[CP];n===void 0&&(n=e[CP]=new Set);var r=t+"__bubble";n.has(r)||(C7(e,t,2,!1),n.add(r))}function kN(t,e,n){var r=0;e&&(r|=4),C7(n,t,r,e)}var kA="_reactListening"+Math.random().toString(36).slice(2);function O1(t){if(!t[kA]){t[kA]=!0,R9.forEach(function(n){n!=="selectionchange"&&(Fee.has(n)||kN(n,!1,t),kN(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[kA]||(e[kA]=!0,kN("selectionchange",!1,e))}}function C7(t,e,n,r){switch(c7(e)){case 1:var s=XX;break;case 4:s=eee;break;default:s=S4}n=s.bind(null,e,n,t),s=void 0,!pP||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function PN(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Gf(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}G9(function(){var l=i,u=v4(n),d=[];e:{var h=x7.get(t);if(h!==void 0){var f=_4,p=t;switch(t){case"keypress":if(Wx(n)===0)break e;case"keydown":case"keyup":f=mee;break;case"focusin":p="focus",f=SN;break;case"focusout":p="blur",f=SN;break;case"beforeblur":case"afterblur":f=SN;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=d6;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=ree;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=wee;break;case b7:case v7:case E7:f=oee;break;case A7:f=vee;break;case"scroll":f=tee;break;case"wheel":f=Aee;break;case"copy":case"cut":case"paste":f=cee;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=f6}var m=(e&4)!==0,E=!m&&t==="scroll",b=m?h!==null?h+"Capture":null:h;m=[];for(var x=l,w;x!==null;){w=x;var N=w.stateNode;if(w.tag===5&&N!==null&&(w=N,b!==null&&(N=I1(x,b),N!=null&&m.push(M1(x,N,w)))),E)break;x=x.return}0<m.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==hP&&(p=n.relatedTarget||n.fromElement)&&(Gf(p)||p[Vu]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?Gf(p):null,p!==null&&(E=Em(p),p!==E||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(m=d6,N="onMouseLeave",b="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(m=f6,N="onPointerLeave",b="onPointerEnter",x="pointer"),E=f==null?h:Hg(f),w=p==null?h:Hg(p),h=new m(N,x+"leave",f,n,u),h.target=E,h.relatedTarget=w,N=null,Gf(u)===l&&(m=new m(b,x+"enter",p,n,u),m.target=w,m.relatedTarget=E,N=m),E=N,f&&p)t:{for(m=f,b=p,x=0,w=m;w;w=zm(w))x++;for(w=0,N=b;N;N=zm(N))w++;for(;0<x-w;)m=zm(m),x--;for(;0<w-x;)b=zm(b),w--;for(;x--;){if(m===b||b!==null&&m===b.alternate)break t;m=zm(m),b=zm(b)}m=null}else m=null;f!==null&&S6(d,h,f,m,!1),p!==null&&E!==null&&S6(d,E,p,m,!0)}}e:{if(h=l?Hg(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var _=Tee;else if(g6(h))if(p7)_=Oee;else{_=Pee;var L=kee}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=Ree);if(_&&(_=_(t,l))){f7(d,_,n,u);break e}L&&L(t,h,l),t==="focusout"&&(L=h._wrapperState)&&L.controlled&&h.type==="number"&&aP(h,"number",h.value)}switch(L=l?Hg(l):window,t){case"focusin":(g6(L)||L.contentEditable==="true")&&(zg=L,bP=l,Gb=null);break;case"focusout":Gb=bP=zg=null;break;case"mousedown":vP=!0;break;case"contextmenu":case"mouseup":case"dragend":vP=!1,E6(d,n,u);break;case"selectionchange":if(Bee)break;case"keydown":case"keyup":E6(d,n,u)}var U;if(N4)e:{switch(t){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else $g?d7(t,n)&&(F="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(F="onCompositionStart");F&&(u7&&n.locale!=="ko"&&($g||F!=="onCompositionStart"?F==="onCompositionEnd"&&$g&&(U=l7()):(mh=u,C4="value"in mh?mh.value:mh.textContent,$g=!0)),L=pC(l,F),0<L.length&&(F=new h6(F,t,null,n,u),d.push({event:F,listeners:L}),U?F.data=U:(U=h7(n),U!==null&&(F.data=U)))),(U=See?Cee(t,n):_ee(t,n))&&(l=pC(l,"onBeforeInput"),0<l.length&&(u=new h6("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=U))}S7(d,e)})}function M1(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pC(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=I1(t,n),i!=null&&r.unshift(M1(t,i,s)),i=I1(t,e),i!=null&&r.push(M1(t,i,s))),t=t.return}return r}function zm(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function S6(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=I1(n,i),c!=null&&o.unshift(M1(n,c,a))):s||(c=I1(n,i),c!=null&&o.push(M1(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var jee=/\r\n?/g,$ee=/\u0000|\uFFFD/g;function C6(t){return(typeof t=="string"?t:""+t).replace(jee,`
`).replace($ee,"")}function PA(t,e,n){if(e=C6(e),C6(t)!==e&&n)throw Error(be(425))}function mC(){}var EP=null,AP=null;function xP(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var SP=typeof setTimeout=="function"?setTimeout:void 0,zee=typeof clearTimeout=="function"?clearTimeout:void 0,_6=typeof Promise=="function"?Promise:void 0,Wee=typeof queueMicrotask=="function"?queueMicrotask:typeof _6<"u"?function(t){return _6.resolve(null).then(t).catch(Hee)}:SP;function Hee(t){setTimeout(function(){throw t})}function RN(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),k1(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);k1(e)}function _h(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function I6(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var mw=Math.random().toString(36).slice(2),sl="__reactFiber$"+mw,D1="__reactProps$"+mw,Vu="__reactContainer$"+mw,CP="__reactEvents$"+mw,Vee="__reactListeners$"+mw,Kee="__reactHandles$"+mw;function Gf(t){var e=t[sl];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vu]||n[sl]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=I6(t);t!==null;){if(n=t[sl])return n;t=I6(t)}return e}t=n,n=t.parentNode}return null}function ME(t){return t=t[sl]||t[Vu],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hg(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(be(33))}function p2(t){return t[D1]||null}var _P=[],Vg=-1;function Xh(t){return{current:t}}function Kn(t){0>Vg||(t.current=_P[Vg],_P[Vg]=null,Vg--)}function jn(t,e){Vg++,_P[Vg]=t.current,t.current=e}var jh={},Ai=Xh(jh),wo=Xh(!1),Qp=jh;function Ty(t,e){var n=t.type.contextTypes;if(!n)return jh;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function bo(t){return t=t.childContextTypes,t!=null}function gC(){Kn(wo),Kn(Ai)}function N6(t,e,n){if(Ai.current!==jh)throw Error(be(168));jn(Ai,e),jn(wo,n)}function _7(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(be(108,kX(t)||"Unknown",s));return or({},n,r)}function yC(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||jh,Qp=Ai.current,jn(Ai,t),jn(wo,wo.current),!0}function T6(t,e,n){var r=t.stateNode;if(!r)throw Error(be(169));n?(t=_7(t,e,Qp),r.__reactInternalMemoizedMergedChildContext=t,Kn(wo),Kn(Ai),jn(Ai,t)):Kn(wo),jn(wo,n)}var iu=null,m2=!1,ON=!1;function I7(t){iu===null?iu=[t]:iu.push(t)}function qee(t){m2=!0,I7(t)}function ef(){if(!ON&&iu!==null){ON=!0;var t=0,e=En;try{var n=iu;for(En=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}iu=null,m2=!1}catch(s){throw iu!==null&&(iu=iu.slice(t+1)),J9(E4,ef),s}finally{En=e,ON=!1}}return null}var Kg=[],qg=0,wC=null,bC=0,ka=[],Pa=0,Jp=null,_u=1,Iu="";function wf(t,e){Kg[qg++]=bC,Kg[qg++]=wC,wC=t,bC=e}function N7(t,e,n){ka[Pa++]=_u,ka[Pa++]=Iu,ka[Pa++]=Jp,Jp=t;var r=_u;t=Iu;var s=32-bc(r)-1;r&=~(1<<s),n+=1;var i=32-bc(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,_u=1<<32-bc(e)+s|n<<s|r,Iu=i+t}else _u=1<<i|n<<s|r,Iu=t}function k4(t){t.return!==null&&(wf(t,1),N7(t,1,0))}function P4(t){for(;t===wC;)wC=Kg[--qg],Kg[qg]=null,bC=Kg[--qg],Kg[qg]=null;for(;t===Jp;)Jp=ka[--Pa],ka[Pa]=null,Iu=ka[--Pa],ka[Pa]=null,_u=ka[--Pa],ka[Pa]=null}var Yo=null,qo=null,Jn=!1,dc=null;function T7(t,e){var n=Ra(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function k6(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Yo=t,qo=_h(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Yo=t,qo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Jp!==null?{id:_u,overflow:Iu}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ra(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Yo=t,qo=null,!0):!1;default:return!1}}function IP(t){return(t.mode&1)!==0&&(t.flags&128)===0}function NP(t){if(Jn){var e=qo;if(e){var n=e;if(!k6(t,e)){if(IP(t))throw Error(be(418));e=_h(n.nextSibling);var r=Yo;e&&k6(t,e)?T7(r,n):(t.flags=t.flags&-4097|2,Jn=!1,Yo=t)}}else{if(IP(t))throw Error(be(418));t.flags=t.flags&-4097|2,Jn=!1,Yo=t}}}function P6(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Yo=t}function RA(t){if(t!==Yo)return!1;if(!Jn)return P6(t),Jn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xP(t.type,t.memoizedProps)),e&&(e=qo)){if(IP(t))throw k7(),Error(be(418));for(;e;)T7(t,e),e=_h(e.nextSibling)}if(P6(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(be(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){qo=_h(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}qo=null}}else qo=Yo?_h(t.stateNode.nextSibling):null;return!0}function k7(){for(var t=qo;t;)t=_h(t.nextSibling)}function ky(){qo=Yo=null,Jn=!1}function R4(t){dc===null?dc=[t]:dc.push(t)}var Gee=nd.ReactCurrentBatchConfig;function $w(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(be(309));var r=n.stateNode}if(!r)throw Error(be(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(be(284));if(!n._owner)throw Error(be(290,t))}return t}function OA(t,e){throw t=Object.prototype.toString.call(e),Error(be(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function R6(t){var e=t._init;return e(t._payload)}function P7(t){function e(b,x){if(t){var w=b.deletions;w===null?(b.deletions=[x],b.flags|=16):w.push(x)}}function n(b,x){if(!t)return null;for(;x!==null;)e(b,x),x=x.sibling;return null}function r(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function s(b,x){return b=kh(b,x),b.index=0,b.sibling=null,b}function i(b,x,w){return b.index=w,t?(w=b.alternate,w!==null?(w=w.index,w<x?(b.flags|=2,x):w):(b.flags|=2,x)):(b.flags|=1048576,x)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,x,w,N){return x===null||x.tag!==6?(x=jN(w,b.mode,N),x.return=b,x):(x=s(x,w),x.return=b,x)}function c(b,x,w,N){var _=w.type;return _===jg?u(b,x,w.props.children,N,w.key):x!==null&&(x.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Md&&R6(_)===x.type)?(N=s(x,w.props),N.ref=$w(b,x,w),N.return=b,N):(N=Zx(w.type,w.key,w.props,null,b.mode,N),N.ref=$w(b,x,w),N.return=b,N)}function l(b,x,w,N){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=$N(w,b.mode,N),x.return=b,x):(x=s(x,w.children||[]),x.return=b,x)}function u(b,x,w,N,_){return x===null||x.tag!==7?(x=Wp(w,b.mode,N,_),x.return=b,x):(x=s(x,w),x.return=b,x)}function d(b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=jN(""+x,b.mode,w),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case AA:return w=Zx(x.type,x.key,x.props,null,b.mode,w),w.ref=$w(b,null,x),w.return=b,w;case Fg:return x=$N(x,b.mode,w),x.return=b,x;case Md:var N=x._init;return d(b,N(x._payload),w)}if(wb(x)||Bw(x))return x=Wp(x,b.mode,w,null),x.return=b,x;OA(b,x)}return null}function h(b,x,w,N){var _=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:a(b,x,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case AA:return w.key===_?c(b,x,w,N):null;case Fg:return w.key===_?l(b,x,w,N):null;case Md:return _=w._init,h(b,x,_(w._payload),N)}if(wb(w)||Bw(w))return _!==null?null:u(b,x,w,N,null);OA(b,w)}return null}function f(b,x,w,N,_){if(typeof N=="string"&&N!==""||typeof N=="number")return b=b.get(w)||null,a(x,b,""+N,_);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case AA:return b=b.get(N.key===null?w:N.key)||null,c(x,b,N,_);case Fg:return b=b.get(N.key===null?w:N.key)||null,l(x,b,N,_);case Md:var L=N._init;return f(b,x,w,L(N._payload),_)}if(wb(N)||Bw(N))return b=b.get(w)||null,u(x,b,N,_,null);OA(x,N)}return null}function p(b,x,w,N){for(var _=null,L=null,U=x,F=x=0,M=null;U!==null&&F<w.length;F++){U.index>F?(M=U,U=null):M=U.sibling;var W=h(b,U,w[F],N);if(W===null){U===null&&(U=M);break}t&&U&&W.alternate===null&&e(b,U),x=i(W,x,F),L===null?_=W:L.sibling=W,L=W,U=M}if(F===w.length)return n(b,U),Jn&&wf(b,F),_;if(U===null){for(;F<w.length;F++)U=d(b,w[F],N),U!==null&&(x=i(U,x,F),L===null?_=U:L.sibling=U,L=U);return Jn&&wf(b,F),_}for(U=r(b,U);F<w.length;F++)M=f(U,b,F,w[F],N),M!==null&&(t&&M.alternate!==null&&U.delete(M.key===null?F:M.key),x=i(M,x,F),L===null?_=M:L.sibling=M,L=M);return t&&U.forEach(function(H){return e(b,H)}),Jn&&wf(b,F),_}function m(b,x,w,N){var _=Bw(w);if(typeof _!="function")throw Error(be(150));if(w=_.call(w),w==null)throw Error(be(151));for(var L=_=null,U=x,F=x=0,M=null,W=w.next();U!==null&&!W.done;F++,W=w.next()){U.index>F?(M=U,U=null):M=U.sibling;var H=h(b,U,W.value,N);if(H===null){U===null&&(U=M);break}t&&U&&H.alternate===null&&e(b,U),x=i(H,x,F),L===null?_=H:L.sibling=H,L=H,U=M}if(W.done)return n(b,U),Jn&&wf(b,F),_;if(U===null){for(;!W.done;F++,W=w.next())W=d(b,W.value,N),W!==null&&(x=i(W,x,F),L===null?_=W:L.sibling=W,L=W);return Jn&&wf(b,F),_}for(U=r(b,U);!W.done;F++,W=w.next())W=f(U,b,F,W.value,N),W!==null&&(t&&W.alternate!==null&&U.delete(W.key===null?F:W.key),x=i(W,x,F),L===null?_=W:L.sibling=W,L=W);return t&&U.forEach(function(K){return e(b,K)}),Jn&&wf(b,F),_}function E(b,x,w,N){if(typeof w=="object"&&w!==null&&w.type===jg&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case AA:e:{for(var _=w.key,L=x;L!==null;){if(L.key===_){if(_=w.type,_===jg){if(L.tag===7){n(b,L.sibling),x=s(L,w.props.children),x.return=b,b=x;break e}}else if(L.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Md&&R6(_)===L.type){n(b,L.sibling),x=s(L,w.props),x.ref=$w(b,L,w),x.return=b,b=x;break e}n(b,L);break}else e(b,L);L=L.sibling}w.type===jg?(x=Wp(w.props.children,b.mode,N,w.key),x.return=b,b=x):(N=Zx(w.type,w.key,w.props,null,b.mode,N),N.ref=$w(b,x,w),N.return=b,b=N)}return o(b);case Fg:e:{for(L=w.key;x!==null;){if(x.key===L)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(b,x.sibling),x=s(x,w.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else e(b,x);x=x.sibling}x=$N(w,b.mode,N),x.return=b,b=x}return o(b);case Md:return L=w._init,E(b,x,L(w._payload),N)}if(wb(w))return p(b,x,w,N);if(Bw(w))return m(b,x,w,N);OA(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(b,x.sibling),x=s(x,w),x.return=b,b=x):(n(b,x),x=jN(w,b.mode,N),x.return=b,b=x),o(b)):n(b,x)}return E}var Py=P7(!0),R7=P7(!1),vC=Xh(null),EC=null,Gg=null,O4=null;function M4(){O4=Gg=EC=null}function D4(t){var e=vC.current;Kn(vC),t._currentValue=e}function TP(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function b0(t,e){EC=t,O4=Gg=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mo=!0),t.firstContext=null)}function Ba(t){var e=t._currentValue;if(O4!==t)if(t={context:t,memoizedValue:e,next:null},Gg===null){if(EC===null)throw Error(be(308));Gg=t,EC.dependencies={lanes:0,firstContext:t}}else Gg=Gg.next=t;return e}var Yf=null;function B4(t){Yf===null?Yf=[t]:Yf.push(t)}function O7(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,B4(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ku(t,r)}function Ku(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Dd=!1;function L4(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function M7(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Du(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ih(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,qt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ku(t,n)}return s=r.interleaved,s===null?(e.next=e,B4(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ku(t,n)}function Hx(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,A4(t,n)}}function O6(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function AC(t,e,n,r){var s=t.updateQueue;Dd=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(h=e,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=or({},d,h);break e;case 2:Dd=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(1);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);em|=o,t.lanes=o,t.memoizedState=d}}function M6(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(be(191,s));s.call(r)}}}var DE={},El=Xh(DE),B1=Xh(DE),L1=Xh(DE);function Zf(t){if(t===DE)throw Error(be(174));return t}function U4(t,e){switch(jn(L1,e),jn(B1,t),jn(El,DE),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lP(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=lP(e,t)}Kn(El),jn(El,e)}function Ry(){Kn(El),Kn(B1),Kn(L1)}function D7(t){Zf(L1.current);var e=Zf(El.current),n=lP(e,t.type);e!==n&&(jn(B1,t),jn(El,n))}function F4(t){B1.current===t&&(Kn(El),Kn(B1))}var tr=Xh(0);function xC(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var MN=[];function j4(){for(var t=0;t<MN.length;t++)MN[t]._workInProgressVersionPrimary=null;MN.length=0}var Vx=nd.ReactCurrentDispatcher,DN=nd.ReactCurrentBatchConfig,Xp=0,ir=null,ss=null,gs=null,SC=!1,Yb=!1,U1=0,Yee=0;function Zs(){throw Error(be(321))}function $4(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!_c(t[n],e[n]))return!1;return!0}function z4(t,e,n,r,s,i){if(Xp=i,ir=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vx.current=t===null||t.memoizedState===null?Xee:ete,t=n(r,s),Yb){i=0;do{if(Yb=!1,U1=0,25<=i)throw Error(be(301));i+=1,gs=ss=null,e.updateQueue=null,Vx.current=tte,t=n(r,s)}while(Yb)}if(Vx.current=CC,e=ss!==null&&ss.next!==null,Xp=0,gs=ss=ir=null,SC=!1,e)throw Error(be(300));return t}function W4(){var t=U1!==0;return U1=0,t}function zc(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gs===null?ir.memoizedState=gs=t:gs=gs.next=t,gs}function La(){if(ss===null){var t=ir.alternate;t=t!==null?t.memoizedState:null}else t=ss.next;var e=gs===null?ir.memoizedState:gs.next;if(e!==null)gs=e,ss=t;else{if(t===null)throw Error(be(310));ss=t,t={memoizedState:ss.memoizedState,baseState:ss.baseState,baseQueue:ss.baseQueue,queue:ss.queue,next:null},gs===null?ir.memoizedState=gs=t:gs=gs.next=t}return gs}function F1(t,e){return typeof e=="function"?e(t):e}function BN(t){var e=La(),n=e.queue;if(n===null)throw Error(be(311));n.lastRenderedReducer=t;var r=ss,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((Xp&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,ir.lanes|=u,em|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,_c(r,e.memoizedState)||(mo=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ir.lanes|=i,em|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function LN(t){var e=La(),n=e.queue;if(n===null)throw Error(be(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);_c(i,e.memoizedState)||(mo=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function B7(){}function L7(t,e){var n=ir,r=La(),s=e(),i=!_c(r.memoizedState,s);if(i&&(r.memoizedState=s,mo=!0),r=r.queue,H4(j7.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||gs!==null&&gs.memoizedState.tag&1){if(n.flags|=2048,j1(9,F7.bind(null,n,r,s,e),void 0,null),As===null)throw Error(be(349));Xp&30||U7(n,e,s)}return s}function U7(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ir.updateQueue,e===null?(e={lastEffect:null,stores:null},ir.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function F7(t,e,n,r){e.value=n,e.getSnapshot=r,$7(e)&&z7(t)}function j7(t,e,n){return n(function(){$7(e)&&z7(t)})}function $7(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!_c(t,n)}catch{return!0}}function z7(t){var e=Ku(t,1);e!==null&&vc(e,t,1,-1)}function D6(t){var e=zc();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:F1,lastRenderedState:t},e.queue=t,t=t.dispatch=Jee.bind(null,ir,t),[e.memoizedState,t]}function j1(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ir.updateQueue,e===null?(e={lastEffect:null,stores:null},ir.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function W7(){return La().memoizedState}function Kx(t,e,n,r){var s=zc();ir.flags|=t,s.memoizedState=j1(1|e,n,void 0,r===void 0?null:r)}function g2(t,e,n,r){var s=La();r=r===void 0?null:r;var i=void 0;if(ss!==null){var o=ss.memoizedState;if(i=o.destroy,r!==null&&$4(r,o.deps)){s.memoizedState=j1(e,n,i,r);return}}ir.flags|=t,s.memoizedState=j1(1|e,n,i,r)}function B6(t,e){return Kx(8390656,8,t,e)}function H4(t,e){return g2(2048,8,t,e)}function H7(t,e){return g2(4,2,t,e)}function V7(t,e){return g2(4,4,t,e)}function K7(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function q7(t,e,n){return n=n!=null?n.concat([t]):null,g2(4,4,K7.bind(null,e,t),n)}function V4(){}function G7(t,e){var n=La();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$4(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Y7(t,e){var n=La();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$4(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Z7(t,e,n){return Xp&21?(_c(n,e)||(n=t7(),ir.lanes|=n,em|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mo=!0),t.memoizedState=n)}function Zee(t,e){var n=En;En=n!==0&&4>n?n:4,t(!0);var r=DN.transition;DN.transition={};try{t(!1),e()}finally{En=n,DN.transition=r}}function Q7(){return La().memoizedState}function Qee(t,e,n){var r=Th(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},J7(t))X7(e,n);else if(n=O7(t,e,n,r),n!==null){var s=ji();vc(n,t,r,s),ez(n,e,r)}}function Jee(t,e,n){var r=Th(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(J7(t))X7(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,_c(a,o)){var c=e.interleaved;c===null?(s.next=s,B4(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=O7(t,e,s,r),n!==null&&(s=ji(),vc(n,t,r,s),ez(n,e,r))}}function J7(t){var e=t.alternate;return t===ir||e!==null&&e===ir}function X7(t,e){Yb=SC=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ez(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,A4(t,n)}}var CC={readContext:Ba,useCallback:Zs,useContext:Zs,useEffect:Zs,useImperativeHandle:Zs,useInsertionEffect:Zs,useLayoutEffect:Zs,useMemo:Zs,useReducer:Zs,useRef:Zs,useState:Zs,useDebugValue:Zs,useDeferredValue:Zs,useTransition:Zs,useMutableSource:Zs,useSyncExternalStore:Zs,useId:Zs,unstable_isNewReconciler:!1},Xee={readContext:Ba,useCallback:function(t,e){return zc().memoizedState=[t,e===void 0?null:e],t},useContext:Ba,useEffect:B6,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Kx(4194308,4,K7.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Kx(4194308,4,t,e)},useInsertionEffect:function(t,e){return Kx(4,2,t,e)},useMemo:function(t,e){var n=zc();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=zc();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Qee.bind(null,ir,t),[r.memoizedState,t]},useRef:function(t){var e=zc();return t={current:t},e.memoizedState=t},useState:D6,useDebugValue:V4,useDeferredValue:function(t){return zc().memoizedState=t},useTransition:function(){var t=D6(!1),e=t[0];return t=Zee.bind(null,t[1]),zc().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ir,s=zc();if(Jn){if(n===void 0)throw Error(be(407));n=n()}else{if(n=e(),As===null)throw Error(be(349));Xp&30||U7(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,B6(j7.bind(null,r,i,t),[t]),r.flags|=2048,j1(9,F7.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=zc(),e=As.identifierPrefix;if(Jn){var n=Iu,r=_u;n=(r&~(1<<32-bc(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=U1++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Yee++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ete={readContext:Ba,useCallback:G7,useContext:Ba,useEffect:H4,useImperativeHandle:q7,useInsertionEffect:H7,useLayoutEffect:V7,useMemo:Y7,useReducer:BN,useRef:W7,useState:function(){return BN(F1)},useDebugValue:V4,useDeferredValue:function(t){var e=La();return Z7(e,ss.memoizedState,t)},useTransition:function(){var t=BN(F1)[0],e=La().memoizedState;return[t,e]},useMutableSource:B7,useSyncExternalStore:L7,useId:Q7,unstable_isNewReconciler:!1},tte={readContext:Ba,useCallback:G7,useContext:Ba,useEffect:H4,useImperativeHandle:q7,useInsertionEffect:H7,useLayoutEffect:V7,useMemo:Y7,useReducer:LN,useRef:W7,useState:function(){return LN(F1)},useDebugValue:V4,useDeferredValue:function(t){var e=La();return ss===null?e.memoizedState=t:Z7(e,ss.memoizedState,t)},useTransition:function(){var t=LN(F1)[0],e=La().memoizedState;return[t,e]},useMutableSource:B7,useSyncExternalStore:L7,useId:Q7,unstable_isNewReconciler:!1};function Xa(t,e){if(t&&t.defaultProps){e=or({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function kP(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:or({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var y2={isMounted:function(t){return(t=t._reactInternals)?Em(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ji(),s=Th(t),i=Du(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ih(t,i,s),e!==null&&(vc(e,t,s,r),Hx(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ji(),s=Th(t),i=Du(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ih(t,i,s),e!==null&&(vc(e,t,s,r),Hx(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ji(),r=Th(t),s=Du(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ih(t,s,r),e!==null&&(vc(e,t,r,n),Hx(e,t,r))}};function L6(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!R1(n,r)||!R1(s,i):!0}function tz(t,e,n){var r=!1,s=jh,i=e.contextType;return typeof i=="object"&&i!==null?i=Ba(i):(s=bo(e)?Qp:Ai.current,r=e.contextTypes,i=(r=r!=null)?Ty(t,s):jh),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=y2,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function U6(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&y2.enqueueReplaceState(e,e.state,null)}function PP(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},L4(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ba(i):(i=bo(e)?Qp:Ai.current,s.context=Ty(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(kP(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&y2.enqueueReplaceState(s,s.state,null),AC(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Oy(t,e){try{var n="",r=e;do n+=TX(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function UN(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function RP(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var nte=typeof WeakMap=="function"?WeakMap:Map;function nz(t,e,n){n=Du(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){IC||(IC=!0,zP=r),RP(t,e)},n}function rz(t,e,n){n=Du(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){RP(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){RP(t,e),typeof r!="function"&&(Nh===null?Nh=new Set([this]):Nh.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function F6(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new nte;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=gte.bind(null,t,e,n),e.then(t,t))}function j6(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $6(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Du(-1,1),e.tag=2,Ih(n,e,1))),n.lanes|=1),t)}var rte=nd.ReactCurrentOwner,mo=!1;function Oi(t,e,n,r){e.child=t===null?R7(e,null,n,r):Py(e,t.child,n,r)}function z6(t,e,n,r,s){n=n.render;var i=e.ref;return b0(e,s),r=z4(t,e,n,r,i,s),n=W4(),t!==null&&!mo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qu(t,e,s)):(Jn&&n&&k4(e),e.flags|=1,Oi(t,e,r,s),e.child)}function W6(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!X4(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,sz(t,e,i,r,s)):(t=Zx(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:R1,n(o,r)&&t.ref===e.ref)return qu(t,e,s)}return e.flags|=1,t=kh(i,r),t.ref=e.ref,t.return=e,e.child=t}function sz(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(R1(i,r)&&t.ref===e.ref)if(mo=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(mo=!0);else return e.lanes=t.lanes,qu(t,e,s)}return OP(t,e,n,r,s)}function iz(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},jn(Zg,Fo),Fo|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,jn(Zg,Fo),Fo|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,jn(Zg,Fo),Fo|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,jn(Zg,Fo),Fo|=r;return Oi(t,e,s,n),e.child}function oz(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function OP(t,e,n,r,s){var i=bo(n)?Qp:Ai.current;return i=Ty(e,i),b0(e,s),n=z4(t,e,n,r,i,s),r=W4(),t!==null&&!mo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qu(t,e,s)):(Jn&&r&&k4(e),e.flags|=1,Oi(t,e,n,s),e.child)}function H6(t,e,n,r,s){if(bo(n)){var i=!0;yC(e)}else i=!1;if(b0(e,s),e.stateNode===null)qx(t,e),tz(e,n,r),PP(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Ba(l):(l=bo(n)?Qp:Ai.current,l=Ty(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&U6(e,o,r,l),Dd=!1;var h=e.memoizedState;o.state=h,AC(e,r,o,s),c=e.memoizedState,a!==r||h!==c||wo.current||Dd?(typeof u=="function"&&(kP(e,n,u,r),c=e.memoizedState),(a=Dd||L6(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,M7(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Xa(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ba(c):(c=bo(n)?Qp:Ai.current,c=Ty(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&U6(e,o,r,c),Dd=!1,h=e.memoizedState,o.state=h,AC(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||wo.current||Dd?(typeof f=="function"&&(kP(e,n,f,r),p=e.memoizedState),(l=Dd||L6(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return MP(t,e,n,r,i,s)}function MP(t,e,n,r,s,i){oz(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&T6(e,n,!1),qu(t,e,i);r=e.stateNode,rte.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Py(e,t.child,null,i),e.child=Py(e,null,a,i)):Oi(t,e,a,i),e.memoizedState=r.state,s&&T6(e,n,!0),e.child}function az(t){var e=t.stateNode;e.pendingContext?N6(t,e.pendingContext,e.pendingContext!==e.context):e.context&&N6(t,e.context,!1),U4(t,e.containerInfo)}function V6(t,e,n,r,s){return ky(),R4(s),e.flags|=256,Oi(t,e,n,r),e.child}var DP={dehydrated:null,treeContext:null,retryLane:0};function BP(t){return{baseLanes:t,cachePool:null,transitions:null}}function cz(t,e,n){var r=e.pendingProps,s=tr.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),jn(tr,s&1),t===null)return NP(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=v2(o,r,0,null),t=Wp(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=BP(n),e.memoizedState=DP,t):K4(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return ste(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=kh(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=kh(a,i):(i=Wp(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?BP(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=DP,r}return i=t.child,t=i.sibling,r=kh(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function K4(t,e){return e=v2({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function MA(t,e,n,r){return r!==null&&R4(r),Py(e,t.child,null,n),t=K4(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ste(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=UN(Error(be(422))),MA(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=v2({mode:"visible",children:r.children},s,0,null),i=Wp(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Py(e,t.child,null,o),e.child.memoizedState=BP(o),e.memoizedState=DP,i);if(!(e.mode&1))return MA(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(be(419)),r=UN(i,r,void 0),MA(t,e,o,r)}if(a=(o&t.childLanes)!==0,mo||a){if(r=As,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ku(t,s),vc(r,t,s,-1))}return J4(),r=UN(Error(be(421))),MA(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=yte.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,qo=_h(s.nextSibling),Yo=e,Jn=!0,dc=null,t!==null&&(ka[Pa++]=_u,ka[Pa++]=Iu,ka[Pa++]=Jp,_u=t.id,Iu=t.overflow,Jp=e),e=K4(e,r.children),e.flags|=4096,e)}function K6(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),TP(t.return,e,n)}function FN(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function lz(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Oi(t,e,r.children,n),r=tr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&K6(t,n,e);else if(t.tag===19)K6(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(jn(tr,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&xC(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),FN(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&xC(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}FN(e,!0,n,null,i);break;case"together":FN(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qx(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qu(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),em|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(be(153));if(e.child!==null){for(t=e.child,n=kh(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=kh(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ite(t,e,n){switch(e.tag){case 3:az(e),ky();break;case 5:D7(e);break;case 1:bo(e.type)&&yC(e);break;case 4:U4(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;jn(vC,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(jn(tr,tr.current&1),e.flags|=128,null):n&e.child.childLanes?cz(t,e,n):(jn(tr,tr.current&1),t=qu(t,e,n),t!==null?t.sibling:null);jn(tr,tr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return lz(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),jn(tr,tr.current),r)break;return null;case 22:case 23:return e.lanes=0,iz(t,e,n)}return qu(t,e,n)}var uz,LP,dz,hz;uz=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};LP=function(){};dz=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Zf(El.current);var i=null;switch(n){case"input":s=iP(t,s),r=iP(t,r),i=[];break;case"select":s=or({},s,{value:void 0}),r=or({},r,{value:void 0}),i=[];break;case"textarea":s=cP(t,s),r=cP(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=mC)}uP(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(C1.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(C1.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Hn("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};hz=function(t,e,n,r){n!==r&&(e.flags|=4)};function zw(t,e){if(!Jn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Qs(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ote(t,e,n){var r=e.pendingProps;switch(P4(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qs(e),null;case 1:return bo(e.type)&&gC(),Qs(e),null;case 3:return r=e.stateNode,Ry(),Kn(wo),Kn(Ai),j4(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(RA(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,dc!==null&&(VP(dc),dc=null))),LP(t,e),Qs(e),null;case 5:F4(e);var s=Zf(L1.current);if(n=e.type,t!==null&&e.stateNode!=null)dz(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(be(166));return Qs(e),null}if(t=Zf(El.current),RA(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[sl]=e,r[D1]=i,t=(e.mode&1)!==0,n){case"dialog":Hn("cancel",r),Hn("close",r);break;case"iframe":case"object":case"embed":Hn("load",r);break;case"video":case"audio":for(s=0;s<vb.length;s++)Hn(vb[s],r);break;case"source":Hn("error",r);break;case"img":case"image":case"link":Hn("error",r),Hn("load",r);break;case"details":Hn("toggle",r);break;case"input":t6(r,i),Hn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Hn("invalid",r);break;case"textarea":r6(r,i),Hn("invalid",r)}uP(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&PA(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&PA(r.textContent,a,t),s=["children",""+a]):C1.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Hn("scroll",r)}switch(n){case"input":xA(r),n6(r,i,!0);break;case"textarea":xA(r),s6(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=mC)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=j9(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[sl]=e,t[D1]=r,uz(t,e,!1,!1),e.stateNode=t;e:{switch(o=dP(n,r),n){case"dialog":Hn("cancel",t),Hn("close",t),s=r;break;case"iframe":case"object":case"embed":Hn("load",t),s=r;break;case"video":case"audio":for(s=0;s<vb.length;s++)Hn(vb[s],t);s=r;break;case"source":Hn("error",t),s=r;break;case"img":case"image":case"link":Hn("error",t),Hn("load",t),s=r;break;case"details":Hn("toggle",t),s=r;break;case"input":t6(t,r),s=iP(t,r),Hn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=or({},r,{value:void 0}),Hn("invalid",t);break;case"textarea":r6(t,r),s=cP(t,r),Hn("invalid",t);break;default:s=r}uP(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?W9(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&$9(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&_1(t,c):typeof c=="number"&&_1(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(C1.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Hn("scroll",t):c!=null&&g4(t,i,c,o))}switch(n){case"input":xA(t),n6(t,r,!1);break;case"textarea":xA(t),s6(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fh(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?m0(t,!!r.multiple,i,!1):r.defaultValue!=null&&m0(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=mC)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qs(e),null;case 6:if(t&&e.stateNode!=null)hz(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(be(166));if(n=Zf(L1.current),Zf(El.current),RA(e)){if(r=e.stateNode,n=e.memoizedProps,r[sl]=e,(i=r.nodeValue!==n)&&(t=Yo,t!==null))switch(t.tag){case 3:PA(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&PA(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[sl]=e,e.stateNode=r}return Qs(e),null;case 13:if(Kn(tr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Jn&&qo!==null&&e.mode&1&&!(e.flags&128))k7(),ky(),e.flags|=98560,i=!1;else if(i=RA(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(be(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(be(317));i[sl]=e}else ky(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qs(e),i=!1}else dc!==null&&(VP(dc),dc=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||tr.current&1?as===0&&(as=3):J4())),e.updateQueue!==null&&(e.flags|=4),Qs(e),null);case 4:return Ry(),LP(t,e),t===null&&O1(e.stateNode.containerInfo),Qs(e),null;case 10:return D4(e.type._context),Qs(e),null;case 17:return bo(e.type)&&gC(),Qs(e),null;case 19:if(Kn(tr),i=e.memoizedState,i===null)return Qs(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)zw(i,!1);else{if(as!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=xC(t),o!==null){for(e.flags|=128,zw(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return jn(tr,tr.current&1|2),e.child}t=t.sibling}i.tail!==null&&Er()>My&&(e.flags|=128,r=!0,zw(i,!1),e.lanes=4194304)}else{if(!r)if(t=xC(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),zw(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Jn)return Qs(e),null}else 2*Er()-i.renderingStartTime>My&&n!==1073741824&&(e.flags|=128,r=!0,zw(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Er(),e.sibling=null,n=tr.current,jn(tr,r?n&1|2:n&1),e):(Qs(e),null);case 22:case 23:return Q4(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Fo&1073741824&&(Qs(e),e.subtreeFlags&6&&(e.flags|=8192)):Qs(e),null;case 24:return null;case 25:return null}throw Error(be(156,e.tag))}function ate(t,e){switch(P4(e),e.tag){case 1:return bo(e.type)&&gC(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ry(),Kn(wo),Kn(Ai),j4(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return F4(e),null;case 13:if(Kn(tr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(be(340));ky()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Kn(tr),null;case 4:return Ry(),null;case 10:return D4(e.type._context),null;case 22:case 23:return Q4(),null;case 24:return null;default:return null}}var DA=!1,vi=!1,cte=typeof WeakSet=="function"?WeakSet:Set,We=null;function Yg(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pr(t,e,r)}else n.current=null}function UP(t,e,n){try{n()}catch(r){pr(t,e,r)}}var q6=!1;function lte(t,e){if(EP=hC,t=y7(),T4(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(AP={focusedElem:t,selectionRange:n},hC=!1,We=e;We!==null;)if(e=We,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,We=t;else for(;We!==null;){e=We;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,E=p.memoizedState,b=e.stateNode,x=b.getSnapshotBeforeUpdate(e.elementType===e.type?m:Xa(e.type,m),E);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(be(163))}}catch(N){pr(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,We=t;break}We=e.return}return p=q6,q6=!1,p}function Zb(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&UP(e,n,i)}s=s.next}while(s!==r)}}function w2(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function FP(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function fz(t){var e=t.alternate;e!==null&&(t.alternate=null,fz(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[sl],delete e[D1],delete e[CP],delete e[Vee],delete e[Kee])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function pz(t){return t.tag===5||t.tag===3||t.tag===4}function G6(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||pz(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jP(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=mC));else if(r!==4&&(t=t.child,t!==null))for(jP(t,e,n),t=t.sibling;t!==null;)jP(t,e,n),t=t.sibling}function $P(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for($P(t,e,n),t=t.sibling;t!==null;)$P(t,e,n),t=t.sibling}var Ms=null,uc=!1;function id(t,e,n){for(n=n.child;n!==null;)mz(t,e,n),n=n.sibling}function mz(t,e,n){if(vl&&typeof vl.onCommitFiberUnmount=="function")try{vl.onCommitFiberUnmount(u2,n)}catch{}switch(n.tag){case 5:vi||Yg(n,e);case 6:var r=Ms,s=uc;Ms=null,id(t,e,n),Ms=r,uc=s,Ms!==null&&(uc?(t=Ms,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ms.removeChild(n.stateNode));break;case 18:Ms!==null&&(uc?(t=Ms,n=n.stateNode,t.nodeType===8?RN(t.parentNode,n):t.nodeType===1&&RN(t,n),k1(t)):RN(Ms,n.stateNode));break;case 4:r=Ms,s=uc,Ms=n.stateNode.containerInfo,uc=!0,id(t,e,n),Ms=r,uc=s;break;case 0:case 11:case 14:case 15:if(!vi&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&UP(n,e,o),s=s.next}while(s!==r)}id(t,e,n);break;case 1:if(!vi&&(Yg(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){pr(n,e,a)}id(t,e,n);break;case 21:id(t,e,n);break;case 22:n.mode&1?(vi=(r=vi)||n.memoizedState!==null,id(t,e,n),vi=r):id(t,e,n);break;default:id(t,e,n)}}function Y6(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new cte),e.forEach(function(r){var s=wte.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Wa(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ms=a.stateNode,uc=!1;break e;case 3:Ms=a.stateNode.containerInfo,uc=!0;break e;case 4:Ms=a.stateNode.containerInfo,uc=!0;break e}a=a.return}if(Ms===null)throw Error(be(160));mz(i,o,s),Ms=null,uc=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){pr(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)gz(e,t),e=e.sibling}function gz(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wa(e,t),Oc(t),r&4){try{Zb(3,t,t.return),w2(3,t)}catch(m){pr(t,t.return,m)}try{Zb(5,t,t.return)}catch(m){pr(t,t.return,m)}}break;case 1:Wa(e,t),Oc(t),r&512&&n!==null&&Yg(n,n.return);break;case 5:if(Wa(e,t),Oc(t),r&512&&n!==null&&Yg(n,n.return),t.flags&32){var s=t.stateNode;try{_1(s,"")}catch(m){pr(t,t.return,m)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&U9(s,i),dP(a,o);var l=dP(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?W9(s,d):u==="dangerouslySetInnerHTML"?$9(s,d):u==="children"?_1(s,d):g4(s,u,d,l)}switch(a){case"input":oP(s,i);break;case"textarea":F9(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?m0(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?m0(s,!!i.multiple,i.defaultValue,!0):m0(s,!!i.multiple,i.multiple?[]:"",!1))}s[D1]=i}catch(m){pr(t,t.return,m)}}break;case 6:if(Wa(e,t),Oc(t),r&4){if(t.stateNode===null)throw Error(be(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(m){pr(t,t.return,m)}}break;case 3:if(Wa(e,t),Oc(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{k1(e.containerInfo)}catch(m){pr(t,t.return,m)}break;case 4:Wa(e,t),Oc(t);break;case 13:Wa(e,t),Oc(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Y4=Er())),r&4&&Y6(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(vi=(l=vi)||u,Wa(e,t),vi=l):Wa(e,t),Oc(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(We=t,u=t.child;u!==null;){for(d=We=u;We!==null;){switch(h=We,f=h.child,h.tag){case 0:case 11:case 14:case 15:Zb(4,h,h.return);break;case 1:Yg(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){pr(r,n,m)}}break;case 5:Yg(h,h.return);break;case 22:if(h.memoizedState!==null){Q6(d);continue}}f!==null?(f.return=h,We=f):Q6(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=z9("display",o))}catch(m){pr(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(m){pr(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Wa(e,t),Oc(t),r&4&&Y6(t);break;case 21:break;default:Wa(e,t),Oc(t)}}function Oc(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(pz(n)){var r=n;break e}n=n.return}throw Error(be(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(_1(s,""),r.flags&=-33);var i=G6(t);$P(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=G6(t);jP(t,a,o);break;default:throw Error(be(161))}}catch(c){pr(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ute(t,e,n){We=t,yz(t)}function yz(t,e,n){for(var r=(t.mode&1)!==0;We!==null;){var s=We,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||DA;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||vi;a=DA;var l=vi;if(DA=o,(vi=c)&&!l)for(We=s;We!==null;)o=We,c=o.child,o.tag===22&&o.memoizedState!==null?J6(s):c!==null?(c.return=o,We=c):J6(s);for(;i!==null;)We=i,yz(i),i=i.sibling;We=s,DA=a,vi=l}Z6(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,We=i):Z6(t)}}function Z6(t){for(;We!==null;){var e=We;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vi||w2(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vi)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Xa(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&M6(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}M6(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&k1(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(be(163))}vi||e.flags&512&&FP(e)}catch(h){pr(e,e.return,h)}}if(e===t){We=null;break}if(n=e.sibling,n!==null){n.return=e.return,We=n;break}We=e.return}}function Q6(t){for(;We!==null;){var e=We;if(e===t){We=null;break}var n=e.sibling;if(n!==null){n.return=e.return,We=n;break}We=e.return}}function J6(t){for(;We!==null;){var e=We;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{w2(4,e)}catch(c){pr(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){pr(e,s,c)}}var i=e.return;try{FP(e)}catch(c){pr(e,i,c)}break;case 5:var o=e.return;try{FP(e)}catch(c){pr(e,o,c)}}}catch(c){pr(e,e.return,c)}if(e===t){We=null;break}var a=e.sibling;if(a!==null){a.return=e.return,We=a;break}We=e.return}}var dte=Math.ceil,_C=nd.ReactCurrentDispatcher,q4=nd.ReactCurrentOwner,Ma=nd.ReactCurrentBatchConfig,qt=0,As=null,Gr=null,$s=0,Fo=0,Zg=Xh(0),as=0,$1=null,em=0,b2=0,G4=0,Qb=null,ho=null,Y4=0,My=1/0,tu=null,IC=!1,zP=null,Nh=null,BA=!1,gh=null,NC=0,Jb=0,WP=null,Gx=-1,Yx=0;function ji(){return qt&6?Er():Gx!==-1?Gx:Gx=Er()}function Th(t){return t.mode&1?qt&2&&$s!==0?$s&-$s:Gee.transition!==null?(Yx===0&&(Yx=t7()),Yx):(t=En,t!==0||(t=window.event,t=t===void 0?16:c7(t.type)),t):1}function vc(t,e,n,r){if(50<Jb)throw Jb=0,WP=null,Error(be(185));RE(t,n,r),(!(qt&2)||t!==As)&&(t===As&&(!(qt&2)&&(b2|=n),as===4&&Kd(t,$s)),vo(t,r),n===1&&qt===0&&!(e.mode&1)&&(My=Er()+500,m2&&ef()))}function vo(t,e){var n=t.callbackNode;GX(t,e);var r=dC(t,t===As?$s:0);if(r===0)n!==null&&a6(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&a6(n),e===1)t.tag===0?qee(X6.bind(null,t)):I7(X6.bind(null,t)),Wee(function(){!(qt&6)&&ef()}),n=null;else{switch(n7(r)){case 1:n=E4;break;case 4:n=X9;break;case 16:n=uC;break;case 536870912:n=e7;break;default:n=uC}n=Cz(n,wz.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function wz(t,e){if(Gx=-1,Yx=0,qt&6)throw Error(be(327));var n=t.callbackNode;if(v0()&&t.callbackNode!==n)return null;var r=dC(t,t===As?$s:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=TC(t,r);else{e=r;var s=qt;qt|=2;var i=vz();(As!==t||$s!==e)&&(tu=null,My=Er()+500,zp(t,e));do try{pte();break}catch(a){bz(t,a)}while(1);M4(),_C.current=i,qt=s,Gr!==null?e=0:(As=null,$s=0,e=as)}if(e!==0){if(e===2&&(s=gP(t),s!==0&&(r=s,e=HP(t,s))),e===1)throw n=$1,zp(t,0),Kd(t,r),vo(t,Er()),n;if(e===6)Kd(t,r);else{if(s=t.current.alternate,!(r&30)&&!hte(s)&&(e=TC(t,r),e===2&&(i=gP(t),i!==0&&(r=i,e=HP(t,i))),e===1))throw n=$1,zp(t,0),Kd(t,r),vo(t,Er()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(be(345));case 2:bf(t,ho,tu);break;case 3:if(Kd(t,r),(r&130023424)===r&&(e=Y4+500-Er(),10<e)){if(dC(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ji(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=SP(bf.bind(null,t,ho,tu),e);break}bf(t,ho,tu);break;case 4:if(Kd(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-bc(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Er()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*dte(r/1960))-r,10<r){t.timeoutHandle=SP(bf.bind(null,t,ho,tu),r);break}bf(t,ho,tu);break;case 5:bf(t,ho,tu);break;default:throw Error(be(329))}}}return vo(t,Er()),t.callbackNode===n?wz.bind(null,t):null}function HP(t,e){var n=Qb;return t.current.memoizedState.isDehydrated&&(zp(t,e).flags|=256),t=TC(t,e),t!==2&&(e=ho,ho=n,e!==null&&VP(e)),t}function VP(t){ho===null?ho=t:ho.push.apply(ho,t)}function hte(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!_c(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Kd(t,e){for(e&=~G4,e&=~b2,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-bc(e),r=1<<n;t[n]=-1,e&=~r}}function X6(t){if(qt&6)throw Error(be(327));v0();var e=dC(t,0);if(!(e&1))return vo(t,Er()),null;var n=TC(t,e);if(t.tag!==0&&n===2){var r=gP(t);r!==0&&(e=r,n=HP(t,r))}if(n===1)throw n=$1,zp(t,0),Kd(t,e),vo(t,Er()),n;if(n===6)throw Error(be(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bf(t,ho,tu),vo(t,Er()),null}function Z4(t,e){var n=qt;qt|=1;try{return t(e)}finally{qt=n,qt===0&&(My=Er()+500,m2&&ef())}}function tm(t){gh!==null&&gh.tag===0&&!(qt&6)&&v0();var e=qt;qt|=1;var n=Ma.transition,r=En;try{if(Ma.transition=null,En=1,t)return t()}finally{En=r,Ma.transition=n,qt=e,!(qt&6)&&ef()}}function Q4(){Fo=Zg.current,Kn(Zg)}function zp(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zee(n)),Gr!==null)for(n=Gr.return;n!==null;){var r=n;switch(P4(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&gC();break;case 3:Ry(),Kn(wo),Kn(Ai),j4();break;case 5:F4(r);break;case 4:Ry();break;case 13:Kn(tr);break;case 19:Kn(tr);break;case 10:D4(r.type._context);break;case 22:case 23:Q4()}n=n.return}if(As=t,Gr=t=kh(t.current,null),$s=Fo=e,as=0,$1=null,G4=b2=em=0,ho=Qb=null,Yf!==null){for(e=0;e<Yf.length;e++)if(n=Yf[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Yf=null}return t}function bz(t,e){do{var n=Gr;try{if(M4(),Vx.current=CC,SC){for(var r=ir.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}SC=!1}if(Xp=0,gs=ss=ir=null,Yb=!1,U1=0,q4.current=null,n===null||n.return===null){as=1,$1=e,Gr=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=$s,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=j6(o);if(f!==null){f.flags&=-257,$6(f,o,a,i,e),f.mode&1&&F6(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var m=new Set;m.add(c),e.updateQueue=m}else p.add(c);break e}else{if(!(e&1)){F6(i,l,e),J4();break e}c=Error(be(426))}}else if(Jn&&a.mode&1){var E=j6(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),$6(E,o,a,i,e),R4(Oy(c,a));break e}}i=c=Oy(c,a),as!==4&&(as=2),Qb===null?Qb=[i]:Qb.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=nz(i,c,e);O6(i,b);break e;case 1:a=c;var x=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Nh===null||!Nh.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=rz(i,a,e);O6(i,N);break e}}i=i.return}while(i!==null)}Az(n)}catch(_){e=_,Gr===n&&n!==null&&(Gr=n=n.return);continue}break}while(1)}function vz(){var t=_C.current;return _C.current=CC,t===null?CC:t}function J4(){(as===0||as===3||as===2)&&(as=4),As===null||!(em&268435455)&&!(b2&268435455)||Kd(As,$s)}function TC(t,e){var n=qt;qt|=2;var r=vz();(As!==t||$s!==e)&&(tu=null,zp(t,e));do try{fte();break}catch(s){bz(t,s)}while(1);if(M4(),qt=n,_C.current=r,Gr!==null)throw Error(be(261));return As=null,$s=0,as}function fte(){for(;Gr!==null;)Ez(Gr)}function pte(){for(;Gr!==null&&!FX();)Ez(Gr)}function Ez(t){var e=Sz(t.alternate,t,Fo);t.memoizedProps=t.pendingProps,e===null?Az(t):Gr=e,q4.current=null}function Az(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ate(n,e),n!==null){n.flags&=32767,Gr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{as=6,Gr=null;return}}else if(n=ote(n,e,Fo),n!==null){Gr=n;return}if(e=e.sibling,e!==null){Gr=e;return}Gr=e=t}while(e!==null);as===0&&(as=5)}function bf(t,e,n){var r=En,s=Ma.transition;try{Ma.transition=null,En=1,mte(t,e,n,r)}finally{Ma.transition=s,En=r}return null}function mte(t,e,n,r){do v0();while(gh!==null);if(qt&6)throw Error(be(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(be(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(YX(t,i),t===As&&(Gr=As=null,$s=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||BA||(BA=!0,Cz(uC,function(){return v0(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ma.transition,Ma.transition=null;var o=En;En=1;var a=qt;qt|=4,q4.current=null,lte(t,n),gz(n,t),Dee(AP),hC=!!EP,AP=EP=null,t.current=n,ute(n),jX(),qt=a,En=o,Ma.transition=i}else t.current=n;if(BA&&(BA=!1,gh=t,NC=s),i=t.pendingLanes,i===0&&(Nh=null),WX(n.stateNode),vo(t,Er()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(IC)throw IC=!1,t=zP,zP=null,t;return NC&1&&t.tag!==0&&v0(),i=t.pendingLanes,i&1?t===WP?Jb++:(Jb=0,WP=t):Jb=0,ef(),null}function v0(){if(gh!==null){var t=n7(NC),e=Ma.transition,n=En;try{if(Ma.transition=null,En=16>t?16:t,gh===null)var r=!1;else{if(t=gh,gh=null,NC=0,qt&6)throw Error(be(331));var s=qt;for(qt|=4,We=t.current;We!==null;){var i=We,o=i.child;if(We.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(We=l;We!==null;){var u=We;switch(u.tag){case 0:case 11:case 15:Zb(8,u,i)}var d=u.child;if(d!==null)d.return=u,We=d;else for(;We!==null;){u=We;var h=u.sibling,f=u.return;if(fz(u),u===l){We=null;break}if(h!==null){h.return=f,We=h;break}We=f}}}var p=i.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var E=m.sibling;m.sibling=null,m=E}while(m!==null)}}We=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,We=o;else e:for(;We!==null;){if(i=We,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zb(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,We=b;break e}We=i.return}}var x=t.current;for(We=x;We!==null;){o=We;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,We=w;else e:for(o=x;We!==null;){if(a=We,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:w2(9,a)}}catch(_){pr(a,a.return,_)}if(a===o){We=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,We=N;break e}We=a.return}}if(qt=s,ef(),vl&&typeof vl.onPostCommitFiberRoot=="function")try{vl.onPostCommitFiberRoot(u2,t)}catch{}r=!0}return r}finally{En=n,Ma.transition=e}}return!1}function e8(t,e,n){e=Oy(n,e),e=nz(t,e,1),t=Ih(t,e,1),e=ji(),t!==null&&(RE(t,1,e),vo(t,e))}function pr(t,e,n){if(t.tag===3)e8(t,t,n);else for(;e!==null;){if(e.tag===3){e8(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Nh===null||!Nh.has(r))){t=Oy(n,t),t=rz(e,t,1),e=Ih(e,t,1),t=ji(),e!==null&&(RE(e,1,t),vo(e,t));break}}e=e.return}}function gte(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ji(),t.pingedLanes|=t.suspendedLanes&n,As===t&&($s&n)===n&&(as===4||as===3&&($s&130023424)===$s&&500>Er()-Y4?zp(t,0):G4|=n),vo(t,e)}function xz(t,e){e===0&&(t.mode&1?(e=_A,_A<<=1,!(_A&130023424)&&(_A=4194304)):e=1);var n=ji();t=Ku(t,e),t!==null&&(RE(t,e,n),vo(t,n))}function yte(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xz(t,n)}function wte(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(be(314))}r!==null&&r.delete(e),xz(t,n)}var Sz;Sz=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wo.current)mo=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mo=!1,ite(t,e,n);mo=!!(t.flags&131072)}else mo=!1,Jn&&e.flags&1048576&&N7(e,bC,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;qx(t,e),t=e.pendingProps;var s=Ty(e,Ai.current);b0(e,n),s=z4(null,e,r,t,s,n);var i=W4();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bo(r)?(i=!0,yC(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,L4(e),s.updater=y2,e.stateNode=s,s._reactInternals=e,PP(e,r,t,n),e=MP(null,e,r,!0,i,n)):(e.tag=0,Jn&&i&&k4(e),Oi(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(qx(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=vte(r),t=Xa(r,t),s){case 0:e=OP(null,e,r,t,n);break e;case 1:e=H6(null,e,r,t,n);break e;case 11:e=z6(null,e,r,t,n);break e;case 14:e=W6(null,e,r,Xa(r.type,t),n);break e}throw Error(be(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xa(r,s),OP(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xa(r,s),H6(t,e,r,s,n);case 3:e:{if(az(e),t===null)throw Error(be(387));r=e.pendingProps,i=e.memoizedState,s=i.element,M7(t,e),AC(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Oy(Error(be(423)),e),e=V6(t,e,r,n,s);break e}else if(r!==s){s=Oy(Error(be(424)),e),e=V6(t,e,r,n,s);break e}else for(qo=_h(e.stateNode.containerInfo.firstChild),Yo=e,Jn=!0,dc=null,n=R7(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ky(),r===s){e=qu(t,e,n);break e}Oi(t,e,r,n)}e=e.child}return e;case 5:return D7(e),t===null&&NP(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,xP(r,s)?o=null:i!==null&&xP(r,i)&&(e.flags|=32),oz(t,e),Oi(t,e,o,n),e.child;case 6:return t===null&&NP(e),null;case 13:return cz(t,e,n);case 4:return U4(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Py(e,null,r,n):Oi(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xa(r,s),z6(t,e,r,s,n);case 7:return Oi(t,e,e.pendingProps,n),e.child;case 8:return Oi(t,e,e.pendingProps.children,n),e.child;case 12:return Oi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,jn(vC,r._currentValue),r._currentValue=o,i!==null)if(_c(i.value,o)){if(i.children===s.children&&!wo.current){e=qu(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Du(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),TP(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(be(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),TP(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Oi(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,b0(e,n),s=Ba(s),r=r(s),e.flags|=1,Oi(t,e,r,n),e.child;case 14:return r=e.type,s=Xa(r,e.pendingProps),s=Xa(r.type,s),W6(t,e,r,s,n);case 15:return sz(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xa(r,s),qx(t,e),e.tag=1,bo(r)?(t=!0,yC(e)):t=!1,b0(e,n),tz(e,r,s),PP(e,r,s,n),MP(null,e,r,!0,t,n);case 19:return lz(t,e,n);case 22:return iz(t,e,n)}throw Error(be(156,e.tag))};function Cz(t,e){return J9(t,e)}function bte(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ra(t,e,n,r){return new bte(t,e,n,r)}function X4(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vte(t){if(typeof t=="function")return X4(t)?1:0;if(t!=null){if(t=t.$$typeof,t===w4)return 11;if(t===b4)return 14}return 2}function kh(t,e){var n=t.alternate;return n===null?(n=Ra(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Zx(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")X4(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case jg:return Wp(n.children,s,i,e);case y4:o=8,s|=8;break;case tP:return t=Ra(12,n,e,s|2),t.elementType=tP,t.lanes=i,t;case nP:return t=Ra(13,n,e,s),t.elementType=nP,t.lanes=i,t;case rP:return t=Ra(19,n,e,s),t.elementType=rP,t.lanes=i,t;case D9:return v2(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case O9:o=10;break e;case M9:o=9;break e;case w4:o=11;break e;case b4:o=14;break e;case Md:o=16,r=null;break e}throw Error(be(130,t==null?t:typeof t,""))}return e=Ra(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Wp(t,e,n,r){return t=Ra(7,t,r,e),t.lanes=n,t}function v2(t,e,n,r){return t=Ra(22,t,r,e),t.elementType=D9,t.lanes=n,t.stateNode={isHidden:!1},t}function jN(t,e,n){return t=Ra(6,t,null,e),t.lanes=n,t}function $N(t,e,n){return e=Ra(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ete(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=EN(0),this.expirationTimes=EN(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=EN(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function eM(t,e,n,r,s,i,o,a,c){return t=new Ete(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ra(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},L4(i),t}function Ate(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fg,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _z(t){if(!t)return jh;t=t._reactInternals;e:{if(Em(t)!==t||t.tag!==1)throw Error(be(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bo(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(be(171))}if(t.tag===1){var n=t.type;if(bo(n))return _7(t,n,e)}return e}function Iz(t,e,n,r,s,i,o,a,c){return t=eM(n,r,!0,t,s,i,o,a,c),t.context=_z(null),n=t.current,r=ji(),s=Th(n),i=Du(r,s),i.callback=e??null,Ih(n,i,s),t.current.lanes=s,RE(t,s,r),vo(t,r),t}function E2(t,e,n,r){var s=e.current,i=ji(),o=Th(s);return n=_z(n),e.context===null?e.context=n:e.pendingContext=n,e=Du(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ih(s,e,o),t!==null&&(vc(t,s,o,i),Hx(t,s,o)),o}function kC(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function t8(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function tM(t,e){t8(t,e),(t=t.alternate)&&t8(t,e)}function xte(){return null}var Nz=typeof reportError=="function"?reportError:function(t){console.error(t)};function nM(t){this._internalRoot=t}A2.prototype.render=nM.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(be(409));E2(t,e,null,null)};A2.prototype.unmount=nM.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;tm(function(){E2(null,t,null,null)}),e[Vu]=null}};function A2(t){this._internalRoot=t}A2.prototype.unstable_scheduleHydration=function(t){if(t){var e=i7();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Vd.length&&e!==0&&e<Vd[n].priority;n++);Vd.splice(n,0,t),n===0&&a7(t)}};function rM(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function x2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function n8(){}function Ste(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=kC(o);i.call(l)}}var o=Iz(e,r,t,0,null,!1,!1,"",n8);return t._reactRootContainer=o,t[Vu]=o.current,O1(t.nodeType===8?t.parentNode:t),tm(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=kC(c);a.call(l)}}var c=eM(t,0,!1,null,null,!1,!1,"",n8);return t._reactRootContainer=c,t[Vu]=c.current,O1(t.nodeType===8?t.parentNode:t),tm(function(){E2(e,c,n,r)}),c}function S2(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=kC(o);a.call(c)}}E2(e,o,t,s)}else o=Ste(n,e,t,s,r);return kC(o)}r7=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=bb(e.pendingLanes);n!==0&&(A4(e,n|1),vo(e,Er()),!(qt&6)&&(My=Er()+500,ef()))}break;case 13:tm(function(){var r=Ku(t,1);if(r!==null){var s=ji();vc(r,t,1,s)}}),tM(t,1)}};x4=function(t){if(t.tag===13){var e=Ku(t,134217728);if(e!==null){var n=ji();vc(e,t,134217728,n)}tM(t,134217728)}};s7=function(t){if(t.tag===13){var e=Th(t),n=Ku(t,e);if(n!==null){var r=ji();vc(n,t,e,r)}tM(t,e)}};i7=function(){return En};o7=function(t,e){var n=En;try{return En=t,e()}finally{En=n}};fP=function(t,e,n){switch(e){case"input":if(oP(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=p2(r);if(!s)throw Error(be(90));L9(r),oP(r,s)}}}break;case"textarea":F9(t,n);break;case"select":e=n.value,e!=null&&m0(t,!!n.multiple,e,!1)}};K9=Z4;q9=tm;var Cte={usingClientEntryPoint:!1,Events:[ME,Hg,p2,H9,V9,Z4]},Ww={findFiberByHostInstance:Gf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_te={bundleType:Ww.bundleType,version:Ww.version,rendererPackageName:Ww.rendererPackageName,rendererConfig:Ww.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nd.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Z9(t),t===null?null:t.stateNode},findFiberByHostInstance:Ww.findFiberByHostInstance||xte,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var LA=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!LA.isDisabled&&LA.supportsFiber)try{u2=LA.inject(_te),vl=LA}catch{}}ta.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cte;ta.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rM(e))throw Error(be(200));return Ate(t,e,null,n)};ta.createRoot=function(t,e){if(!rM(t))throw Error(be(299));var n=!1,r="",s=Nz;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=eM(t,1,!1,null,null,n,!1,r,s),t[Vu]=e.current,O1(t.nodeType===8?t.parentNode:t),new nM(e)};ta.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(be(188)):(t=Object.keys(t).join(","),Error(be(268,t)));return t=Z9(e),t=t===null?null:t.stateNode,t};ta.flushSync=function(t){return tm(t)};ta.hydrate=function(t,e,n){if(!x2(e))throw Error(be(200));return S2(null,t,e,!0,n)};ta.hydrateRoot=function(t,e,n){if(!rM(t))throw Error(be(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Nz;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Iz(e,null,t,1,n??null,s,!1,i,o),t[Vu]=e.current,O1(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new A2(e)};ta.render=function(t,e,n){if(!x2(e))throw Error(be(200));return S2(null,t,e,!1,n)};ta.unmountComponentAtNode=function(t){if(!x2(t))throw Error(be(40));return t._reactRootContainer?(tm(function(){S2(null,null,t,!1,function(){t._reactRootContainer=null,t[Vu]=null})}),!0):!1};ta.unstable_batchedUpdates=Z4;ta.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!x2(n))throw Error(be(200));if(t==null||t._reactInternals===void 0)throw Error(be(38));return S2(t,e,n,!1,r)};ta.version="18.3.1-next-f1338f8080-20240426";function Tz(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Tz)}catch(t){console.error(t)}}Tz(),T9.exports=ta;var kz=T9.exports,r8=kz;Xk.createRoot=r8.createRoot,Xk.hydrateRoot=r8.hydrateRoot;const Ite="modulepreload",Nte=function(t){return"/"+t},s8={},ur=function(e,n,r){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=Nte(i),i in s8)return;s8[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let u=s.length-1;u>=0;u--){const d=s[u];if(d.href===i&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":Ite,o||(l.as="script",l.crossOrigin=""),l.href=i,document.head.appendChild(l),o)return new Promise((u,d)=>{l.addEventListener("load",u),l.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};var ls={},C2={};C2.byteLength=Pte;C2.toByteArray=Ote;C2.fromByteArray=Bte;var il=[],ba=[],Tte=typeof Uint8Array<"u"?Uint8Array:Array,zN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Wm=0,kte=zN.length;Wm<kte;++Wm)il[Wm]=zN[Wm],ba[zN.charCodeAt(Wm)]=Wm;ba["-".charCodeAt(0)]=62;ba["_".charCodeAt(0)]=63;function Pz(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function Pte(t){var e=Pz(t),n=e[0],r=e[1];return(n+r)*3/4-r}function Rte(t,e,n){return(e+n)*3/4-n}function Ote(t){var e,n=Pz(t),r=n[0],s=n[1],i=new Tte(Rte(t,r,s)),o=0,a=s>0?r-4:r,c;for(c=0;c<a;c+=4)e=ba[t.charCodeAt(c)]<<18|ba[t.charCodeAt(c+1)]<<12|ba[t.charCodeAt(c+2)]<<6|ba[t.charCodeAt(c+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=ba[t.charCodeAt(c)]<<2|ba[t.charCodeAt(c+1)]>>4,i[o++]=e&255),s===1&&(e=ba[t.charCodeAt(c)]<<10|ba[t.charCodeAt(c+1)]<<4|ba[t.charCodeAt(c+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function Mte(t){return il[t>>18&63]+il[t>>12&63]+il[t>>6&63]+il[t&63]}function Dte(t,e,n){for(var r,s=[],i=e;i<n;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(Mte(r));return s.join("")}function Bte(t){for(var e,n=t.length,r=n%3,s=[],i=16383,o=0,a=n-r;o<a;o+=i)s.push(Dte(t,o,o+i>a?a:o+i));return r===1?(e=t[n-1],s.push(il[e>>2]+il[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],s.push(il[e>>10]+il[e>>4&63]+il[e<<2&63]+"=")),s.join("")}var sM={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */sM.read=function(t,e,n,r,s){var i,o,a=s*8-r-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?s-1:0,h=n?-1:1,f=t[e+d];for(d+=h,i=f&(1<<-u)-1,f>>=-u,u+=a;u>0;i=i*256+t[e+d],d+=h,u-=8);for(o=i&(1<<-u)-1,i>>=-u,u+=r;u>0;o=o*256+t[e+d],d+=h,u-=8);if(i===0)i=1-l;else{if(i===c)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-l}return(f?-1:1)*o*Math.pow(2,i-r)};sM.write=function(t,e,n,r,s,i){var o,a,c,l=i*8-s-1,u=(1<<l)-1,d=u>>1,h=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,p=r?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=h/c:e+=h*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(e*c-1)*Math.pow(2,s),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;t[n+f]=a&255,f+=p,a/=256,s-=8);for(o=o<<s|a,l+=s;l>0;t[n+f]=o&255,f+=p,o/=256,l-=8);t[n+f-p]|=m*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=C2,n=sM,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=_,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s;const{Uint8Array:i,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;u.TYPED_ARRAY_SUPPORT=c(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const j=new i(1),C={foo:function(){return 42}};return Object.setPrototypeOf(C,i.prototype),Object.setPrototypeOf(j,C),j.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function l(j){if(j>s)throw new RangeError('The value "'+j+'" is invalid for option "size"');const C=new i(j);return Object.setPrototypeOf(C,u.prototype),C}function u(j,C,k){if(typeof j=="number"){if(typeof C=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(j)}return d(j,C,k)}u.poolSize=8192;function d(j,C,k){if(typeof j=="string")return m(j,C);if(o.isView(j))return b(j);if(j==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(Ys(j,o)||j&&Ys(j.buffer,o)||typeof a<"u"&&(Ys(j,a)||j&&Ys(j.buffer,a)))return x(j,C,k);if(typeof j=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const V=j.valueOf&&j.valueOf();if(V!=null&&V!==j)return u.from(V,C,k);const X=w(j);if(X)return X;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof j[Symbol.toPrimitive]=="function")return u.from(j[Symbol.toPrimitive]("string"),C,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}u.from=function(j,C,k){return d(j,C,k)},Object.setPrototypeOf(u.prototype,i.prototype),Object.setPrototypeOf(u,i);function h(j){if(typeof j!="number")throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function f(j,C,k){return h(j),j<=0?l(j):C!==void 0?typeof k=="string"?l(j).fill(C,k):l(j).fill(C):l(j)}u.alloc=function(j,C,k){return f(j,C,k)};function p(j){return h(j),l(j<0?0:N(j)|0)}u.allocUnsafe=function(j){return p(j)},u.allocUnsafeSlow=function(j){return p(j)};function m(j,C){if((typeof C!="string"||C==="")&&(C="utf8"),!u.isEncoding(C))throw new TypeError("Unknown encoding: "+C);const k=L(j,C)|0;let V=l(k);const X=V.write(j,C);return X!==k&&(V=V.slice(0,X)),V}function E(j){const C=j.length<0?0:N(j.length)|0,k=l(C);for(let V=0;V<C;V+=1)k[V]=j[V]&255;return k}function b(j){if(Ys(j,i)){const C=new i(j);return x(C.buffer,C.byteOffset,C.byteLength)}return E(j)}function x(j,C,k){if(C<0||j.byteLength<C)throw new RangeError('"offset" is outside of buffer bounds');if(j.byteLength<C+(k||0))throw new RangeError('"length" is outside of buffer bounds');let V;return C===void 0&&k===void 0?V=new i(j):k===void 0?V=new i(j,C):V=new i(j,C,k),Object.setPrototypeOf(V,u.prototype),V}function w(j){if(u.isBuffer(j)){const C=N(j.length)|0,k=l(C);return k.length===0||j.copy(k,0,0,C),k}if(j.length!==void 0)return typeof j.length!="number"||Pn(j.length)?l(0):E(j);if(j.type==="Buffer"&&Array.isArray(j.data))return E(j.data)}function N(j){if(j>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return j|0}function _(j){return+j!=j&&(j=0),u.alloc(+j)}u.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==u.prototype},u.compare=function(C,k){if(Ys(C,i)&&(C=u.from(C,C.offset,C.byteLength)),Ys(k,i)&&(k=u.from(k,k.offset,k.byteLength)),!u.isBuffer(C)||!u.isBuffer(k))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===k)return 0;let V=C.length,X=k.length;for(let ne=0,ce=Math.min(V,X);ne<ce;++ne)if(C[ne]!==k[ne]){V=C[ne],X=k[ne];break}return V<X?-1:X<V?1:0},u.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(C,k){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return u.alloc(0);let V;if(k===void 0)for(k=0,V=0;V<C.length;++V)k+=C[V].length;const X=u.allocUnsafe(k);let ne=0;for(V=0;V<C.length;++V){let ce=C[V];if(Ys(ce,i))ne+ce.length>X.length?(u.isBuffer(ce)||(ce=u.from(ce)),ce.copy(X,ne)):i.prototype.set.call(X,ce,ne);else if(u.isBuffer(ce))ce.copy(X,ne);else throw new TypeError('"list" argument must be an Array of Buffers');ne+=ce.length}return X};function L(j,C){if(u.isBuffer(j))return j.length;if(o.isView(j)||Ys(j,o))return j.byteLength;if(typeof j!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);const k=j.length,V=arguments.length>2&&arguments[2]===!0;if(!V&&k===0)return 0;let X=!1;for(;;)switch(C){case"ascii":case"latin1":case"binary":return k;case"utf8":case"utf-8":return dn(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k*2;case"hex":return k>>>1;case"base64":return gn(j).length;default:if(X)return V?-1:dn(j).length;C=(""+C).toLowerCase(),X=!0}}u.byteLength=L;function U(j,C,k){let V=!1;if((C===void 0||C<0)&&(C=0),C>this.length||((k===void 0||k>this.length)&&(k=this.length),k<=0)||(k>>>=0,C>>>=0,k<=C))return"";for(j||(j="utf8");;)switch(j){case"hex":return S(this,C,k);case"utf8":case"utf-8":return I(this,C,k);case"ascii":return B(this,C,k);case"latin1":case"binary":return O(this,C,k);case"base64":return A(this,C,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,C,k);default:if(V)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),V=!0}}u.prototype._isBuffer=!0;function F(j,C,k){const V=j[C];j[C]=j[k],j[k]=V}u.prototype.swap16=function(){const C=this.length;if(C%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let k=0;k<C;k+=2)F(this,k,k+1);return this},u.prototype.swap32=function(){const C=this.length;if(C%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let k=0;k<C;k+=4)F(this,k,k+3),F(this,k+1,k+2);return this},u.prototype.swap64=function(){const C=this.length;if(C%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let k=0;k<C;k+=8)F(this,k,k+7),F(this,k+1,k+6),F(this,k+2,k+5),F(this,k+3,k+4);return this},u.prototype.toString=function(){const C=this.length;return C===0?"":arguments.length===0?I(this,0,C):U.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(C){if(!u.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C?!0:u.compare(this,C)===0},u.prototype.inspect=function(){let C="";const k=t.INSPECT_MAX_BYTES;return C=this.toString("hex",0,k).replace(/(.{2})/g,"$1 ").trim(),this.length>k&&(C+=" ... "),"<Buffer "+C+">"},r&&(u.prototype[r]=u.prototype.inspect),u.prototype.compare=function(C,k,V,X,ne){if(Ys(C,i)&&(C=u.from(C,C.offset,C.byteLength)),!u.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(k===void 0&&(k=0),V===void 0&&(V=C?C.length:0),X===void 0&&(X=0),ne===void 0&&(ne=this.length),k<0||V>C.length||X<0||ne>this.length)throw new RangeError("out of range index");if(X>=ne&&k>=V)return 0;if(X>=ne)return-1;if(k>=V)return 1;if(k>>>=0,V>>>=0,X>>>=0,ne>>>=0,this===C)return 0;let ce=ne-X,Et=V-k;const yt=Math.min(ce,Et),ft=this.slice(X,ne),Wn=C.slice(k,V);for(let ht=0;ht<yt;++ht)if(ft[ht]!==Wn[ht]){ce=ft[ht],Et=Wn[ht];break}return ce<Et?-1:Et<ce?1:0};function M(j,C,k,V,X){if(j.length===0)return-1;if(typeof k=="string"?(V=k,k=0):k>2147483647?k=2147483647:k<-2147483648&&(k=-2147483648),k=+k,Pn(k)&&(k=X?0:j.length-1),k<0&&(k=j.length+k),k>=j.length){if(X)return-1;k=j.length-1}else if(k<0)if(X)k=0;else return-1;if(typeof C=="string"&&(C=u.from(C,V)),u.isBuffer(C))return C.length===0?-1:W(j,C,k,V,X);if(typeof C=="number")return C=C&255,typeof i.prototype.indexOf=="function"?X?i.prototype.indexOf.call(j,C,k):i.prototype.lastIndexOf.call(j,C,k):W(j,[C],k,V,X);throw new TypeError("val must be string, number or Buffer")}function W(j,C,k,V,X){let ne=1,ce=j.length,Et=C.length;if(V!==void 0&&(V=String(V).toLowerCase(),V==="ucs2"||V==="ucs-2"||V==="utf16le"||V==="utf-16le")){if(j.length<2||C.length<2)return-1;ne=2,ce/=2,Et/=2,k/=2}function yt(Wn,ht){return ne===1?Wn[ht]:Wn.readUInt16BE(ht*ne)}let ft;if(X){let Wn=-1;for(ft=k;ft<ce;ft++)if(yt(j,ft)===yt(C,Wn===-1?0:ft-Wn)){if(Wn===-1&&(Wn=ft),ft-Wn+1===Et)return Wn*ne}else Wn!==-1&&(ft-=ft-Wn),Wn=-1}else for(k+Et>ce&&(k=ce-Et),ft=k;ft>=0;ft--){let Wn=!0;for(let ht=0;ht<Et;ht++)if(yt(j,ft+ht)!==yt(C,ht)){Wn=!1;break}if(Wn)return ft}return-1}u.prototype.includes=function(C,k,V){return this.indexOf(C,k,V)!==-1},u.prototype.indexOf=function(C,k,V){return M(this,C,k,V,!0)},u.prototype.lastIndexOf=function(C,k,V){return M(this,C,k,V,!1)};function H(j,C,k,V){k=Number(k)||0;const X=j.length-k;V?(V=Number(V),V>X&&(V=X)):V=X;const ne=C.length;V>ne/2&&(V=ne/2);let ce;for(ce=0;ce<V;++ce){const Et=parseInt(C.substr(ce*2,2),16);if(Pn(Et))return ce;j[k+ce]=Et}return ce}function K(j,C,k,V){return hn(dn(C,j.length-k),j,k,V)}function P(j,C,k,V){return hn(Cn(C),j,k,V)}function y(j,C,k,V){return hn(gn(C),j,k,V)}function g(j,C,k,V){return hn(_r(C,j.length-k),j,k,V)}u.prototype.write=function(C,k,V,X){if(k===void 0)X="utf8",V=this.length,k=0;else if(V===void 0&&typeof k=="string")X=k,V=this.length,k=0;else if(isFinite(k))k=k>>>0,isFinite(V)?(V=V>>>0,X===void 0&&(X="utf8")):(X=V,V=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ne=this.length-k;if((V===void 0||V>ne)&&(V=ne),C.length>0&&(V<0||k<0)||k>this.length)throw new RangeError("Attempt to write outside buffer bounds");X||(X="utf8");let ce=!1;for(;;)switch(X){case"hex":return H(this,C,k,V);case"utf8":case"utf-8":return K(this,C,k,V);case"ascii":case"latin1":case"binary":return P(this,C,k,V);case"base64":return y(this,C,k,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g(this,C,k,V);default:if(ce)throw new TypeError("Unknown encoding: "+X);X=(""+X).toLowerCase(),ce=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(j,C,k){return C===0&&k===j.length?e.fromByteArray(j):e.fromByteArray(j.slice(C,k))}function I(j,C,k){k=Math.min(j.length,k);const V=[];let X=C;for(;X<k;){const ne=j[X];let ce=null,Et=ne>239?4:ne>223?3:ne>191?2:1;if(X+Et<=k){let yt,ft,Wn,ht;switch(Et){case 1:ne<128&&(ce=ne);break;case 2:yt=j[X+1],(yt&192)===128&&(ht=(ne&31)<<6|yt&63,ht>127&&(ce=ht));break;case 3:yt=j[X+1],ft=j[X+2],(yt&192)===128&&(ft&192)===128&&(ht=(ne&15)<<12|(yt&63)<<6|ft&63,ht>2047&&(ht<55296||ht>57343)&&(ce=ht));break;case 4:yt=j[X+1],ft=j[X+2],Wn=j[X+3],(yt&192)===128&&(ft&192)===128&&(Wn&192)===128&&(ht=(ne&15)<<18|(yt&63)<<12|(ft&63)<<6|Wn&63,ht>65535&&ht<1114112&&(ce=ht))}}ce===null?(ce=65533,Et=1):ce>65535&&(ce-=65536,V.push(ce>>>10&1023|55296),ce=56320|ce&1023),V.push(ce),X+=Et}return R(V)}const T=4096;function R(j){const C=j.length;if(C<=T)return String.fromCharCode.apply(String,j);let k="",V=0;for(;V<C;)k+=String.fromCharCode.apply(String,j.slice(V,V+=T));return k}function B(j,C,k){let V="";k=Math.min(j.length,k);for(let X=C;X<k;++X)V+=String.fromCharCode(j[X]&127);return V}function O(j,C,k){let V="";k=Math.min(j.length,k);for(let X=C;X<k;++X)V+=String.fromCharCode(j[X]);return V}function S(j,C,k){const V=j.length;(!C||C<0)&&(C=0),(!k||k<0||k>V)&&(k=V);let X="";for(let ne=C;ne<k;++ne)X+=qn[j[ne]];return X}function z(j,C,k){const V=j.slice(C,k);let X="";for(let ne=0;ne<V.length-1;ne+=2)X+=String.fromCharCode(V[ne]+V[ne+1]*256);return X}u.prototype.slice=function(C,k){const V=this.length;C=~~C,k=k===void 0?V:~~k,C<0?(C+=V,C<0&&(C=0)):C>V&&(C=V),k<0?(k+=V,k<0&&(k=0)):k>V&&(k=V),k<C&&(k=C);const X=this.subarray(C,k);return Object.setPrototypeOf(X,u.prototype),X};function Y(j,C,k){if(j%1!==0||j<0)throw new RangeError("offset is not uint");if(j+C>k)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(C,k,V){C=C>>>0,k=k>>>0,V||Y(C,k,this.length);let X=this[C],ne=1,ce=0;for(;++ce<k&&(ne*=256);)X+=this[C+ce]*ne;return X},u.prototype.readUintBE=u.prototype.readUIntBE=function(C,k,V){C=C>>>0,k=k>>>0,V||Y(C,k,this.length);let X=this[C+--k],ne=1;for(;k>0&&(ne*=256);)X+=this[C+--k]*ne;return X},u.prototype.readUint8=u.prototype.readUInt8=function(C,k){return C=C>>>0,k||Y(C,1,this.length),this[C]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(C,k){return C=C>>>0,k||Y(C,2,this.length),this[C]|this[C+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(C,k){return C=C>>>0,k||Y(C,2,this.length),this[C]<<8|this[C+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(C,k){return C=C>>>0,k||Y(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+this[C+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(C,k){return C=C>>>0,k||Y(C,4,this.length),this[C]*16777216+(this[C+1]<<16|this[C+2]<<8|this[C+3])},u.prototype.readBigUInt64LE=No(function(C){C=C>>>0,_i(C,"offset");const k=this[C],V=this[C+7];(k===void 0||V===void 0)&&Vt(C,this.length-8);const X=k+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24,ne=this[++C]+this[++C]*2**8+this[++C]*2**16+V*2**24;return BigInt(X)+(BigInt(ne)<<BigInt(32))}),u.prototype.readBigUInt64BE=No(function(C){C=C>>>0,_i(C,"offset");const k=this[C],V=this[C+7];(k===void 0||V===void 0)&&Vt(C,this.length-8);const X=k*2**24+this[++C]*2**16+this[++C]*2**8+this[++C],ne=this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+V;return(BigInt(X)<<BigInt(32))+BigInt(ne)}),u.prototype.readIntLE=function(C,k,V){C=C>>>0,k=k>>>0,V||Y(C,k,this.length);let X=this[C],ne=1,ce=0;for(;++ce<k&&(ne*=256);)X+=this[C+ce]*ne;return ne*=128,X>=ne&&(X-=Math.pow(2,8*k)),X},u.prototype.readIntBE=function(C,k,V){C=C>>>0,k=k>>>0,V||Y(C,k,this.length);let X=k,ne=1,ce=this[C+--X];for(;X>0&&(ne*=256);)ce+=this[C+--X]*ne;return ne*=128,ce>=ne&&(ce-=Math.pow(2,8*k)),ce},u.prototype.readInt8=function(C,k){return C=C>>>0,k||Y(C,1,this.length),this[C]&128?(255-this[C]+1)*-1:this[C]},u.prototype.readInt16LE=function(C,k){C=C>>>0,k||Y(C,2,this.length);const V=this[C]|this[C+1]<<8;return V&32768?V|4294901760:V},u.prototype.readInt16BE=function(C,k){C=C>>>0,k||Y(C,2,this.length);const V=this[C+1]|this[C]<<8;return V&32768?V|4294901760:V},u.prototype.readInt32LE=function(C,k){return C=C>>>0,k||Y(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},u.prototype.readInt32BE=function(C,k){return C=C>>>0,k||Y(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},u.prototype.readBigInt64LE=No(function(C){C=C>>>0,_i(C,"offset");const k=this[C],V=this[C+7];(k===void 0||V===void 0)&&Vt(C,this.length-8);const X=this[C+4]+this[C+5]*2**8+this[C+6]*2**16+(V<<24);return(BigInt(X)<<BigInt(32))+BigInt(k+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24)}),u.prototype.readBigInt64BE=No(function(C){C=C>>>0,_i(C,"offset");const k=this[C],V=this[C+7];(k===void 0||V===void 0)&&Vt(C,this.length-8);const X=(k<<24)+this[++C]*2**16+this[++C]*2**8+this[++C];return(BigInt(X)<<BigInt(32))+BigInt(this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+V)}),u.prototype.readFloatLE=function(C,k){return C=C>>>0,k||Y(C,4,this.length),n.read(this,C,!0,23,4)},u.prototype.readFloatBE=function(C,k){return C=C>>>0,k||Y(C,4,this.length),n.read(this,C,!1,23,4)},u.prototype.readDoubleLE=function(C,k){return C=C>>>0,k||Y(C,8,this.length),n.read(this,C,!0,52,8)},u.prototype.readDoubleBE=function(C,k){return C=C>>>0,k||Y(C,8,this.length),n.read(this,C,!1,52,8)};function J(j,C,k,V,X,ne){if(!u.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(C>X||C<ne)throw new RangeError('"value" argument is out of bounds');if(k+V>j.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(C,k,V,X){if(C=+C,k=k>>>0,V=V>>>0,!X){const Et=Math.pow(2,8*V)-1;J(this,C,k,V,Et,0)}let ne=1,ce=0;for(this[k]=C&255;++ce<V&&(ne*=256);)this[k+ce]=C/ne&255;return k+V},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(C,k,V,X){if(C=+C,k=k>>>0,V=V>>>0,!X){const Et=Math.pow(2,8*V)-1;J(this,C,k,V,Et,0)}let ne=V-1,ce=1;for(this[k+ne]=C&255;--ne>=0&&(ce*=256);)this[k+ne]=C/ce&255;return k+V},u.prototype.writeUint8=u.prototype.writeUInt8=function(C,k,V){return C=+C,k=k>>>0,V||J(this,C,k,1,255,0),this[k]=C&255,k+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(C,k,V){return C=+C,k=k>>>0,V||J(this,C,k,2,65535,0),this[k]=C&255,this[k+1]=C>>>8,k+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(C,k,V){return C=+C,k=k>>>0,V||J(this,C,k,2,65535,0),this[k]=C>>>8,this[k+1]=C&255,k+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(C,k,V){return C=+C,k=k>>>0,V||J(this,C,k,4,4294967295,0),this[k+3]=C>>>24,this[k+2]=C>>>16,this[k+1]=C>>>8,this[k]=C&255,k+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(C,k,V){return C=+C,k=k>>>0,V||J(this,C,k,4,4294967295,0),this[k]=C>>>24,this[k+1]=C>>>16,this[k+2]=C>>>8,this[k+3]=C&255,k+4};function ae(j,C,k,V,X){cn(C,V,X,j,k,7);let ne=Number(C&BigInt(4294967295));j[k++]=ne,ne=ne>>8,j[k++]=ne,ne=ne>>8,j[k++]=ne,ne=ne>>8,j[k++]=ne;let ce=Number(C>>BigInt(32)&BigInt(4294967295));return j[k++]=ce,ce=ce>>8,j[k++]=ce,ce=ce>>8,j[k++]=ce,ce=ce>>8,j[k++]=ce,k}function pe(j,C,k,V,X){cn(C,V,X,j,k,7);let ne=Number(C&BigInt(4294967295));j[k+7]=ne,ne=ne>>8,j[k+6]=ne,ne=ne>>8,j[k+5]=ne,ne=ne>>8,j[k+4]=ne;let ce=Number(C>>BigInt(32)&BigInt(4294967295));return j[k+3]=ce,ce=ce>>8,j[k+2]=ce,ce=ce>>8,j[k+1]=ce,ce=ce>>8,j[k]=ce,k+8}u.prototype.writeBigUInt64LE=No(function(C,k=0){return ae(this,C,k,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=No(function(C,k=0){return pe(this,C,k,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(C,k,V,X){if(C=+C,k=k>>>0,!X){const yt=Math.pow(2,8*V-1);J(this,C,k,V,yt-1,-yt)}let ne=0,ce=1,Et=0;for(this[k]=C&255;++ne<V&&(ce*=256);)C<0&&Et===0&&this[k+ne-1]!==0&&(Et=1),this[k+ne]=(C/ce>>0)-Et&255;return k+V},u.prototype.writeIntBE=function(C,k,V,X){if(C=+C,k=k>>>0,!X){const yt=Math.pow(2,8*V-1);J(this,C,k,V,yt-1,-yt)}let ne=V-1,ce=1,Et=0;for(this[k+ne]=C&255;--ne>=0&&(ce*=256);)C<0&&Et===0&&this[k+ne+1]!==0&&(Et=1),this[k+ne]=(C/ce>>0)-Et&255;return k+V},u.prototype.writeInt8=function(C,k,V){return C=+C,k=k>>>0,V||J(this,C,k,1,127,-128),C<0&&(C=255+C+1),this[k]=C&255,k+1},u.prototype.writeInt16LE=function(C,k,V){return C=+C,k=k>>>0,V||J(this,C,k,2,32767,-32768),this[k]=C&255,this[k+1]=C>>>8,k+2},u.prototype.writeInt16BE=function(C,k,V){return C=+C,k=k>>>0,V||J(this,C,k,2,32767,-32768),this[k]=C>>>8,this[k+1]=C&255,k+2},u.prototype.writeInt32LE=function(C,k,V){return C=+C,k=k>>>0,V||J(this,C,k,4,2147483647,-2147483648),this[k]=C&255,this[k+1]=C>>>8,this[k+2]=C>>>16,this[k+3]=C>>>24,k+4},u.prototype.writeInt32BE=function(C,k,V){return C=+C,k=k>>>0,V||J(this,C,k,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[k]=C>>>24,this[k+1]=C>>>16,this[k+2]=C>>>8,this[k+3]=C&255,k+4},u.prototype.writeBigInt64LE=No(function(C,k=0){return ae(this,C,k,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=No(function(C,k=0){return pe(this,C,k,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ve(j,C,k,V,X,ne){if(k+V>j.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("Index out of range")}function de(j,C,k,V,X){return C=+C,k=k>>>0,X||ve(j,C,k,4),n.write(j,C,k,V,23,4),k+4}u.prototype.writeFloatLE=function(C,k,V){return de(this,C,k,!0,V)},u.prototype.writeFloatBE=function(C,k,V){return de(this,C,k,!1,V)};function $e(j,C,k,V,X){return C=+C,k=k>>>0,X||ve(j,C,k,8),n.write(j,C,k,V,52,8),k+8}u.prototype.writeDoubleLE=function(C,k,V){return $e(this,C,k,!0,V)},u.prototype.writeDoubleBE=function(C,k,V){return $e(this,C,k,!1,V)},u.prototype.copy=function(C,k,V,X){if(!u.isBuffer(C))throw new TypeError("argument should be a Buffer");if(V||(V=0),!X&&X!==0&&(X=this.length),k>=C.length&&(k=C.length),k||(k=0),X>0&&X<V&&(X=V),X===V||C.length===0||this.length===0)return 0;if(k<0)throw new RangeError("targetStart out of bounds");if(V<0||V>=this.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("sourceEnd out of bounds");X>this.length&&(X=this.length),C.length-k<X-V&&(X=C.length-k+V);const ne=X-V;return this===C&&typeof i.prototype.copyWithin=="function"?this.copyWithin(k,V,X):i.prototype.set.call(C,this.subarray(V,X),k),ne},u.prototype.fill=function(C,k,V,X){if(typeof C=="string"){if(typeof k=="string"?(X=k,k=0,V=this.length):typeof V=="string"&&(X=V,V=this.length),X!==void 0&&typeof X!="string")throw new TypeError("encoding must be a string");if(typeof X=="string"&&!u.isEncoding(X))throw new TypeError("Unknown encoding: "+X);if(C.length===1){const ce=C.charCodeAt(0);(X==="utf8"&&ce<128||X==="latin1")&&(C=ce)}}else typeof C=="number"?C=C&255:typeof C=="boolean"&&(C=Number(C));if(k<0||this.length<k||this.length<V)throw new RangeError("Out of range index");if(V<=k)return this;k=k>>>0,V=V===void 0?this.length:V>>>0,C||(C=0);let ne;if(typeof C=="number")for(ne=k;ne<V;++ne)this[ne]=C;else{const ce=u.isBuffer(C)?C:u.from(C,X),Et=ce.length;if(Et===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(ne=0;ne<V-k;++ne)this[ne+k]=ce[ne%Et]}return this};const Te={};function dt(j,C,k){Te[j]=class extends k{constructor(){super(),Object.defineProperty(this,"message",{value:C.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${j}]`,this.stack,delete this.name}get code(){return j}set code(X){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:X,writable:!0})}toString(){return`${this.name} [${j}]: ${this.message}`}}}dt("ERR_BUFFER_OUT_OF_BOUNDS",function(j){return j?`${j} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),dt("ERR_INVALID_ARG_TYPE",function(j,C){return`The "${j}" argument must be of type number. Received type ${typeof C}`},TypeError),dt("ERR_OUT_OF_RANGE",function(j,C,k){let V=`The value of "${j}" is out of range.`,X=k;return Number.isInteger(k)&&Math.abs(k)>2**32?X=vt(String(k)):typeof k=="bigint"&&(X=String(k),(k>BigInt(2)**BigInt(32)||k<-(BigInt(2)**BigInt(32)))&&(X=vt(X)),X+="n"),V+=` It must be ${C}. Received ${X}`,V},RangeError);function vt(j){let C="",k=j.length;const V=j[0]==="-"?1:0;for(;k>=V+4;k-=3)C=`_${j.slice(k-3,k)}${C}`;return`${j.slice(0,k)}${C}`}function rt(j,C,k){_i(C,"offset"),(j[C]===void 0||j[C+k]===void 0)&&Vt(C,j.length-(k+1))}function cn(j,C,k,V,X,ne){if(j>k||j<C){const ce=typeof C=="bigint"?"n":"";let Et;throw ne>3?C===0||C===BigInt(0)?Et=`>= 0${ce} and < 2${ce} ** ${(ne+1)*8}${ce}`:Et=`>= -(2${ce} ** ${(ne+1)*8-1}${ce}) and < 2 ** ${(ne+1)*8-1}${ce}`:Et=`>= ${C}${ce} and <= ${k}${ce}`,new Te.ERR_OUT_OF_RANGE("value",Et,j)}rt(V,X,ne)}function _i(j,C){if(typeof j!="number")throw new Te.ERR_INVALID_ARG_TYPE(C,"number",j)}function Vt(j,C,k){throw Math.floor(j)!==j?(_i(j,k),new Te.ERR_OUT_OF_RANGE(k||"offset","an integer",j)):C<0?new Te.ERR_BUFFER_OUT_OF_BOUNDS:new Te.ERR_OUT_OF_RANGE(k||"offset",`>= ${k?1:0} and <= ${C}`,j)}const Dn=/[^+/0-9A-Za-z-_]/g;function aa(j){if(j=j.split("=")[0],j=j.trim().replace(Dn,""),j.length<2)return"";for(;j.length%4!==0;)j=j+"=";return j}function dn(j,C){C=C||1/0;let k;const V=j.length;let X=null;const ne=[];for(let ce=0;ce<V;++ce){if(k=j.charCodeAt(ce),k>55295&&k<57344){if(!X){if(k>56319){(C-=3)>-1&&ne.push(239,191,189);continue}else if(ce+1===V){(C-=3)>-1&&ne.push(239,191,189);continue}X=k;continue}if(k<56320){(C-=3)>-1&&ne.push(239,191,189),X=k;continue}k=(X-55296<<10|k-56320)+65536}else X&&(C-=3)>-1&&ne.push(239,191,189);if(X=null,k<128){if((C-=1)<0)break;ne.push(k)}else if(k<2048){if((C-=2)<0)break;ne.push(k>>6|192,k&63|128)}else if(k<65536){if((C-=3)<0)break;ne.push(k>>12|224,k>>6&63|128,k&63|128)}else if(k<1114112){if((C-=4)<0)break;ne.push(k>>18|240,k>>12&63|128,k>>6&63|128,k&63|128)}else throw new Error("Invalid code point")}return ne}function Cn(j){const C=[];for(let k=0;k<j.length;++k)C.push(j.charCodeAt(k)&255);return C}function _r(j,C){let k,V,X;const ne=[];for(let ce=0;ce<j.length&&!((C-=2)<0);++ce)k=j.charCodeAt(ce),V=k>>8,X=k%256,ne.push(X),ne.push(V);return ne}function gn(j){return e.toByteArray(aa(j))}function hn(j,C,k,V){let X;for(X=0;X<V&&!(X+k>=C.length||X>=j.length);++X)C[X+k]=j[X];return X}function Ys(j,C){return j instanceof C||j!=null&&j.constructor!=null&&j.constructor.name!=null&&j.constructor.name===C.name}function Pn(j){return j!==j}const qn=function(){const j="0123456789abcdef",C=new Array(256);for(let k=0;k<16;++k){const V=k*16;for(let X=0;X<16;++X)C[V+X]=j[k]+j[X]}return C}();function No(j){return typeof BigInt>"u"?Gn:j}function Gn(){throw new Error("BigInt not supported")}})(ls);const Ge=ls.Buffer,Lte=ls.Blob,Ute=ls.BlobOptions,ot=ls.Buffer,Fte=ls.File,jte=ls.FileOptions,$te=ls.INSPECT_MAX_BYTES,zte=ls.SlowBuffer,Wte=ls.TranscodeEncoding,Hte=ls.atob,Vte=ls.btoa,Kte=ls.constants,qte=ls.isAscii,Gte=ls.isUtf8,Yte=ls.kMaxLength,Zte=ls.kStringMaxLength,Qte=ls.resolveObjectURL,Jte=ls.transcode,Xte=Object.freeze(Object.defineProperty({__proto__:null,Blob:Lte,BlobOptions:Ute,Buffer:ot,File:Fte,FileOptions:jte,INSPECT_MAX_BYTES:$te,SlowBuffer:zte,TranscodeEncoding:Wte,atob:Hte,btoa:Vte,constants:Kte,default:Ge,isAscii:qte,isUtf8:Gte,kMaxLength:Yte,kStringMaxLength:Zte,resolveObjectURL:Qte,transcode:Jte},Symbol.toStringTag,{value:"Module"})),Hm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function BE(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function z1(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Gu(t,...e){if(!BE(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Rz(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");z1(t.outputLen),z1(t.blockLen)}function Dy(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Oz(t,e){Gu(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function ene(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function $h(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function WN(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Mc(t,e){return t<<32-e|t>>>e}function lLe(t,e){return t<<e|t>>>32-e>>>0}const tne=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();function nne(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function rne(t){for(let e=0;e<t.length;e++)t[e]=nne(t[e]);return t}const i8=tne?t=>t:rne,Mz=(()=>typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function")(),sne=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Hp(t){if(Gu(t),Mz)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=sne[t[n]];return e}const Fl={_0:48,_9:57,A:65,F:70,a:97,f:102};function o8(t){if(t>=Fl._0&&t<=Fl._9)return t-Fl._0;if(t>=Fl.A&&t<=Fl.F)return t-(Fl.A-10);if(t>=Fl.a&&t<=Fl.f)return t-(Fl.a-10)}function PC(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Mz)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=o8(t.charCodeAt(i)),a=o8(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function ine(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function LE(t){return typeof t=="string"&&(t=ine(t)),Gu(t),t}function ol(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Gu(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let iM=class{};function oM(t){const e=r=>t().update(LE(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function one(t){const e=(r,s)=>t(s).update(LE(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function aM(t=32){if(Hm&&typeof Hm.getRandomValues=="function")return Hm.getRandomValues(new Uint8Array(t));if(Hm&&typeof Hm.randomBytes=="function")return Uint8Array.from(Hm.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function ane(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function cne(t,e,n){return t&e^~t&n}function lne(t,e,n){return t&e^t&n^e&n}class Dz extends iM{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=WN(this.buffer)}update(e){Dy(this),e=LE(e),Gu(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=WN(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Dy(this),Oz(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,$h(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;ane(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=WN(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const od=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Js=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),UA=BigInt(2**32-1),a8=BigInt(32);function une(t,e=!1){return e?{h:Number(t&UA),l:Number(t>>a8&UA)}:{h:Number(t>>a8&UA)|0,l:Number(t&UA)|0}}function Bz(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=une(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const c8=(t,e,n)=>t>>>n,l8=(t,e,n)=>t<<32-n|e>>>n,Vm=(t,e,n)=>t>>>n|e<<32-n,Km=(t,e,n)=>t<<32-n|e>>>n,FA=(t,e,n)=>t<<64-n|e>>>n-32,jA=(t,e,n)=>t>>>n-32|e<<64-n,dne=(t,e,n)=>t<<n|e>>>32-n,hne=(t,e,n)=>e<<n|t>>>32-n,fne=(t,e,n)=>e<<n-32|t>>>64-n,pne=(t,e,n)=>t<<n-32|e>>>64-n;function jl(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const mne=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),gne=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,yne=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),wne=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,bne=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),vne=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Ene=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ad=new Uint32Array(64);let Ane=class extends Dz{constructor(e=32){super(64,e,8,!1),this.A=od[0]|0,this.B=od[1]|0,this.C=od[2]|0,this.D=od[3]|0,this.E=od[4]|0,this.F=od[5]|0,this.G=od[6]|0,this.H=od[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)ad[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=ad[d-15],f=ad[d-2],p=Mc(h,7)^Mc(h,18)^h>>>3,m=Mc(f,17)^Mc(f,19)^f>>>10;ad[d]=m+ad[d-7]+p+ad[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Mc(a,6)^Mc(a,11)^Mc(a,25),f=u+h+cne(a,c,l)+Ene[d]+ad[d]|0,m=(Mc(r,2)^Mc(r,13)^Mc(r,22))+lne(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+m|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){$h(ad)}destroy(){this.set(0,0,0,0,0,0,0,0),$h(this.buffer)}};const Lz=(()=>Bz(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),xne=(()=>Lz[0])(),Sne=(()=>Lz[1])(),cd=new Uint32Array(80),ld=new Uint32Array(80);let Cne=class extends Dz{constructor(e=64){super(128,e,16,!1),this.Ah=Js[0]|0,this.Al=Js[1]|0,this.Bh=Js[2]|0,this.Bl=Js[3]|0,this.Ch=Js[4]|0,this.Cl=Js[5]|0,this.Dh=Js[6]|0,this.Dl=Js[7]|0,this.Eh=Js[8]|0,this.El=Js[9]|0,this.Fh=Js[10]|0,this.Fl=Js[11]|0,this.Gh=Js[12]|0,this.Gl=Js[13]|0,this.Hh=Js[14]|0,this.Hl=Js[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:m,Hl:E}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,m,E]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,m,E){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=m|0,this.Hl=E|0}process(e,n){for(let w=0;w<16;w++,n+=4)cd[w]=e.getUint32(n),ld[w]=e.getUint32(n+=4);for(let w=16;w<80;w++){const N=cd[w-15]|0,_=ld[w-15]|0,L=Vm(N,_,1)^Vm(N,_,8)^c8(N,_,7),U=Km(N,_,1)^Km(N,_,8)^l8(N,_,7),F=cd[w-2]|0,M=ld[w-2]|0,W=Vm(F,M,19)^FA(F,M,61)^c8(F,M,6),H=Km(F,M,19)^jA(F,M,61)^l8(F,M,6),K=yne(U,H,ld[w-7],ld[w-16]),P=wne(K,L,W,cd[w-7],cd[w-16]);cd[w]=P|0,ld[w]=K|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:m,Gl:E,Hh:b,Hl:x}=this;for(let w=0;w<80;w++){const N=Vm(d,h,14)^Vm(d,h,18)^FA(d,h,41),_=Km(d,h,14)^Km(d,h,18)^jA(d,h,41),L=d&f^~d&m,U=h&p^~h&E,F=bne(x,_,U,Sne[w],ld[w]),M=vne(F,b,N,L,xne[w],cd[w]),W=F|0,H=Vm(r,s,28)^FA(r,s,34)^FA(r,s,39),K=Km(r,s,28)^jA(r,s,34)^jA(r,s,39),P=r&i^r&a^i&a,y=s&o^s&c^o&c;b=m|0,x=E|0,m=f|0,E=p|0,f=d|0,p=h|0,{h:d,l:h}=jl(l|0,u|0,M|0,W|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const g=mne(W,K,y);r=gne(g,M,H,P),s=g|0}({h:r,l:s}=jl(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=jl(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=jl(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=jl(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=jl(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=jl(this.Fh|0,this.Fl|0,f|0,p|0),{h:m,l:E}=jl(this.Gh|0,this.Gl|0,m|0,E|0),{h:b,l:x}=jl(this.Hh|0,this.Hl|0,b|0,x|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,m,E,b,x)}roundClean(){$h(cd,ld)}destroy(){$h(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const Uz=oM(()=>new Ane),_ne=oM(()=>new Cne);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cM=BigInt(0),KP=BigInt(1);function nm(t,e=""){if(typeof t!="boolean"){const n=e&&`"${e}"`;throw new Error(n+"expected boolean, got type="+typeof t)}return t}function mc(t,e,n=""){const r=BE(t),s=t==null?void 0:t.length,i=e!==void 0;if(!r||i&&s!==e){const o=n&&`"${n}" `,a=i?` of length ${e}`:"",c=r?`length=${s}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+c)}return t}function $A(t){const e=t.toString(16);return e.length&1?"0"+e:e}function Fz(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?cM:BigInt("0x"+t)}function _2(t){return Fz(Hp(t))}function W1(t){return Gu(t),Fz(Hp(Uint8Array.from(t).reverse()))}function lM(t,e){return PC(t.toString(16).padStart(e*2,"0"))}function jz(t,e){return lM(t,e).reverse()}function hr(t,e,n){let r;if(typeof e=="string")try{r=PC(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(BE(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function u8(t){return Uint8Array.from(t)}const HN=t=>typeof t=="bigint"&&cM<=t;function Ine(t,e,n){return HN(t)&&HN(e)&&HN(n)&&e<=t&&t<n}function qP(t,e,n,r){if(!Ine(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function $z(t){let e;for(e=0;t>cM;t>>=KP,e+=1);return e}const UE=t=>(KP<<BigInt(t))-KP;function Nne(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=l();const m=i.slice();p.push(m),f+=i.length}return ol(...p)};return(f,p)=>{c(),u(f);let m;for(;!(m=p(d()));)u();return c(),m}}function FE(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function RC(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const go=BigInt(0),zs=BigInt(1),Qf=BigInt(2),zz=BigInt(3),Wz=BigInt(4),Hz=BigInt(5),Tne=BigInt(7),Vz=BigInt(8),kne=BigInt(9),Kz=BigInt(16);function Vr(t,e){const n=t%e;return n>=go?n:e+n}function dr(t,e,n){let r=t;for(;e-- >go;)r*=r,r%=n;return r}function d8(t,e){if(t===go)throw new Error("invert: expected non-zero number");if(e<=go)throw new Error("invert: expected positive modulus, got "+e);let n=Vr(t,e),r=e,s=go,i=zs;for(;n!==go;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==zs)throw new Error("invert: does not exist");return Vr(s,e)}function uM(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function qz(t,e){const n=(t.ORDER+zs)/Wz,r=t.pow(e,n);return uM(t,r,e),r}function Pne(t,e){const n=(t.ORDER-Hz)/Vz,r=t.mul(e,Qf),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Qf),s),a=t.mul(i,t.sub(o,t.ONE));return uM(t,a,e),a}function Rne(t){const e=Am(t),n=Gz(t),r=n(e,e.neg(e.ONE)),s=n(e,r),i=n(e,e.neg(r)),o=(t+Tne)/Kz;return(a,c)=>{let l=a.pow(c,o),u=a.mul(l,r);const d=a.mul(l,s),h=a.mul(l,i),f=a.eql(a.sqr(u),c),p=a.eql(a.sqr(d),c);l=a.cmov(l,u,f),u=a.cmov(h,d,p);const m=a.eql(a.sqr(u),c),E=a.cmov(l,u,m);return uM(a,E,c),E}}function Gz(t){if(t<zz)throw new Error("sqrt is not defined for small field");let e=t-zs,n=0;for(;e%Qf===go;)e/=Qf,n++;let r=Qf;const s=Am(t);for(;h8(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return qz;let i=s.pow(r,e);const o=(e+zs)/Qf;return function(c,l){if(c.is0(l))return l;if(h8(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,m=c.sqr(h);for(;!c.eql(m,c.ONE);)if(p++,m=c.sqr(m),p===u)throw new Error("Cannot find square root");const E=zs<<BigInt(u-p-1),b=c.pow(d,E);u=p,d=c.sqr(b),h=c.mul(h,d),f=c.mul(f,b)}return f}}function One(t){return t%Wz===zz?qz:t%Vz===Hz?Pne:t%Kz===kne?Rne(t):Gz(t)}const Mne=(t,e)=>(Vr(t,e)&zs)===zs,Dne=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Bne(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Dne.reduce((r,s)=>(r[s]="function",r),e);return FE(t,n),t}function Lne(t,e,n){if(n<go)throw new Error("invalid exponent, negatives unsupported");if(n===go)return t.ONE;if(n===zs)return e;let r=t.ONE,s=e;for(;n>go;)n&zs&&(r=t.mul(r,s)),s=t.sqr(s),n>>=zs;return r}function Yz(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function h8(t,e){const n=(t.ORDER-zs)/Qf,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Zz(t,e){e!==void 0&&z1(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Am(t,e,n=!1,r={}){if(t<=go)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i,o=!1,a;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const h=e;h.BITS&&(s=h.BITS),h.sqrt&&(i=h.sqrt),typeof h.isLE=="boolean"&&(n=h.isLE),typeof h.modFromBytes=="boolean"&&(o=h.modFromBytes),a=h.allowedLengths}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:c,nByteLength:l}=Zz(t,s);if(l>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const d=Object.freeze({ORDER:t,isLE:n,BITS:c,BYTES:l,MASK:UE(c),ZERO:go,ONE:zs,allowedLengths:a,create:h=>Vr(h,t),isValid:h=>{if(typeof h!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof h);return go<=h&&h<t},is0:h=>h===go,isValidNot0:h=>!d.is0(h)&&d.isValid(h),isOdd:h=>(h&zs)===zs,neg:h=>Vr(-h,t),eql:(h,f)=>h===f,sqr:h=>Vr(h*h,t),add:(h,f)=>Vr(h+f,t),sub:(h,f)=>Vr(h-f,t),mul:(h,f)=>Vr(h*f,t),pow:(h,f)=>Lne(d,h,f),div:(h,f)=>Vr(h*d8(f,t),t),sqrN:h=>h*h,addN:(h,f)=>h+f,subN:(h,f)=>h-f,mulN:(h,f)=>h*f,inv:h=>d8(h,t),sqrt:i||(h=>(u||(u=One(t)),u(d,h))),toBytes:h=>n?jz(h,l):lM(h,l),fromBytes:(h,f=!0)=>{if(a){if(!a.includes(h.length)||h.length>l)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+h.length);const m=new Uint8Array(l);m.set(h,n?0:m.length-h.length),h=m}if(h.length!==l)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+h.length);let p=n?W1(h):_2(h);if(o&&(p=Vr(p,t)),!f&&!d.isValid(p))throw new Error("invalid field element: outside of range 0..ORDER");return p},invertBatch:h=>Yz(d,h),cmov:(h,f,p)=>p?f:h});return Object.freeze(d)}function Qz(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Jz(t){const e=Qz(t);return e+Math.ceil(e/2)}function Une(t,e,n=!1){const r=t.length,s=Qz(e),i=Jz(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?W1(t):_2(t),a=Vr(o,e-zs)+zs;return n?jz(a,s):lM(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const By=BigInt(0),Jf=BigInt(1);function OC(t,e){const n=e.negate();return t?n:e}function Xf(t,e){const n=Yz(t.Fp,e.map(r=>r.Z));return e.map((r,s)=>t.fromAffine(r.toAffine(n[s])))}function Xz(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function VN(t,e){Xz(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=UE(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function f8(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Jf);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function Fne(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function jne(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const KN=new WeakMap,eW=new WeakMap;function qN(t){return eW.get(t)||1}function p8(t){if(t!==By)throw new Error("invalid wNAF")}let tW=class{constructor(e,n){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=n}_unsafeLadder(e,n,r=this.ZERO){let s=e;for(;n>By;)n&Jf&&(r=r.add(s)),s=s.double(),n>>=Jf;return r}precomputeWindow(e,n){const{windows:r,windowSize:s}=VN(n,this.bits),i=[];let o=e,a=o;for(let c=0;c<r;c++){a=o,i.push(a);for(let l=1;l<s;l++)a=a.add(o),i.push(a);o=a.double()}return i}wNAF(e,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=VN(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:l,isZero:u,isNeg:d,isNegF:h,offsetF:f}=f8(r,a,o);r=c,u?i=i.add(OC(h,n[f])):s=s.add(OC(d,n[l]))}return p8(r),{p:s,f:i}}wNAFUnsafe(e,n,r,s=this.ZERO){const i=VN(e,this.bits);for(let o=0;o<i.windows&&r!==By;o++){const{nextN:a,offset:c,isZero:l,isNeg:u}=f8(r,o,i);if(r=a,!l){const d=n[c];s=s.add(u?d.negate():d)}}return p8(r),s}getPrecomputes(e,n,r){let s=KN.get(n);return s||(s=this.precomputeWindow(n,e),e!==1&&(typeof r=="function"&&(s=r(s)),KN.set(n,s))),s}cached(e,n,r){const s=qN(e);return this.wNAF(s,this.getPrecomputes(s,e,r),n)}unsafe(e,n,r,s){const i=qN(e);return i===1?this._unsafeLadder(e,n,s):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),n,s)}createCache(e,n){Xz(n,this.bits),eW.set(e,n),KN.delete(e)}hasCache(e){return qN(e)!==1}};function $ne(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>By||r>By;)n&Jf&&(i=i.add(s)),r&Jf&&(o=o.add(s)),s=s.double(),n>>=Jf,r>>=Jf;return{p1:i,p2:o}}function nW(t,e,n,r){Fne(n,t),jne(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=$z(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=UE(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let m=0;m<i;m++){const E=r[m],b=Number(E>>BigInt(f)&l);u[b]=u[b].add(n[m])}let p=o;for(let m=u.length-1,E=o;m>0;m--)E=E.add(u[m]),p=p.add(E);if(h=h.add(p),f!==0)for(let m=0;m<c;m++)h=h.double()}return h}function m8(t,e,n){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Bne(e),e}else return Am(t,{isLE:n})}function rW(t,e,n={},r){if(r===void 0&&(r=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const c of["p","n","h"]){const l=e[c];if(!(typeof l=="bigint"&&l>By))throw new Error(`CURVE.${c} must be positive bigint`)}const s=m8(e.p,n.Fp,r),i=m8(e.n,n.Fn,r),a=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const c of a)if(!s.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ud=BigInt(0),ps=BigInt(1),GN=BigInt(2),zne=BigInt(8);function Wne(t,e,n,r){const s=t.sqr(n),i=t.sqr(r),o=t.add(t.mul(e.a,s),i),a=t.add(t.ONE,t.mul(e.d,t.mul(s,i)));return t.eql(o,a)}function Hne(t,e={}){const n=rW("edwards",t,e,e.FpFnLE),{Fp:r,Fn:s}=n;let i=n.CURVE;const{h:o}=i;FE(e,{},{uvRatio:"function"});const a=GN<<BigInt(s.BYTES*8)-ps,c=E=>r.create(E),l=e.uvRatio||((E,b)=>{try{return{isValid:!0,value:r.sqrt(r.div(E,b))}}catch{return{isValid:!1,value:ud}}});if(!Wne(r,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function u(E,b,x=!1){const w=x?ps:ud;return qP("coordinate "+E,b,w,a),b}function d(E){if(!(E instanceof p))throw new Error("ExtendedPoint expected")}const h=RC((E,b)=>{const{X:x,Y:w,Z:N}=E,_=E.is0();b==null&&(b=_?zne:r.inv(N));const L=c(x*b),U=c(w*b),F=r.mul(N,b);if(_)return{x:ud,y:ps};if(F!==ps)throw new Error("invZ was invalid");return{x:L,y:U}}),f=RC(E=>{const{a:b,d:x}=i;if(E.is0())throw new Error("bad point: ZERO");const{X:w,Y:N,Z:_,T:L}=E,U=c(w*w),F=c(N*N),M=c(_*_),W=c(M*M),H=c(U*b),K=c(M*c(H+F)),P=c(W+c(x*c(U*F)));if(K!==P)throw new Error("bad point: equation left != right (1)");const y=c(w*N),g=c(_*L);if(y!==g)throw new Error("bad point: equation left != right (2)");return!0});class p{constructor(b,x,w,N){this.X=u("x",b),this.Y=u("y",x),this.Z=u("z",w,!0),this.T=u("t",N),Object.freeze(this)}static CURVE(){return i}static fromAffine(b){if(b instanceof p)throw new Error("extended point not allowed");const{x,y:w}=b||{};return u("x",x),u("y",w),new p(x,w,ps,c(x*w))}static fromBytes(b,x=!1){const w=r.BYTES,{a:N,d:_}=i;b=u8(mc(b,w,"point")),nm(x,"zip215");const L=u8(b),U=b[w-1];L[w-1]=U&-129;const F=W1(L),M=x?a:r.ORDER;qP("point.y",F,ud,M);const W=c(F*F),H=c(W-ps),K=c(_*W-N);let{isValid:P,value:y}=l(H,K);if(!P)throw new Error("bad point: invalid y coordinate");const g=(y&ps)===ps,A=(U&128)!==0;if(!x&&y===ud&&A)throw new Error("bad point: x=0 and x_0=1");return A!==g&&(y=c(-y)),p.fromAffine({x:y,y:F})}static fromHex(b,x=!1){return p.fromBytes(hr("point",b),x)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(b=8,x=!0){return m.createCache(this,b),x||this.multiply(GN),this}assertValidity(){f(this)}equals(b){d(b);const{X:x,Y:w,Z:N}=this,{X:_,Y:L,Z:U}=b,F=c(x*U),M=c(_*N),W=c(w*U),H=c(L*N);return F===M&&W===H}is0(){return this.equals(p.ZERO)}negate(){return new p(c(-this.X),this.Y,this.Z,c(-this.T))}double(){const{a:b}=i,{X:x,Y:w,Z:N}=this,_=c(x*x),L=c(w*w),U=c(GN*c(N*N)),F=c(b*_),M=x+w,W=c(c(M*M)-_-L),H=F+L,K=H-U,P=F-L,y=c(W*K),g=c(H*P),A=c(W*P),I=c(K*H);return new p(y,g,I,A)}add(b){d(b);const{a:x,d:w}=i,{X:N,Y:_,Z:L,T:U}=this,{X:F,Y:M,Z:W,T:H}=b,K=c(N*F),P=c(_*M),y=c(U*w*H),g=c(L*W),A=c((N+_)*(F+M)-K-P),I=g-y,T=g+y,R=c(P-x*K),B=c(A*I),O=c(T*R),S=c(A*R),z=c(I*T);return new p(B,O,z,S)}subtract(b){return this.add(b.negate())}multiply(b){if(!s.isValidNot0(b))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:x,f:w}=m.cached(this,b,N=>Xf(p,N));return Xf(p,[x,w])[0]}multiplyUnsafe(b,x=p.ZERO){if(!s.isValid(b))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return b===ud?p.ZERO:this.is0()||b===ps?this:m.unsafe(this,b,w=>Xf(p,w),x)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return m.unsafe(this,i.n).is0()}toAffine(b){return h(this,b)}clearCofactor(){return o===ps?this:this.multiplyUnsafe(o)}toBytes(){const{x:b,y:x}=this.toAffine(),w=r.toBytes(x);return w[w.length-1]|=b&ps?128:0,w}toHex(){return Hp(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(b){return Xf(p,b)}static msm(b,x){return nW(p,s,b,x)}_setWindowSize(b){this.precompute(b)}toRawBytes(){return this.toBytes()}}p.BASE=new p(i.Gx,i.Gy,ps,c(i.Gx*i.Gy)),p.ZERO=new p(ud,ps,ps,ud),p.Fp=r,p.Fn=s;const m=new tW(p,s.BITS);return p.BASE.precompute(8),p}function Vne(t,e,n={}){if(typeof e!="function")throw new Error('"hash" function param is required');FE(n,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=n,{BASE:s,Fp:i,Fn:o}=t,a=n.randomBytes||aM,c=n.adjustScalarBytes||(M=>M),l=n.domain||((M,W,H)=>{if(nm(H,"phflag"),W.length||H)throw new Error("Contexts/pre-hash are not supported");return M});function u(M){return o.create(W1(M))}function d(M){const W=w.secretKey;M=hr("private key",M,W);const H=hr("hashed private key",e(M),2*W),K=c(H.slice(0,W)),P=H.slice(W,2*W),y=u(K);return{head:K,prefix:P,scalar:y}}function h(M){const{head:W,prefix:H,scalar:K}=d(M),P=s.multiply(K),y=P.toBytes();return{head:W,prefix:H,scalar:K,point:P,pointBytes:y}}function f(M){return h(M).pointBytes}function p(M=Uint8Array.of(),...W){const H=ol(...W);return u(e(l(H,hr("context",M),!!r)))}function m(M,W,H={}){M=hr("message",M),r&&(M=r(M));const{prefix:K,scalar:P,pointBytes:y}=h(W),g=p(H.context,K,M),A=s.multiply(g).toBytes(),I=p(H.context,A,y,M),T=o.create(g+I*P);if(!o.isValid(T))throw new Error("sign failed: invalid s");const R=ol(A,o.toBytes(T));return mc(R,w.signature,"result")}const E={zip215:!0};function b(M,W,H,K=E){const{context:P,zip215:y}=K,g=w.signature;M=hr("signature",M,g),W=hr("message",W),H=hr("publicKey",H,w.publicKey),y!==void 0&&nm(y,"zip215"),r&&(W=r(W));const A=g/2,I=M.subarray(0,A),T=W1(M.subarray(A,g));let R,B,O;try{R=t.fromBytes(H,y),B=t.fromBytes(I,y),O=s.multiplyUnsafe(T)}catch{return!1}if(!y&&R.isSmallOrder())return!1;const S=p(P,B.toBytes(),R.toBytes(),W);return B.add(R.multiplyUnsafe(S)).subtract(O).clearCofactor().is0()}const x=i.BYTES,w={secretKey:x,publicKey:x,signature:2*x,seed:x};function N(M=a(w.seed)){return mc(M,w.seed,"seed")}function _(M){const W=F.randomSecretKey(M);return{secretKey:W,publicKey:f(W)}}function L(M){return BE(M)&&M.length===o.BYTES}function U(M,W){try{return!!t.fromBytes(M,W)}catch{return!1}}const F={getExtendedPublicKey:h,randomSecretKey:N,isValidSecretKey:L,isValidPublicKey:U,toMontgomery(M){const{y:W}=t.fromBytes(M),H=w.publicKey,K=H===32;if(!K&&H!==57)throw new Error("only defined for 25519 and 448");const P=K?i.div(ps+W,ps-W):i.div(W-ps,W+ps);return i.toBytes(P)},toMontgomerySecret(M){const W=w.secretKey;mc(M,W);const H=e(M.subarray(0,W));return c(H).subarray(0,W)},randomPrivateKey:N,precompute(M=8,W=t.BASE){return W.precompute(M,!1)}};return Object.freeze({keygen:_,getPublicKey:f,sign:m,verify:b,utils:F,Point:t,lengths:w})}function Kne(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=Am(e.n,t.nBitLength,!0),s={Fp:n,Fn:r,uvRatio:t.uvRatio},i={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:s,hash:t.hash,eddsaOpts:i}}function qne(t,e){const n=e.Point;return Object.assign({},e,{ExtendedPoint:n,CURVE:t,nBitLength:n.Fn.BITS,nByteLength:n.Fn.BYTES})}function Gne(t){const{CURVE:e,curveOpts:n,hash:r,eddsaOpts:s}=Kne(t),i=Hne(e,n),o=Vne(i,r,s);return qne(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Yne=BigInt(1),g8=BigInt(2);BigInt(3);const Zne=BigInt(5),Qne=BigInt(8),dM=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),sW=(()=>({p:dM,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Qne,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")}))();function Jne(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=dM,a=t*t%i*t%i,c=dr(a,g8,i)*a%i,l=dr(c,Yne,i)*t%i,u=dr(l,Zne,i)*l%i,d=dr(u,e,i)*u%i,h=dr(d,n,i)*d%i,f=dr(h,r,i)*h%i,p=dr(f,s,i)*f%i,m=dr(p,s,i)*f%i,E=dr(m,e,i)*u%i;return{pow_p_5_8:dr(E,g8,i)*t%i,b2:a}}function Xne(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const y8=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function ere(t,e){const n=dM,r=Vr(e*e*e,n),s=Vr(r*r*e,n),i=Jne(t*s).pow_p_5_8;let o=Vr(t*r*i,n);const a=Vr(e*o*o,n),c=o,l=Vr(o*y8,n),u=a===t,d=a===Vr(-t,n),h=a===Vr(-t*y8,n);return u&&(o=c),(d||h)&&(o=l),Mne(o,n)&&(o=Vr(-o,n)),{isValid:u||d,value:o}}const tre=(()=>Am(sW.p,{isLE:!0}))(),nre=(()=>({...sW,Fp:tre,hash:_ne,adjustScalarBytes:Xne,uvRatio:ere}))(),gw=(()=>Gne(nre))();var hM={exports:{}};const fM=Ol(Xte);hM.exports;(function(t){(function(e,n){function r(P,y){if(!P)throw new Error(y||"Assertion failed")}function s(P,y){P.super_=y;var g=function(){};g.prototype=y.prototype,P.prototype=new g,P.prototype.constructor=P}function i(P,y,g){if(i.isBN(P))return P;this.negative=0,this.words=null,this.length=0,this.red=null,P!==null&&((y==="le"||y==="be")&&(g=y,y=10),this._init(P||0,y||10,g||"be"))}typeof e=="object"?e.exports=i:n.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=fM.Buffer}catch{}i.isBN=function(y){return y instanceof i?!0:y!==null&&typeof y=="object"&&y.constructor.wordSize===i.wordSize&&Array.isArray(y.words)},i.max=function(y,g){return y.cmp(g)>0?y:g},i.min=function(y,g){return y.cmp(g)<0?y:g},i.prototype._init=function(y,g,A){if(typeof y=="number")return this._initNumber(y,g,A);if(typeof y=="object")return this._initArray(y,g,A);g==="hex"&&(g=16),r(g===(g|0)&&g>=2&&g<=36),y=y.toString().replace(/\s+/g,"");var I=0;y[0]==="-"&&(I++,this.negative=1),I<y.length&&(g===16?this._parseHex(y,I,A):(this._parseBase(y,g,I),A==="le"&&this._initArray(this.toArray(),g,A)))},i.prototype._initNumber=function(y,g,A){y<0&&(this.negative=1,y=-y),y<67108864?(this.words=[y&67108863],this.length=1):y<4503599627370496?(this.words=[y&67108863,y/67108864&67108863],this.length=2):(r(y<9007199254740992),this.words=[y&67108863,y/67108864&67108863,1],this.length=3),A==="le"&&this._initArray(this.toArray(),g,A)},i.prototype._initArray=function(y,g,A){if(r(typeof y.length=="number"),y.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(y.length/3),this.words=new Array(this.length);for(var I=0;I<this.length;I++)this.words[I]=0;var T,R,B=0;if(A==="be")for(I=y.length-1,T=0;I>=0;I-=3)R=y[I]|y[I-1]<<8|y[I-2]<<16,this.words[T]|=R<<B&67108863,this.words[T+1]=R>>>26-B&67108863,B+=24,B>=26&&(B-=26,T++);else if(A==="le")for(I=0,T=0;I<y.length;I+=3)R=y[I]|y[I+1]<<8|y[I+2]<<16,this.words[T]|=R<<B&67108863,this.words[T+1]=R>>>26-B&67108863,B+=24,B>=26&&(B-=26,T++);return this._strip()};function a(P,y){var g=P.charCodeAt(y);if(g>=48&&g<=57)return g-48;if(g>=65&&g<=70)return g-55;if(g>=97&&g<=102)return g-87;r(!1,"Invalid character in "+P)}function c(P,y,g){var A=a(P,g);return g-1>=y&&(A|=a(P,g-1)<<4),A}i.prototype._parseHex=function(y,g,A){this.length=Math.ceil((y.length-g)/6),this.words=new Array(this.length);for(var I=0;I<this.length;I++)this.words[I]=0;var T=0,R=0,B;if(A==="be")for(I=y.length-1;I>=g;I-=2)B=c(y,g,I)<<T,this.words[R]|=B&67108863,T>=18?(T-=18,R+=1,this.words[R]|=B>>>26):T+=8;else{var O=y.length-g;for(I=O%2===0?g+1:g;I<y.length;I+=2)B=c(y,g,I)<<T,this.words[R]|=B&67108863,T>=18?(T-=18,R+=1,this.words[R]|=B>>>26):T+=8}this._strip()};function l(P,y,g,A){for(var I=0,T=0,R=Math.min(P.length,g),B=y;B<R;B++){var O=P.charCodeAt(B)-48;I*=A,O>=49?T=O-49+10:O>=17?T=O-17+10:T=O,r(O>=0&&T<A,"Invalid character"),I+=T}return I}i.prototype._parseBase=function(y,g,A){this.words=[0],this.length=1;for(var I=0,T=1;T<=67108863;T*=g)I++;I--,T=T/g|0;for(var R=y.length-A,B=R%I,O=Math.min(R,R-B)+A,S=0,z=A;z<O;z+=I)S=l(y,z,z+I,g),this.imuln(T),this.words[0]+S<67108864?this.words[0]+=S:this._iaddn(S);if(B!==0){var Y=1;for(S=l(y,z,y.length,g),z=0;z<B;z++)Y*=g;this.imuln(Y),this.words[0]+S<67108864?this.words[0]+=S:this._iaddn(S)}this._strip()},i.prototype.copy=function(y){y.words=new Array(this.length);for(var g=0;g<this.length;g++)y.words[g]=this.words[g];y.length=this.length,y.negative=this.negative,y.red=this.red};function u(P,y){P.words=y.words,P.length=y.length,P.negative=y.negative,P.red=y.red}if(i.prototype._move=function(y){u(y,this)},i.prototype.clone=function(){var y=new i(null);return this.copy(y),y},i.prototype._expand=function(y){for(;this.length<y;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch{i.prototype.inspect=d}else i.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(y,g){y=y||10,g=g|0||1;var A;if(y===16||y==="hex"){A="";for(var I=0,T=0,R=0;R<this.length;R++){var B=this.words[R],O=((B<<I|T)&16777215).toString(16);T=B>>>24-I&16777215,I+=2,I>=26&&(I-=26,R--),T!==0||R!==this.length-1?A=h[6-O.length]+O+A:A=O+A}for(T!==0&&(A=T.toString(16)+A);A.length%g!==0;)A="0"+A;return this.negative!==0&&(A="-"+A),A}if(y===(y|0)&&y>=2&&y<=36){var S=f[y],z=p[y];A="";var Y=this.clone();for(Y.negative=0;!Y.isZero();){var J=Y.modrn(z).toString(y);Y=Y.idivn(z),Y.isZero()?A=J+A:A=h[S-J.length]+J+A}for(this.isZero()&&(A="0"+A);A.length%g!==0;)A="0"+A;return this.negative!==0&&(A="-"+A),A}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var y=this.words[0];return this.length===2?y+=this.words[1]*67108864:this.length===3&&this.words[2]===1?y+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-y:y},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(y,g){return this.toArrayLike(o,y,g)}),i.prototype.toArray=function(y,g){return this.toArrayLike(Array,y,g)};var m=function(y,g){return y.allocUnsafe?y.allocUnsafe(g):new y(g)};i.prototype.toArrayLike=function(y,g,A){this._strip();var I=this.byteLength(),T=A||Math.max(1,I);r(I<=T,"byte array longer than desired length"),r(T>0,"Requested array length <= 0");var R=m(y,T),B=g==="le"?"LE":"BE";return this["_toArrayLike"+B](R,I),R},i.prototype._toArrayLikeLE=function(y,g){for(var A=0,I=0,T=0,R=0;T<this.length;T++){var B=this.words[T]<<R|I;y[A++]=B&255,A<y.length&&(y[A++]=B>>8&255),A<y.length&&(y[A++]=B>>16&255),R===6?(A<y.length&&(y[A++]=B>>24&255),I=0,R=0):(I=B>>>24,R+=2)}if(A<y.length)for(y[A++]=I;A<y.length;)y[A++]=0},i.prototype._toArrayLikeBE=function(y,g){for(var A=y.length-1,I=0,T=0,R=0;T<this.length;T++){var B=this.words[T]<<R|I;y[A--]=B&255,A>=0&&(y[A--]=B>>8&255),A>=0&&(y[A--]=B>>16&255),R===6?(A>=0&&(y[A--]=B>>24&255),I=0,R=0):(I=B>>>24,R+=2)}if(A>=0)for(y[A--]=I;A>=0;)y[A--]=0},Math.clz32?i.prototype._countBits=function(y){return 32-Math.clz32(y)}:i.prototype._countBits=function(y){var g=y,A=0;return g>=4096&&(A+=13,g>>>=13),g>=64&&(A+=7,g>>>=7),g>=8&&(A+=4,g>>>=4),g>=2&&(A+=2,g>>>=2),A+g},i.prototype._zeroBits=function(y){if(y===0)return 26;var g=y,A=0;return g&8191||(A+=13,g>>>=13),g&127||(A+=7,g>>>=7),g&15||(A+=4,g>>>=4),g&3||(A+=2,g>>>=2),g&1||A++,A},i.prototype.bitLength=function(){var y=this.words[this.length-1],g=this._countBits(y);return(this.length-1)*26+g};function E(P){for(var y=new Array(P.bitLength()),g=0;g<y.length;g++){var A=g/26|0,I=g%26;y[g]=P.words[A]>>>I&1}return y}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var y=0,g=0;g<this.length;g++){var A=this._zeroBits(this.words[g]);if(y+=A,A!==26)break}return y},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(y){return this.negative!==0?this.abs().inotn(y).iaddn(1):this.clone()},i.prototype.fromTwos=function(y){return this.testn(y-1)?this.notn(y).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(y){for(;this.length<y.length;)this.words[this.length++]=0;for(var g=0;g<y.length;g++)this.words[g]=this.words[g]|y.words[g];return this._strip()},i.prototype.ior=function(y){return r((this.negative|y.negative)===0),this.iuor(y)},i.prototype.or=function(y){return this.length>y.length?this.clone().ior(y):y.clone().ior(this)},i.prototype.uor=function(y){return this.length>y.length?this.clone().iuor(y):y.clone().iuor(this)},i.prototype.iuand=function(y){var g;this.length>y.length?g=y:g=this;for(var A=0;A<g.length;A++)this.words[A]=this.words[A]&y.words[A];return this.length=g.length,this._strip()},i.prototype.iand=function(y){return r((this.negative|y.negative)===0),this.iuand(y)},i.prototype.and=function(y){return this.length>y.length?this.clone().iand(y):y.clone().iand(this)},i.prototype.uand=function(y){return this.length>y.length?this.clone().iuand(y):y.clone().iuand(this)},i.prototype.iuxor=function(y){var g,A;this.length>y.length?(g=this,A=y):(g=y,A=this);for(var I=0;I<A.length;I++)this.words[I]=g.words[I]^A.words[I];if(this!==g)for(;I<g.length;I++)this.words[I]=g.words[I];return this.length=g.length,this._strip()},i.prototype.ixor=function(y){return r((this.negative|y.negative)===0),this.iuxor(y)},i.prototype.xor=function(y){return this.length>y.length?this.clone().ixor(y):y.clone().ixor(this)},i.prototype.uxor=function(y){return this.length>y.length?this.clone().iuxor(y):y.clone().iuxor(this)},i.prototype.inotn=function(y){r(typeof y=="number"&&y>=0);var g=Math.ceil(y/26)|0,A=y%26;this._expand(g),A>0&&g--;for(var I=0;I<g;I++)this.words[I]=~this.words[I]&67108863;return A>0&&(this.words[I]=~this.words[I]&67108863>>26-A),this._strip()},i.prototype.notn=function(y){return this.clone().inotn(y)},i.prototype.setn=function(y,g){r(typeof y=="number"&&y>=0);var A=y/26|0,I=y%26;return this._expand(A+1),g?this.words[A]=this.words[A]|1<<I:this.words[A]=this.words[A]&~(1<<I),this._strip()},i.prototype.iadd=function(y){var g;if(this.negative!==0&&y.negative===0)return this.negative=0,g=this.isub(y),this.negative^=1,this._normSign();if(this.negative===0&&y.negative!==0)return y.negative=0,g=this.isub(y),y.negative=1,g._normSign();var A,I;this.length>y.length?(A=this,I=y):(A=y,I=this);for(var T=0,R=0;R<I.length;R++)g=(A.words[R]|0)+(I.words[R]|0)+T,this.words[R]=g&67108863,T=g>>>26;for(;T!==0&&R<A.length;R++)g=(A.words[R]|0)+T,this.words[R]=g&67108863,T=g>>>26;if(this.length=A.length,T!==0)this.words[this.length]=T,this.length++;else if(A!==this)for(;R<A.length;R++)this.words[R]=A.words[R];return this},i.prototype.add=function(y){var g;return y.negative!==0&&this.negative===0?(y.negative=0,g=this.sub(y),y.negative^=1,g):y.negative===0&&this.negative!==0?(this.negative=0,g=y.sub(this),this.negative=1,g):this.length>y.length?this.clone().iadd(y):y.clone().iadd(this)},i.prototype.isub=function(y){if(y.negative!==0){y.negative=0;var g=this.iadd(y);return y.negative=1,g._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(y),this.negative=1,this._normSign();var A=this.cmp(y);if(A===0)return this.negative=0,this.length=1,this.words[0]=0,this;var I,T;A>0?(I=this,T=y):(I=y,T=this);for(var R=0,B=0;B<T.length;B++)g=(I.words[B]|0)-(T.words[B]|0)+R,R=g>>26,this.words[B]=g&67108863;for(;R!==0&&B<I.length;B++)g=(I.words[B]|0)+R,R=g>>26,this.words[B]=g&67108863;if(R===0&&B<I.length&&I!==this)for(;B<I.length;B++)this.words[B]=I.words[B];return this.length=Math.max(this.length,B),I!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(y){return this.clone().isub(y)};function b(P,y,g){g.negative=y.negative^P.negative;var A=P.length+y.length|0;g.length=A,A=A-1|0;var I=P.words[0]|0,T=y.words[0]|0,R=I*T,B=R&67108863,O=R/67108864|0;g.words[0]=B;for(var S=1;S<A;S++){for(var z=O>>>26,Y=O&67108863,J=Math.min(S,y.length-1),ae=Math.max(0,S-P.length+1);ae<=J;ae++){var pe=S-ae|0;I=P.words[pe]|0,T=y.words[ae]|0,R=I*T+Y,z+=R/67108864|0,Y=R&67108863}g.words[S]=Y|0,O=z|0}return O!==0?g.words[S]=O|0:g.length--,g._strip()}var x=function(y,g,A){var I=y.words,T=g.words,R=A.words,B=0,O,S,z,Y=I[0]|0,J=Y&8191,ae=Y>>>13,pe=I[1]|0,ve=pe&8191,de=pe>>>13,$e=I[2]|0,Te=$e&8191,dt=$e>>>13,vt=I[3]|0,rt=vt&8191,cn=vt>>>13,_i=I[4]|0,Vt=_i&8191,Dn=_i>>>13,aa=I[5]|0,dn=aa&8191,Cn=aa>>>13,_r=I[6]|0,gn=_r&8191,hn=_r>>>13,Ys=I[7]|0,Pn=Ys&8191,qn=Ys>>>13,No=I[8]|0,Gn=No&8191,j=No>>>13,C=I[9]|0,k=C&8191,V=C>>>13,X=T[0]|0,ne=X&8191,ce=X>>>13,Et=T[1]|0,yt=Et&8191,ft=Et>>>13,Wn=T[2]|0,ht=Wn&8191,Ir=Wn>>>13,z5=T[3]|0,Nr=z5&8191,Tr=z5>>>13,W5=T[4]|0,kr=W5&8191,Pr=W5>>>13,H5=T[5]|0,Rr=H5&8191,Or=H5>>>13,V5=T[6]|0,Mr=V5&8191,Dr=V5>>>13,K5=T[7]|0,Br=K5&8191,Lr=K5>>>13,q5=T[8]|0,Ur=q5&8191,Fr=q5>>>13,G5=T[9]|0,jr=G5&8191,$r=G5>>>13;A.negative=y.negative^g.negative,A.length=19,O=Math.imul(J,ne),S=Math.imul(J,ce),S=S+Math.imul(ae,ne)|0,z=Math.imul(ae,ce);var ZI=(B+O|0)+((S&8191)<<13)|0;B=(z+(S>>>13)|0)+(ZI>>>26)|0,ZI&=67108863,O=Math.imul(ve,ne),S=Math.imul(ve,ce),S=S+Math.imul(de,ne)|0,z=Math.imul(de,ce),O=O+Math.imul(J,yt)|0,S=S+Math.imul(J,ft)|0,S=S+Math.imul(ae,yt)|0,z=z+Math.imul(ae,ft)|0;var QI=(B+O|0)+((S&8191)<<13)|0;B=(z+(S>>>13)|0)+(QI>>>26)|0,QI&=67108863,O=Math.imul(Te,ne),S=Math.imul(Te,ce),S=S+Math.imul(dt,ne)|0,z=Math.imul(dt,ce),O=O+Math.imul(ve,yt)|0,S=S+Math.imul(ve,ft)|0,S=S+Math.imul(de,yt)|0,z=z+Math.imul(de,ft)|0,O=O+Math.imul(J,ht)|0,S=S+Math.imul(J,Ir)|0,S=S+Math.imul(ae,ht)|0,z=z+Math.imul(ae,Ir)|0;var JI=(B+O|0)+((S&8191)<<13)|0;B=(z+(S>>>13)|0)+(JI>>>26)|0,JI&=67108863,O=Math.imul(rt,ne),S=Math.imul(rt,ce),S=S+Math.imul(cn,ne)|0,z=Math.imul(cn,ce),O=O+Math.imul(Te,yt)|0,S=S+Math.imul(Te,ft)|0,S=S+Math.imul(dt,yt)|0,z=z+Math.imul(dt,ft)|0,O=O+Math.imul(ve,ht)|0,S=S+Math.imul(ve,Ir)|0,S=S+Math.imul(de,ht)|0,z=z+Math.imul(de,Ir)|0,O=O+Math.imul(J,Nr)|0,S=S+Math.imul(J,Tr)|0,S=S+Math.imul(ae,Nr)|0,z=z+Math.imul(ae,Tr)|0;var XI=(B+O|0)+((S&8191)<<13)|0;B=(z+(S>>>13)|0)+(XI>>>26)|0,XI&=67108863,O=Math.imul(Vt,ne),S=Math.imul(Vt,ce),S=S+Math.imul(Dn,ne)|0,z=Math.imul(Dn,ce),O=O+Math.imul(rt,yt)|0,S=S+Math.imul(rt,ft)|0,S=S+Math.imul(cn,yt)|0,z=z+Math.imul(cn,ft)|0,O=O+Math.imul(Te,ht)|0,S=S+Math.imul(Te,Ir)|0,S=S+Math.imul(dt,ht)|0,z=z+Math.imul(dt,Ir)|0,O=O+Math.imul(ve,Nr)|0,S=S+Math.imul(ve,Tr)|0,S=S+Math.imul(de,Nr)|0,z=z+Math.imul(de,Tr)|0,O=O+Math.imul(J,kr)|0,S=S+Math.imul(J,Pr)|0,S=S+Math.imul(ae,kr)|0,z=z+Math.imul(ae,Pr)|0;var eN=(B+O|0)+((S&8191)<<13)|0;B=(z+(S>>>13)|0)+(eN>>>26)|0,eN&=67108863,O=Math.imul(dn,ne),S=Math.imul(dn,ce),S=S+Math.imul(Cn,ne)|0,z=Math.imul(Cn,ce),O=O+Math.imul(Vt,yt)|0,S=S+Math.imul(Vt,ft)|0,S=S+Math.imul(Dn,yt)|0,z=z+Math.imul(Dn,ft)|0,O=O+Math.imul(rt,ht)|0,S=S+Math.imul(rt,Ir)|0,S=S+Math.imul(cn,ht)|0,z=z+Math.imul(cn,Ir)|0,O=O+Math.imul(Te,Nr)|0,S=S+Math.imul(Te,Tr)|0,S=S+Math.imul(dt,Nr)|0,z=z+Math.imul(dt,Tr)|0,O=O+Math.imul(ve,kr)|0,S=S+Math.imul(ve,Pr)|0,S=S+Math.imul(de,kr)|0,z=z+Math.imul(de,Pr)|0,O=O+Math.imul(J,Rr)|0,S=S+Math.imul(J,Or)|0,S=S+Math.imul(ae,Rr)|0,z=z+Math.imul(ae,Or)|0;var tN=(B+O|0)+((S&8191)<<13)|0;B=(z+(S>>>13)|0)+(tN>>>26)|0,tN&=67108863,O=Math.imul(gn,ne),S=Math.imul(gn,ce),S=S+Math.imul(hn,ne)|0,z=Math.imul(hn,ce),O=O+Math.imul(dn,yt)|0,S=S+Math.imul(dn,ft)|0,S=S+Math.imul(Cn,yt)|0,z=z+Math.imul(Cn,ft)|0,O=O+Math.imul(Vt,ht)|0,S=S+Math.imul(Vt,Ir)|0,S=S+Math.imul(Dn,ht)|0,z=z+Math.imul(Dn,Ir)|0,O=O+Math.imul(rt,Nr)|0,S=S+Math.imul(rt,Tr)|0,S=S+Math.imul(cn,Nr)|0,z=z+Math.imul(cn,Tr)|0,O=O+Math.imul(Te,kr)|0,S=S+Math.imul(Te,Pr)|0,S=S+Math.imul(dt,kr)|0,z=z+Math.imul(dt,Pr)|0,O=O+Math.imul(ve,Rr)|0,S=S+Math.imul(ve,Or)|0,S=S+Math.imul(de,Rr)|0,z=z+Math.imul(de,Or)|0,O=O+Math.imul(J,Mr)|0,S=S+Math.imul(J,Dr)|0,S=S+Math.imul(ae,Mr)|0,z=z+Math.imul(ae,Dr)|0;var nN=(B+O|0)+((S&8191)<<13)|0;B=(z+(S>>>13)|0)+(nN>>>26)|0,nN&=67108863,O=Math.imul(Pn,ne),S=Math.imul(Pn,ce),S=S+Math.imul(qn,ne)|0,z=Math.imul(qn,ce),O=O+Math.imul(gn,yt)|0,S=S+Math.imul(gn,ft)|0,S=S+Math.imul(hn,yt)|0,z=z+Math.imul(hn,ft)|0,O=O+Math.imul(dn,ht)|0,S=S+Math.imul(dn,Ir)|0,S=S+Math.imul(Cn,ht)|0,z=z+Math.imul(Cn,Ir)|0,O=O+Math.imul(Vt,Nr)|0,S=S+Math.imul(Vt,Tr)|0,S=S+Math.imul(Dn,Nr)|0,z=z+Math.imul(Dn,Tr)|0,O=O+Math.imul(rt,kr)|0,S=S+Math.imul(rt,Pr)|0,S=S+Math.imul(cn,kr)|0,z=z+Math.imul(cn,Pr)|0,O=O+Math.imul(Te,Rr)|0,S=S+Math.imul(Te,Or)|0,S=S+Math.imul(dt,Rr)|0,z=z+Math.imul(dt,Or)|0,O=O+Math.imul(ve,Mr)|0,S=S+Math.imul(ve,Dr)|0,S=S+Math.imul(de,Mr)|0,z=z+Math.imul(de,Dr)|0,O=O+Math.imul(J,Br)|0,S=S+Math.imul(J,Lr)|0,S=S+Math.imul(ae,Br)|0,z=z+Math.imul(ae,Lr)|0;var rN=(B+O|0)+((S&8191)<<13)|0;B=(z+(S>>>13)|0)+(rN>>>26)|0,rN&=67108863,O=Math.imul(Gn,ne),S=Math.imul(Gn,ce),S=S+Math.imul(j,ne)|0,z=Math.imul(j,ce),O=O+Math.imul(Pn,yt)|0,S=S+Math.imul(Pn,ft)|0,S=S+Math.imul(qn,yt)|0,z=z+Math.imul(qn,ft)|0,O=O+Math.imul(gn,ht)|0,S=S+Math.imul(gn,Ir)|0,S=S+Math.imul(hn,ht)|0,z=z+Math.imul(hn,Ir)|0,O=O+Math.imul(dn,Nr)|0,S=S+Math.imul(dn,Tr)|0,S=S+Math.imul(Cn,Nr)|0,z=z+Math.imul(Cn,Tr)|0,O=O+Math.imul(Vt,kr)|0,S=S+Math.imul(Vt,Pr)|0,S=S+Math.imul(Dn,kr)|0,z=z+Math.imul(Dn,Pr)|0,O=O+Math.imul(rt,Rr)|0,S=S+Math.imul(rt,Or)|0,S=S+Math.imul(cn,Rr)|0,z=z+Math.imul(cn,Or)|0,O=O+Math.imul(Te,Mr)|0,S=S+Math.imul(Te,Dr)|0,S=S+Math.imul(dt,Mr)|0,z=z+Math.imul(dt,Dr)|0,O=O+Math.imul(ve,Br)|0,S=S+Math.imul(ve,Lr)|0,S=S+Math.imul(de,Br)|0,z=z+Math.imul(de,Lr)|0,O=O+Math.imul(J,Ur)|0,S=S+Math.imul(J,Fr)|0,S=S+Math.imul(ae,Ur)|0,z=z+Math.imul(ae,Fr)|0;var sN=(B+O|0)+((S&8191)<<13)|0;B=(z+(S>>>13)|0)+(sN>>>26)|0,sN&=67108863,O=Math.imul(k,ne),S=Math.imul(k,ce),S=S+Math.imul(V,ne)|0,z=Math.imul(V,ce),O=O+Math.imul(Gn,yt)|0,S=S+Math.imul(Gn,ft)|0,S=S+Math.imul(j,yt)|0,z=z+Math.imul(j,ft)|0,O=O+Math.imul(Pn,ht)|0,S=S+Math.imul(Pn,Ir)|0,S=S+Math.imul(qn,ht)|0,z=z+Math.imul(qn,Ir)|0,O=O+Math.imul(gn,Nr)|0,S=S+Math.imul(gn,Tr)|0,S=S+Math.imul(hn,Nr)|0,z=z+Math.imul(hn,Tr)|0,O=O+Math.imul(dn,kr)|0,S=S+Math.imul(dn,Pr)|0,S=S+Math.imul(Cn,kr)|0,z=z+Math.imul(Cn,Pr)|0,O=O+Math.imul(Vt,Rr)|0,S=S+Math.imul(Vt,Or)|0,S=S+Math.imul(Dn,Rr)|0,z=z+Math.imul(Dn,Or)|0,O=O+Math.imul(rt,Mr)|0,S=S+Math.imul(rt,Dr)|0,S=S+Math.imul(cn,Mr)|0,z=z+Math.imul(cn,Dr)|0,O=O+Math.imul(Te,Br)|0,S=S+Math.imul(Te,Lr)|0,S=S+Math.imul(dt,Br)|0,z=z+Math.imul(dt,Lr)|0,O=O+Math.imul(ve,Ur)|0,S=S+Math.imul(ve,Fr)|0,S=S+Math.imul(de,Ur)|0,z=z+Math.imul(de,Fr)|0,O=O+Math.imul(J,jr)|0,S=S+Math.imul(J,$r)|0,S=S+Math.imul(ae,jr)|0,z=z+Math.imul(ae,$r)|0;var iN=(B+O|0)+((S&8191)<<13)|0;B=(z+(S>>>13)|0)+(iN>>>26)|0,iN&=67108863,O=Math.imul(k,yt),S=Math.imul(k,ft),S=S+Math.imul(V,yt)|0,z=Math.imul(V,ft),O=O+Math.imul(Gn,ht)|0,S=S+Math.imul(Gn,Ir)|0,S=S+Math.imul(j,ht)|0,z=z+Math.imul(j,Ir)|0,O=O+Math.imul(Pn,Nr)|0,S=S+Math.imul(Pn,Tr)|0,S=S+Math.imul(qn,Nr)|0,z=z+Math.imul(qn,Tr)|0,O=O+Math.imul(gn,kr)|0,S=S+Math.imul(gn,Pr)|0,S=S+Math.imul(hn,kr)|0,z=z+Math.imul(hn,Pr)|0,O=O+Math.imul(dn,Rr)|0,S=S+Math.imul(dn,Or)|0,S=S+Math.imul(Cn,Rr)|0,z=z+Math.imul(Cn,Or)|0,O=O+Math.imul(Vt,Mr)|0,S=S+Math.imul(Vt,Dr)|0,S=S+Math.imul(Dn,Mr)|0,z=z+Math.imul(Dn,Dr)|0,O=O+Math.imul(rt,Br)|0,S=S+Math.imul(rt,Lr)|0,S=S+Math.imul(cn,Br)|0,z=z+Math.imul(cn,Lr)|0,O=O+Math.imul(Te,Ur)|0,S=S+Math.imul(Te,Fr)|0,S=S+Math.imul(dt,Ur)|0,z=z+Math.imul(dt,Fr)|0,O=O+Math.imul(ve,jr)|0,S=S+Math.imul(ve,$r)|0,S=S+Math.imul(de,jr)|0,z=z+Math.imul(de,$r)|0;var oN=(B+O|0)+((S&8191)<<13)|0;B=(z+(S>>>13)|0)+(oN>>>26)|0,oN&=67108863,O=Math.imul(k,ht),S=Math.imul(k,Ir),S=S+Math.imul(V,ht)|0,z=Math.imul(V,Ir),O=O+Math.imul(Gn,Nr)|0,S=S+Math.imul(Gn,Tr)|0,S=S+Math.imul(j,Nr)|0,z=z+Math.imul(j,Tr)|0,O=O+Math.imul(Pn,kr)|0,S=S+Math.imul(Pn,Pr)|0,S=S+Math.imul(qn,kr)|0,z=z+Math.imul(qn,Pr)|0,O=O+Math.imul(gn,Rr)|0,S=S+Math.imul(gn,Or)|0,S=S+Math.imul(hn,Rr)|0,z=z+Math.imul(hn,Or)|0,O=O+Math.imul(dn,Mr)|0,S=S+Math.imul(dn,Dr)|0,S=S+Math.imul(Cn,Mr)|0,z=z+Math.imul(Cn,Dr)|0,O=O+Math.imul(Vt,Br)|0,S=S+Math.imul(Vt,Lr)|0,S=S+Math.imul(Dn,Br)|0,z=z+Math.imul(Dn,Lr)|0,O=O+Math.imul(rt,Ur)|0,S=S+Math.imul(rt,Fr)|0,S=S+Math.imul(cn,Ur)|0,z=z+Math.imul(cn,Fr)|0,O=O+Math.imul(Te,jr)|0,S=S+Math.imul(Te,$r)|0,S=S+Math.imul(dt,jr)|0,z=z+Math.imul(dt,$r)|0;var aN=(B+O|0)+((S&8191)<<13)|0;B=(z+(S>>>13)|0)+(aN>>>26)|0,aN&=67108863,O=Math.imul(k,Nr),S=Math.imul(k,Tr),S=S+Math.imul(V,Nr)|0,z=Math.imul(V,Tr),O=O+Math.imul(Gn,kr)|0,S=S+Math.imul(Gn,Pr)|0,S=S+Math.imul(j,kr)|0,z=z+Math.imul(j,Pr)|0,O=O+Math.imul(Pn,Rr)|0,S=S+Math.imul(Pn,Or)|0,S=S+Math.imul(qn,Rr)|0,z=z+Math.imul(qn,Or)|0,O=O+Math.imul(gn,Mr)|0,S=S+Math.imul(gn,Dr)|0,S=S+Math.imul(hn,Mr)|0,z=z+Math.imul(hn,Dr)|0,O=O+Math.imul(dn,Br)|0,S=S+Math.imul(dn,Lr)|0,S=S+Math.imul(Cn,Br)|0,z=z+Math.imul(Cn,Lr)|0,O=O+Math.imul(Vt,Ur)|0,S=S+Math.imul(Vt,Fr)|0,S=S+Math.imul(Dn,Ur)|0,z=z+Math.imul(Dn,Fr)|0,O=O+Math.imul(rt,jr)|0,S=S+Math.imul(rt,$r)|0,S=S+Math.imul(cn,jr)|0,z=z+Math.imul(cn,$r)|0;var cN=(B+O|0)+((S&8191)<<13)|0;B=(z+(S>>>13)|0)+(cN>>>26)|0,cN&=67108863,O=Math.imul(k,kr),S=Math.imul(k,Pr),S=S+Math.imul(V,kr)|0,z=Math.imul(V,Pr),O=O+Math.imul(Gn,Rr)|0,S=S+Math.imul(Gn,Or)|0,S=S+Math.imul(j,Rr)|0,z=z+Math.imul(j,Or)|0,O=O+Math.imul(Pn,Mr)|0,S=S+Math.imul(Pn,Dr)|0,S=S+Math.imul(qn,Mr)|0,z=z+Math.imul(qn,Dr)|0,O=O+Math.imul(gn,Br)|0,S=S+Math.imul(gn,Lr)|0,S=S+Math.imul(hn,Br)|0,z=z+Math.imul(hn,Lr)|0,O=O+Math.imul(dn,Ur)|0,S=S+Math.imul(dn,Fr)|0,S=S+Math.imul(Cn,Ur)|0,z=z+Math.imul(Cn,Fr)|0,O=O+Math.imul(Vt,jr)|0,S=S+Math.imul(Vt,$r)|0,S=S+Math.imul(Dn,jr)|0,z=z+Math.imul(Dn,$r)|0;var lN=(B+O|0)+((S&8191)<<13)|0;B=(z+(S>>>13)|0)+(lN>>>26)|0,lN&=67108863,O=Math.imul(k,Rr),S=Math.imul(k,Or),S=S+Math.imul(V,Rr)|0,z=Math.imul(V,Or),O=O+Math.imul(Gn,Mr)|0,S=S+Math.imul(Gn,Dr)|0,S=S+Math.imul(j,Mr)|0,z=z+Math.imul(j,Dr)|0,O=O+Math.imul(Pn,Br)|0,S=S+Math.imul(Pn,Lr)|0,S=S+Math.imul(qn,Br)|0,z=z+Math.imul(qn,Lr)|0,O=O+Math.imul(gn,Ur)|0,S=S+Math.imul(gn,Fr)|0,S=S+Math.imul(hn,Ur)|0,z=z+Math.imul(hn,Fr)|0,O=O+Math.imul(dn,jr)|0,S=S+Math.imul(dn,$r)|0,S=S+Math.imul(Cn,jr)|0,z=z+Math.imul(Cn,$r)|0;var uN=(B+O|0)+((S&8191)<<13)|0;B=(z+(S>>>13)|0)+(uN>>>26)|0,uN&=67108863,O=Math.imul(k,Mr),S=Math.imul(k,Dr),S=S+Math.imul(V,Mr)|0,z=Math.imul(V,Dr),O=O+Math.imul(Gn,Br)|0,S=S+Math.imul(Gn,Lr)|0,S=S+Math.imul(j,Br)|0,z=z+Math.imul(j,Lr)|0,O=O+Math.imul(Pn,Ur)|0,S=S+Math.imul(Pn,Fr)|0,S=S+Math.imul(qn,Ur)|0,z=z+Math.imul(qn,Fr)|0,O=O+Math.imul(gn,jr)|0,S=S+Math.imul(gn,$r)|0,S=S+Math.imul(hn,jr)|0,z=z+Math.imul(hn,$r)|0;var dN=(B+O|0)+((S&8191)<<13)|0;B=(z+(S>>>13)|0)+(dN>>>26)|0,dN&=67108863,O=Math.imul(k,Br),S=Math.imul(k,Lr),S=S+Math.imul(V,Br)|0,z=Math.imul(V,Lr),O=O+Math.imul(Gn,Ur)|0,S=S+Math.imul(Gn,Fr)|0,S=S+Math.imul(j,Ur)|0,z=z+Math.imul(j,Fr)|0,O=O+Math.imul(Pn,jr)|0,S=S+Math.imul(Pn,$r)|0,S=S+Math.imul(qn,jr)|0,z=z+Math.imul(qn,$r)|0;var hN=(B+O|0)+((S&8191)<<13)|0;B=(z+(S>>>13)|0)+(hN>>>26)|0,hN&=67108863,O=Math.imul(k,Ur),S=Math.imul(k,Fr),S=S+Math.imul(V,Ur)|0,z=Math.imul(V,Fr),O=O+Math.imul(Gn,jr)|0,S=S+Math.imul(Gn,$r)|0,S=S+Math.imul(j,jr)|0,z=z+Math.imul(j,$r)|0;var fN=(B+O|0)+((S&8191)<<13)|0;B=(z+(S>>>13)|0)+(fN>>>26)|0,fN&=67108863,O=Math.imul(k,jr),S=Math.imul(k,$r),S=S+Math.imul(V,jr)|0,z=Math.imul(V,$r);var pN=(B+O|0)+((S&8191)<<13)|0;return B=(z+(S>>>13)|0)+(pN>>>26)|0,pN&=67108863,R[0]=ZI,R[1]=QI,R[2]=JI,R[3]=XI,R[4]=eN,R[5]=tN,R[6]=nN,R[7]=rN,R[8]=sN,R[9]=iN,R[10]=oN,R[11]=aN,R[12]=cN,R[13]=lN,R[14]=uN,R[15]=dN,R[16]=hN,R[17]=fN,R[18]=pN,B!==0&&(R[19]=B,A.length++),A};Math.imul||(x=b);function w(P,y,g){g.negative=y.negative^P.negative,g.length=P.length+y.length;for(var A=0,I=0,T=0;T<g.length-1;T++){var R=I;I=0;for(var B=A&67108863,O=Math.min(T,y.length-1),S=Math.max(0,T-P.length+1);S<=O;S++){var z=T-S,Y=P.words[z]|0,J=y.words[S]|0,ae=Y*J,pe=ae&67108863;R=R+(ae/67108864|0)|0,pe=pe+B|0,B=pe&67108863,R=R+(pe>>>26)|0,I+=R>>>26,R&=67108863}g.words[T]=B,A=R,R=I}return A!==0?g.words[T]=A:g.length--,g._strip()}function N(P,y,g){return w(P,y,g)}i.prototype.mulTo=function(y,g){var A,I=this.length+y.length;return this.length===10&&y.length===10?A=x(this,y,g):I<63?A=b(this,y,g):I<1024?A=w(this,y,g):A=N(this,y,g),A},i.prototype.mul=function(y){var g=new i(null);return g.words=new Array(this.length+y.length),this.mulTo(y,g)},i.prototype.mulf=function(y){var g=new i(null);return g.words=new Array(this.length+y.length),N(this,y,g)},i.prototype.imul=function(y){return this.clone().mulTo(y,this)},i.prototype.imuln=function(y){var g=y<0;g&&(y=-y),r(typeof y=="number"),r(y<67108864);for(var A=0,I=0;I<this.length;I++){var T=(this.words[I]|0)*y,R=(T&67108863)+(A&67108863);A>>=26,A+=T/67108864|0,A+=R>>>26,this.words[I]=R&67108863}return A!==0&&(this.words[I]=A,this.length++),this.length=y===0?1:this.length,g?this.ineg():this},i.prototype.muln=function(y){return this.clone().imuln(y)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(y){var g=E(y);if(g.length===0)return new i(1);for(var A=this,I=0;I<g.length&&g[I]===0;I++,A=A.sqr());if(++I<g.length)for(var T=A.sqr();I<g.length;I++,T=T.sqr())g[I]!==0&&(A=A.mul(T));return A},i.prototype.iushln=function(y){r(typeof y=="number"&&y>=0);var g=y%26,A=(y-g)/26,I=67108863>>>26-g<<26-g,T;if(g!==0){var R=0;for(T=0;T<this.length;T++){var B=this.words[T]&I,O=(this.words[T]|0)-B<<g;this.words[T]=O|R,R=B>>>26-g}R&&(this.words[T]=R,this.length++)}if(A!==0){for(T=this.length-1;T>=0;T--)this.words[T+A]=this.words[T];for(T=0;T<A;T++)this.words[T]=0;this.length+=A}return this._strip()},i.prototype.ishln=function(y){return r(this.negative===0),this.iushln(y)},i.prototype.iushrn=function(y,g,A){r(typeof y=="number"&&y>=0);var I;g?I=(g-g%26)/26:I=0;var T=y%26,R=Math.min((y-T)/26,this.length),B=67108863^67108863>>>T<<T,O=A;if(I-=R,I=Math.max(0,I),O){for(var S=0;S<R;S++)O.words[S]=this.words[S];O.length=R}if(R!==0)if(this.length>R)for(this.length-=R,S=0;S<this.length;S++)this.words[S]=this.words[S+R];else this.words[0]=0,this.length=1;var z=0;for(S=this.length-1;S>=0&&(z!==0||S>=I);S--){var Y=this.words[S]|0;this.words[S]=z<<26-T|Y>>>T,z=Y&B}return O&&z!==0&&(O.words[O.length++]=z),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(y,g,A){return r(this.negative===0),this.iushrn(y,g,A)},i.prototype.shln=function(y){return this.clone().ishln(y)},i.prototype.ushln=function(y){return this.clone().iushln(y)},i.prototype.shrn=function(y){return this.clone().ishrn(y)},i.prototype.ushrn=function(y){return this.clone().iushrn(y)},i.prototype.testn=function(y){r(typeof y=="number"&&y>=0);var g=y%26,A=(y-g)/26,I=1<<g;if(this.length<=A)return!1;var T=this.words[A];return!!(T&I)},i.prototype.imaskn=function(y){r(typeof y=="number"&&y>=0);var g=y%26,A=(y-g)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=A)return this;if(g!==0&&A++,this.length=Math.min(A,this.length),g!==0){var I=67108863^67108863>>>g<<g;this.words[this.length-1]&=I}return this._strip()},i.prototype.maskn=function(y){return this.clone().imaskn(y)},i.prototype.iaddn=function(y){return r(typeof y=="number"),r(y<67108864),y<0?this.isubn(-y):this.negative!==0?this.length===1&&(this.words[0]|0)<=y?(this.words[0]=y-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(y),this.negative=1,this):this._iaddn(y)},i.prototype._iaddn=function(y){this.words[0]+=y;for(var g=0;g<this.length&&this.words[g]>=67108864;g++)this.words[g]-=67108864,g===this.length-1?this.words[g+1]=1:this.words[g+1]++;return this.length=Math.max(this.length,g+1),this},i.prototype.isubn=function(y){if(r(typeof y=="number"),r(y<67108864),y<0)return this.iaddn(-y);if(this.negative!==0)return this.negative=0,this.iaddn(y),this.negative=1,this;if(this.words[0]-=y,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var g=0;g<this.length&&this.words[g]<0;g++)this.words[g]+=67108864,this.words[g+1]-=1;return this._strip()},i.prototype.addn=function(y){return this.clone().iaddn(y)},i.prototype.subn=function(y){return this.clone().isubn(y)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(y,g,A){var I=y.length+A,T;this._expand(I);var R,B=0;for(T=0;T<y.length;T++){R=(this.words[T+A]|0)+B;var O=(y.words[T]|0)*g;R-=O&67108863,B=(R>>26)-(O/67108864|0),this.words[T+A]=R&67108863}for(;T<this.length-A;T++)R=(this.words[T+A]|0)+B,B=R>>26,this.words[T+A]=R&67108863;if(B===0)return this._strip();for(r(B===-1),B=0,T=0;T<this.length;T++)R=-(this.words[T]|0)+B,B=R>>26,this.words[T]=R&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(y,g){var A=this.length-y.length,I=this.clone(),T=y,R=T.words[T.length-1]|0,B=this._countBits(R);A=26-B,A!==0&&(T=T.ushln(A),I.iushln(A),R=T.words[T.length-1]|0);var O=I.length-T.length,S;if(g!=="mod"){S=new i(null),S.length=O+1,S.words=new Array(S.length);for(var z=0;z<S.length;z++)S.words[z]=0}var Y=I.clone()._ishlnsubmul(T,1,O);Y.negative===0&&(I=Y,S&&(S.words[O]=1));for(var J=O-1;J>=0;J--){var ae=(I.words[T.length+J]|0)*67108864+(I.words[T.length+J-1]|0);for(ae=Math.min(ae/R|0,67108863),I._ishlnsubmul(T,ae,J);I.negative!==0;)ae--,I.negative=0,I._ishlnsubmul(T,1,J),I.isZero()||(I.negative^=1);S&&(S.words[J]=ae)}return S&&S._strip(),I._strip(),g!=="div"&&A!==0&&I.iushrn(A),{div:S||null,mod:I}},i.prototype.divmod=function(y,g,A){if(r(!y.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var I,T,R;return this.negative!==0&&y.negative===0?(R=this.neg().divmod(y,g),g!=="mod"&&(I=R.div.neg()),g!=="div"&&(T=R.mod.neg(),A&&T.negative!==0&&T.iadd(y)),{div:I,mod:T}):this.negative===0&&y.negative!==0?(R=this.divmod(y.neg(),g),g!=="mod"&&(I=R.div.neg()),{div:I,mod:R.mod}):this.negative&y.negative?(R=this.neg().divmod(y.neg(),g),g!=="div"&&(T=R.mod.neg(),A&&T.negative!==0&&T.isub(y)),{div:R.div,mod:T}):y.length>this.length||this.cmp(y)<0?{div:new i(0),mod:this}:y.length===1?g==="div"?{div:this.divn(y.words[0]),mod:null}:g==="mod"?{div:null,mod:new i(this.modrn(y.words[0]))}:{div:this.divn(y.words[0]),mod:new i(this.modrn(y.words[0]))}:this._wordDiv(y,g)},i.prototype.div=function(y){return this.divmod(y,"div",!1).div},i.prototype.mod=function(y){return this.divmod(y,"mod",!1).mod},i.prototype.umod=function(y){return this.divmod(y,"mod",!0).mod},i.prototype.divRound=function(y){var g=this.divmod(y);if(g.mod.isZero())return g.div;var A=g.div.negative!==0?g.mod.isub(y):g.mod,I=y.ushrn(1),T=y.andln(1),R=A.cmp(I);return R<0||T===1&&R===0?g.div:g.div.negative!==0?g.div.isubn(1):g.div.iaddn(1)},i.prototype.modrn=function(y){var g=y<0;g&&(y=-y),r(y<=67108863);for(var A=(1<<26)%y,I=0,T=this.length-1;T>=0;T--)I=(A*I+(this.words[T]|0))%y;return g?-I:I},i.prototype.modn=function(y){return this.modrn(y)},i.prototype.idivn=function(y){var g=y<0;g&&(y=-y),r(y<=67108863);for(var A=0,I=this.length-1;I>=0;I--){var T=(this.words[I]|0)+A*67108864;this.words[I]=T/y|0,A=T%y}return this._strip(),g?this.ineg():this},i.prototype.divn=function(y){return this.clone().idivn(y)},i.prototype.egcd=function(y){r(y.negative===0),r(!y.isZero());var g=this,A=y.clone();g.negative!==0?g=g.umod(y):g=g.clone();for(var I=new i(1),T=new i(0),R=new i(0),B=new i(1),O=0;g.isEven()&&A.isEven();)g.iushrn(1),A.iushrn(1),++O;for(var S=A.clone(),z=g.clone();!g.isZero();){for(var Y=0,J=1;!(g.words[0]&J)&&Y<26;++Y,J<<=1);if(Y>0)for(g.iushrn(Y);Y-- >0;)(I.isOdd()||T.isOdd())&&(I.iadd(S),T.isub(z)),I.iushrn(1),T.iushrn(1);for(var ae=0,pe=1;!(A.words[0]&pe)&&ae<26;++ae,pe<<=1);if(ae>0)for(A.iushrn(ae);ae-- >0;)(R.isOdd()||B.isOdd())&&(R.iadd(S),B.isub(z)),R.iushrn(1),B.iushrn(1);g.cmp(A)>=0?(g.isub(A),I.isub(R),T.isub(B)):(A.isub(g),R.isub(I),B.isub(T))}return{a:R,b:B,gcd:A.iushln(O)}},i.prototype._invmp=function(y){r(y.negative===0),r(!y.isZero());var g=this,A=y.clone();g.negative!==0?g=g.umod(y):g=g.clone();for(var I=new i(1),T=new i(0),R=A.clone();g.cmpn(1)>0&&A.cmpn(1)>0;){for(var B=0,O=1;!(g.words[0]&O)&&B<26;++B,O<<=1);if(B>0)for(g.iushrn(B);B-- >0;)I.isOdd()&&I.iadd(R),I.iushrn(1);for(var S=0,z=1;!(A.words[0]&z)&&S<26;++S,z<<=1);if(S>0)for(A.iushrn(S);S-- >0;)T.isOdd()&&T.iadd(R),T.iushrn(1);g.cmp(A)>=0?(g.isub(A),I.isub(T)):(A.isub(g),T.isub(I))}var Y;return g.cmpn(1)===0?Y=I:Y=T,Y.cmpn(0)<0&&Y.iadd(y),Y},i.prototype.gcd=function(y){if(this.isZero())return y.abs();if(y.isZero())return this.abs();var g=this.clone(),A=y.clone();g.negative=0,A.negative=0;for(var I=0;g.isEven()&&A.isEven();I++)g.iushrn(1),A.iushrn(1);do{for(;g.isEven();)g.iushrn(1);for(;A.isEven();)A.iushrn(1);var T=g.cmp(A);if(T<0){var R=g;g=A,A=R}else if(T===0||A.cmpn(1)===0)break;g.isub(A)}while(!0);return A.iushln(I)},i.prototype.invm=function(y){return this.egcd(y).a.umod(y)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(y){return this.words[0]&y},i.prototype.bincn=function(y){r(typeof y=="number");var g=y%26,A=(y-g)/26,I=1<<g;if(this.length<=A)return this._expand(A+1),this.words[A]|=I,this;for(var T=I,R=A;T!==0&&R<this.length;R++){var B=this.words[R]|0;B+=T,T=B>>>26,B&=67108863,this.words[R]=B}return T!==0&&(this.words[R]=T,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(y){var g=y<0;if(this.negative!==0&&!g)return-1;if(this.negative===0&&g)return 1;this._strip();var A;if(this.length>1)A=1;else{g&&(y=-y),r(y<=67108863,"Number is too big");var I=this.words[0]|0;A=I===y?0:I<y?-1:1}return this.negative!==0?-A|0:A},i.prototype.cmp=function(y){if(this.negative!==0&&y.negative===0)return-1;if(this.negative===0&&y.negative!==0)return 1;var g=this.ucmp(y);return this.negative!==0?-g|0:g},i.prototype.ucmp=function(y){if(this.length>y.length)return 1;if(this.length<y.length)return-1;for(var g=0,A=this.length-1;A>=0;A--){var I=this.words[A]|0,T=y.words[A]|0;if(I!==T){I<T?g=-1:I>T&&(g=1);break}}return g},i.prototype.gtn=function(y){return this.cmpn(y)===1},i.prototype.gt=function(y){return this.cmp(y)===1},i.prototype.gten=function(y){return this.cmpn(y)>=0},i.prototype.gte=function(y){return this.cmp(y)>=0},i.prototype.ltn=function(y){return this.cmpn(y)===-1},i.prototype.lt=function(y){return this.cmp(y)===-1},i.prototype.lten=function(y){return this.cmpn(y)<=0},i.prototype.lte=function(y){return this.cmp(y)<=0},i.prototype.eqn=function(y){return this.cmpn(y)===0},i.prototype.eq=function(y){return this.cmp(y)===0},i.red=function(y){return new H(y)},i.prototype.toRed=function(y){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),y.convertTo(this)._forceRed(y)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(y){return this.red=y,this},i.prototype.forceRed=function(y){return r(!this.red,"Already a number in reduction context"),this._forceRed(y)},i.prototype.redAdd=function(y){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,y)},i.prototype.redIAdd=function(y){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,y)},i.prototype.redSub=function(y){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,y)},i.prototype.redISub=function(y){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,y)},i.prototype.redShl=function(y){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,y)},i.prototype.redMul=function(y){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.mul(this,y)},i.prototype.redIMul=function(y){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.imul(this,y)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(y){return r(this.red&&!y.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,y)};var _={k256:null,p224:null,p192:null,p25519:null};function L(P,y){this.name=P,this.p=new i(y,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}L.prototype._tmp=function(){var y=new i(null);return y.words=new Array(Math.ceil(this.n/13)),y},L.prototype.ireduce=function(y){var g=y,A;do this.split(g,this.tmp),g=this.imulK(g),g=g.iadd(this.tmp),A=g.bitLength();while(A>this.n);var I=A<this.n?-1:g.ucmp(this.p);return I===0?(g.words[0]=0,g.length=1):I>0?g.isub(this.p):g.strip!==void 0?g.strip():g._strip(),g},L.prototype.split=function(y,g){y.iushrn(this.n,0,g)},L.prototype.imulK=function(y){return y.imul(this.k)};function U(){L.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(U,L),U.prototype.split=function(y,g){for(var A=4194303,I=Math.min(y.length,9),T=0;T<I;T++)g.words[T]=y.words[T];if(g.length=I,y.length<=9){y.words[0]=0,y.length=1;return}var R=y.words[9];for(g.words[g.length++]=R&A,T=10;T<y.length;T++){var B=y.words[T]|0;y.words[T-10]=(B&A)<<4|R>>>22,R=B}R>>>=22,y.words[T-10]=R,R===0&&y.length>10?y.length-=10:y.length-=9},U.prototype.imulK=function(y){y.words[y.length]=0,y.words[y.length+1]=0,y.length+=2;for(var g=0,A=0;A<y.length;A++){var I=y.words[A]|0;g+=I*977,y.words[A]=g&67108863,g=I*64+(g/67108864|0)}return y.words[y.length-1]===0&&(y.length--,y.words[y.length-1]===0&&y.length--),y};function F(){L.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(F,L);function M(){L.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(M,L);function W(){L.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(W,L),W.prototype.imulK=function(y){for(var g=0,A=0;A<y.length;A++){var I=(y.words[A]|0)*19+g,T=I&67108863;I>>>=26,y.words[A]=T,g=I}return g!==0&&(y.words[y.length++]=g),y},i._prime=function(y){if(_[y])return _[y];var g;if(y==="k256")g=new U;else if(y==="p224")g=new F;else if(y==="p192")g=new M;else if(y==="p25519")g=new W;else throw new Error("Unknown prime "+y);return _[y]=g,g};function H(P){if(typeof P=="string"){var y=i._prime(P);this.m=y.p,this.prime=y}else r(P.gtn(1),"modulus must be greater than 1"),this.m=P,this.prime=null}H.prototype._verify1=function(y){r(y.negative===0,"red works only with positives"),r(y.red,"red works only with red numbers")},H.prototype._verify2=function(y,g){r((y.negative|g.negative)===0,"red works only with positives"),r(y.red&&y.red===g.red,"red works only with red numbers")},H.prototype.imod=function(y){return this.prime?this.prime.ireduce(y)._forceRed(this):(u(y,y.umod(this.m)._forceRed(this)),y)},H.prototype.neg=function(y){return y.isZero()?y.clone():this.m.sub(y)._forceRed(this)},H.prototype.add=function(y,g){this._verify2(y,g);var A=y.add(g);return A.cmp(this.m)>=0&&A.isub(this.m),A._forceRed(this)},H.prototype.iadd=function(y,g){this._verify2(y,g);var A=y.iadd(g);return A.cmp(this.m)>=0&&A.isub(this.m),A},H.prototype.sub=function(y,g){this._verify2(y,g);var A=y.sub(g);return A.cmpn(0)<0&&A.iadd(this.m),A._forceRed(this)},H.prototype.isub=function(y,g){this._verify2(y,g);var A=y.isub(g);return A.cmpn(0)<0&&A.iadd(this.m),A},H.prototype.shl=function(y,g){return this._verify1(y),this.imod(y.ushln(g))},H.prototype.imul=function(y,g){return this._verify2(y,g),this.imod(y.imul(g))},H.prototype.mul=function(y,g){return this._verify2(y,g),this.imod(y.mul(g))},H.prototype.isqr=function(y){return this.imul(y,y.clone())},H.prototype.sqr=function(y){return this.mul(y,y)},H.prototype.sqrt=function(y){if(y.isZero())return y.clone();var g=this.m.andln(3);if(r(g%2===1),g===3){var A=this.m.add(new i(1)).iushrn(2);return this.pow(y,A)}for(var I=this.m.subn(1),T=0;!I.isZero()&&I.andln(1)===0;)T++,I.iushrn(1);r(!I.isZero());var R=new i(1).toRed(this),B=R.redNeg(),O=this.m.subn(1).iushrn(1),S=this.m.bitLength();for(S=new i(2*S*S).toRed(this);this.pow(S,O).cmp(B)!==0;)S.redIAdd(B);for(var z=this.pow(S,I),Y=this.pow(y,I.addn(1).iushrn(1)),J=this.pow(y,I),ae=T;J.cmp(R)!==0;){for(var pe=J,ve=0;pe.cmp(R)!==0;ve++)pe=pe.redSqr();r(ve<ae);var de=this.pow(z,new i(1).iushln(ae-ve-1));Y=Y.redMul(de),z=de.redSqr(),J=J.redMul(z),ae=ve}return Y},H.prototype.invm=function(y){var g=y._invmp(this.m);return g.negative!==0?(g.negative=0,this.imod(g).redNeg()):this.imod(g)},H.prototype.pow=function(y,g){if(g.isZero())return new i(1).toRed(this);if(g.cmpn(1)===0)return y.clone();var A=4,I=new Array(1<<A);I[0]=new i(1).toRed(this),I[1]=y;for(var T=2;T<I.length;T++)I[T]=this.mul(I[T-1],y);var R=I[0],B=0,O=0,S=g.bitLength()%26;for(S===0&&(S=26),T=g.length-1;T>=0;T--){for(var z=g.words[T],Y=S-1;Y>=0;Y--){var J=z>>Y&1;if(R!==I[0]&&(R=this.sqr(R)),J===0&&B===0){O=0;continue}B<<=1,B|=J,O++,!(O!==A&&(T!==0||Y!==0))&&(R=this.mul(R,I[B]),O=0,B=0)}S=26}return R},H.prototype.convertTo=function(y){var g=y.umod(this.m);return g===y?g.clone():g},H.prototype.convertFrom=function(y){var g=y.clone();return g.red=null,g},i.mont=function(y){return new K(y)};function K(P){H.call(this,P),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(K,H),K.prototype.convertTo=function(y){return this.imod(y.ushln(this.shift))},K.prototype.convertFrom=function(y){var g=this.imod(y.mul(this.rinv));return g.red=null,g},K.prototype.imul=function(y,g){if(y.isZero()||g.isZero())return y.words[0]=0,y.length=1,y;var A=y.imul(g),I=A.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=A.isub(I).iushrn(this.shift),R=T;return T.cmp(this.m)>=0?R=T.isub(this.m):T.cmpn(0)<0&&(R=T.iadd(this.m)),R._forceRed(this)},K.prototype.mul=function(y,g){if(y.isZero()||g.isZero())return new i(0)._forceRed(this);var A=y.mul(g),I=A.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=A.isub(I).iushrn(this.shift),R=T;return T.cmp(this.m)>=0?R=T.isub(this.m):T.cmpn(0)<0&&(R=T.iadd(this.m)),R._forceRed(this)},K.prototype.invm=function(y){var g=this.imod(y._invmp(this.m).mul(this.r2));return g._forceRed(this)}})(t,Cc)})(hM);var iW=hM.exports;const w8=Qh(iW);var GP={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var n=fM,r=n.Buffer;function s(o,a){for(var c in o)a[c]=o[c]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(s(n,e),e.Buffer=i);function i(o,a,c){return r(o,a,c)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,c)},i.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=r(o);return a!==void 0?typeof c=="string"?l.fill(a,c):l.fill(a):l.fill(0),l},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(GP,GP.exports);var rre=GP.exports,zA=rre.Buffer;function sre(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var s=t.charAt(r),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=r}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(f){if((Array.isArray(f)||f instanceof Uint8Array)&&(f=zA.from(f)),!zA.isBuffer(f))throw new TypeError("Expected Buffer");if(f.length===0)return"";for(var p=0,m=0,E=0,b=f.length;E!==b&&f[E]===0;)E++,p++;for(var x=(b-E)*l+1>>>0,w=new Uint8Array(x);E!==b;){for(var N=f[E],_=0,L=x-1;(N!==0||_<m)&&L!==-1;L--,_++)N+=256*w[L]>>>0,w[L]=N%o>>>0,N=N/o>>>0;if(N!==0)throw new Error("Non-zero carry");m=_,E++}for(var U=x-m;U!==x&&w[U]===0;)U++;for(var F=a.repeat(p);U<x;++U)F+=t.charAt(w[U]);return F}function d(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return zA.alloc(0);for(var p=0,m=0,E=0;f[p]===a;)m++,p++;for(var b=(f.length-p)*c+1>>>0,x=new Uint8Array(b);p<f.length;){var w=f.charCodeAt(p);if(w>255)return;var N=e[w];if(N===255)return;for(var _=0,L=b-1;(N!==0||_<E)&&L!==-1;L--,_++)N+=o*x[L]>>>0,x[L]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");E=_,p++}for(var U=b-E;U!==b&&x[U]===0;)U++;var F=zA.allocUnsafe(m+(b-U));F.fill(0,0,m);for(var M=m;U!==b;)F[M++]=x[U++];return F}function h(f){var p=d(f);if(p)return p;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:d,decode:h}}var ire=sre,ore=ire,are="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",oW=ore(are);const Ls=Qh(oW),b8=Uz;var Bs={};function Au(t,e,n){return e<=t&&t<=n}function I2(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function cre(t){for(var e=String(t),n=e.length,r=0,s=[];r<n;){var i=e.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===n-1)s.push(65533);else{var o=t.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=i&1023,c=o&1023;s.push(65536+(a<<10)+c),r+=1}else s.push(65533)}r+=1}return s}function lre(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var MC=-1;function pM(t){this.tokens=[].slice.call(t)}pM.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():MC},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var Ly=-1;function YN(t,e){if(t)throw TypeError("Decoder error");return e||65533}var DC="utf-8";function BC(t,e){if(!(this instanceof BC))return new BC(t,e);if(t=t!==void 0?String(t).toLowerCase():DC,t!==DC)throw new Error("Encoding not supported. Only utf-8 is supported");e=I2(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}BC.prototype={decode:function(e,n){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),n=I2(n),this._streaming||(this._decoder=new ure({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!n.stream;for(var s=new pM(r),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==Ly);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===Ly)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),lre(i)}};function LC(t,e){if(!(this instanceof LC))return new LC(t,e);if(t=t!==void 0?String(t).toLowerCase():DC,t!==DC)throw new Error("Encoding not supported. Only utf-8 is supported");e=I2(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}LC.prototype={encode:function(e,n){e=e?String(e):"",n=I2(n),this._streaming||(this._encoder=new dre(this._options)),this._streaming=!!n.stream;for(var r=[],s=new pM(cre(e)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Ly);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Ly;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function ure(t){var e=t.fatal,n=0,r=0,s=0,i=128,o=191;this.handler=function(a,c){if(c===MC&&s!==0)return s=0,YN(e);if(c===MC)return Ly;if(s===0){if(Au(c,0,127))return c;if(Au(c,194,223))s=1,n=c-192;else if(Au(c,224,239))c===224&&(i=160),c===237&&(o=159),s=2,n=c-224;else if(Au(c,240,244))c===240&&(i=144),c===244&&(o=143),s=3,n=c-240;else return YN(e);return n=n<<6*s,null}if(!Au(c,i,o))return n=s=r=0,i=128,o=191,a.prepend(c),YN(e);if(i=128,o=191,r+=1,n+=c-128<<6*(s-r),r!==s)return null;var l=n;return n=s=r=0,l}}function dre(t){t.fatal,this.handler=function(e,n){if(n===MC)return Ly;if(Au(n,0,127))return n;var r,s;Au(n,128,2047)?(r=1,s=192):Au(n,2048,65535)?(r=2,s=224):Au(n,65536,1114111)&&(r=3,s=240);for(var i=[(n>>6*r)+s];r>0;){var o=n>>6*(r-1);i.push(128|o&63),r-=1}return i}}const hre=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:BC,TextEncoder:LC},Symbol.toStringTag,{value:"Module"})),fre=Ol(hre);var pre=Cc&&Cc.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),mre=Cc&&Cc.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ml=Cc&&Cc.__decorate||function(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},gre=Cc&&Cc.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.hasOwnProperty.call(t,n)&&pre(e,t,n);return mre(e,t),e},aW=Cc&&Cc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bs,"__esModule",{value:!0});var cW=Bs.deserializeUnchecked=pW=Bs.deserialize=fW=Bs.serialize=Bs.BinaryReader=Bs.BinaryWriter=Bs.BorshError=Bs.baseDecode=Bs.baseEncode=void 0;const yh=aW(iW),lW=aW(oW),yre=gre(fre),wre=typeof TextDecoder!="function"?yre.TextDecoder:TextDecoder,bre=new wre("utf-8",{fatal:!0});function vre(t){return typeof t=="string"&&(t=Ge.from(t,"utf8")),lW.default.encode(Ge.from(t))}Bs.baseEncode=vre;function Ere(t){return Ge.from(lW.default.decode(t))}Bs.baseDecode=Ere;const ZN=1024;class Bi extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Bs.BorshError=Bi;class uW{constructor(){this.buf=Ge.alloc(ZN),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Ge.concat([this.buf,Ge.alloc(ZN)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Ge.from(new yh.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Ge.from(new yh.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Ge.from(new yh.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Ge.from(new yh.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Ge.concat([Ge.from(this.buf.subarray(0,this.length)),e,Ge.alloc(ZN)]),this.length+=e.length}writeString(e){this.maybeResize();const n=Ge.from(e,"utf8");this.writeU32(n.length),this.writeBuffer(n)}writeFixedArray(e){this.writeBuffer(Ge.from(e))}writeArray(e,n){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),n(r)}toArray(){return this.buf.subarray(0,this.length)}}Bs.BinaryWriter=uW;function Dl(t,e,n){const r=n.value;n.value=function(...s){try{return r.apply(this,s)}catch(i){if(i instanceof RangeError){const o=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new Bi("Reached the end of buffer when deserializing")}throw i}}}class ra{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new yh.default(e,"le")}readU128(){const e=this.readBuffer(16);return new yh.default(e,"le")}readU256(){const e=this.readBuffer(32);return new yh.default(e,"le")}readU512(){const e=this.readBuffer(64);return new yh.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new Bi(`Expected buffer length ${e} isn't within bounds`);const n=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,n}readString(){const e=this.readU32(),n=this.readBuffer(e);try{return bre.decode(n)}catch(r){throw new Bi(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const n=this.readU32(),r=Array();for(let s=0;s<n;++s)r.push(e());return r}}Ml([Dl],ra.prototype,"readU8",null);Ml([Dl],ra.prototype,"readU16",null);Ml([Dl],ra.prototype,"readU32",null);Ml([Dl],ra.prototype,"readU64",null);Ml([Dl],ra.prototype,"readU128",null);Ml([Dl],ra.prototype,"readU256",null);Ml([Dl],ra.prototype,"readU512",null);Ml([Dl],ra.prototype,"readString",null);Ml([Dl],ra.prototype,"readFixedArray",null);Ml([Dl],ra.prototype,"readArray",null);Bs.BinaryReader=ra;function dW(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Mf(t,e,n,r,s){try{if(typeof r=="string")s[`write${dW(r)}`](n);else if(r instanceof Array)if(typeof r[0]=="number"){if(n.length!==r[0])throw new Bi(`Expecting byte array of length ${r[0]}, but got ${n.length} bytes`);s.writeFixedArray(n)}else if(r.length===2&&typeof r[1]=="number"){if(n.length!==r[1])throw new Bi(`Expecting byte array of length ${r[1]}, but got ${n.length} bytes`);for(let i=0;i<r[1];i++)Mf(t,null,n[i],r[0],s)}else s.writeArray(n,i=>{Mf(t,e,i,r[0],s)});else if(r.kind!==void 0)switch(r.kind){case"option":{n==null?s.writeU8(0):(s.writeU8(1),Mf(t,e,n,r.type,s));break}case"map":{s.writeU32(n.size),n.forEach((i,o)=>{Mf(t,e,o,r.key,s),Mf(t,e,i,r.value,s)});break}default:throw new Bi(`FieldType ${r} unrecognized`)}else hW(t,n,s)}catch(i){throw i instanceof Bi&&i.addToFieldPath(e),i}}function hW(t,e,n){if(typeof e.borshSerialize=="function"){e.borshSerialize(n);return}const r=t.get(e.constructor);if(!r)throw new Bi(`Class ${e.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([s,i])=>{Mf(t,s,e[s],i,n)});else if(r.kind==="enum"){const s=e[r.field];for(let i=0;i<r.values.length;++i){const[o,a]=r.values[i];if(o===s){n.writeU8(i),Mf(t,o,e[o],a,n);break}}}else throw new Bi(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function Are(t,e,n=uW){const r=new n;return hW(t,e,r),r.toArray()}var fW=Bs.serialize=Are;function Df(t,e,n,r){try{if(typeof n=="string")return r[`read${dW(n)}`]();if(n instanceof Array){if(typeof n[0]=="number")return r.readFixedArray(n[0]);if(typeof n[1]=="number"){const s=[];for(let i=0;i<n[1];i++)s.push(Df(t,null,n[0],r));return s}else return r.readArray(()=>Df(t,e,n[0],r))}if(n.kind==="option")return r.readU8()?Df(t,e,n.type,r):void 0;if(n.kind==="map"){let s=new Map;const i=r.readU32();for(let o=0;o<i;o++){const a=Df(t,e,n.key,r),c=Df(t,e,n.value,r);s.set(a,c)}return s}return mM(t,n,r)}catch(s){throw s instanceof Bi&&s.addToFieldPath(e),s}}function mM(t,e,n){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(n);const r=t.get(e);if(!r)throw new Bi(`Class ${e.name} is missing in schema`);if(r.kind==="struct"){const s={};for(const[i,o]of t.get(e).fields)s[i]=Df(t,i,o,n);return new e(s)}if(r.kind==="enum"){const s=n.readU8();if(s>=r.values.length)throw new Bi(`Enum index: ${s} is out of range`);const[i,o]=r.values[s],a=Df(t,i,o,n);return new e({[i]:a})}throw new Bi(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function xre(t,e,n,r=ra){const s=new r(n),i=mM(t,e,s);if(s.offset<n.length)throw new Bi(`Unexpected ${n.length-s.offset} bytes after deserialized data`);return i}var pW=Bs.deserialize=xre;function Sre(t,e,n,r=ra){const s=new r(n);return mM(t,e,s)}cW=Bs.deserializeUnchecked=Sre;var oe={};Object.defineProperty(oe,"__esModule",{value:!0});oe.s16=oe.s8=oe.nu64be=oe.u48be=oe.u40be=oe.u32be=oe.u24be=oe.u16be=Ps=oe.nu64=oe.u48=oe.u40=Ke=oe.u32=oe.u24=Ia=oe.u16=jt=oe.u8=Ph=oe.offset=oe.greedy=oe.Constant=oe.UTF8=oe.CString=oe.Blob=oe.Boolean=oe.BitField=oe.BitStructure=oe.VariantLayout=oe.Union=oe.UnionLayoutDiscriminator=oe.UnionDiscriminator=oe.Structure=oe.Sequence=oe.DoubleBE=oe.Double=oe.FloatBE=oe.Float=oe.NearInt64BE=oe.NearInt64=oe.NearUInt64BE=oe.NearUInt64=oe.IntBE=oe.Int=oe.UIntBE=oe.UInt=oe.OffsetLayout=oe.GreedyCount=oe.ExternalLayout=oe.bindConstructorLayout=oe.nameWithProperty=oe.Layout=oe.uint8ArrayToBuffer=oe.checkUint8Array=void 0;oe.constant=oe.utf8=oe.cstr=On=oe.blob=oe.unionLayoutDiscriminator=oe.union=js=oe.seq=oe.bits=qe=oe.struct=oe.f64be=oe.f64=oe.f32be=oe.f32=oe.ns64be=oe.s48be=oe.s40be=oe.s32be=oe.s24be=oe.s16be=zo=oe.ns64=oe.s48=oe.s40=oe.s32=oe.s24=void 0;const gM=fM;function yw(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}oe.checkUint8Array=yw;function on(t){return yw(t),gM.Buffer.from(t.buffer,t.byteOffset,t.length)}oe.uint8ArrayToBuffer=on;class xn{constructor(e,n){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=n}makeDestinationObject(){return{}}getSpan(e,n){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const n=Object.create(this.constructor.prototype);return Object.assign(n,this),n.property=e,n}fromArray(e){}}oe.Layout=xn;function yM(t,e){return e.property?t+"["+e.property+"]":t}oe.nameWithProperty=yM;function Cre(t,e){if(typeof t!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof xn))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(n,r){return e.encode(this,n,r)},writable:!0}),Object.defineProperty(t,"decode",{value(n,r){return e.decode(n,r)},writable:!0})}oe.bindConstructorLayout=Cre;class po extends xn{isCount(){throw new Error("ExternalLayout is abstract")}}oe.ExternalLayout=po;class mW extends po{constructor(e=1,n){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,n),this.elementSpan=e}isCount(){return!0}decode(e,n=0){yw(e);const r=e.length-n;return Math.floor(r/this.elementSpan)}encode(e,n,r){return 0}}oe.GreedyCount=mW;class wM extends po{constructor(e,n=0,r){if(!(e instanceof xn))throw new TypeError("layout must be a Layout");if(!Number.isInteger(n))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=n}isCount(){return this.layout instanceof Da||this.layout instanceof Ec}decode(e,n=0){return this.layout.decode(e,n+this.offset)}encode(e,n,r=0){return this.layout.encode(e,n,r+this.offset)}}oe.OffsetLayout=wM;class Da extends xn{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return on(e).readUIntLE(n,this.span)}encode(e,n,r=0){return on(n).writeUIntLE(e,r,this.span),this.span}}oe.UInt=Da;class Ec extends xn{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return on(e).readUIntBE(n,this.span)}encode(e,n,r=0){return on(n).writeUIntBE(e,r,this.span),this.span}}oe.UIntBE=Ec;class xm extends xn{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return on(e).readIntLE(n,this.span)}encode(e,n,r=0){return on(n).writeIntLE(e,r,this.span),this.span}}oe.Int=xm;class ww extends xn{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return on(e).readIntBE(n,this.span)}encode(e,n,r=0){return on(n).writeIntBE(e,r,this.span),this.span}}oe.IntBE=ww;const YP=Math.pow(2,32);function N2(t){const e=Math.floor(t/YP),n=t-e*YP;return{hi32:e,lo32:n}}function T2(t,e){return t*YP+e}class gW extends xn{constructor(e){super(8,e)}decode(e,n=0){const r=on(e),s=r.readUInt32LE(n),i=r.readUInt32LE(n+4);return T2(i,s)}encode(e,n,r=0){const s=N2(e),i=on(n);return i.writeUInt32LE(s.lo32,r),i.writeUInt32LE(s.hi32,r+4),8}}oe.NearUInt64=gW;class yW extends xn{constructor(e){super(8,e)}decode(e,n=0){const r=on(e),s=r.readUInt32BE(n),i=r.readUInt32BE(n+4);return T2(s,i)}encode(e,n,r=0){const s=N2(e),i=on(n);return i.writeUInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}}oe.NearUInt64BE=yW;class wW extends xn{constructor(e){super(8,e)}decode(e,n=0){const r=on(e),s=r.readUInt32LE(n),i=r.readInt32LE(n+4);return T2(i,s)}encode(e,n,r=0){const s=N2(e),i=on(n);return i.writeUInt32LE(s.lo32,r),i.writeInt32LE(s.hi32,r+4),8}}oe.NearInt64=wW;class bW extends xn{constructor(e){super(8,e)}decode(e,n=0){const r=on(e),s=r.readInt32BE(n),i=r.readUInt32BE(n+4);return T2(s,i)}encode(e,n,r=0){const s=N2(e),i=on(n);return i.writeInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}}oe.NearInt64BE=bW;class vW extends xn{constructor(e){super(4,e)}decode(e,n=0){return on(e).readFloatLE(n)}encode(e,n,r=0){return on(n).writeFloatLE(e,r),4}}oe.Float=vW;class EW extends xn{constructor(e){super(4,e)}decode(e,n=0){return on(e).readFloatBE(n)}encode(e,n,r=0){return on(n).writeFloatBE(e,r),4}}oe.FloatBE=EW;class AW extends xn{constructor(e){super(8,e)}decode(e,n=0){return on(e).readDoubleLE(n)}encode(e,n,r=0){return on(n).writeDoubleLE(e,r),8}}oe.Double=AW;class xW extends xn{constructor(e){super(8,e)}decode(e,n=0){return on(e).readDoubleBE(n)}encode(e,n,r=0){return on(n).writeDoubleBE(e,r),8}}oe.DoubleBE=xW;class SW extends xn{constructor(e,n,r){if(!(e instanceof xn))throw new TypeError("elementLayout must be a Layout");if(!(n instanceof po&&n.isCount()||Number.isInteger(n)&&0<=n))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(n instanceof po)&&0<e.span&&(s=n*e.span),super(s,r),this.elementLayout=e,this.count=n}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0,s=this.count;if(s instanceof po&&(s=s.decode(e,n)),0<this.elementLayout.span)r=s*this.elementLayout.span;else{let i=0;for(;i<s;)r+=this.elementLayout.getSpan(e,n+r),++i}return r}decode(e,n=0){const r=[];let s=0,i=this.count;for(i instanceof po&&(i=i.decode(e,n));s<i;)r.push(this.elementLayout.decode(e,n)),n+=this.elementLayout.getSpan(e,n),s+=1;return r}encode(e,n,r=0){const s=this.elementLayout,i=e.reduce((o,a)=>o+s.encode(a,n,r+o),0);return this.count instanceof po&&this.count.encode(e.length,n,r),i}}oe.Sequence=SW;class CW extends xn{constructor(e,n,r){if(!(Array.isArray(e)&&e.reduce((i,o)=>i&&o instanceof xn,!0)))throw new TypeError("fields must be array of Layout instances");typeof n=="boolean"&&r===void 0&&(r=n,n=void 0);for(const i of e)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=e.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,n),this.fields=e,this.decodePrefixes=!!r}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((s,i)=>{const o=i.getSpan(e,n);return n+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,n=0){yw(e);const r=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(r[s.property]=s.decode(e,n)),n+=s.getSpan(e,n),this.decodePrefixes&&e.length===n)break;return r}encode(e,n,r=0){const s=r;let i=0,o=0;for(const a of this.fields){let c=a.span;if(o=0<c?c:0,a.property!==void 0){const l=e[a.property];l!==void 0&&(o=a.encode(l,n,r),0>c&&(c=a.getSpan(n,r)))}i=r,r+=c}return i+o-s}fromArray(e){const n=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<e.length&&(n[r.property]=e.shift());return n}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const n of this.fields)if(n.property===e)return n}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let n=0;for(const r of this.fields){if(r.property===e)return n;0>r.span?n=-1:0<=n&&(n+=r.span)}}}oe.Structure=CW;class bM{constructor(e){this.property=e}decode(e,n){throw new Error("UnionDiscriminator is abstract")}encode(e,n,r){throw new Error("UnionDiscriminator is abstract")}}oe.UnionDiscriminator=bM;class UC extends bM{constructor(e,n){if(!(e instanceof po&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(n||e.property||"variant"),this.layout=e}decode(e,n){return this.layout.decode(e,n)}encode(e,n,r){return this.layout.encode(e,n,r)}}oe.UnionLayoutDiscriminator=UC;class vM extends xn{constructor(e,n,r){let s;if(e instanceof Da||e instanceof Ec)s=new UC(new wM(e));else if(e instanceof po&&e.isCount())s=new UC(e);else if(e instanceof bM)s=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(n===void 0&&(n=null),!(n===null||n instanceof xn))throw new TypeError("defaultLayout must be null or a Layout");if(n!==null){if(0>n.span)throw new Error("defaultLayout must have constant span");n.property===void 0&&(n=n.replicate("content"))}let i=-1;n&&(i=n.span,0<=i&&(e instanceof Da||e instanceof Ec)&&(i+=s.layout.span)),super(i,r),this.discriminator=s,this.usesPrefixDiscriminator=e instanceof Da||e instanceof Ec,this.defaultLayout=n,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,n=0){if(0<=this.span)return this.span;const r=this.getVariant(e,n);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,n)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const n=this.registry[e[this.discriminator.property]];if(n&&(!n.layout||n.property&&Object.prototype.hasOwnProperty.call(e,n.property)))return n}else for(const n in this.registry){const r=this.registry[n];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,n=0){let r;const s=this.discriminator,i=s.decode(e,n),o=this.registry[i];if(o===void 0){const a=this.defaultLayout;let c=0;this.usesPrefixDiscriminator&&(c=s.layout.span),r=this.makeDestinationObject(),r[s.property]=i,r[a.property]=a.decode(e,n+c)}else r=o.decode(e,n);return r}encode(e,n,r=0){const s=this.getSourceVariant(e);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=i.layout.span),i.encode(e[i.property],n,r),a+o.encode(e[o.property],n,r+a)}return s.encode(e,n,r)}addVariant(e,n,r){const s=new _W(this,e,n,r);return this.registry[e]=s,s}getVariant(e,n=0){let r;return e instanceof Uint8Array?r=this.discriminator.decode(e,n):r=e,this.registry[r]}}oe.Union=vM;class _W extends xn{constructor(e,n,r,s){if(!(e instanceof vM))throw new TypeError("union must be a Union");if(!Number.isInteger(n)||0>n)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&s===void 0&&(s=r,r=null),r){if(!(r instanceof xn))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=e.span;0>e.span&&(i=r?r.span:0,0<=i&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span)),super(i,s),this.union=e,this.variant=n,this.layout=r||null}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(e,n+r)),r+s}decode(e,n=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(e,n))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,n+s):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,n,r=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,n,r);let i=s;if(this.layout&&(this.layout.encode(e[this.property],n,r+s),i+=this.layout.getSpan(n,r+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}oe.VariantLayout=_W;function Eg(t){return 0>t&&(t+=4294967296),t}class EM extends xn{constructor(e,n,r){if(!(e instanceof Da||e instanceof Ec))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof n=="string"&&r===void 0&&(r=n,n=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!n,this.fields=[];let s=0;this._packedSetValue=function(i){return s=Eg(i),this},this._packedGetValue=function(){return s}}decode(e,n=0){const r=this.makeDestinationObject(),s=this.word.decode(e,n);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(r[i.property]=i.decode(e));return r}encode(e,n,r=0){const s=this.word.decode(n,r);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const o=e[i.property];o!==void 0&&i.encode(o)}return this.word.encode(this._packedGetValue(),n,r)}addField(e,n){const r=new AM(this,e,n);return this.fields.push(r),r}addBoolean(e){const n=new IW(this,e);return this.fields.push(n),n}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const n of this.fields)if(n.property===e)return n}}oe.BitStructure=EM;class AM{constructor(e,n,r){if(!(e instanceof EM))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(n)||0>=n)throw new TypeError("bits must be positive integer");const s=8*e.span,i=e.fields.reduce((o,a)=>o+a.bits,0);if(n+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=e,this.bits=n,this.valueMask=(1<<n)-1,n===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-n),this.wordMask=Eg(this.valueMask<<this.start),this.property=r}decode(e,n){const r=this.container._packedGetValue();return Eg(r&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==Eg(e&this.valueMask))throw new TypeError(yM("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const n=this.container._packedGetValue(),r=Eg(e<<this.start);this.container._packedSetValue(Eg(n&~this.wordMask)|r)}}oe.BitField=AM;let IW=class extends AM{constructor(e,n){super(e,1,n)}decode(e,n){return!!super.decode(e,n)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};oe.Boolean=IW;let NW=class extends xn{constructor(e,n){if(!(e instanceof po&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof po||(r=e),super(r,n),this.length=e}getSpan(e,n){let r=this.span;return 0>r&&(r=this.length.decode(e,n)),r}decode(e,n=0){let r=this.span;return 0>r&&(r=this.length.decode(e,n)),on(e).slice(n,n+r)}encode(e,n,r){let s=this.length;if(this.length instanceof po&&(s=e.length),!(e instanceof Uint8Array&&s===e.length))throw new TypeError(yM("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(r+s>n.length)throw new RangeError("encoding overruns Uint8Array");const i=on(e);return on(n).write(i.toString("hex"),r,s,"hex"),this.length instanceof po&&this.length.encode(s,n,r),s}};oe.Blob=NW;class TW extends xn{constructor(e){super(-1,e)}getSpan(e,n=0){yw(e);let r=n;for(;r<e.length&&e[r]!==0;)r+=1;return 1+r-n}decode(e,n=0){const r=this.getSpan(e,n);return on(e).slice(n,n+r-1).toString("utf-8")}encode(e,n,r=0){typeof e!="string"&&(e=String(e));const s=gM.Buffer.from(e,"utf8"),i=s.length;if(r+i>n.length)throw new RangeError("encoding overruns Buffer");const o=on(n);return s.copy(o,r),o[r+i]=0,i+1}}oe.CString=TW;class kW extends xn{constructor(e,n){if(typeof e=="string"&&n===void 0&&(n=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,n),this.maxSpan=e}getSpan(e,n=0){return yw(e),e.length-n}decode(e,n=0){const r=this.getSpan(e,n);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return on(e).slice(n,n+r).toString("utf-8")}encode(e,n,r=0){typeof e!="string"&&(e=String(e));const s=gM.Buffer.from(e,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>n.length)throw new RangeError("encoding overruns Buffer");return s.copy(on(n),r),i}}oe.UTF8=kW;class PW extends xn{constructor(e,n){super(0,n),this.value=e}decode(e,n){return this.value}encode(e,n,r){return 0}}oe.Constant=PW;oe.greedy=(t,e)=>new mW(t,e);var Ph=oe.offset=(t,e,n)=>new wM(t,e,n),jt=oe.u8=t=>new Da(1,t),Ia=oe.u16=t=>new Da(2,t);oe.u24=t=>new Da(3,t);var Ke=oe.u32=t=>new Da(4,t);oe.u40=t=>new Da(5,t);oe.u48=t=>new Da(6,t);var Ps=oe.nu64=t=>new gW(t);oe.u16be=t=>new Ec(2,t);oe.u24be=t=>new Ec(3,t);oe.u32be=t=>new Ec(4,t);oe.u40be=t=>new Ec(5,t);oe.u48be=t=>new Ec(6,t);oe.nu64be=t=>new yW(t);oe.s8=t=>new xm(1,t);oe.s16=t=>new xm(2,t);oe.s24=t=>new xm(3,t);oe.s32=t=>new xm(4,t);oe.s40=t=>new xm(5,t);oe.s48=t=>new xm(6,t);var zo=oe.ns64=t=>new wW(t);oe.s16be=t=>new ww(2,t);oe.s24be=t=>new ww(3,t);oe.s32be=t=>new ww(4,t);oe.s40be=t=>new ww(5,t);oe.s48be=t=>new ww(6,t);oe.ns64be=t=>new bW(t);oe.f32=t=>new vW(t);oe.f32be=t=>new EW(t);oe.f64=t=>new AW(t);oe.f64be=t=>new xW(t);var qe=oe.struct=(t,e,n)=>new CW(t,e,n);oe.bits=(t,e,n)=>new EM(t,e,n);var js=oe.seq=(t,e,n)=>new SW(t,e,n);oe.union=(t,e,n)=>new vM(t,e,n);oe.unionLayoutDiscriminator=(t,e)=>new UC(t,e);var On=oe.blob=(t,e)=>new NW(t,e);oe.cstr=t=>new TW(t);oe.utf8=(t,e)=>new kW(t,e);oe.constant=(t,e)=>new PW(t,e);var _re=8078e3,Ire=8078001,Nre=8078004,Tre=8078005,kre=8078006,Pre=8078011;function RW(t){return Array.isArray(t)?"%5B"+t.map(RW).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function Rre([t,e]){return`${t}=${RW(e)}`}function Ore(t){const e=Object.entries(t).map(Rre).join("&");return btoa(e)}function Mre(t,e={}){{let n=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(n+=` '${Ore(e)}'`),`${n}\``}}var E0=class extends Error{constructor(...[e,n]){let r,s;if(n){const{cause:o,...a}=n;o&&(s={cause:o}),Object.keys(a).length>0&&(r=a)}const i=Mre(e,r);super(i,s);te(this,"cause",this.cause);te(this,"context");this.context={__code:e,...r},this.name="SolanaError"}};function Dre(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function Bre(t){return Object.freeze({...t,encode:e=>{const n=new Uint8Array(Dre(e,t));return t.write(e,n,0),n}})}function Lre(t){return Object.freeze({...t,decode:(e,n=0)=>t.read(e,n)[0]})}function qm(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function Ure(t,e){if(qm(t)!==qm(e))throw new E0(Nre);if(qm(t)&&qm(e)&&t.fixedSize!==e.fixedSize)throw new E0(Tre,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!qm(t)&&!qm(e)&&t.maxSize!==e.maxSize)throw new E0(kre,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function Fre(t,e,n=0){if(e.length-n<=0)throw new E0(_re,{codecDescription:t})}function jre(t,e,n,r=0){const s=n.length-r;if(s<e)throw new E0(Ire,{bytesLength:s,codecDescription:t,expected:e})}function $re(t,e,n,r){if(r<e||r>n)throw new E0(Pre,{codecDescription:t,max:n,min:e,value:r})}function OW(t){return(t==null?void 0:t.endian)!==1}function zre(t){return Bre({fixedSize:t.size,write(e,n,r){t.range&&$re(t.name,t.range[0],t.range[1],e);const s=new ArrayBuffer(t.size);return t.set(new DataView(s),e,OW(t.config)),n.set(new Uint8Array(s),r),r+t.size}})}function Wre(t){return Lre({fixedSize:t.size,read(e,n=0){Fre(t.name,e,n),jre(t.name,t.size,e,n);const r=new DataView(Hre(e,n,t.size));return[t.get(r,OW(t.config)),n+t.size]}})}function Hre(t,e,n){const r=t.byteOffset+(e??0),s=n??t.byteLength;return t.buffer.slice(r,r+s)}var MW=(t={})=>zre({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,n,r)=>e.setBigUint64(0,BigInt(n),r),size:8}),Vre=(t={})=>Wre({config:t,get:(e,n)=>e.getBigUint64(0,n),name:"u64",size:8}),Kre=(t={})=>Ure(MW(t),Vre(t));class qre extends TypeError{constructor(e,n){let r;const{message:s,explanation:i,...o}=e,{path:a}=e,c=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??c),i!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}}function Gre(t){return jE(t)&&typeof t[Symbol.iterator]=="function"}function jE(t){return typeof t=="object"&&t!=null}function FC(t){return jE(t)&&!Array.isArray(t)}function Ic(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function Yre(t){const{done:e,value:n}=t.next();return e?void 0:n}function Zre(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:s,branch:i}=e,{type:o}=n,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Ic(r)}\``}=t;return{value:r,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...t,message:c}}function*v8(t,e,n,r){Gre(t)||(t=[t]);for(const s of t){const i=Zre(s,e,n,r);i&&(yield i)}}function*xM(t,e,n={}){const{path:r=[],branch:s=[t],coerce:i=!1,mask:o=!1}=n,a={path:r,branch:s,mask:o};i&&(t=e.coercer(t,a));let c="valid";for(const l of e.validator(t,a))l.explanation=n.message,c="not_valid",yield[l,void 0];for(let[l,u,d]of e.entries(t,a)){const h=xM(u,d,{path:l===void 0?r:[...r,l],branch:l===void 0?s:[...s,u],coerce:i,mask:o,message:n.message});for(const f of h)f[0]?(c=f[0].refinement!=null?"not_refined":"not_valid",yield[f[0],void 0]):i&&(u=f[1],l===void 0?t=u:t instanceof Map?t.set(l,u):t instanceof Set?t.add(u):jE(t)&&(u!==void 0||l in t)&&(t[l]=u))}if(c!=="not_valid")for(const l of e.refiner(t,a))l.explanation=n.message,c="not_refined",yield[l,void 0];c==="valid"&&(yield[void 0,t])}let Bl=class{constructor(e){const{type:n,schema:r,validator:s,refiner:i,coercer:o=c=>c,entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=o,s?this.validator=(c,l)=>{const u=s(c,l);return v8(u,l,this,c)}:this.validator=()=>[],i?this.refiner=(c,l)=>{const u=i(c,l);return v8(u,l,this,c)}:this.refiner=()=>[]}assert(e,n){return DW(e,this,n)}create(e,n){return Ie(e,this,n)}is(e){return BW(e,this)}mask(e,n){return Qre(e,this,n)}validate(e,n={}){return $E(e,this,n)}};function DW(t,e,n){const r=$E(t,e,{message:n});if(r[0])throw r[0]}function Ie(t,e,n){const r=$E(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function Qre(t,e,n){const r=$E(t,e,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function BW(t,e){return!$E(t,e)[0]}function $E(t,e,n={}){const r=xM(t,e,n),s=Yre(r);return s[0]?[new qre(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function Sm(t,e){return new Bl({type:t,schema:null,validator:e})}function Jre(){return Sm("any",()=>!0)}function ke(t){return new Bl({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Ic(e)}`}})}function Tl(){return Sm("boolean",t=>typeof t=="boolean")}function SM(t){return Sm("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${Ic(e)}`)}function nr(t){const e=Ic(t),n=typeof t;return new Bl({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator(r){return r===t||`Expected the literal \`${e}\`, but received: ${Ic(r)}`}})}function Xre(){return Sm("never",()=>!1)}function Re(t){return new Bl({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}function re(){return Sm("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${Ic(t)}`)}function tt(t){return new Bl({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function LW(t,e){return new Bl({type:"record",schema:null,*entries(n){if(jE(n))for(const r in n){const s=n[r];yield[r,r,t],yield[r,s,e]}},validator(n){return FC(n)||`Expected an object, but received: ${Ic(n)}`},coercer(n){return FC(n)?{...n}:n}})}function xe(){return Sm("string",t=>typeof t=="string"||`Expected a string, but received: ${Ic(t)}`)}function CM(t){const e=Xre();return new Bl({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(t.length,n.length);for(let s=0;s<r;s++)yield[s,n[s],t[s]||e]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${Ic(n)}`},coercer(n){return Array.isArray(n)?n.slice():n}})}function ge(t){const e=Object.keys(t);return new Bl({type:"type",schema:t,*entries(n){if(jE(n))for(const r of e)yield[r,n[r],t[r]]},validator(n){return FC(n)||`Expected an object, but received: ${Ic(n)}`},coercer(n){return FC(n)?{...n}:n}})}function Wi(t){const e=t.map(n=>n.type).join(" | ");return new Bl({type:"union",schema:null,coercer(n,r){for(const s of t){const[i,o]=s.validate(n,{coerce:!0,mask:r.mask});if(!i)return o}return n},validator(n,r){const s=[];for(const i of t){const[...o]=xM(n,i,r),[a]=o;if(a[0])for(const[c]of o)c&&s.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Ic(n)}`,...s]}})}function bw(){return Sm("unknown",()=>!0)}function zE(t,e,n){return new Bl({...t,coercer:(r,s)=>BW(r,e)?t.coercer(n(r,s),s):t.coercer(r,s)})}var WA,ese=new Uint8Array(16);function UW(){if(!WA&&(WA=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!WA))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return WA(ese)}const tse=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function k2(t){return typeof t=="string"&&tse.test(t)}var Ts=[];for(var QN=0;QN<256;++QN)Ts.push((QN+256).toString(16).substr(1));function P2(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Ts[t[e+0]]+Ts[t[e+1]]+Ts[t[e+2]]+Ts[t[e+3]]+"-"+Ts[t[e+4]]+Ts[t[e+5]]+"-"+Ts[t[e+6]]+Ts[t[e+7]]+"-"+Ts[t[e+8]]+Ts[t[e+9]]+"-"+Ts[t[e+10]]+Ts[t[e+11]]+Ts[t[e+12]]+Ts[t[e+13]]+Ts[t[e+14]]+Ts[t[e+15]]).toLowerCase();if(!k2(n))throw TypeError("Stringified UUID is invalid");return n}var E8,JN,XN=0,eT=0;function nse(t,e,n){var r=e&&n||0,s=e||new Array(16);t=t||{};var i=t.node||E8,o=t.clockseq!==void 0?t.clockseq:JN;if(i==null||o==null){var a=t.random||(t.rng||UW)();i==null&&(i=E8=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=JN=(a[6]<<8|a[7])&16383)}var c=t.msecs!==void 0?t.msecs:Date.now(),l=t.nsecs!==void 0?t.nsecs:eT+1,u=c-XN+(l-eT)/1e4;if(u<0&&t.clockseq===void 0&&(o=o+1&16383),(u<0||c>XN)&&t.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");XN=c,eT=l,JN=o,c+=122192928e5;var d=((c&268435455)*1e4+l)%4294967296;s[r++]=d>>>24&255,s[r++]=d>>>16&255,s[r++]=d>>>8&255,s[r++]=d&255;var h=c/4294967296*1e4&268435455;s[r++]=h>>>8&255,s[r++]=h&255,s[r++]=h>>>24&15|16,s[r++]=h>>>16&255,s[r++]=o>>>8|128,s[r++]=o&255;for(var f=0;f<6;++f)s[r+f]=i[f];return e||P2(s)}function FW(t){if(!k2(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function rse(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var sse="6ba7b810-9dad-11d1-80b4-00c04fd430c8",ise="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function jW(t,e,n){function r(s,i,o,a){if(typeof s=="string"&&(s=rse(s)),typeof i=="string"&&(i=FW(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+s.length);if(c.set(i),c.set(s,i.length),c=n(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){a=a||0;for(var l=0;l<16;++l)o[a+l]=c[l];return o}return P2(c)}try{r.name=t}catch{}return r.DNS=sse,r.URL=ise,r}function ose(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return ase(cse(lse(t),t.length*8))}function ase(t){for(var e=[],n=t.length*32,r="0123456789abcdef",s=0;s<n;s+=8){var i=t[s>>5]>>>s%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);e.push(o)}return e}function $W(t){return(t+64>>>9<<4)+14+1}function cse(t,e){t[e>>5]|=128<<e%32,t[$W(e)-1]=e;for(var n=1732584193,r=-271733879,s=-1732584194,i=271733878,o=0;o<t.length;o+=16){var a=n,c=r,l=s,u=i;n=Xs(n,r,s,i,t[o],7,-680876936),i=Xs(i,n,r,s,t[o+1],12,-389564586),s=Xs(s,i,n,r,t[o+2],17,606105819),r=Xs(r,s,i,n,t[o+3],22,-1044525330),n=Xs(n,r,s,i,t[o+4],7,-176418897),i=Xs(i,n,r,s,t[o+5],12,1200080426),s=Xs(s,i,n,r,t[o+6],17,-1473231341),r=Xs(r,s,i,n,t[o+7],22,-45705983),n=Xs(n,r,s,i,t[o+8],7,1770035416),i=Xs(i,n,r,s,t[o+9],12,-1958414417),s=Xs(s,i,n,r,t[o+10],17,-42063),r=Xs(r,s,i,n,t[o+11],22,-1990404162),n=Xs(n,r,s,i,t[o+12],7,1804603682),i=Xs(i,n,r,s,t[o+13],12,-40341101),s=Xs(s,i,n,r,t[o+14],17,-1502002290),r=Xs(r,s,i,n,t[o+15],22,1236535329),n=ei(n,r,s,i,t[o+1],5,-165796510),i=ei(i,n,r,s,t[o+6],9,-1069501632),s=ei(s,i,n,r,t[o+11],14,643717713),r=ei(r,s,i,n,t[o],20,-373897302),n=ei(n,r,s,i,t[o+5],5,-701558691),i=ei(i,n,r,s,t[o+10],9,38016083),s=ei(s,i,n,r,t[o+15],14,-660478335),r=ei(r,s,i,n,t[o+4],20,-405537848),n=ei(n,r,s,i,t[o+9],5,568446438),i=ei(i,n,r,s,t[o+14],9,-1019803690),s=ei(s,i,n,r,t[o+3],14,-187363961),r=ei(r,s,i,n,t[o+8],20,1163531501),n=ei(n,r,s,i,t[o+13],5,-1444681467),i=ei(i,n,r,s,t[o+2],9,-51403784),s=ei(s,i,n,r,t[o+7],14,1735328473),r=ei(r,s,i,n,t[o+12],20,-1926607734),n=ti(n,r,s,i,t[o+5],4,-378558),i=ti(i,n,r,s,t[o+8],11,-2022574463),s=ti(s,i,n,r,t[o+11],16,1839030562),r=ti(r,s,i,n,t[o+14],23,-35309556),n=ti(n,r,s,i,t[o+1],4,-1530992060),i=ti(i,n,r,s,t[o+4],11,1272893353),s=ti(s,i,n,r,t[o+7],16,-155497632),r=ti(r,s,i,n,t[o+10],23,-1094730640),n=ti(n,r,s,i,t[o+13],4,681279174),i=ti(i,n,r,s,t[o],11,-358537222),s=ti(s,i,n,r,t[o+3],16,-722521979),r=ti(r,s,i,n,t[o+6],23,76029189),n=ti(n,r,s,i,t[o+9],4,-640364487),i=ti(i,n,r,s,t[o+12],11,-421815835),s=ti(s,i,n,r,t[o+15],16,530742520),r=ti(r,s,i,n,t[o+2],23,-995338651),n=ni(n,r,s,i,t[o],6,-198630844),i=ni(i,n,r,s,t[o+7],10,1126891415),s=ni(s,i,n,r,t[o+14],15,-1416354905),r=ni(r,s,i,n,t[o+5],21,-57434055),n=ni(n,r,s,i,t[o+12],6,1700485571),i=ni(i,n,r,s,t[o+3],10,-1894986606),s=ni(s,i,n,r,t[o+10],15,-1051523),r=ni(r,s,i,n,t[o+1],21,-2054922799),n=ni(n,r,s,i,t[o+8],6,1873313359),i=ni(i,n,r,s,t[o+15],10,-30611744),s=ni(s,i,n,r,t[o+6],15,-1560198380),r=ni(r,s,i,n,t[o+13],21,1309151649),n=ni(n,r,s,i,t[o+4],6,-145523070),i=ni(i,n,r,s,t[o+11],10,-1120210379),s=ni(s,i,n,r,t[o+2],15,718787259),r=ni(r,s,i,n,t[o+9],21,-343485551),n=wh(n,a),r=wh(r,c),s=wh(s,l),i=wh(i,u)}return[n,r,s,i]}function lse(t){if(t.length===0)return[];for(var e=t.length*8,n=new Uint32Array($W(e)),r=0;r<e;r+=8)n[r>>5]|=(t[r/8]&255)<<r%32;return n}function wh(t,e){var n=(t&65535)+(e&65535),r=(t>>16)+(e>>16)+(n>>16);return r<<16|n&65535}function use(t,e){return t<<e|t>>>32-e}function R2(t,e,n,r,s,i){return wh(use(wh(wh(e,t),wh(r,i)),s),n)}function Xs(t,e,n,r,s,i,o){return R2(e&n|~e&r,t,e,s,i,o)}function ei(t,e,n,r,s,i,o){return R2(e&r|n&~r,t,e,s,i,o)}function ti(t,e,n,r,s,i,o){return R2(e^n^r,t,e,s,i,o)}function ni(t,e,n,r,s,i,o){return R2(n^(e|~r),t,e,s,i,o)}var dse=jW("v3",48,ose);const hse=dse;function fse(t,e,n){t=t||{};var r=t.random||(t.rng||UW)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var s=0;s<16;++s)e[n+s]=r[s];return e}return P2(r)}function pse(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function tT(t,e){return t<<e|t>>>32-e}function mse(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var s=0;s<r.length;++s)t.push(r.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var i=t.length/4+2,o=Math.ceil(i/16),a=new Array(o),c=0;c<o;++c){for(var l=new Uint32Array(16),u=0;u<16;++u)l[u]=t[c*64+u*4]<<24|t[c*64+u*4+1]<<16|t[c*64+u*4+2]<<8|t[c*64+u*4+3];a[c]=l}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var d=0;d<o;++d){for(var h=new Uint32Array(80),f=0;f<16;++f)h[f]=a[d][f];for(var p=16;p<80;++p)h[p]=tT(h[p-3]^h[p-8]^h[p-14]^h[p-16],1);for(var m=n[0],E=n[1],b=n[2],x=n[3],w=n[4],N=0;N<80;++N){var _=Math.floor(N/20),L=tT(m,5)+pse(_,E,b,x)+w+e[_]+h[N]>>>0;w=x,x=b,b=tT(E,30)>>>0,E=m,m=L}n[0]=n[0]+m>>>0,n[1]=n[1]+E>>>0,n[2]=n[2]+b>>>0,n[3]=n[3]+x>>>0,n[4]=n[4]+w>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var gse=jW("v5",80,mse);const yse=gse,wse="00000000-0000-0000-0000-000000000000";function bse(t){if(!k2(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const vse=Object.freeze(Object.defineProperty({__proto__:null,NIL:wse,parse:FW,stringify:P2,v1:nse,v3:hse,v4:fse,v5:yse,validate:k2,version:bse},Symbol.toStringTag,{value:"Module"})),zW=Ol(vse),Ese=zW.v4,Ase=function(t,e,n,r){if(typeof t!="string")throw new TypeError(t+" must be a string");r=r||{};const s=typeof r.version=="number"?r.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:t};if(s===2&&(i.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");i.params=e}if(typeof n>"u"){const o=typeof r.generator=="function"?r.generator:function(){return Ese()};i.id=o(i,r)}else s===2&&n===null?r.notificationIdNull&&(i.id=null):i.id=n;return i};var xse=Ase;const Sse=zW.v4,Cse=xse,H1=function(t,e){if(!(this instanceof H1))return new H1(t,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return Sse()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=t};var _se=H1;H1.prototype.request=function(t,e,n,r){const s=this;let i=null;const o=Array.isArray(t)&&typeof e=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&t&&typeof t=="object"&&typeof e=="function")r=e,i=t;else{typeof n=="function"&&(r=n,n=void 0);const l=typeof r=="function";try{i=Cse(t,e,n,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(u){if(l)return r(u);throw u}if(!l)return i}let c;try{c=JSON.stringify(i,this.options.replacer)}catch(l){return r(l)}return this.callServer(c,function(l,u){s._parseResponse(l,u,r)}),i};H1.prototype._parseResponse=function(t,e,n){if(t){n(t);return}if(!e)return n();let r;try{r=JSON.parse(e,this.options.reviver)}catch(s){return n(s)}if(n.length===3)if(Array.isArray(r)){const s=function(o){return typeof o.error<"u"},i=function(o){return!s(o)};return n(null,r.filter(s),r.filter(i))}else return n(null,r.error,r.result);n(null,r)};const Ise=Qh(_se);var WW={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var m=n?n+l:l;if(!this._events[m])return!1;var E=this._events[m],b=arguments.length,x,w;if(E.fn){switch(E.once&&this.removeListener(l,E.fn,void 0,!0),b){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,u),!0;case 3:return E.fn.call(E.context,u,d),!0;case 4:return E.fn.call(E.context,u,d,h),!0;case 5:return E.fn.call(E.context,u,d,h,f),!0;case 6:return E.fn.call(E.context,u,d,h,f,p),!0}for(w=1,x=new Array(b-1);w<b;w++)x[w-1]=arguments[w];E.fn.apply(E.context,x)}else{var N=E.length,_;for(w=0;w<N;w++)switch(E[w].once&&this.removeListener(l,E[w].fn,void 0,!0),b){case 1:E[w].fn.call(E[w].context);break;case 2:E[w].fn.call(E[w].context,u);break;case 3:E[w].fn.call(E[w].context,u,d);break;case 4:E[w].fn.call(E[w].context,u,d,h);break;default:if(!x)for(_=1,x=new Array(b-1);_<b;_++)x[_-1]=arguments[_];E[w].fn.apply(E[w].context,x)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var m=0,E=[],b=p.length;m<b;m++)(p[m].fn!==u||h&&!p[m].once||d&&p[m].context!==d)&&E.push(p[m]);E.length?this._events[f]=E.length===1?E[0]:E:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(WW);var Nse=WW.exports;const O2=Qh(Nse);var Tse=class extends O2{constructor(e,n,r){super();te(this,"socket");this.socket=new window.WebSocket(e,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(e,n,r){const s=r||n;try{this.socket.send(e),s()}catch(i){s(i)}}close(e,n){this.socket.close(e,n)}addEventListener(e,n,r){this.socket.addEventListener(e,n,r)}};function kse(t,e){return new Tse(t,e)}var Pse=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},Rse=class extends O2{constructor(e,n="ws://localhost:8080",{autoconnect:r=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...a}={},c,l){super();te(this,"address");te(this,"rpc_id");te(this,"queue");te(this,"options");te(this,"autoconnect");te(this,"ready");te(this,"reconnect");te(this,"reconnect_timer_id");te(this,"reconnect_interval");te(this,"max_reconnects");te(this,"rest_options");te(this,"current_reconnects");te(this,"generate_request_id");te(this,"socket");te(this,"webSocketFactory");te(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=n,this.autoconnect=r,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=c||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),l?this.dataPack=l:this.dataPack=new Pse,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,n,r,s){return!s&&typeof r=="object"&&(s=r,r=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,n),c={jsonrpc:"2.0",method:e,params:n||void 0,id:a};this.socket.send(this.dataPack.encode(c),s,l=>{if(l)return o(l);this.queue[a]={promise:[i,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},r))})})}async login(e){const n=await this.call("rpc.login",e);if(!n)throw new Error("authentication failed");return n}async listMethods(){return await this.call("__listMethods")}notify(e,n){return new Promise((r,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:e,params:n};this.socket.send(this.dataPack.encode(i),o=>{if(o)return s(o);r()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.on",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+n[e]);return n}async unsubscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.off",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+n);return n}close(e,n){this.socket.close(e||1e3,n)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,n){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,n),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=ot.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const s=[r.notification];if(r.params.constructor===Object)s.push(r.params);else for(let i=0;i<r.params.length;i++)s.push(r.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",r,s),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(e,n),this.reconnect_interval)))})}};const Ose=BigInt(0),Hw=BigInt(1),Mse=BigInt(2),Dse=BigInt(7),Bse=BigInt(256),Lse=BigInt(113),HW=[],VW=[],KW=[];for(let t=0,e=Hw,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],HW.push(2*(5*r+n)),VW.push((t+1)*(t+2)/2%64);let s=Ose;for(let i=0;i<7;i++)e=(e<<Hw^(e>>Dse)*Lse)%Bse,e&Mse&&(s^=Hw<<(Hw<<BigInt(i))-Hw);KW.push(s)}const qW=Bz(KW,!0),Use=qW[0],Fse=qW[1],A8=(t,e,n)=>n>32?fne(t,e,n):dne(t,e,n),x8=(t,e,n)=>n>32?pne(t,e,n):hne(t,e,n);function GW(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=A8(l,u,1)^n[a],h=x8(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=VW[o],c=A8(s,i,a),l=x8(s,i,a),u=HW[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Use[r],t[1]^=Fse[r]}$h(n)}let _M=class YW extends iM{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,z1(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=ene(this.state)}clone(){return this._cloneInto()}keccak(){i8(this.state32),GW(this.state32,this.rounds),i8(this.state32),this.posOut=0,this.pos=0}update(e){Dy(this),e=LE(e),Gu(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Dy(this,!1),Gu(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return z1(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Oz(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,$h(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new YW(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const tf=(t,e,n)=>oM(()=>new _M(e,t,n)),jse=(()=>tf(6,144,224/8))(),$se=(()=>tf(6,136,256/8))(),zse=(()=>tf(6,104,384/8))(),Wse=(()=>tf(6,72,512/8))(),Hse=(()=>tf(1,144,224/8))(),jC=(()=>tf(1,136,256/8))(),Vse=(()=>tf(1,104,384/8))(),Kse=(()=>tf(1,72,512/8))(),ZW=(t,e,n)=>one((r={})=>new _M(e,t,r.dkLen===void 0?n:r.dkLen,!0)),qse=(()=>ZW(31,168,128/8))(),Gse=(()=>ZW(31,136,256/8))(),yLe=Object.freeze(Object.defineProperty({__proto__:null,Keccak:_M,keccakP:GW,keccak_224:Hse,keccak_256:jC,keccak_384:Vse,keccak_512:Kse,sha3_224:jse,sha3_256:$se,sha3_384:zse,sha3_512:Wse,shake128:qse,shake256:Gse},Symbol.toStringTag,{value:"Module"}));let QW=class extends iM{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Rz(e);const r=LE(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),$h(i)}update(e){return Dy(this),this.iHash.update(e),this}digestInto(e){Dy(this),Gu(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const JW=(t,e,n)=>new QW(t,e).update(n).digest();JW.create=(t,e)=>new QW(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const S8=(t,e)=>(t+(t>=0?e:-e)/XW)/e;function Yse(t,e,n){const[[r,s],[i,o]]=e,a=S8(o*t,n),c=S8(-s*t,n);let l=t-a*r-c*i,u=-a*s-c*o;const d=l<Nu,h=u<Nu;d&&(l=-l),h&&(u=-u);const f=UE(Math.ceil($z(n)/2))+A0;if(l<Nu||l>=f||u<Nu||u>=f)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}function ZP(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function nT(t,e){const n={};for(let r of Object.keys(e))n[r]=t[r]===void 0?e[r]:t[r];return nm(n.lowS,"lowS"),nm(n.prehash,"prehash"),n.format!==void 0&&ZP(n.format),n}class Zse extends Error{constructor(e=""){super(e)}}const ou={Err:Zse,_tlv:{encode:(t,e)=>{const{Err:n}=ou;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=$A(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?$A(s.length/2|128):"";return $A(t)+i+s+e},decode(t,e){const{Err:n}=ou;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=ou;if(t<Nu)throw new e("integer: negative integers are not allowed");let n=$A(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=ou;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return _2(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=ou,s=hr("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=ou,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Nu=BigInt(0),A0=BigInt(1),XW=BigInt(2),HA=BigInt(3),Qse=BigInt(4);function Qg(t,e){const{BYTES:n}=t;let r;if(typeof e=="bigint")r=e;else{let s=hr("private key",e);try{r=t.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof e}`)}}if(!t.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function Jse(t,e={}){const n=rW("weierstrass",t,e),{Fp:r,Fn:s}=n;let i=n.CURVE;const{h:o,n:a}=i;FE(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!r.is0(i.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const l=tH(r,s);function u(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(K,P,y){const{x:g,y:A}=P.toAffine(),I=r.toBytes(g);if(nm(y,"isCompressed"),y){u();const T=!r.isOdd(A);return ol(eH(T),I)}else return ol(Uint8Array.of(4),I,r.toBytes(A))}function h(K){mc(K,void 0,"Point");const{publicKey:P,publicKeyUncompressed:y}=l,g=K.length,A=K[0],I=K.subarray(1);if(g===P&&(A===2||A===3)){const T=r.fromBytes(I);if(!r.isValid(T))throw new Error("bad point: is not on curve, wrong x");const R=m(T);let B;try{B=r.sqrt(R)}catch(z){const Y=z instanceof Error?": "+z.message:"";throw new Error("bad point: is not on curve, sqrt error"+Y)}u();const O=r.isOdd(B);return(A&1)===1!==O&&(B=r.neg(B)),{x:T,y:B}}else if(g===y&&A===4){const T=r.BYTES,R=r.fromBytes(I.subarray(0,T)),B=r.fromBytes(I.subarray(T,T*2));if(!E(R,B))throw new Error("bad point: is not on curve");return{x:R,y:B}}else throw new Error(`bad point: got length ${g}, expected compressed=${P} or uncompressed=${y}`)}const f=e.toBytes||d,p=e.fromBytes||h;function m(K){const P=r.sqr(K),y=r.mul(P,K);return r.add(r.add(y,r.mul(K,i.a)),i.b)}function E(K,P){const y=r.sqr(P),g=m(K);return r.eql(y,g)}if(!E(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const b=r.mul(r.pow(i.a,HA),Qse),x=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(b,x)))throw new Error("bad curve params: a or b");function w(K,P,y=!1){if(!r.isValid(P)||y&&r.is0(P))throw new Error(`bad point coordinate ${K}`);return P}function N(K){if(!(K instanceof M))throw new Error("ProjectivePoint expected")}function _(K){if(!c||!c.basises)throw new Error("no endo");return Yse(K,c.basises,s.ORDER)}const L=RC((K,P)=>{const{X:y,Y:g,Z:A}=K;if(r.eql(A,r.ONE))return{x:y,y:g};const I=K.is0();P==null&&(P=I?r.ONE:r.inv(A));const T=r.mul(y,P),R=r.mul(g,P),B=r.mul(A,P);if(I)return{x:r.ZERO,y:r.ZERO};if(!r.eql(B,r.ONE))throw new Error("invZ was invalid");return{x:T,y:R}}),U=RC(K=>{if(K.is0()){if(e.allowInfinityPoint&&!r.is0(K.Y))return;throw new Error("bad point: ZERO")}const{x:P,y}=K.toAffine();if(!r.isValid(P)||!r.isValid(y))throw new Error("bad point: x or y not field elements");if(!E(P,y))throw new Error("bad point: equation left != right");if(!K.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function F(K,P,y,g,A){return y=new M(r.mul(y.X,K),y.Y,y.Z),P=OC(g,P),y=OC(A,y),P.add(y)}class M{constructor(P,y,g){this.X=w("x",P),this.Y=w("y",y,!0),this.Z=w("z",g),Object.freeze(this)}static CURVE(){return i}static fromAffine(P){const{x:y,y:g}=P||{};if(!P||!r.isValid(y)||!r.isValid(g))throw new Error("invalid affine point");if(P instanceof M)throw new Error("projective point not allowed");return r.is0(y)&&r.is0(g)?M.ZERO:new M(y,g,r.ONE)}static fromBytes(P){const y=M.fromAffine(p(mc(P,void 0,"point")));return y.assertValidity(),y}static fromHex(P){return M.fromBytes(hr("pointHex",P))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(P=8,y=!0){return H.createCache(this,P),y||this.multiply(HA),this}assertValidity(){U(this)}hasEvenY(){const{y:P}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(P)}equals(P){N(P);const{X:y,Y:g,Z:A}=this,{X:I,Y:T,Z:R}=P,B=r.eql(r.mul(y,R),r.mul(I,A)),O=r.eql(r.mul(g,R),r.mul(T,A));return B&&O}negate(){return new M(this.X,r.neg(this.Y),this.Z)}double(){const{a:P,b:y}=i,g=r.mul(y,HA),{X:A,Y:I,Z:T}=this;let R=r.ZERO,B=r.ZERO,O=r.ZERO,S=r.mul(A,A),z=r.mul(I,I),Y=r.mul(T,T),J=r.mul(A,I);return J=r.add(J,J),O=r.mul(A,T),O=r.add(O,O),R=r.mul(P,O),B=r.mul(g,Y),B=r.add(R,B),R=r.sub(z,B),B=r.add(z,B),B=r.mul(R,B),R=r.mul(J,R),O=r.mul(g,O),Y=r.mul(P,Y),J=r.sub(S,Y),J=r.mul(P,J),J=r.add(J,O),O=r.add(S,S),S=r.add(O,S),S=r.add(S,Y),S=r.mul(S,J),B=r.add(B,S),Y=r.mul(I,T),Y=r.add(Y,Y),S=r.mul(Y,J),R=r.sub(R,S),O=r.mul(Y,z),O=r.add(O,O),O=r.add(O,O),new M(R,B,O)}add(P){N(P);const{X:y,Y:g,Z:A}=this,{X:I,Y:T,Z:R}=P;let B=r.ZERO,O=r.ZERO,S=r.ZERO;const z=i.a,Y=r.mul(i.b,HA);let J=r.mul(y,I),ae=r.mul(g,T),pe=r.mul(A,R),ve=r.add(y,g),de=r.add(I,T);ve=r.mul(ve,de),de=r.add(J,ae),ve=r.sub(ve,de),de=r.add(y,A);let $e=r.add(I,R);return de=r.mul(de,$e),$e=r.add(J,pe),de=r.sub(de,$e),$e=r.add(g,A),B=r.add(T,R),$e=r.mul($e,B),B=r.add(ae,pe),$e=r.sub($e,B),S=r.mul(z,de),B=r.mul(Y,pe),S=r.add(B,S),B=r.sub(ae,S),S=r.add(ae,S),O=r.mul(B,S),ae=r.add(J,J),ae=r.add(ae,J),pe=r.mul(z,pe),de=r.mul(Y,de),ae=r.add(ae,pe),pe=r.sub(J,pe),pe=r.mul(z,pe),de=r.add(de,pe),J=r.mul(ae,de),O=r.add(O,J),J=r.mul($e,de),B=r.mul(ve,B),B=r.sub(B,J),J=r.mul(ve,ae),S=r.mul($e,S),S=r.add(S,J),new M(B,O,S)}subtract(P){return this.add(P.negate())}is0(){return this.equals(M.ZERO)}multiply(P){const{endo:y}=e;if(!s.isValidNot0(P))throw new Error("invalid scalar: out of range");let g,A;const I=T=>H.cached(this,T,R=>Xf(M,R));if(y){const{k1neg:T,k1:R,k2neg:B,k2:O}=_(P),{p:S,f:z}=I(R),{p:Y,f:J}=I(O);A=z.add(J),g=F(y.beta,S,Y,T,B)}else{const{p:T,f:R}=I(P);g=T,A=R}return Xf(M,[g,A])[0]}multiplyUnsafe(P){const{endo:y}=e,g=this;if(!s.isValid(P))throw new Error("invalid scalar: out of range");if(P===Nu||g.is0())return M.ZERO;if(P===A0)return g;if(H.hasCache(this))return this.multiply(P);if(y){const{k1neg:A,k1:I,k2neg:T,k2:R}=_(P),{p1:B,p2:O}=$ne(M,g,I,R);return F(y.beta,B,O,A,T)}else return H.unsafe(g,P)}multiplyAndAddUnsafe(P,y,g){const A=this.multiplyUnsafe(y).add(P.multiplyUnsafe(g));return A.is0()?void 0:A}toAffine(P){return L(this,P)}isTorsionFree(){const{isTorsionFree:P}=e;return o===A0?!0:P?P(M,this):H.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:P}=e;return o===A0?this:P?P(M,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(P=!0){return nm(P,"isCompressed"),this.assertValidity(),f(M,this,P)}toHex(P=!0){return Hp(this.toBytes(P))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(P=!0){return this.toBytes(P)}_setWindowSize(P){this.precompute(P)}static normalizeZ(P){return Xf(M,P)}static msm(P,y){return nW(M,s,P,y)}static fromPrivateKey(P){return M.BASE.multiply(Qg(s,P))}}M.BASE=new M(i.Gx,i.Gy,r.ONE),M.ZERO=new M(r.ZERO,r.ONE,r.ZERO),M.Fp=r,M.Fn=s;const W=s.BITS,H=new tW(M,e.endo?Math.ceil(W/2):W);return M.BASE.precompute(8),M}function eH(t){return Uint8Array.of(t?2:3)}function tH(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function Xse(t,e={}){const{Fn:n}=t,r=e.randomBytes||aM,s=Object.assign(tH(t.Fp,n),{seed:Jz(n.ORDER)});function i(f){try{return!!Qg(n,f)}catch{return!1}}function o(f,p){const{publicKey:m,publicKeyUncompressed:E}=s;try{const b=f.length;return p===!0&&b!==m||p===!1&&b!==E?!1:!!t.fromBytes(f)}catch{return!1}}function a(f=r(s.seed)){return Une(mc(f,s.seed,"seed"),n.ORDER)}function c(f,p=!0){return t.BASE.multiply(Qg(n,f)).toBytes(p)}function l(f){const p=a(f);return{secretKey:p,publicKey:c(p)}}function u(f){if(typeof f=="bigint")return!1;if(f instanceof t)return!0;const{secretKey:p,publicKey:m,publicKeyUncompressed:E}=s;if(n.allowedLengths||p===m)return;const b=hr("key",f).length;return b===m||b===E}function d(f,p,m=!0){if(u(f)===!0)throw new Error("first arg must be private key");if(u(p)===!1)throw new Error("second arg must be public key");const E=Qg(n,f);return t.fromHex(p).multiply(E).toBytes(m)}return Object.freeze({getPublicKey:c,getSharedSecret:d,keygen:l,Point:t,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:i,randomPrivateKey:a,normPrivateKeyToScalar:f=>Qg(n,f),precompute(f=8,p=t.BASE){return p.precompute(f,!1)}},lengths:s})}function eie(t,e,n={}){Rz(e),FE(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||aM,s=n.hmac||((y,...g)=>JW(e,y,ol(...g))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o,{keygen:l,getPublicKey:u,getSharedSecret:d,utils:h,lengths:f}=Xse(t,n),p={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},m="compact";function E(y){const g=a>>A0;return y>g}function b(y,g){if(!o.isValidNot0(g))throw new Error(`invalid signature ${y}: out of range 1..Point.Fn.ORDER`);return g}function x(y,g){ZP(g);const A=f.signature,I=g==="compact"?A:g==="recovered"?A+1:void 0;return mc(y,I,`${g} signature`)}class w{constructor(g,A,I){this.r=b("r",g),this.s=b("s",A),I!=null&&(this.recovery=I),Object.freeze(this)}static fromBytes(g,A=m){x(g,A);let I;if(A==="der"){const{r:O,s:S}=ou.toSig(mc(g));return new w(O,S)}A==="recovered"&&(I=g[0],A="compact",g=g.subarray(1));const T=o.BYTES,R=g.subarray(0,T),B=g.subarray(T,T*2);return new w(o.fromBytes(R),o.fromBytes(B),I)}static fromHex(g,A){return this.fromBytes(PC(g),A)}addRecoveryBit(g){return new w(this.r,this.s,g)}recoverPublicKey(g){const A=i.ORDER,{r:I,s:T,recovery:R}=this;if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");if(a*XW<A&&R>1)throw new Error("recovery id is ambiguous for h>1 curve");const O=R===2||R===3?I+a:I;if(!i.isValid(O))throw new Error("recovery id 2 or 3 invalid");const S=i.toBytes(O),z=t.fromBytes(ol(eH((R&1)===0),S)),Y=o.inv(O),J=_(hr("msgHash",g)),ae=o.create(-J*Y),pe=o.create(T*Y),ve=t.BASE.multiplyUnsafe(ae).add(z.multiplyUnsafe(pe));if(ve.is0())throw new Error("point at infinify");return ve.assertValidity(),ve}hasHighS(){return E(this.s)}toBytes(g=m){if(ZP(g),g==="der")return PC(ou.hexFromSig(this));const A=o.toBytes(this.r),I=o.toBytes(this.s);if(g==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return ol(Uint8Array.of(this.recovery),A,I)}return ol(A,I)}toHex(g){return Hp(this.toBytes(g))}assertValidity(){}static fromCompact(g){return w.fromBytes(hr("sig",g),"compact")}static fromDER(g){return w.fromBytes(hr("sig",g),"der")}normalizeS(){return this.hasHighS()?new w(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Hp(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Hp(this.toBytes("compact"))}}const N=n.bits2int||function(g){if(g.length>8192)throw new Error("input is too large");const A=_2(g),I=g.length*8-c;return I>0?A>>BigInt(I):A},_=n.bits2int_modN||function(g){return o.create(N(g))},L=UE(c);function U(y){return qP("num < 2^"+c,y,Nu,L),o.toBytes(y)}function F(y,g){return mc(y,void 0,"message"),g?mc(e(y),void 0,"prehashed message"):y}function M(y,g,A){if(["recovered","canonical"].some(ae=>ae in A))throw new Error("sign() legacy options not supported");const{lowS:I,prehash:T,extraEntropy:R}=nT(A,p);y=F(y,T);const B=_(y),O=Qg(o,g),S=[U(O),U(B)];if(R!=null&&R!==!1){const ae=R===!0?r(f.secretKey):R;S.push(hr("extraEntropy",ae))}const z=ol(...S),Y=B;function J(ae){const pe=N(ae);if(!o.isValidNot0(pe))return;const ve=o.inv(pe),de=t.BASE.multiply(pe).toAffine(),$e=o.create(de.x);if($e===Nu)return;const Te=o.create(ve*o.create(Y+$e*O));if(Te===Nu)return;let dt=(de.x===$e?0:2)|Number(de.y&A0),vt=Te;return I&&E(Te)&&(vt=o.neg(Te),dt^=1),new w($e,vt,dt)}return{seed:z,k2sig:J}}function W(y,g,A={}){y=hr("message",y);const{seed:I,k2sig:T}=M(y,g,A);return Nne(e.outputLen,o.BYTES,s)(I,T)}function H(y){let g;const A=typeof y=="string"||BE(y),I=!A&&y!==null&&typeof y=="object"&&typeof y.r=="bigint"&&typeof y.s=="bigint";if(!A&&!I)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(I)g=new w(y.r,y.s);else if(A){try{g=w.fromBytes(hr("sig",y),"der")}catch(T){if(!(T instanceof ou.Err))throw T}if(!g)try{g=w.fromBytes(hr("sig",y),"compact")}catch{return!1}}return g||!1}function K(y,g,A,I={}){const{lowS:T,prehash:R,format:B}=nT(I,p);if(A=hr("publicKey",A),g=F(hr("message",g),R),"strict"in I)throw new Error("options.strict was renamed to lowS");const O=B===void 0?H(y):w.fromBytes(hr("sig",y),B);if(O===!1)return!1;try{const S=t.fromBytes(A);if(T&&O.hasHighS())return!1;const{r:z,s:Y}=O,J=_(g),ae=o.inv(Y),pe=o.create(J*ae),ve=o.create(z*ae),de=t.BASE.multiplyUnsafe(pe).add(S.multiplyUnsafe(ve));return de.is0()?!1:o.create(de.x)===z}catch{return!1}}function P(y,g,A={}){const{prehash:I}=nT(A,p);return g=F(g,I),w.fromBytes(y,"recovered").recoverPublicKey(g).toBytes()}return Object.freeze({keygen:l,getPublicKey:u,getSharedSecret:d,utils:h,lengths:f,Point:t,sign:W,verify:K,recoverPublicKey:P,Signature:w,hash:e})}function tie(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp;let r=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=Am(e.n,{BITS:t.nBitLength,allowedLengths:r,modFromBytes:t.wrapPrivateKey}),i={Fp:n,Fn:s,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function nie(t){const{CURVE:e,curveOpts:n}=tie(t),r={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,hash:t.hash,ecdsaOpts:r}}function rie(t,e){const n=e.Point;return Object.assign({},e,{ProjectivePoint:n,CURVE:Object.assign({},t,Zz(n.Fn.ORDER,n.Fn.BITS))})}function sie(t){const{CURVE:e,curveOpts:n,hash:r,ecdsaOpts:s}=nie(t),i=Jse(e,n),o=eie(i,r,s);return rie(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function iie(t,e){const n=r=>sie({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const IM={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},oie={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},C8=BigInt(2);function aie(t){const e=IM.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=dr(u,n,e)*u%e,h=dr(d,n,e)*u%e,f=dr(h,C8,e)*l%e,p=dr(f,s,e)*f%e,m=dr(p,i,e)*p%e,E=dr(m,a,e)*m%e,b=dr(E,c,e)*E%e,x=dr(b,a,e)*m%e,w=dr(x,n,e)*u%e,N=dr(w,o,e)*p%e,_=dr(N,r,e)*l%e,L=dr(_,C8,e);if(!QP.eql(QP.sqr(L),t))throw new Error("Cannot find square root");return L}const QP=Am(IM.p,{sqrt:aie}),NM=iie({...IM,Fp:QP,lowS:!0,endo:oie},Uz),cie=gw.utils.randomPrivateKey,_8=()=>{const t=gw.utils.randomPrivateKey(),e=$C(t),n=new Uint8Array(64);return n.set(t),n.set(e,32),{publicKey:e,secretKey:n}},$C=gw.getPublicKey;function I8(t){try{return gw.ExtendedPoint.fromHex(t),!0}catch{return!1}}const TM=(t,e)=>gw.sign(t,e.slice(0,32)),lie=gw.verify,_t=t=>ot.isBuffer(t)?t:t instanceof Uint8Array?ot.from(t.buffer,t.byteOffset,t.byteLength):ot.from(t);class kM{constructor(e){Object.assign(this,e)}encode(){return ot.from(fW(Xb,this))}static decode(e){return pW(Xb,this,e)}static decodeUnchecked(e){return cW(Xb,this,e)}}class uie extends kM{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(n=>{this.enum=n})}}const Xb=new Map;var nH;const rH=32,Al=32;function die(t){return t._bn!==void 0}let N8=1;class fe extends kM{constructor(e){if(super({}),this._bn=void 0,die(e))this._bn=e._bn;else{if(typeof e=="string"){const n=Ls.decode(e);if(n.length!=Al)throw new Error("Invalid public key input");this._bn=new w8(n)}else this._bn=new w8(e);if(this._bn.byteLength()>Al)throw new Error("Invalid public key input")}}static unique(){const e=new fe(N8);return N8+=1,new fe(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Ls.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ot);if(e.length===Al)return e;const n=ot.alloc(32);return e.copy(n,32-e.length),n}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,n,r){const s=ot.concat([e.toBuffer(),ot.from(n),r.toBuffer()]),i=b8(s);return new fe(i)}static createProgramAddressSync(e,n){let r=ot.alloc(0);e.forEach(function(i){if(i.length>rH)throw new TypeError("Max seed length exceeded");r=ot.concat([r,_t(i)])}),r=ot.concat([r,n.toBuffer(),ot.from("ProgramDerivedAddress")]);const s=b8(r);if(I8(s))throw new Error("Invalid seeds, address must fall off the curve");return new fe(s)}static async createProgramAddress(e,n){return this.createProgramAddressSync(e,n)}static findProgramAddressSync(e,n){let r=255,s;for(;r!=0;){try{const i=e.concat(ot.from([r]));s=this.createProgramAddressSync(i,n)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,n){return this.findProgramAddressSync(e,n)}static isOnCurve(e){const n=new fe(e);return I8(n.toBytes())}}nH=fe;fe.default=new nH("11111111111111111111111111111111");Xb.set(fe,{kind:"struct",fields:[["_bn","u256"]]});class hie{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const n=_t(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=n.slice(32,64),this._secretKey=n.slice(0,32)}else this._secretKey=_t(cie()),this._publicKey=_t($C(this._secretKey))}get publicKey(){return new fe(this._publicKey)}get secretKey(){return ot.concat([this._secretKey,this._publicKey],64)}}const fie=new fe("BPFLoader1111111111111111111111111111111111"),Rh=1280-40-8,M2=127,V1=64;class PM extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(PM.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class RM extends Error{constructor(e,n){super(`Transaction was not confirmed in ${n.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(RM.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Jg extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Jg.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class K1{constructor(e,n){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=n}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const n of this.keySegments()){if(e<n.length)return n[e];e-=n.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,o)=>{r.set(i.toBase58(),o)});const s=i=>{const o=r.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const Rt=(t="publicKey")=>On(32,t),pie=(t="signature")=>On(64,t),ep=(t="string")=>{const e=qe([Ke("length"),Ke("lengthPadding"),On(Ph(Ke(),-8),"chars")],t),n=e.decode.bind(e),r=e.encode.bind(e),s=e;return s.decode=(i,o)=>n(i,o).chars.toString(),s.encode=(i,o,a)=>{const c={chars:ot.from(i,"utf8")};return r(c,o,a)},s.alloc=i=>Ke().span+Ke().span+ot.from(i,"utf8").length,s},mie=(t="authorized")=>qe([Rt("staker"),Rt("withdrawer")],t),gie=(t="lockup")=>qe([zo("unixTimestamp"),zo("epoch"),Rt("custodian")],t),yie=(t="voteInit")=>qe([Rt("nodePubkey"),Rt("authorizedVoter"),Rt("authorizedWithdrawer"),jt("commission")],t),wie=(t="voteAuthorizeWithSeedArgs")=>qe([Ke("voteAuthorizationType"),Rt("currentAuthorityDerivedKeyOwnerPubkey"),ep("currentAuthorityDerivedKeySeed"),Rt("newAuthorized")],t);function sH(t,e){const n=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(e[s.property]);if("count"in s&&"elementLayout"in s){const i=e[s.property];if(Array.isArray(i))return i.length*n(s.elementLayout)}else if("fields"in s)return sH({layout:s},e[s.property]);return 0};let r=0;return t.layout.fields.forEach(s=>{r+=n(s)}),r}function oo(t){let e=0,n=0;for(;;){let r=t.shift();if(e|=(r&127)<<n*7,n+=1,!(r&128))break}return e}function Wo(t,e){let n=e;for(;;){let r=n&127;if(n>>=7,n==0){t.push(r);break}else r|=128,t.push(r)}}function tn(t,e){if(!t)throw new Error(e||"Assertion failed")}class D2{constructor(e,n){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=n}static compile(e,n){const r=new Map,s=o=>{const a=o.toBase58();let c=r.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,c)),c},i=s(n);i.isSigner=!0,i.isWritable=!0;for(const o of e){s(o.programId).isInvoked=!0;for(const a of o.keys){const c=s(a.pubkey);c.isSigner||(c.isSigner=a.isSigner),c.isWritable||(c.isWritable=a.isWritable)}}return new D2(n,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];tn(e.length<=256,"Max static account keys length exceeded");const n=e.filter(([,c])=>c.isSigner&&c.isWritable),r=e.filter(([,c])=>c.isSigner&&!c.isWritable),s=e.filter(([,c])=>!c.isSigner&&c.isWritable),i=e.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:n.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{tn(n.length>0,"Expected at least one writable signer key");const[c]=n[0];tn(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...n.map(([c])=>new fe(c)),...r.map(([c])=>new fe(c)),...s.map(([c])=>new fe(c)),...i.map(([c])=>new fe(c))];return[o,a]}extractTableLookup(e){const[n,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(n.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(e,n){const r=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(n(o)){const a=new fe(i),c=e.findIndex(l=>l.equals(a));c>=0&&(tn(c<256,"Max lookup table index exceeded"),r.push(c),s.push(a),this.keyMetaMap.delete(i))}return[r,s]}}const iH="Reached end of buffer unexpectedly";function al(t){if(t.length===0)throw new Error(iH);return t.shift()}function ao(t,...e){const[n]=e;if(e.length===2?n+(e[1]??0)>t.length:n>=t.length)throw new Error(iH);return t.splice(...e)}class Nc{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(n=>new fe(n)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(n=>this.indexToProgramIds.set(n.programIdIndex,this.accountKeys[n.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Ls.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new K1(this.staticAccountKeys)}static compile(e){const n=D2.compile(e.instructions,e.payerKey),[r,s]=n.getMessageComponents(),o=new K1(s).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Ls.encode(a.data)}));return new Nc({header:r,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-n,i=this.accountKeys.length-n-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=n-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,n)=>!this.isProgramId(n))}serialize(){const e=this.accountKeys.length;let n=[];Wo(n,e);const r=this.instructions.map(d=>{const{accounts:h,programIdIndex:f}=d,p=Array.from(Ls.decode(d.data));let m=[];Wo(m,h.length);let E=[];return Wo(E,p.length),{programIdIndex:f,keyIndicesCount:ot.from(m),keyIndices:h,dataLength:ot.from(E),data:p}});let s=[];Wo(s,r.length);let i=ot.alloc(Rh);ot.from(s).copy(i);let o=s.length;r.forEach(d=>{const f=qe([jt("programIdIndex"),On(d.keyIndicesCount.length,"keyIndicesCount"),js(jt("keyIndex"),d.keyIndices.length,"keyIndices"),On(d.dataLength.length,"dataLength"),js(jt("userdatum"),d.data.length,"data")]).encode(d,i,o);o+=f}),i=i.slice(0,o);const a=qe([On(1,"numRequiredSignatures"),On(1,"numReadonlySignedAccounts"),On(1,"numReadonlyUnsignedAccounts"),On(n.length,"keyCount"),js(Rt("key"),e,"keys"),Rt("recentBlockhash")]),c={numRequiredSignatures:ot.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ot.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ot.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ot.from(n),keys:this.accountKeys.map(d=>_t(d.toBytes())),recentBlockhash:Ls.decode(this.recentBlockhash)};let l=ot.alloc(2048);const u=a.encode(c,l);return i.copy(l,u),l.slice(0,u+i.length)}static from(e){let n=[...e];const r=al(n);if(r!==(r&M2))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=al(n),i=al(n),o=oo(n);let a=[];for(let h=0;h<o;h++){const f=ao(n,0,Al);a.push(new fe(ot.from(f)))}const c=ao(n,0,Al),l=oo(n);let u=[];for(let h=0;h<l;h++){const f=al(n),p=oo(n),m=ao(n,0,p),E=oo(n),b=ao(n,0,E),x=Ls.encode(ot.from(b));u.push({programIdIndex:f,accounts:m,data:x})}const d={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:Ls.encode(ot.from(c)),accountKeys:a,instructions:u};return new Nc(d)}}class rm{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const n of this.addressTableLookups)e+=n.readonlyIndexes.length+n.writableIndexes.length;return e}getAccountKeys(e){let n;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");n=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)n=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new K1(this.staticAccountKeys,n)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const s=e-r,i=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return s<i}else if(e>=this.header.numRequiredSignatures){const s=e-n,o=r-n-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=n-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const n={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=e.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)n.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)n.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return n}static compile(e){const n=D2.compile(e.instructions,e.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const u of i){const d=n.extractTableLookup(u);if(d!==void 0){const[h,{writable:f,readonly:p}]=d;r.push(h),s.writable.push(...f),s.readonly.push(...p)}}const[o,a]=n.getMessageComponents(),l=new K1(a,s).compileInstructions(e.instructions);return new rm({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:l,addressTableLookups:r})}serialize(){const e=Array();Wo(e,this.staticAccountKeys.length);const n=this.serializeInstructions(),r=Array();Wo(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Wo(i,this.addressTableLookups.length);const o=qe([jt("prefix"),qe([jt("numRequiredSignatures"),jt("numReadonlySignedAccounts"),jt("numReadonlyUnsignedAccounts")],"header"),On(e.length,"staticAccountKeysLength"),js(Rt(),this.staticAccountKeys.length,"staticAccountKeys"),Rt("recentBlockhash"),On(r.length,"instructionsLength"),On(n.length,"serializedInstructions"),On(i.length,"addressTableLookupsLength"),On(s.length,"serializedAddressTableLookups")]),a=new Uint8Array(Rh),c=128,l=o.encode({prefix:c,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(u=>u.toBytes()),recentBlockhash:Ls.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:n,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},a);return a.slice(0,l)}serializeInstructions(){let e=0;const n=new Uint8Array(Rh);for(const r of this.compiledInstructions){const s=Array();Wo(s,r.accountKeyIndexes.length);const i=Array();Wo(i,r.data.length);const o=qe([jt("programIdIndex"),On(s.length,"encodedAccountKeyIndexesLength"),js(jt(),r.accountKeyIndexes.length,"accountKeyIndexes"),On(i.length,"encodedDataLength"),On(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},n,e)}return n.slice(0,e)}serializeAddressTableLookups(){let e=0;const n=new Uint8Array(Rh);for(const r of this.addressTableLookups){const s=Array();Wo(s,r.writableIndexes.length);const i=Array();Wo(i,r.readonlyIndexes.length);const o=qe([Rt("accountKey"),On(s.length,"encodedWritableIndexesLength"),js(jt(),r.writableIndexes.length,"writableIndexes"),On(i.length,"encodedReadonlyIndexesLength"),js(jt(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},n,e)}return n.slice(0,e)}static deserialize(e){let n=[...e];const r=al(n),s=r&M2;tn(r!==s,"Expected versioned message but received legacy message");const i=s;tn(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:al(n),numReadonlySignedAccounts:al(n),numReadonlyUnsignedAccounts:al(n)},a=[],c=oo(n);for(let p=0;p<c;p++)a.push(new fe(ao(n,0,Al)));const l=Ls.encode(ao(n,0,Al)),u=oo(n),d=[];for(let p=0;p<u;p++){const m=al(n),E=oo(n),b=ao(n,0,E),x=oo(n),w=new Uint8Array(ao(n,0,x));d.push({programIdIndex:m,accountKeyIndexes:b,data:w})}const h=oo(n),f=[];for(let p=0;p<h;p++){const m=new fe(ao(n,0,Al)),E=oo(n),b=ao(n,0,E),x=oo(n),w=ao(n,0,x);f.push({accountKey:m,writableIndexes:b,readonlyIndexes:w})}return new rm({header:o,staticAccountKeys:a,recentBlockhash:l,compiledInstructions:d,addressTableLookups:f})}}const OM={deserializeMessageVersion(t){const e=t[0],n=e&M2;return n===e?"legacy":n},deserialize:t=>{const e=OM.deserializeMessageVersion(t);if(e==="legacy")return Nc.from(t);if(e===0)return rm.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Yl=function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t}({});const bie=ot.alloc(V1).fill(0);class bn{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ot.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:n,isWritable:r})=>({pubkey:e.toJSON(),isSigner:n,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}let ln=class JP{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:n,nonceInfo:r}=e;this.minNonceContextSlot=n,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:n,lastValidBlockHeight:r}=e;this.recentBlockhash=n,this.lastValidBlockHeight=r}else{const{recentBlockhash:n,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=n}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(n=>{"instructions"in n?this.instructions=this.instructions.concat(n.instructions):"data"in n&&"programId"in n&&"keys"in n?this.instructions.push(n):this.instructions.push(new bn(n))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,n;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?n=[this.nonceInfo.nonceInstruction,...this.instructions]:n=this.instructions):(e=this.recentBlockhash,n=this.instructions),!e)throw new Error("Transaction recentBlockhash required");n.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let m=0;m<n.length;m++)if(n[m].programId===void 0)throw new Error(`Transaction instruction index ${m} has undefined program id`);const s=[],i=[];n.forEach(m=>{m.keys.forEach(b=>{i.push({...b})});const E=m.programId.toString();s.includes(E)||s.push(E)}),s.forEach(m=>{i.push({pubkey:new fe(m),isSigner:!1,isWritable:!1})});const o=[];i.forEach(m=>{const E=m.pubkey.toString(),b=o.findIndex(x=>x.pubkey.toString()===E);b>-1?(o[b].isWritable=o[b].isWritable||m.isWritable,o[b].isSigner=o[b].isSigner||m.isSigner):o.push(m)}),o.sort(function(m,E){if(m.isSigner!==E.isSigner)return m.isSigner?-1:1;if(m.isWritable!==E.isWritable)return m.isWritable?-1:1;const b={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return m.pubkey.toBase58().localeCompare(E.pubkey.toBase58(),"en",b)});const a=o.findIndex(m=>m.pubkey.equals(r));if(a>-1){const[m]=o.splice(a,1);m.isSigner=!0,m.isWritable=!0,o.unshift(m)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const m of this.signatures){const E=o.findIndex(b=>b.pubkey.equals(m.publicKey));if(E>-1)o[E].isSigner||(o[E].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${m.publicKey.toString()}`)}let c=0,l=0,u=0;const d=[],h=[];o.forEach(({pubkey:m,isSigner:E,isWritable:b})=>{E?(d.push(m.toString()),c+=1,b||(l+=1)):(h.push(m.toString()),b||(u+=1))});const f=d.concat(h),p=n.map(m=>{const{data:E,programId:b}=m;return{programIdIndex:f.indexOf(b.toString()),accounts:m.keys.map(x=>f.indexOf(x.pubkey.toString())),data:Ls.encode(E)}});return p.forEach(m=>{tn(m.programIdIndex>=0),m.accounts.forEach(E=>tn(E>=0))}),new Nc({header:{numRequiredSignatures:c,numReadonlySignedAccounts:l,numReadonlyUnsignedAccounts:u},accountKeys:f,recentBlockhash:e,instructions:p})}_compile(){const e=this.compileMessage(),n=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===n.length&&this.signatures.every((s,i)=>n[i].equals(s.publicKey))||(this.signatures=n.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const n=new Set;this.signatures=e.filter(r=>{const s=r.toString();return n.has(s)?!1:(n.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const i of e){const o=i.publicKey.toString();n.has(o)||(n.add(o),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const i of e){const o=i.publicKey.toString();n.has(o)||(n.add(o),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(e,...n){const r=e.serialize();n.forEach(s=>{const i=TM(r,s.secretKey);this._addSignature(s.publicKey,_t(i))})}addSignature(e,n){this._compile(),this._addSignature(e,n)}_addSignature(e,n){tn(n.length===64);const r=this.signatures.findIndex(s=>e.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=ot.from(n)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,n){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?n&&(r.missing||(r.missing=[])).push(i):lie(s,e,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:n,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,n);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(e){const{signatures:n}=this,r=[];Wo(r,n.length);const s=r.length+n.length*64+e.length,i=ot.alloc(s);return tn(n.length<256),ot.from(r).copy(i,0),n.forEach(({signature:o},a)=>{o!==null&&(tn(o.length===64,"signature has invalid length"),ot.from(o).copy(i,r.length+a*64))}),e.copy(i,r.length+n.length*64),tn(i.length<=Rh,`Transaction too large: ${i.length} > ${Rh}`),i}get keys(){return tn(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return tn(this.instructions.length===1),this.instructions[0].programId}get data(){return tn(this.instructions.length===1),this.instructions[0].data}static from(e){let n=[...e];const r=oo(n);let s=[];for(let i=0;i<r;i++){const o=ao(n,0,V1);s.push(Ls.encode(ot.from(o)))}return JP.populate(Nc.from(n),s)}static populate(e,n=[]){const r=new JP;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),n.forEach((s,i)=>{const o={signature:s==Ls.encode(bie)?null:Ls.decode(s),publicKey:e.accountKeys[i]};r.signatures.push(o)}),e.instructions.forEach(s=>{const i=s.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(c=>c.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new bn({keys:i,programId:e.accountKeys[s.programIdIndex],data:Ls.decode(s.data)}))}),r._message=e,r._json=r.toJSON(),r}};class MM{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,n){const{header:r,compiledInstructions:s,recentBlockhash:i}=e,{numRequiredSignatures:o,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:c}=r,l=o-a;tn(l>0,"Message header is invalid");const u=e.staticAccountKeys.length-o-c;tn(u>=0,"Message header is invalid");const d=e.getAccountKeys(n),h=d.get(0);if(h===void 0)throw new Error("Failed to decompile message because no account keys were found");const f=[];for(const p of s){const m=[];for(const b of p.accountKeyIndexes){const x=d.get(b);if(x===void 0)throw new Error(`Failed to find key for account key index ${b}`);const w=b<o;let N;w?N=b<l:b<d.staticAccountKeys.length?N=b-o<u:N=b-d.staticAccountKeys.length<d.accountKeysFromLookups.writable.length,m.push({pubkey:x,isSigner:b<r.numRequiredSignatures,isWritable:N})}const E=d.get(p.programIdIndex);if(E===void 0)throw new Error(`Failed to find program id for program id index ${p.programIdIndex}`);f.push(new bn({programId:E,data:_t(p.data),keys:m}))}return new MM({payerKey:h,instructions:f,recentBlockhash:i})}compileToLegacyMessage(){return Nc.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return rm.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class q1{get version(){return this.message.version}constructor(e,n){if(this.signatures=void 0,this.message=void 0,n!==void 0)tn(n.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=n;else{const r=[];for(let s=0;s<e.header.numRequiredSignatures;s++)r.push(new Uint8Array(V1));this.signatures=r}this.message=e}serialize(){const e=this.message.serialize(),n=Array();Wo(n,this.signatures.length);const r=qe([On(n.length,"encodedSignaturesLength"),js(pie(),this.signatures.length,"signatures"),On(e.length,"serializedMessage")]),s=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(n),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,i)}static deserialize(e){let n=[...e];const r=[],s=oo(n);for(let o=0;o<s;o++)r.push(new Uint8Array(ao(n,0,V1)));const i=OM.deserialize(new Uint8Array(n));return new q1(i,r)}sign(e){const n=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of e){const i=r.findIndex(o=>o.equals(s.publicKey));tn(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=TM(n,s.secretKey)}}addSignature(e,n){tn(n.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(e));tn(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=n}}const vie=160,Eie=64,Aie=vie/Eie,oH=1e3/Aie,hc=new fe("SysvarC1ock11111111111111111111111111111111"),xie=new fe("SysvarEpochSchedu1e111111111111111111111111"),Sie=new fe("Sysvar1nstructions1111111111111111111111111"),Qx=new fe("SysvarRecentB1ockHashes11111111111111111111"),Uy=new fe("SysvarRent111111111111111111111111111111111"),Cie=new fe("SysvarRewards111111111111111111111111111111"),_ie=new fe("SysvarS1otHashes111111111111111111111111111"),Iie=new fe("SysvarS1otHistory11111111111111111111111111"),Jx=new fe("SysvarStakeHistory1111111111111111111111111");class G1 extends Error{constructor({action:e,signature:n,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${n} resulted in an error. 
${r}. `+i+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+i+o;break;default:a=`Unknown action '${(c=>c)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=n,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((n,r)=>{e.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,n(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}const Nie={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class Qe extends Error{constructor({code:e,message:n,data:r},s){super(s!=null?`${s}: ${n}`:n),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}async function XP(t,e,n,r){const s=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},i=await t.sendTransaction(e,n,s);let o;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)o=(await t.confirmTransaction({abortSignal:r==null?void 0:r.abortSignal,signature:i,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},r&&r.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:a}=e.nonceInfo,c=a.keys[0].pubkey;o=(await t.confirmTransaction({abortSignal:r==null?void 0:r.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:c,nonceValue:e.nonceInfo.nonce,signature:i},r&&r.commitment)).value}else(r==null?void 0:r.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await t.confirmTransaction(i,r&&r.commitment)).value;if(o.err)throw i!=null?new G1({action:"send",signature:i,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${i} failed (${JSON.stringify(o)})`);return i}function Bf(t){return new Promise(e=>setTimeout(e,t))}function Ht(t,e){const n=t.layout.span>=0?t.layout.span:sH(t,e),r=ot.alloc(n),s=Object.assign({instruction:t.index},e);return t.layout.encode(s,r),r}function pn(t,e){let n;try{n=t.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(n.instruction!==t.index)throw new Error(`invalid instruction; instruction index mismatch ${n.instruction} != ${t.index}`);return n}const aH=Ps("lamportsPerSignature"),cH=qe([Ke("version"),Ke("state"),Rt("authorizedPubkey"),Rt("nonce"),qe([aH],"feeCalculator")]),eR=cH.span;class B2{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const n=cH.decode(_t(e),0);return new B2({authorizedPubkey:new fe(n.authorizedPubkey),nonce:new fe(n.nonce).toString(),feeCalculator:n.feeCalculator})}}function Fy(t){const e=On(8,t),n=e.decode.bind(e),r=e.encode.bind(e),s=e,i=Kre();return s.decode=(o,a)=>{const c=n(o,a);return i.decode(c)},s.encode=(o,a,c)=>{const l=i.encode(o);return r(l,a,c)},s}class Tie{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=Ke("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(Un))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a SystemInstruction");return s}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:n,space:r,programId:s}=pn(Un.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:n,space:r,programId:new fe(s)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:n}=pn(Un.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:n}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:n,seed:r,programId:s}=pn(Un.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:n,seed:r,programId:new fe(s)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:n}=pn(Un.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:n}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:n,seed:r,space:s,programId:i}=pn(Un.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new fe(n),seed:r,space:s,programId:new fe(i)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:n}=pn(Un.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new fe(n)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:n,seed:r,programId:s}=pn(Un.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new fe(n),seed:r,programId:new fe(s)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:n,seed:r,lamports:s,space:i,programId:o}=pn(Un.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new fe(n),seed:r,lamports:s,space:i,programId:new fe(o)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:n}=pn(Un.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new fe(n)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),pn(Un.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:n}=pn(Un.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:n}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:n}=pn(Un.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new fe(n)}}static checkProgramId(e){if(!e.equals(Yr.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,n){if(e.length<n)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${n}`)}}const Un=Object.freeze({Create:{index:0,layout:qe([Ke("instruction"),zo("lamports"),zo("space"),Rt("programId")])},Assign:{index:1,layout:qe([Ke("instruction"),Rt("programId")])},Transfer:{index:2,layout:qe([Ke("instruction"),Fy("lamports")])},CreateWithSeed:{index:3,layout:qe([Ke("instruction"),Rt("base"),ep("seed"),zo("lamports"),zo("space"),Rt("programId")])},AdvanceNonceAccount:{index:4,layout:qe([Ke("instruction")])},WithdrawNonceAccount:{index:5,layout:qe([Ke("instruction"),zo("lamports")])},InitializeNonceAccount:{index:6,layout:qe([Ke("instruction"),Rt("authorized")])},AuthorizeNonceAccount:{index:7,layout:qe([Ke("instruction"),Rt("authorized")])},Allocate:{index:8,layout:qe([Ke("instruction"),zo("space")])},AllocateWithSeed:{index:9,layout:qe([Ke("instruction"),Rt("base"),ep("seed"),zo("space"),Rt("programId")])},AssignWithSeed:{index:10,layout:qe([Ke("instruction"),Rt("base"),ep("seed"),Rt("programId")])},TransferWithSeed:{index:11,layout:qe([Ke("instruction"),Fy("lamports"),ep("seed"),Rt("programId")])},UpgradeNonceAccount:{index:12,layout:qe([Ke("instruction")])}});class Yr{constructor(){}static createAccount(e){const n=Un.Create,r=Ht(n,{lamports:e.lamports,space:e.space,programId:_t(e.programId.toBuffer())});return new bn({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let n,r;if("basePubkey"in e){const s=Un.TransferWithSeed;n=Ht(s,{lamports:BigInt(e.lamports),seed:e.seed,programId:_t(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=Un.Transfer;n=Ht(s,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new bn({keys:r,programId:this.programId,data:n})}static assign(e){let n,r;if("basePubkey"in e){const s=Un.AssignWithSeed;n=Ht(s,{base:_t(e.basePubkey.toBuffer()),seed:e.seed,programId:_t(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Un.Assign;n=Ht(s,{programId:_t(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new bn({keys:r,programId:this.programId,data:n})}static createAccountWithSeed(e){const n=Un.CreateWithSeed,r=Ht(n,{base:_t(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:_t(e.programId.toBuffer())});let s=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||s.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new bn({keys:s,programId:this.programId,data:r})}static createNonceAccount(e){const n=new ln;"basePubkey"in e&&"seed"in e?n.add(Yr.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:eR,programId:this.programId})):n.add(Yr.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:eR,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return n.add(this.nonceInitialize(r)),n}static nonceInitialize(e){const n=Un.InitializeNonceAccount,r=Ht(n,{authorized:_t(e.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Qx,isSigner:!1,isWritable:!1},{pubkey:Uy,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new bn(s)}static nonceAdvance(e){const n=Un.AdvanceNonceAccount,r=Ht(n),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Qx,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new bn(s)}static nonceWithdraw(e){const n=Un.WithdrawNonceAccount,r=Ht(n,{lamports:e.lamports});return new bn({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Qx,isSigner:!1,isWritable:!1},{pubkey:Uy,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){const n=Un.AuthorizeNonceAccount,r=Ht(n,{authorized:_t(e.newAuthorizedPubkey.toBuffer())});return new bn({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let n,r;if("basePubkey"in e){const s=Un.AllocateWithSeed;n=Ht(s,{base:_t(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:_t(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Un.Allocate;n=Ht(s,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new bn({keys:r,programId:this.programId,data:n})}}Yr.programId=new fe("11111111111111111111111111111111");const kie=Rh-300;class sm{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/sm.chunkSize)+1+1)}static async load(e,n,r,s,i){{const d=await e.getMinimumBalanceForRentExemption(i.length),h=await e.getAccountInfo(r.publicKey,"confirmed");let f=null;if(h!==null){if(h.executable)return console.error("Program load failed, account is already executable"),!1;h.data.length!==i.length&&(f=f||new ln,f.add(Yr.allocate({accountPubkey:r.publicKey,space:i.length}))),h.owner.equals(s)||(f=f||new ln,f.add(Yr.assign({accountPubkey:r.publicKey,programId:s}))),h.lamports<d&&(f=f||new ln,f.add(Yr.transfer({fromPubkey:n.publicKey,toPubkey:r.publicKey,lamports:d-h.lamports})))}else f=new ln().add(Yr.createAccount({fromPubkey:n.publicKey,newAccountPubkey:r.publicKey,lamports:d>0?d:1,space:i.length,programId:s}));f!==null&&await XP(e,f,[n,r],{commitment:"confirmed"})}const o=qe([Ke("instruction"),Ke("offset"),Ke("bytesLength"),Ke("bytesLengthPadding"),js(jt("byte"),Ph(Ke(),-8),"bytes")]),a=sm.chunkSize;let c=0,l=i,u=[];for(;l.length>0;){const d=l.slice(0,a),h=ot.alloc(a+16);o.encode({instruction:0,offset:c,bytes:d,bytesLength:0,bytesLengthPadding:0},h);const f=new ln().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:h});u.push(XP(e,f,[n,r],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await Bf(1e3/4),c+=a,l=l.slice(a)}await Promise.all(u);{const d=qe([Ke("instruction")]),h=ot.alloc(d.span);d.encode({instruction:1},h);const f=new ln().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:Uy,isSigner:!1,isWritable:!1}],programId:s,data:h}),p="processed",m=await e.sendTransaction(f,[n,r],{preflightCommitment:p}),{context:E,value:b}=await e.confirmTransaction({signature:m,lastValidBlockHeight:f.lastValidBlockHeight,blockhash:f.recentBlockhash},p);if(b.err)throw new Error(`Transaction ${m} failed (${JSON.stringify(b)})`);for(;;){try{if(await e.getSlot({commitment:p})>E.slot)break}catch{}await new Promise(x=>setTimeout(x,Math.round(oH/2)))}}return!0}}sm.chunkSize=kie;const Pie=new fe("BPFLoader2111111111111111111111111111111111");class Rie{static getMinNumSignatures(e){return sm.getMinNumSignatures(e)}static load(e,n,r,s,i){return sm.load(e,n,r,i,s)}}function Oie(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rT,T8;function Mie(){if(T8)return rT;T8=1;var t=Object.prototype.toString,e=Object.keys||function(r){var s=[];for(var i in r)s.push(i);return s};function n(r,s){var i,o,a,c,l,u,d;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return n(r.toJSON(),s);if(d=t.call(r),d==="[object Array]"){for(a="[",o=r.length-1,i=0;i<o;i++)a+=n(r[i],!0)+",";return o>-1&&(a+=n(r[i],!0)),a+"]"}else if(d==="[object Object]"){for(c=e(r).sort(),o=c.length,a="",i=0;i<o;)l=c[i],u=n(r[l],!1),u!==void 0&&(a&&(a+=","),a+=JSON.stringify(l)+":"+u),i++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return rT=function(r){var s=n(r,!1);if(s!==void 0)return""+s},rT}var Die=Mie(),k8=Oie(Die);const Vw=32;function sT(t){let e=0;for(;t>1;)t/=2,e++;return e}function Bie(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class lH{constructor(e,n,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=n,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const n=sT(Bie(e+Vw+1))-sT(Vw)-1,r=this.getSlotsInEpoch(n),s=e-(r-Vw);return[n,s]}else{const n=e-this.firstNormalSlot,r=Math.floor(n/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=n%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Vw:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+sT(Vw)):this.slotsPerEpoch}}var Lie=globalThis.fetch;class Uie extends Rse{constructor(e,n,r){const s=i=>{const o=kse(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...n});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,e,n,r),this.underlyingSocket=void 0}call(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}notify(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}function Fie(t,e){let n;try{n=t.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(n.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${n.typeIndex} != ${t.index}`);return n}const P8=56;class tR{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const n=Fie(jie,e),r=e.length-P8;tn(r>=0,"lookup table is invalid"),tn(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=qe([js(Rt(),s,"addresses")]).decode(e.slice(P8));return{deactivationSlot:n.deactivationSlot,lastExtendedSlot:n.lastExtendedSlot,lastExtendedSlotStartIndex:n.lastExtendedStartIndex,authority:n.authority.length!==0?new fe(n.authority[0]):void 0,addresses:i.map(o=>new fe(o))}}}const jie={index:1,layout:qe([Ke("typeIndex"),Fy("deactivationSlot"),Ps("lastExtendedSlot"),jt("lastExtendedStartIndex"),jt(),js(Rt(),Ph(jt(),-1),"authority")])},$ie=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function zie(t){const e=t.match($ie);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[n,r,s,i]=e,o=t.startsWith("https:")?"wss:":"ws:",a=s==null?null:parseInt(s.slice(1),10),c=a==null?"":`:${a+1}`;return`${o}//${r}${c}${i}`}const ar=zE(SM(fe),xe(),t=>new fe(t)),uH=CM([xe(),nr("base64")]),DM=zE(SM(ot),uH,t=>ot.from(t[0],"base64")),dH=30*1e3;function Wie(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function Bn(t){let e,n;if(typeof t=="string")e=t;else if(t){const{commitment:r,...s}=t;e=r,n=s}return{commitment:e,config:n}}function R8(t){return t.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function hH(t){return Wi([ge({jsonrpc:nr("2.0"),id:xe(),result:t}),ge({jsonrpc:nr("2.0"),id:xe(),error:ge({code:bw(),message:xe(),data:tt(Jre())})})])}const Hie=hH(bw());function Ct(t){return zE(hH(t),Hie,e=>"error"in e?e:{...e,result:Ie(e.result,t)})}function wr(t){return Ct(ge({context:ge({slot:re()}),value:t}))}function L2(t){return ge({context:ge({slot:re()}),value:t})}function iT(t,e){return t===0?new rm({header:e.header,staticAccountKeys:e.accountKeys.map(n=>new fe(n)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(n=>({programIdIndex:n.programIdIndex,accountKeyIndexes:n.accounts,data:Ls.decode(n.data)})),addressTableLookups:e.addressTableLookups}):new Nc(e)}const Vie=ge({foundation:re(),foundationTerm:re(),initial:re(),taper:re(),terminal:re()}),Kie=Ct(ke(Re(ge({epoch:re(),effectiveSlot:re(),amount:re(),postBalance:re(),commission:tt(Re(re()))})))),qie=ke(ge({slot:re(),prioritizationFee:re()})),Gie=ge({total:re(),validator:re(),foundation:re(),epoch:re()}),Yie=ge({epoch:re(),slotIndex:re(),slotsInEpoch:re(),absoluteSlot:re(),blockHeight:tt(re()),transactionCount:tt(re())}),Zie=ge({slotsPerEpoch:re(),leaderScheduleSlotOffset:re(),warmup:Tl(),firstNormalEpoch:re(),firstNormalSlot:re()}),Qie=LW(xe(),ke(re())),Cm=Re(Wi([ge({}),xe()])),Jie=ge({err:Cm}),Xie=nr("receivedSignature"),eoe=ge({"solana-core":xe(),"feature-set":tt(re())}),toe=ge({program:xe(),programId:ar,parsed:bw()}),noe=ge({programId:ar,accounts:ke(ar),data:xe()}),O8=wr(ge({err:Re(Wi([ge({}),xe()])),logs:Re(ke(xe())),accounts:tt(Re(ke(Re(ge({executable:Tl(),owner:xe(),lamports:re(),data:ke(xe()),rentEpoch:tt(re())}))))),unitsConsumed:tt(re()),returnData:tt(Re(ge({programId:xe(),data:CM([xe(),nr("base64")])}))),innerInstructions:tt(Re(ke(ge({index:re(),instructions:ke(Wi([toe,noe]))}))))})),roe=wr(ge({byIdentity:LW(xe(),ke(re())),range:ge({firstSlot:re(),lastSlot:re()})}));function soe(t,e,n,r,s,i){const o=n||Lie;let a;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return r&&(c=async(u,d)=>{const h=await new Promise((f,p)=>{try{r(u,d,(m,E)=>f([m,E]))}catch(m){p(m)}});return await o(...h)}),new Ise(async(u,d)=>{const h={method:"POST",body:u,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},sae)};try{let f=5,p,m=500;for(;c?p=await c(t,h):p=await o(t,h),!(p.status!==429||s===!0||(f-=1,f===0));)console.error(`Server responded with ${p.status} ${p.statusText}.  Retrying after ${m}ms delay...`),await Bf(m),m*=2;const E=await p.text();p.ok?d(null,E):d(new Error(`${p.status} ${p.statusText}: ${E}`))}catch(f){f instanceof Error&&d(f)}},{})}function ioe(t){return(e,n)=>new Promise((r,s)=>{t.request(e,n,(i,o)=>{if(i){s(i);return}r(o)})})}function ooe(t){return e=>new Promise((n,r)=>{e.length===0&&n([]);const s=e.map(i=>t.request(i.methodName,i.args));t.request(s,(i,o)=>{if(i){r(i);return}n(o)})})}const aoe=Ct(Vie),coe=Ct(Gie),loe=Ct(qie),uoe=Ct(Yie),doe=Ct(Zie),hoe=Ct(Qie),foe=Ct(re()),poe=wr(ge({total:re(),circulating:re(),nonCirculating:re(),nonCirculatingAccounts:ke(ar)})),nR=ge({amount:xe(),uiAmount:Re(re()),decimals:re(),uiAmountString:tt(xe())}),moe=wr(ke(ge({address:ar,amount:xe(),uiAmount:Re(re()),decimals:re(),uiAmountString:tt(xe())}))),goe=wr(ke(ge({pubkey:ar,account:ge({executable:Tl(),owner:ar,lamports:re(),data:DM,rentEpoch:re()})}))),rR=ge({program:xe(),parsed:bw(),space:re()}),yoe=wr(ke(ge({pubkey:ar,account:ge({executable:Tl(),owner:ar,lamports:re(),data:rR,rentEpoch:re()})}))),woe=wr(ke(ge({lamports:re(),address:ar}))),Y1=ge({executable:Tl(),owner:ar,lamports:re(),data:DM,rentEpoch:re()}),boe=ge({pubkey:ar,account:Y1}),voe=zE(Wi([SM(ot),rR]),Wi([uH,rR]),t=>Array.isArray(t)?Ie(t,DM):t),sR=ge({executable:Tl(),owner:ar,lamports:re(),data:voe,rentEpoch:re()}),Eoe=ge({pubkey:ar,account:sR}),Aoe=ge({state:Wi([nr("active"),nr("inactive"),nr("activating"),nr("deactivating")]),active:re(),inactive:re()}),xoe=Ct(ke(ge({signature:xe(),slot:re(),err:Cm,memo:Re(xe()),blockTime:tt(Re(re()))}))),Soe=Ct(ke(ge({signature:xe(),slot:re(),err:Cm,memo:Re(xe()),blockTime:tt(Re(re()))}))),Coe=ge({subscription:re(),result:L2(Y1)}),_oe=ge({pubkey:ar,account:Y1}),Ioe=ge({subscription:re(),result:L2(_oe)}),Noe=ge({parent:re(),slot:re(),root:re()}),Toe=ge({subscription:re(),result:Noe}),koe=Wi([ge({type:Wi([nr("firstShredReceived"),nr("completed"),nr("optimisticConfirmation"),nr("root")]),slot:re(),timestamp:re()}),ge({type:nr("createdBank"),parent:re(),slot:re(),timestamp:re()}),ge({type:nr("frozen"),slot:re(),timestamp:re(),stats:ge({numTransactionEntries:re(),numSuccessfulTransactions:re(),numFailedTransactions:re(),maxTransactionsPerEntry:re()})}),ge({type:nr("dead"),slot:re(),timestamp:re(),err:xe()})]),Poe=ge({subscription:re(),result:koe}),Roe=ge({subscription:re(),result:L2(Wi([Jie,Xie]))}),Ooe=ge({subscription:re(),result:re()}),Moe=ge({pubkey:xe(),gossip:Re(xe()),tpu:Re(xe()),rpc:Re(xe()),version:Re(xe())}),M8=ge({votePubkey:xe(),nodePubkey:xe(),activatedStake:re(),epochVoteAccount:Tl(),epochCredits:ke(CM([re(),re(),re()])),commission:re(),lastVote:re(),rootSlot:Re(re())}),Doe=Ct(ge({current:ke(M8),delinquent:ke(M8)})),Boe=Wi([nr("processed"),nr("confirmed"),nr("finalized")]),Loe=ge({slot:re(),confirmations:Re(re()),err:Cm,confirmationStatus:tt(Boe)}),Uoe=wr(ke(Re(Loe))),Foe=Ct(re()),fH=ge({accountKey:ar,writableIndexes:ke(re()),readonlyIndexes:ke(re())}),BM=ge({signatures:ke(xe()),message:ge({accountKeys:ke(xe()),header:ge({numRequiredSignatures:re(),numReadonlySignedAccounts:re(),numReadonlyUnsignedAccounts:re()}),instructions:ke(ge({accounts:ke(re()),data:xe(),programIdIndex:re()})),recentBlockhash:xe(),addressTableLookups:tt(ke(fH))})}),pH=ge({pubkey:ar,signer:Tl(),writable:Tl(),source:tt(Wi([nr("transaction"),nr("lookupTable")]))}),mH=ge({accountKeys:ke(pH),signatures:ke(xe())}),gH=ge({parsed:bw(),program:xe(),programId:ar}),yH=ge({accounts:ke(ar),data:xe(),programId:ar}),joe=Wi([yH,gH]),$oe=Wi([ge({parsed:bw(),program:xe(),programId:xe()}),ge({accounts:ke(xe()),data:xe(),programId:xe()})]),wH=zE(joe,$oe,t=>"accounts"in t?Ie(t,yH):Ie(t,gH)),bH=ge({signatures:ke(xe()),message:ge({accountKeys:ke(pH),instructions:ke(wH),recentBlockhash:xe(),addressTableLookups:tt(Re(ke(fH)))})}),zC=ge({accountIndex:re(),mint:xe(),owner:tt(xe()),programId:tt(xe()),uiTokenAmount:nR}),vH=ge({writable:ke(ar),readonly:ke(ar)}),U2=ge({err:Cm,fee:re(),innerInstructions:tt(Re(ke(ge({index:re(),instructions:ke(ge({accounts:ke(re()),data:xe(),programIdIndex:re()}))})))),preBalances:ke(re()),postBalances:ke(re()),logMessages:tt(Re(ke(xe()))),preTokenBalances:tt(Re(ke(zC))),postTokenBalances:tt(Re(ke(zC))),loadedAddresses:tt(vH),computeUnitsConsumed:tt(re()),costUnits:tt(re())}),LM=ge({err:Cm,fee:re(),innerInstructions:tt(Re(ke(ge({index:re(),instructions:ke(wH)})))),preBalances:ke(re()),postBalances:ke(re()),logMessages:tt(Re(ke(xe()))),preTokenBalances:tt(Re(ke(zC))),postTokenBalances:tt(Re(ke(zC))),loadedAddresses:tt(vH),computeUnitsConsumed:tt(re()),costUnits:tt(re())}),vw=Wi([nr(0),nr("legacy")]),_m=ge({pubkey:xe(),lamports:re(),postBalance:Re(re()),rewardType:Re(xe()),commission:tt(Re(re()))}),zoe=Ct(Re(ge({blockhash:xe(),previousBlockhash:xe(),parentSlot:re(),transactions:ke(ge({transaction:BM,meta:Re(U2),version:tt(vw)})),rewards:tt(ke(_m)),blockTime:Re(re()),blockHeight:Re(re())}))),Woe=Ct(Re(ge({blockhash:xe(),previousBlockhash:xe(),parentSlot:re(),rewards:tt(ke(_m)),blockTime:Re(re()),blockHeight:Re(re())}))),Hoe=Ct(Re(ge({blockhash:xe(),previousBlockhash:xe(),parentSlot:re(),transactions:ke(ge({transaction:mH,meta:Re(U2),version:tt(vw)})),rewards:tt(ke(_m)),blockTime:Re(re()),blockHeight:Re(re())}))),Voe=Ct(Re(ge({blockhash:xe(),previousBlockhash:xe(),parentSlot:re(),transactions:ke(ge({transaction:bH,meta:Re(LM),version:tt(vw)})),rewards:tt(ke(_m)),blockTime:Re(re()),blockHeight:Re(re())}))),Koe=Ct(Re(ge({blockhash:xe(),previousBlockhash:xe(),parentSlot:re(),transactions:ke(ge({transaction:mH,meta:Re(LM),version:tt(vw)})),rewards:tt(ke(_m)),blockTime:Re(re()),blockHeight:Re(re())}))),qoe=Ct(Re(ge({blockhash:xe(),previousBlockhash:xe(),parentSlot:re(),rewards:tt(ke(_m)),blockTime:Re(re()),blockHeight:Re(re())}))),Goe=Ct(Re(ge({blockhash:xe(),previousBlockhash:xe(),parentSlot:re(),transactions:ke(ge({transaction:BM,meta:Re(U2)})),rewards:tt(ke(_m)),blockTime:Re(re())}))),D8=Ct(Re(ge({blockhash:xe(),previousBlockhash:xe(),parentSlot:re(),signatures:ke(xe()),blockTime:Re(re())}))),oT=Ct(Re(ge({slot:re(),meta:Re(U2),blockTime:tt(Re(re())),transaction:BM,version:tt(vw)}))),VA=Ct(Re(ge({slot:re(),transaction:bH,meta:Re(LM),blockTime:tt(Re(re())),version:tt(vw)}))),Yoe=wr(ge({blockhash:xe(),lastValidBlockHeight:re()})),Zoe=wr(Tl()),Qoe=ge({slot:re(),numTransactions:re(),numSlots:re(),samplePeriodSecs:re()}),Joe=Ct(ke(Qoe)),Xoe=wr(Re(ge({feeCalculator:ge({lamportsPerSignature:re()})}))),eae=Ct(xe()),tae=Ct(xe()),nae=ge({err:Cm,logs:ke(xe()),signature:xe()}),rae=ge({result:L2(nae),subscription:re()}),sae={"solana-client":"js/1.0.0-maintenance"};class F2{constructor(e,n){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const l={};return async u=>{const{commitment:d,config:h}=Bn(u),f=this._buildArgs([],d,void 0,h),p=k8(f);return l[p]=l[p]??(async()=>{try{const m=await this._rpcRequest("getBlockHeight",f),E=Ie(m,Ct(re()));if("error"in E)throw new Qe(E.error,"failed to get block height information");return E.result}finally{delete l[p]}})(),await l[p]}})();let r,s,i,o,a,c;n&&typeof n=="string"?this._commitment=n:n&&(this._commitment=n.commitment,this._confirmTransactionInitialTimeout=n.confirmTransactionInitialTimeout,r=n.wsEndpoint,s=n.httpHeaders,i=n.fetch,o=n.fetchMiddleware,a=n.disableRetryOnRateLimit,c=n.httpAgent),this._rpcEndpoint=Wie(e),this._rpcWsEndpoint=r||zie(e),this._rpcClient=soe(e,s,i,o,a,c),this._rpcRequest=ioe(this._rpcClient),this._rpcBatchRequest=ooe(this._rpcClient),this._rpcWebSocket=new Uie(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,n){const{commitment:r,config:s}=Bn(n),i=this._buildArgs([e.toBase58()],r,void 0,s),o=await this._rpcRequest("getBalance",i),a=Ie(o,wr(re()));if("error"in a)throw new Qe(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,n){return await this.getBalanceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const n=await this._rpcRequest("getBlockTime",[e]),r=Ie(n,Ct(Re(re())));if("error"in r)throw new Qe(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),n=Ie(e,Ct(re()));if("error"in n)throw new Qe(n.error,"failed to get minimum ledger slot");return n.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),n=Ie(e,foe);if("error"in n)throw new Qe(n.error,"failed to get first available block");return n.result}async getSupply(e){let n={};typeof e=="string"?n={commitment:e}:e?n={...e,commitment:e&&e.commitment||this.commitment}:n={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[n]),s=Ie(r,poe);if("error"in s)throw new Qe(s.error,"failed to get supply");return s.result}async getTokenSupply(e,n){const r=this._buildArgs([e.toBase58()],n),s=await this._rpcRequest("getTokenSupply",r),i=Ie(s,wr(nR));if("error"in i)throw new Qe(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(e,n){const r=this._buildArgs([e.toBase58()],n),s=await this._rpcRequest("getTokenAccountBalance",r),i=Ie(s,wr(nR));if("error"in i)throw new Qe(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(e,n,r){const{commitment:s,config:i}=Bn(r);let o=[e.toBase58()];"mint"in n?o.push({mint:n.mint.toBase58()}):o.push({programId:n.programId.toBase58()});const a=this._buildArgs(o,s,"base64",i),c=await this._rpcRequest("getTokenAccountsByOwner",a),l=Ie(c,goe);if("error"in l)throw new Qe(l.error,`failed to get token accounts owned by account ${e.toBase58()}`);return l.result}async getParsedTokenAccountsByOwner(e,n,r){let s=[e.toBase58()];"mint"in n?s.push({mint:n.mint.toBase58()}):s.push({programId:n.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),a=Ie(o,yoe);if("error"in a)throw new Qe(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const n={...e,commitment:e&&e.commitment||this.commitment},r=n.filter||n.commitment?[n]:[],s=await this._rpcRequest("getLargestAccounts",r),i=Ie(s,woe);if("error"in i)throw new Qe(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(e,n){const r=this._buildArgs([e.toBase58()],n),s=await this._rpcRequest("getTokenLargestAccounts",r),i=Ie(s,moe);if("error"in i)throw new Qe(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(e,n){const{commitment:r,config:s}=Bn(n),i=this._buildArgs([e.toBase58()],r,"base64",s),o=await this._rpcRequest("getAccountInfo",i),a=Ie(o,wr(Re(Y1)));if("error"in a)throw new Qe(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,n){const{commitment:r,config:s}=Bn(n),i=this._buildArgs([e.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),a=Ie(o,wr(Re(sR)));if("error"in a)throw new Qe(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,n){try{return(await this.getAccountInfoAndContext(e,n)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,n){const{commitment:r,config:s}=Bn(n),i=e.map(l=>l.toBase58()),o=this._buildArgs([i],r,"jsonParsed",s),a=await this._rpcRequest("getMultipleAccounts",o),c=Ie(a,wr(ke(Re(sR))));if("error"in c)throw new Qe(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfoAndContext(e,n){const{commitment:r,config:s}=Bn(n),i=e.map(l=>l.toBase58()),o=this._buildArgs([i],r,"base64",s),a=await this._rpcRequest("getMultipleAccounts",o),c=Ie(a,wr(ke(Re(Y1))));if("error"in c)throw new Qe(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfo(e,n){return(await this.getMultipleAccountsInfoAndContext(e,n)).value}async getStakeActivation(e,n,r){const{commitment:s,config:i}=Bn(n),o=this._buildArgs([e.toBase58()],s,void 0,{...i,epoch:r??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getStakeActivation",o),c=Ie(a,Ct(Aoe));if("error"in c)throw new Qe(c.error,`failed to get Stake Activation ${e.toBase58()}`);return c.result}async getProgramAccounts(e,n){const{commitment:r,config:s}=Bn(n),{encoding:i,...o}=s||{},a=this._buildArgs([e.toBase58()],r,i||"base64",{...o,...o.filters?{filters:R8(o.filters)}:null}),c=await this._rpcRequest("getProgramAccounts",a),l=ke(boe),u=o.withContext===!0?Ie(c,wr(l)):Ie(c,Ct(l));if("error"in u)throw new Qe(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async getParsedProgramAccounts(e,n){const{commitment:r,config:s}=Bn(n),i=this._buildArgs([e.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),a=Ie(o,Ct(ke(Eoe)));if("error"in a)throw new Qe(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,n){var i;let r;if(typeof e=="string")r=e;else{const o=e;if((i=o.abortSignal)!=null&&i.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let s;try{s=Ls.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return tn(s.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:n||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:n||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:n||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((n,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:n}){let r,s,i=!1;const o=new Promise((c,l)=>{try{r=this.onSignature(n,(d,h)=>{r=void 0;const f={context:h,value:d};c({__type:Yl.PROCESSED,response:f})},e);const u=new Promise(d=>{r==null?d():s=this._onSubscriptionStateChange(r,h=>{h==="subscribed"&&d()})});(async()=>{if(await u,i)return;const d=await this.getSignatureStatus(n);if(i||d==null)return;const{context:h,value:f}=d;if(f!=null)if(f!=null&&f.err)l(f.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(f.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(f.confirmationStatus==="processed"||f.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,c({__type:Yl.PROCESSED,response:{context:h,value:f}})}})()}catch(u){l(u)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:n,lastValidBlockHeight:r,signature:s}}){let i=!1;const o=new Promise(d=>{const h=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let f=await h();if(!i){for(;f<=r;)if(await Bf(1e3),i||(f=await h(),i))return;d({__type:Yl.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),l=this.getCancellationPromise(n);let u;try{const d=await Promise.race([l,c,o]);if(d.__type===Yl.PROCESSED)u=d.response;else throw new PM(s)}finally{i=!0,a()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:n,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let a=!1;const c=new Promise(f=>{let p=i,m=null;const E=async()=>{try{const{context:b,value:x}=await this.getNonceAndContext(s,{commitment:e,minContextSlot:r});return m=b.slot,x==null?void 0:x.nonce}catch{return p}};(async()=>{if(p=await E(),!a)for(;;){if(i!==p){f({__type:Yl.NONCE_INVALID,slotInWhichNonceDidAdvance:m});return}if(await Bf(2e3),a||(p=await E(),a))return}})()}),{abortConfirmation:l,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),d=this.getCancellationPromise(n);let h;try{const f=await Promise.race([d,u,c]);if(f.__type===Yl.PROCESSED)h=f.response;else{let p;for(;;){const m=await this.getSignatureStatus(o);if(m==null)break;if(m.context.slot<(f.slotInWhichNonceDidAdvance??r)){await Bf(400);continue}p=m;break}if(p!=null&&p.value){const m=e||"finalized",{confirmationStatus:E}=p.value;switch(m){case"processed":case"recent":if(E!=="processed"&&E!=="confirmed"&&E!=="finalized")throw new Jg(o);break;case"confirmed":case"single":case"singleGossip":if(E!=="confirmed"&&E!=="finalized")throw new Jg(o);break;case"finalized":case"max":case"root":if(E!=="finalized")throw new Jg(o);break;default:}h={context:p.context,value:{err:p.value.err}}}else throw new Jg(o)}}finally{a=!0,l()}return h}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:n}){let r;const s=new Promise(c=>{let l=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{l=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>c({__type:Yl.TIMED_OUT,timeoutMs:l}),l)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:n});let a;try{const c=await Promise.race([o,s]);if(c.__type===Yl.PROCESSED)a=c.response;else throw new RM(n,c.timeoutMs/1e3)}finally{clearTimeout(r),i()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),n=Ie(e,Ct(ke(Moe)));if("error"in n)throw new Qe(n.error,"failed to get cluster nodes");return n.result}async getVoteAccounts(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",n),s=Ie(r,Doe);if("error"in s)throw new Qe(s.error,"failed to get vote accounts");return s.result}async getSlot(e){const{commitment:n,config:r}=Bn(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getSlot",s),o=Ie(i,Ct(re()));if("error"in o)throw new Qe(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:n,config:r}=Bn(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getSlotLeader",s),o=Ie(i,Ct(xe()));if("error"in o)throw new Qe(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,n){const r=[e,n],s=await this._rpcRequest("getSlotLeaders",r),i=Ie(s,Ct(ke(ar)));if("error"in i)throw new Qe(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(e,n){const{context:r,value:s}=await this.getSignatureStatuses([e],n);tn(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(e,n){const r=[e];n&&r.push(n);const s=await this._rpcRequest("getSignatureStatuses",r),i=Ie(s,Uoe);if("error"in i)throw new Qe(i.error,"failed to get signature status");return i.result}async getTransactionCount(e){const{commitment:n,config:r}=Bn(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getTransactionCount",s),o=Ie(i,Ct(re()));if("error"in o)throw new Qe(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",n),s=Ie(r,aoe);if("error"in s)throw new Qe(s.error,"failed to get inflation");return s.result}async getInflationReward(e,n,r){const{commitment:s,config:i}=Bn(r),o=this._buildArgs([e.map(l=>l.toBase58())],s,void 0,{...i,epoch:n??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getInflationReward",o),c=Ie(a,Kie);if("error"in c)throw new Qe(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),n=Ie(e,coe);if("error"in n)throw new Qe(n.error,"failed to get inflation rate");return n.result}async getEpochInfo(e){const{commitment:n,config:r}=Bn(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getEpochInfo",s),o=Ie(i,uoe);if("error"in o)throw new Qe(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),n=Ie(e,doe);if("error"in n)throw new Qe(n.error,"failed to get epoch schedule");const r=n.result;return new lH(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),n=Ie(e,hoe);if("error"in n)throw new Qe(n.error,"failed to get leader schedule");return n.result}async getMinimumBalanceForRentExemption(e,n){const r=this._buildArgs([e],n),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=Ie(s,Foe);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(e){const{context:n,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:n,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const n=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=Ie(n,Joe);if("error"in r)throw new Qe(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,n){const r=this._buildArgs([e],n),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=Ie(s,Xoe);if("error"in i)throw new Qe(i.error,"failed to get fee calculator");const{context:o,value:a}=i.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,n){const r=_t(e.serialize()).toString("base64"),s=this._buildArgs([r],n),i=await this._rpcRequest("getFeeForMessage",s),o=Ie(i,wr(Re(re())));if("error"in o)throw new Qe(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const n=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),r=n!=null&&n.length?[n]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=Ie(s,loe);if("error"in i)throw new Qe(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhashAndContext(e){const{commitment:n,config:r}=Bn(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),o=Ie(i,Yoe);if("error"in o)throw new Qe(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,n){const{commitment:r,config:s}=Bn(n),i=this._buildArgs([e],r,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),a=Ie(o,Zoe);if("error"in a)throw new Qe(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),n=Ie(e,Ct(eoe));if("error"in n)throw new Qe(n.error,"failed to get version");return n.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),n=Ie(e,Ct(xe()));if("error"in n)throw new Qe(n.error,"failed to get genesis hash");return n.result}async getBlock(e,n){const{commitment:r,config:s}=Bn(n),i=this._buildArgsAtLeastConfirmed([e],r,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=Ie(o,Hoe);if("error"in a)throw a.error;return a.result}case"none":{const a=Ie(o,Woe);if("error"in a)throw a.error;return a.result}default:{const a=Ie(o,zoe);if("error"in a)throw a.error;const{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:l,meta:u,version:d})=>({meta:u,transaction:{...l,message:iT(d,l.message)},version:d}))}:null}}}catch(a){throw new Qe(a,"failed to get confirmed block")}}async getParsedBlock(e,n){const{commitment:r,config:s}=Bn(n),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=Ie(o,Koe);if("error"in a)throw a.error;return a.result}case"none":{const a=Ie(o,qoe);if("error"in a)throw a.error;return a.result}default:{const a=Ie(o,Voe);if("error"in a)throw a.error;return a.result}}}catch(a){throw new Qe(a,"failed to get block")}}async getBlockProduction(e){let n,r;if(typeof e=="string")r=e;else if(e){const{commitment:a,...c}=e;r=a,n=c}const s=this._buildArgs([],r,"base64",n),i=await this._rpcRequest("getBlockProduction",s),o=Ie(i,roe);if("error"in o)throw new Qe(o.error,"failed to get block production information");return o.result}async getTransaction(e,n){const{commitment:r,config:s}=Bn(n),i=this._buildArgsAtLeastConfirmed([e],r,void 0,s),o=await this._rpcRequest("getTransaction",i),a=Ie(o,oT);if("error"in a)throw new Qe(a.error,"failed to get transaction");const c=a.result;return c&&{...c,transaction:{...c.transaction,message:iT(c.version,c.transaction.message)}}}async getParsedTransaction(e,n){const{commitment:r,config:s}=Bn(n),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),a=Ie(o,VA);if("error"in a)throw new Qe(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,n){const{commitment:r,config:s}=Bn(n),i=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(c=>{const l=Ie(c,VA);if("error"in l)throw new Qe(l.error,"failed to get transactions");return l.result})}async getTransactions(e,n){const{commitment:r,config:s}=Bn(n),i=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(c=>{const l=Ie(c,oT);if("error"in l)throw new Qe(l.error,"failed to get transactions");const u=l.result;return u&&{...u,transaction:{...u.transaction,message:iT(u.version,u.transaction.message)}}})}async getConfirmedBlock(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),s=await this._rpcRequest("getBlock",r),i=Ie(s,Goe);if("error"in i)throw new Qe(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:c,meta:l})=>{const u=new Nc(c.message);return{meta:l,transaction:{...c,message:u}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:l})=>({meta:l,transaction:ln.populate(c.message,c.signatures)}))}}async getBlocks(e,n,r){const s=this._buildArgsAtLeastConfirmed(n!==void 0?[e,n]:[e],r),i=await this._rpcRequest("getBlocks",s),o=Ie(i,Ct(ke(re())));if("error"in o)throw new Qe(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=Ie(s,D8);if("error"in i)throw new Qe(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=Ie(s,D8);if("error"in i)throw new Qe(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),s=await this._rpcRequest("getTransaction",r),i=Ie(s,oT);if("error"in i)throw new Qe(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const a=new Nc(o.transaction.message),c=o.transaction.signatures;return{...o,transaction:ln.populate(a,c)}}async getParsedConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),i=Ie(s,VA);if("error"in i)throw new Qe(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(e,n){const r=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],n,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const a=Ie(o,VA);if("error"in a)throw new Qe(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,n,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(n--,!(n<=0||n<i));)try{const c=await this.getConfirmedBlockSignatures(n,"finalized");c.signatures.length>0&&(s.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let o=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>o));)try{const c=await this.getConfirmedBlockSignatures(r);c.signatures.length>0&&(s.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(e,s)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(e,n,r){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=Ie(i,xoe);if("error"in o)throw new Qe(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,n,r){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),i=await this._rpcRequest("getSignaturesForAddress",s),o=Ie(i,Soe);if("error"in o)throw new Qe(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,n){const{context:r,value:s}=await this.getAccountInfoAndContext(e,n);let i=null;return s!==null&&(i=new tR({key:e,state:tR.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(e,n){const{context:r,value:s}=await this.getAccountInfoAndContext(e,n);let i=null;return s!==null&&(i=B2.fromAccountData(s.data)),{context:r,value:i}}async getNonce(e,n){return await this.getNonceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,n){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),n]),s=Ie(r,eae);if("error"in s)throw new Qe(s.error,`airdrop to ${e.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Bf(100);const r=Date.now()-this._blockhashInfo.lastFetch>=dH;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),n=this._blockhashInfo.latestBlockhash,r=n?n.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Bf(oH/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:n,config:r}=Bn(e),s=this._buildArgs([],n,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=Ie(i,wr(re()));if("error"in o)throw new Qe(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,n,r){if("message"in e){const m=e.serialize(),E=ot.from(m).toString("base64");if(Array.isArray(n)||r!==void 0)throw new Error("Invalid arguments");const b=n||{};b.encoding="base64","commitment"in b||(b.commitment=this.commitment),n&&typeof n=="object"&&"innerInstructions"in n&&(b.innerInstructions=n.innerInstructions);const x=[E,b],w=await this._rpcRequest("simulateTransaction",x),N=Ie(w,O8);if("error"in N)throw new Error("failed to simulate transaction: "+N.error.message);return N.result}let s;if(e instanceof ln){let p=e;s=new ln,s.feePayer=p.feePayer,s.instructions=e.instructions,s.nonceInfo=p.nonceInfo,s.signatures=p.signatures}else s=ln.populate(e),s._message=s._json=void 0;if(n!==void 0&&!Array.isArray(n))throw new Error("Invalid arguments");const i=n;if(s.nonceInfo&&i)s.sign(...i);else{let p=this._disableBlockhashCaching;for(;;){const m=await this._blockhashWithExpiryBlockHeight(p);if(s.lastValidBlockHeight=m.lastValidBlockHeight,s.recentBlockhash=m.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const E=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(E)&&!this._blockhashInfo.transactionSignatures.includes(E)){this._blockhashInfo.simulatedSignatures.push(E);break}else p=!0}}const o=s._compile(),a=o.serialize(),l=s._serialize(a).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(r){const p=(Array.isArray(r)?r:o.nonProgramIds()).map(m=>m.toBase58());u.accounts={encoding:"base64",addresses:p}}i&&(u.sigVerify=!0),n&&typeof n=="object"&&"innerInstructions"in n&&(u.innerInstructions=n.innerInstructions);const d=[l,u],h=await this._rpcRequest("simulateTransaction",d),f=Ie(h,O8);if("error"in f){let p;if("data"in f.error&&(p=f.error.data.logs,p&&Array.isArray(p))){const m=`
    `,E=m+p.join(m);console.error(f.error.message,E)}throw new G1({action:"simulate",signature:"",transactionMessage:f.error.message,logs:p})}return f.result}async sendTransaction(e,n,r){if("version"in e){if(n&&Array.isArray(n))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,n)}if(n===void 0||!Array.isArray(n))throw new Error("Invalid arguments");const s=n;if(e.nonceInfo)e.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...s),!e.signature)throw new Error("!signature");const c=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))o=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}const i=e.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(e,n){const r=_t(e).toString("base64");return await this.sendEncodedTransaction(r,n)}async sendEncodedTransaction(e,n){const r={encoding:"base64"},s=n&&n.skipPreflight,i=s===!0?"processed":n&&n.preflightCommitment||this.commitment;n&&n.maxRetries!=null&&(r.maxRetries=n.maxRetries),n&&n.minContextSlot!=null&&(r.minContextSlot=n.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const o=[e,r],a=await this._rpcRequest("sendTransaction",o),c=Ie(a,tae);if("error"in c){let l;throw"data"in c.error&&(l=c.error.data.logs),new G1({action:s?"send":"simulate",signature:"",transactionMessage:c.error.message,logs:l})}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([n,r])=>{this._setSubscription(n,{...r,state:"pending"})})}_setSubscription(e,n){var s;const r=(s=this._subscriptionsByHash[e])==null?void 0:s.state;if(this._subscriptionsByHash[e]=n,r!==n.state){const i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach(o=>{try{o(n.state)}catch{}})}}_onSubscriptionStateChange(e,n){var i;const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[r]||(i[r]=new Set);return s.add(n),()=>{s.delete(n),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,n=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const a=await this._rpcWebSocket.call(o,i);this._setSubscription(r,{...s,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=s.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:a}),!n())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!n())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,n){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(s=>{try{s(...n)}catch(i){console.error(i)}})}_wsOnAccountNotification(e){const{result:n,subscription:r}=Ie(e,Coe);this._handleServerNotification(r,[n.value,n.context])}_makeSubscription(e,n){const r=this._nextClientSubscriptionId++,s=k8([e.method,n]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...e,args:n,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[s];tn(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,n,r){const{commitment:s,config:i}=Bn(r),o=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:n,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:n,subscription:r}=Ie(e,Ioe);this._handleServerNotification(r,[{accountId:n.value.pubkey,accountInfo:n.value.account},n.context])}onProgramAccountChange(e,n,r,s){const{commitment:i,config:o}=Bn(r),a=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:R8(s)}:void 0));return this._makeSubscription({callback:n,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,n,r){const s=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:n,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:n,subscription:r}=Ie(e,rae);this._handleServerNotification(r,[n.value,n.context])}_wsOnSlotNotification(e){const{result:n,subscription:r}=Ie(e,Toe);this._handleServerNotification(r,[n])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:n,subscription:r}=Ie(e,Poe);this._handleServerNotification(r,[n])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,n){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${n}' events could not be found.`)}_buildArgs(e,n,r,s){const i=n||this._commitment;if(i||r||s){let o={};r&&(o.encoding=r),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,n,r,s){const i=n||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,n,r,s)}_wsOnSignatureNotification(e){const{result:n,subscription:r}=Ie(e,Roe);n.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,n.value==="receivedSignature"?[{type:"received"},n.context]:[{type:"status",result:n.value},n.context])}onSignature(e,n,r){const s=this._buildArgs([e],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){n(o.result,a);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(e,n,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],s,void 0,i),a=this._makeSubscription({callback:(c,l)=>{n(c,l);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:n,subscription:r}=Ie(e,Ooe);this._handleServerNotification(r,[n])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class x0{constructor(e){this._keypair=void 0,this._keypair=e??_8()}static generate(){return new x0(_8())}static fromSecretKey(e,n){if(e.byteLength!==64)throw new Error("bad secret key size");const r=e.slice(32,64);if(!n||!n.skipValidation){const s=e.slice(0,32),i=$C(s);for(let o=0;o<32;o++)if(r[o]!==i[o])throw new Error("provided secretKey is invalid")}return new x0({publicKey:r,secretKey:e})}static fromSeed(e){const n=$C(e),r=new Uint8Array(64);return r.set(e),r.set(n,32),new x0({publicKey:n,secretKey:r})}get publicKey(){return new fe(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const xu=Object.freeze({CreateLookupTable:{index:0,layout:qe([Ke("instruction"),Fy("recentSlot"),jt("bumpSeed")])},FreezeLookupTable:{index:1,layout:qe([Ke("instruction")])},ExtendLookupTable:{index:2,layout:qe([Ke("instruction"),Fy(),js(Rt(),Ph(Ke(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:qe([Ke("instruction")])},CloseLookupTable:{index:4,layout:qe([Ke("instruction")])}});class iae{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=Ke("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(xu))if(o.index==r){s=i;break}if(!s)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return s}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:n}=pn(xu.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(n)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:n}=pn(xu.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:n.map(r=>new fe(r))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(UM.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,n){if(e.length<n)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${n}`)}}class UM{constructor(){}static createLookupTable(e){const[n,r]=fe.findProgramAddressSync([e.authority.toBuffer(),MW().encode(e.recentSlot)],this.programId),s=xu.CreateLookupTable,i=Ht(s,{recentSlot:BigInt(e.recentSlot),bumpSeed:r}),o=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Yr.programId,isSigner:!1,isWritable:!1}];return[new bn({programId:this.programId,keys:o,data:i}),n]}static freezeLookupTable(e){const n=xu.FreezeLookupTable,r=Ht(n),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new bn({programId:this.programId,keys:s,data:r})}static extendLookupTable(e){const n=xu.ExtendLookupTable,r=Ht(n,{addresses:e.addresses.map(i=>i.toBytes())}),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&s.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Yr.programId,isSigner:!1,isWritable:!1}),new bn({programId:this.programId,keys:s,data:r})}static deactivateLookupTable(e){const n=xu.DeactivateLookupTable,r=Ht(n),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new bn({programId:this.programId,keys:s,data:r})}static closeLookupTable(e){const n=xu.CloseLookupTable,r=Ht(n),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new bn({programId:this.programId,keys:s,data:r})}}UM.programId=new fe("AddressLookupTab1e1111111111111111111111111");class oae{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=jt("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(cl))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return s}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:n,additionalFee:r}=pn(cl.RequestUnits,e.data);return{units:n,additionalFee:r}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:n}=pn(cl.RequestHeapFrame,e.data);return{bytes:n}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:n}=pn(cl.SetComputeUnitLimit,e.data);return{units:n}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:n}=pn(cl.SetComputeUnitPrice,e.data);return{microLamports:n}}static checkProgramId(e){if(!e.equals(FM.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const cl=Object.freeze({RequestUnits:{index:0,layout:qe([jt("instruction"),Ke("units"),Ke("additionalFee")])},RequestHeapFrame:{index:1,layout:qe([jt("instruction"),Ke("bytes")])},SetComputeUnitLimit:{index:2,layout:qe([jt("instruction"),Ke("units")])},SetComputeUnitPrice:{index:3,layout:qe([jt("instruction"),Fy("microLamports")])}});class FM{constructor(){}static requestUnits(e){const n=cl.RequestUnits,r=Ht(n,e);return new bn({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){const n=cl.RequestHeapFrame,r=Ht(n,e);return new bn({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(e){const n=cl.SetComputeUnitLimit,r=Ht(n,e);return new bn({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(e){const n=cl.SetComputeUnitPrice,r=Ht(n,{microLamports:BigInt(e.microLamports)});return new bn({keys:[],programId:this.programId,data:r})}}FM.programId=new fe("ComputeBudget111111111111111111111111111111");const B8=64,L8=32,U8=64,F8=qe([jt("numSignatures"),jt("padding"),Ia("signatureOffset"),Ia("signatureInstructionIndex"),Ia("publicKeyOffset"),Ia("publicKeyInstructionIndex"),Ia("messageDataOffset"),Ia("messageDataSize"),Ia("messageInstructionIndex")]);class j2{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:n,message:r,signature:s,instructionIndex:i}=e;tn(n.length===L8,`Public Key must be ${L8} bytes but received ${n.length} bytes`),tn(s.length===U8,`Signature must be ${U8} bytes but received ${s.length} bytes`);const o=F8.span,a=o+n.length,c=a+s.length,l=1,u=ot.alloc(c+r.length),d=i??65535;return F8.encode({numSignatures:l,padding:0,signatureOffset:a,signatureInstructionIndex:d,publicKeyOffset:o,publicKeyInstructionIndex:d,messageDataOffset:c,messageDataSize:r.length,messageInstructionIndex:d},u),u.fill(n,o),u.fill(s,a),u.fill(r,c),new bn({keys:[],programId:j2.programId,data:u})}static createInstructionWithPrivateKey(e){const{privateKey:n,message:r,instructionIndex:s}=e;tn(n.length===B8,`Private key must be ${B8} bytes but received ${n.length} bytes`);try{const i=x0.fromSecretKey(n),o=i.publicKey.toBytes(),a=TM(r,i.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:a,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}j2.programId=new fe("Ed25519SigVerify111111111111111111111111111");const aae=(t,e)=>{const n=NM.sign(t,e);return[n.toCompactRawBytes(),n.recovery]};NM.utils.isValidPrivateKey;const cae=NM.getPublicKey,j8=32,aT=20,$8=64,lae=11,cT=qe([jt("numSignatures"),Ia("signatureOffset"),jt("signatureInstructionIndex"),Ia("ethAddressOffset"),jt("ethAddressInstructionIndex"),Ia("messageDataOffset"),Ia("messageDataSize"),jt("messageInstructionIndex"),On(20,"ethAddress"),On(64,"signature"),jt("recoveryId")]);class S0{constructor(){}static publicKeyToEthAddress(e){tn(e.length===$8,`Public key must be ${$8} bytes but received ${e.length} bytes`);try{return ot.from(jC(_t(e))).slice(-aT)}catch(n){throw new Error(`Error constructing Ethereum address: ${n}`)}}static createInstructionWithPublicKey(e){const{publicKey:n,message:r,signature:s,recoveryId:i,instructionIndex:o}=e;return S0.createInstructionWithEthAddress({ethAddress:S0.publicKeyToEthAddress(n),message:r,signature:s,recoveryId:i,instructionIndex:o})}static createInstructionWithEthAddress(e){const{ethAddress:n,message:r,signature:s,recoveryId:i,instructionIndex:o=0}=e;let a;typeof n=="string"?n.startsWith("0x")?a=ot.from(n.substr(2),"hex"):a=ot.from(n,"hex"):a=n,tn(a.length===aT,`Address must be ${aT} bytes but received ${a.length} bytes`);const c=1+lae,l=c,u=c+a.length,d=u+s.length+1,h=1,f=ot.alloc(cT.span+r.length);return cT.encode({numSignatures:h,signatureOffset:u,signatureInstructionIndex:o,ethAddressOffset:l,ethAddressInstructionIndex:o,messageDataOffset:d,messageDataSize:r.length,messageInstructionIndex:o,signature:_t(s),ethAddress:_t(a),recoveryId:i},f),f.fill(_t(r),cT.span),new bn({keys:[],programId:S0.programId,data:f})}static createInstructionWithPrivateKey(e){const{privateKey:n,message:r,instructionIndex:s}=e;tn(n.length===j8,`Private key must be ${j8} bytes but received ${n.length} bytes`);try{const i=_t(n),o=cae(i,!1).slice(1),a=ot.from(jC(_t(r))),[c,l]=aae(a,i);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:c,recoveryId:l,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}S0.programId=new fe("KeccakSecp256k11111111111111111111111111111");var EH;const AH=new fe("StakeConfig11111111111111111111111111111111");class xH{constructor(e,n){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=n}}class WE{constructor(e,n,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=n,this.custodian=r}}EH=WE;WE.default=new EH(0,0,fe.default);class uae{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=Ke("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(ms))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a StakeInstruction");return s}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:n,lockup:r}=pn(ms.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new xH(new fe(n.staker),new fe(n.withdrawer)),lockup:new WE(r.unixTimestamp,r.epoch,new fe(r.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),pn(ms.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:n,stakeAuthorizationType:r}=pn(ms.Authorize,e.data),s={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new fe(n),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(s.custodianPubkey=e.keys[3].pubkey),s}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:n,stakeAuthorizationType:r,authoritySeed:s,authorityOwner:i}=pn(ms.AuthorizeWithSeed,e.data),o={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:s,authorityOwner:new fe(i),newAuthorizedPubkey:new fe(n),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(o.custodianPubkey=e.keys[3].pubkey),o}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:n}=pn(ms.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:n}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),pn(ms.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:n}=pn(ms.Withdraw,e.data),r={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:n};return e.keys.length>5&&(r.custodianPubkey=e.keys[5].pubkey),r}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),pn(ms.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals($2.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,n){if(e.length<n)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${n}`)}}const ms=Object.freeze({Initialize:{index:0,layout:qe([Ke("instruction"),mie(),gie()])},Authorize:{index:1,layout:qe([Ke("instruction"),Rt("newAuthorized"),Ke("stakeAuthorizationType")])},Delegate:{index:2,layout:qe([Ke("instruction")])},Split:{index:3,layout:qe([Ke("instruction"),zo("lamports")])},Withdraw:{index:4,layout:qe([Ke("instruction"),zo("lamports")])},Deactivate:{index:5,layout:qe([Ke("instruction")])},Merge:{index:7,layout:qe([Ke("instruction")])},AuthorizeWithSeed:{index:8,layout:qe([Ke("instruction"),Rt("newAuthorized"),Ke("stakeAuthorizationType"),ep("authoritySeed"),Rt("authorityOwner")])}}),dae=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class $2{constructor(){}static initialize(e){const{stakePubkey:n,authorized:r,lockup:s}=e,i=s||WE.default,o=ms.Initialize,a=Ht(o,{authorized:{staker:_t(r.staker.toBuffer()),withdrawer:_t(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:_t(i.custodian.toBuffer())}}),c={keys:[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:Uy,isSigner:!1,isWritable:!1}],programId:this.programId,data:a};return new bn(c)}static createAccountWithSeed(e){const n=new ln;n.add(Yr.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:s,lockup:i}=e;return n.add(this.initialize({stakePubkey:r,authorized:s,lockup:i}))}static createAccount(e){const n=new ln;n.add(Yr.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:s,lockup:i}=e;return n.add(this.initialize({stakePubkey:r,authorized:s,lockup:i}))}static delegate(e){const{stakePubkey:n,authorizedPubkey:r,votePubkey:s}=e,i=ms.Delegate,o=Ht(i);return new ln().add({keys:[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:hc,isSigner:!1,isWritable:!1},{pubkey:Jx,isSigner:!1,isWritable:!1},{pubkey:AH,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(e){const{stakePubkey:n,authorizedPubkey:r,newAuthorizedPubkey:s,stakeAuthorizationType:i,custodianPubkey:o}=e,a=ms.Authorize,c=Ht(a,{newAuthorized:_t(s.toBuffer()),stakeAuthorizationType:i.index}),l=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:hc,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&l.push({pubkey:o,isSigner:!0,isWritable:!1}),new ln().add({keys:l,programId:this.programId,data:c})}static authorizeWithSeed(e){const{stakePubkey:n,authorityBase:r,authoritySeed:s,authorityOwner:i,newAuthorizedPubkey:o,stakeAuthorizationType:a,custodianPubkey:c}=e,l=ms.AuthorizeWithSeed,u=Ht(l,{newAuthorized:_t(o.toBuffer()),stakeAuthorizationType:a.index,authoritySeed:s,authorityOwner:_t(i.toBuffer())}),d=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:hc,isSigner:!1,isWritable:!1}];return c&&d.push({pubkey:c,isSigner:!0,isWritable:!1}),new ln().add({keys:d,programId:this.programId,data:u})}static splitInstruction(e){const{stakePubkey:n,authorizedPubkey:r,splitStakePubkey:s,lamports:i}=e,o=ms.Split,a=Ht(o,{lamports:i});return new bn({keys:[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static split(e,n){const r=new ln;return r.add(Yr.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:n,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}static splitWithSeed(e,n){const{stakePubkey:r,authorizedPubkey:s,splitStakePubkey:i,basePubkey:o,seed:a,lamports:c}=e,l=new ln;return l.add(Yr.allocate({accountPubkey:i,basePubkey:o,seed:a,space:this.space,programId:this.programId})),n&&n>0&&l.add(Yr.transfer({fromPubkey:e.authorizedPubkey,toPubkey:i,lamports:n})),l.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:s,splitStakePubkey:i,lamports:c}))}static merge(e){const{stakePubkey:n,sourceStakePubKey:r,authorizedPubkey:s}=e,i=ms.Merge,o=Ht(i);return new ln().add({keys:[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:hc,isSigner:!1,isWritable:!1},{pubkey:Jx,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(e){const{stakePubkey:n,authorizedPubkey:r,toPubkey:s,lamports:i,custodianPubkey:o}=e,a=ms.Withdraw,c=Ht(a,{lamports:i}),l=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:hc,isSigner:!1,isWritable:!1},{pubkey:Jx,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&l.push({pubkey:o,isSigner:!0,isWritable:!1}),new ln().add({keys:l,programId:this.programId,data:c})}static deactivate(e){const{stakePubkey:n,authorizedPubkey:r}=e,s=ms.Deactivate,i=Ht(s);return new ln().add({keys:[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:hc,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}$2.programId=new fe("Stake11111111111111111111111111111111111111");$2.space=200;class SH{constructor(e,n,r,s){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=n,this.authorizedWithdrawer=r,this.commission=s}}class hae{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=Ke("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(ll))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a VoteInstruction");return s}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:n}=pn(ll.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new SH(new fe(n.nodePubkey),new fe(n.authorizedVoter),new fe(n.authorizedWithdrawer),n.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:n,voteAuthorizationType:r}=pn(ll.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new fe(n),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:r,newAuthorized:s,voteAuthorizationType:i}}=pn(ll.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new fe(n),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new fe(s),voteAuthorizationType:{index:i},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:n}=pn(ll.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:n,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Ew.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,n){if(e.length<n)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${n}`)}}const ll=Object.freeze({InitializeAccount:{index:0,layout:qe([Ke("instruction"),yie()])},Authorize:{index:1,layout:qe([Ke("instruction"),Rt("newAuthorized"),Ke("voteAuthorizationType")])},Withdraw:{index:3,layout:qe([Ke("instruction"),zo("lamports")])},UpdateValidatorIdentity:{index:4,layout:qe([Ke("instruction")])},AuthorizeWithSeed:{index:10,layout:qe([Ke("instruction"),wie()])}}),fae=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Ew{constructor(){}static initializeAccount(e){const{votePubkey:n,nodePubkey:r,voteInit:s}=e,i=ll.InitializeAccount,o=Ht(i,{voteInit:{nodePubkey:_t(s.nodePubkey.toBuffer()),authorizedVoter:_t(s.authorizedVoter.toBuffer()),authorizedWithdrawer:_t(s.authorizedWithdrawer.toBuffer()),commission:s.commission}}),a={keys:[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:Uy,isSigner:!1,isWritable:!1},{pubkey:hc,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new bn(a)}static createAccount(e){const n=new ln;return n.add(Yr.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),n.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:n,authorizedPubkey:r,newAuthorizedPubkey:s,voteAuthorizationType:i}=e,o=ll.Authorize,a=Ht(o,{newAuthorized:_t(s.toBuffer()),voteAuthorizationType:i.index}),c=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:hc,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new ln().add({keys:c,programId:this.programId,data:a})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:n,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:s,newAuthorizedPubkey:i,voteAuthorizationType:o,votePubkey:a}=e,c=ll.AuthorizeWithSeed,l=Ht(c,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:_t(r.toBuffer()),currentAuthorityDerivedKeySeed:s,newAuthorized:_t(i.toBuffer()),voteAuthorizationType:o.index}}),u=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:hc,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new ln().add({keys:u,programId:this.programId,data:l})}static withdraw(e){const{votePubkey:n,authorizedWithdrawerPubkey:r,lamports:s,toPubkey:i}=e,o=ll.Withdraw,a=Ht(o,{lamports:s}),c=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new ln().add({keys:c,programId:this.programId,data:a})}static safeWithdraw(e,n,r){if(e.lamports>n-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return Ew.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:n,authorizedWithdrawerPubkey:r,nodePubkey:s}=e,i=ll.UpdateValidatorIdentity,o=Ht(i),a=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new ln().add({keys:a,programId:this.programId,data:o})}}Ew.programId=new fe("Vote111111111111111111111111111111111111111");Ew.space=3762;const CH=new fe("Va1idator1nfo111111111111111111111111111111"),pae=ge({name:xe(),website:tt(xe()),details:tt(xe()),iconUrl:tt(xe()),keybaseUsername:tt(xe())});class jM{constructor(e,n){this.key=void 0,this.info=void 0,this.key=e,this.info=n}static fromConfigData(e){let n=[...e];if(oo(n)!==2)return null;const s=[];for(let i=0;i<2;i++){const o=new fe(ao(n,0,Al)),a=al(n)===1;s.push({publicKey:o,isSigner:a})}if(s[0].publicKey.equals(CH)&&s[1].isSigner){const i=ep().decode(ot.from(n)),o=JSON.parse(i);return DW(o,pae),new jM(s[1].publicKey,o)}return null}}const mae=new fe("Vote111111111111111111111111111111111111111"),gae=qe([Rt("nodePubkey"),Rt("authorizedWithdrawer"),jt("commission"),Ps(),js(qe([Ps("slot"),Ke("confirmationCount")]),Ph(Ke(),-8),"votes"),jt("rootSlotValid"),Ps("rootSlot"),Ps(),js(qe([Ps("epoch"),Rt("authorizedVoter")]),Ph(Ke(),-8),"authorizedVoters"),qe([js(qe([Rt("authorizedPubkey"),Ps("epochOfLastAuthorizedSwitch"),Ps("targetEpoch")]),32,"buf"),Ps("idx"),jt("isEmpty")],"priorVoters"),Ps(),js(qe([Ps("epoch"),Ps("credits"),Ps("prevCredits")]),Ph(Ke(),-8),"epochCredits"),qe([Ps("slot"),Ps("timestamp")],"lastTimestamp")]);class $M{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const r=gae.decode(_t(e),4);let s=r.rootSlot;return r.rootSlotValid||(s=null),new $M({nodePubkey:new fe(r.nodePubkey),authorizedWithdrawer:new fe(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:s,authorizedVoters:r.authorizedVoters.map(yae),priorVoters:wae(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}function yae({authorizedVoter:t,epoch:e}){return{epoch:e,authorizedVoter:new fe(t)}}function z8({authorizedPubkey:t,epochOfLastAuthorizedSwitch:e,targetEpoch:n}){return{authorizedPubkey:new fe(t),epochOfLastAuthorizedSwitch:e,targetEpoch:n}}function wae({buf:t,idx:e,isEmpty:n}){return n?[]:[...t.slice(e+1).map(z8),...t.slice(0,e).map(z8)]}const W8={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function _H(t,e){const n=e===!1?"http":"https";if(!t)return W8[n].devnet;const r=W8[n][t];if(!r)throw new Error(`Unknown ${n} cluster: ${t}`);return r}async function bae(t,e,n,r){let s,i;n&&Object.prototype.hasOwnProperty.call(n,"lastValidBlockHeight")||n&&Object.prototype.hasOwnProperty.call(n,"nonceValue")?(s=n,i=r):i=n;const o=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,minContextSlot:i.minContextSlot},a=await t.sendRawTransaction(e,o),c=i&&i.commitment,u=(await(s?t.confirmTransaction(s,c):t.confirmTransaction(a,c))).value;if(u.err)throw a!=null?new G1({action:o!=null&&o.skipPreflight?"send":"simulate",signature:a,transactionMessage:`Status: (${JSON.stringify(u)})`}):new Error(`Raw transaction ${a} failed (${JSON.stringify(u)})`);return a}const WC=1e9,vae=Object.freeze(Object.defineProperty({__proto__:null,Account:hie,AddressLookupTableAccount:tR,AddressLookupTableInstruction:iae,AddressLookupTableProgram:UM,Authorized:xH,BLOCKHASH_CACHE_TIMEOUT_MS:dH,BPF_LOADER_DEPRECATED_PROGRAM_ID:fie,BPF_LOADER_PROGRAM_ID:Pie,BpfLoader:Rie,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:cl,ComputeBudgetInstruction:oae,ComputeBudgetProgram:FM,Connection:F2,Ed25519Program:j2,Enum:uie,EpochSchedule:lH,FeeCalculatorLayout:aH,Keypair:x0,LAMPORTS_PER_SOL:WC,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:xu,Loader:sm,Lockup:WE,MAX_SEED_LENGTH:rH,Message:Nc,MessageAccountKeys:K1,MessageV0:rm,NONCE_ACCOUNT_LENGTH:eR,NonceAccount:B2,PACKET_DATA_SIZE:Rh,PUBLIC_KEY_LENGTH:Al,PublicKey:fe,SIGNATURE_LENGTH_IN_BYTES:V1,SOLANA_SCHEMA:Xb,STAKE_CONFIG_ID:AH,STAKE_INSTRUCTION_LAYOUTS:ms,SYSTEM_INSTRUCTION_LAYOUTS:Un,SYSVAR_CLOCK_PUBKEY:hc,SYSVAR_EPOCH_SCHEDULE_PUBKEY:xie,SYSVAR_INSTRUCTIONS_PUBKEY:Sie,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:Qx,SYSVAR_RENT_PUBKEY:Uy,SYSVAR_REWARDS_PUBKEY:Cie,SYSVAR_SLOT_HASHES_PUBKEY:_ie,SYSVAR_SLOT_HISTORY_PUBKEY:Iie,SYSVAR_STAKE_HISTORY_PUBKEY:Jx,Secp256k1Program:S0,SendTransactionError:G1,SolanaJSONRPCError:Qe,SolanaJSONRPCErrorCode:Nie,StakeAuthorizationLayout:dae,StakeInstruction:uae,StakeProgram:$2,Struct:kM,SystemInstruction:Tie,SystemProgram:Yr,Transaction:ln,TransactionExpiredBlockheightExceededError:PM,TransactionExpiredNonceInvalidError:Jg,TransactionExpiredTimeoutError:RM,TransactionInstruction:bn,TransactionMessage:MM,TransactionStatus:Yl,VALIDATOR_INFO_KEY:CH,VERSION_PREFIX_MASK:M2,VOTE_PROGRAM_ID:mae,ValidatorInfo:jM,VersionedMessage:OM,VersionedTransaction:q1,VoteAccount:$M,VoteAuthorizationLayout:fae,VoteInit:SH,VoteInstruction:hae,VoteProgram:Ew,clusterApiUrl:_H,sendAndConfirmRawTransaction:bae,sendAndConfirmTransaction:XP},Symbol.toStringTag,{value:"Module"})),IH=Z.createContext({});function Eae(){return Z.useContext(IH)}const Aae=({children:t,endpoint:e,config:n={commitment:"confirmed"}})=>{const r=Z.useMemo(()=>new F2(e,n),[e,n]);return we.createElement(IH.Provider,{value:{connection:r}},t)};class cr extends Error{constructor(e,n){super(e),this.error=n}}class jy extends cr{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class NH extends cr{constructor(){super(...arguments),this.name="WalletLoadError"}}class tp extends cr{constructor(){super(...arguments),this.name="WalletConfigError"}}class Z1 extends cr{constructor(){super(...arguments),this.name="WalletConnectionError"}}class z2 extends cr{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class W2 extends cr{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class bh extends cr{constructor(){super(...arguments),this.name="WalletAccountError"}}class $y extends cr{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class xae extends cr{constructor(){super(...arguments),this.name="WalletKeypairError"}}class Sr extends cr{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class Tu extends cr{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class gc extends cr{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class H2 extends cr{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class iR extends cr{constructor(){super(...arguments),this.name="WalletSignInError"}}class Sae extends cr{constructor(){super(...arguments),this.name="WalletTimeoutError"}}class Cae extends cr{constructor(){super(...arguments),this.name="WalletWindowBlockedError"}}class _ae extends cr{constructor(){super(...arguments),this.name="WalletWindowClosedError"}}var nn;(function(t){t.Installed="Installed",t.NotDetected="NotDetected",t.Loadable="Loadable",t.Unsupported="Unsupported"})(nn||(nn={}));class zM extends O2{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,n,r={}){const s=this.publicKey;if(!s)throw new Sr;return e.feePayer=e.feePayer||s,e.recentBlockhash=e.recentBlockhash||(await n.getLatestBlockhash({commitment:r.preflightCommitment,minContextSlot:r.minContextSlot})).blockhash,e}}function WM(t){if(typeof window>"u"||typeof document>"u")return;const e=[];function n(){if(t())for(const i of e)i()}const r=setInterval(n,1e3);e.push(()=>clearInterval(r)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",n,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",n))),document.readyState!=="complete"&&(window.addEventListener("load",n,{once:!0}),e.push(()=>window.removeEventListener("load",n))),n()}function HC(){if(!navigator)return!1;const t=navigator.userAgent.toLowerCase(),e=t.includes("iphone")||t.includes("ipad"),n=t.includes("safari");return e&&n}function ml(t){return"version"in t}class TH extends zM{async sendTransaction(e,n,r={}){let s=!0;try{if(ml(e)){if(!this.supportedTransactionVersions)throw new Tu("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new Tu(`Sending transaction version ${e.version} isn't supported by this wallet`);try{e=await this.signTransaction(e);const i=e.serialize();return await n.sendRawTransaction(i,r)}catch(i){throw i instanceof gc?(s=!1,i):new Tu(i==null?void 0:i.message,i)}}else try{const{signers:i,...o}=r;e=await this.prepareTransaction(e,n,o),i!=null&&i.length&&e.partialSign(...i),e=await this.signTransaction(e);const a=e.serialize();return await n.sendRawTransaction(a,o)}catch(i){throw i instanceof gc?(s=!1,i):new Tu(i==null?void 0:i.message,i)}}catch(i){throw s&&this.emit("error",i),i}}async signAllTransactions(e){for(const r of e)if(ml(r)){if(!this.supportedTransactionVersions)throw new gc("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(r.version))throw new gc(`Signing transaction version ${r.version} isn't supported by this wallet`)}const n=[];for(const r of e)n.push(await this.signTransaction(r));return n}}class V2 extends TH{}class Iae extends V2{}const ul="solana:signAndSendTransaction",Xx="solana:signIn",Lf="solana:signMessage",rs="solana:signTransaction",Nae="solana:signAndSendAllTransactions",Tae=Object.freeze(Object.defineProperty({__proto__:null,SignAndSendAllTransactions:Nae,SolanaSignAndSendTransaction:ul,SolanaSignIn:Xx,SolanaSignMessage:Lf,SolanaSignTransaction:rs},Symbol.toStringTag,{value:"Module"})),HE="standard:connect",kae=HE,Q1="standard:disconnect",Pae=Q1,VE="standard:events",Rae=VE,Oae=Object.freeze(Object.defineProperty({__proto__:null,Connect:kae,Disconnect:Pae,Events:Rae,StandardConnect:HE,StandardDisconnect:Q1,StandardEvents:VE},Symbol.toStringTag,{value:"Module"}));function kH(t){return HE in t.features&&VE in t.features&&(ul in t.features||rs in t.features)}var VC;(function(t){t.Mainnet="mainnet-beta",t.Testnet="testnet",t.Devnet="devnet"})(VC||(VC={}));const Mae=Object.freeze(Object.defineProperty({__proto__:null,BaseMessageSignerWalletAdapter:V2,BaseSignInMessageSignerWalletAdapter:Iae,BaseSignerWalletAdapter:TH,BaseWalletAdapter:zM,EventEmitter:O2,WalletAccountError:bh,get WalletAdapterNetwork(){return VC},WalletConfigError:tp,WalletConnectionError:Z1,WalletDisconnectedError:z2,WalletDisconnectionError:W2,WalletError:cr,WalletKeypairError:xae,WalletLoadError:NH,WalletNotConnectedError:Sr,WalletNotReadyError:jy,WalletPublicKeyError:$y,get WalletReadyState(){return nn},WalletSendTransactionError:Tu,WalletSignInError:iR,WalletSignMessageError:H2,WalletSignTransactionError:gc,WalletTimeoutError:Sae,WalletWindowBlockedError:Cae,WalletWindowClosedError:_ae,isIosAndRedirectable:HC,isVersionedTransaction:ml,isWalletAdapterCompatibleStandardWallet:kH,scopePollingDetectionStrategy:WM},Symbol.toStringTag,{value:"Module"}));class H8 extends cr{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const Dae=[],K2={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){ec("call","select")},connect(){return Promise.reject(ec("call","connect"))},disconnect(){return Promise.reject(ec("call","disconnect"))},sendTransaction(){return Promise.reject(ec("call","sendTransaction"))},signTransaction(){return Promise.reject(ec("call","signTransaction"))},signAllTransactions(){return Promise.reject(ec("call","signAllTransactions"))},signMessage(){return Promise.reject(ec("call","signMessage"))},signIn(){return Promise.reject(ec("call","signIn"))}};Object.defineProperty(K2,"wallets",{get(){return ec("read","wallets"),Dae}});Object.defineProperty(K2,"wallet",{get(){return ec("read","wallet"),null}});Object.defineProperty(K2,"publicKey",{get(){return ec("read","publicKey"),null}});function ec(t,e){const n=new Error(`You have tried to ${t} "${e}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(n),n}const PH=Z.createContext(K2);function HM(){return Z.useContext(PH)}function Bae(t,e){const n=Z.useState(()=>{try{const i=localStorage.getItem(t);if(i)return JSON.parse(i)}catch(i){typeof window<"u"&&console.error(i)}return e}),r=n[0],s=Z.useRef(!0);return Z.useEffect(()=>{if(s.current){s.current=!1;return}try{r===null?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(r))}catch(i){typeof window<"u"&&console.error(i)}},[r,t]),n}var nf={};const Lae=Ol(Mae),Uae=Ol(vae),RH=Ol(Tae);var Ll={},KE={},Fae=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},OH={},sa={};let VM;const jae=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];sa.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};sa.getSymbolTotalCodewords=function(e){return jae[e]};sa.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};sa.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');VM=e};sa.isKanjiModeEnabled=function(){return typeof VM<"u"};sa.toSJIS=function(e){return VM(e)};var q2={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,s){if(t.isValid(r))return r;try{return e(r)}catch{return s}}})(q2);function MH(){this.buffer=[],this.length=0}MH.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var $ae=MH;function qE(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}qE.prototype.set=function(t,e,n,r){const s=t*this.size+e;this.data[s]=n,r&&(this.reservedBit[s]=!0)};qE.prototype.get=function(t,e){return this.data[t*this.size+e]};qE.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};qE.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var zae=qE,DH={};(function(t){const e=sa.getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const s=Math.floor(r/7)+2,i=e(r),o=i===145?26:Math.ceil((i-13)/(2*s-2))*2,a=[i-7];for(let c=1;c<s-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},t.getPositions=function(r){const s=[],i=t.getRowColCoords(r),o=i.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||s.push([i[a],i[c]]);return s}})(DH);var BH={};const Wae=sa.getSymbolSize,V8=7;BH.getPositions=function(e){const n=Wae(e);return[[0,0],[n-V8,0],[0,n-V8]]};var LH={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},t.from=function(s){return t.isValid(s)?parseInt(s,10):void 0},t.getPenaltyN1=function(s){const i=s.size;let o=0,a=0,c=0,l=null,u=null;for(let d=0;d<i;d++){a=c=0,l=u=null;for(let h=0;h<i;h++){let f=s.get(d,h);f===l?a++:(a>=5&&(o+=e.N1+(a-5)),l=f,a=1),f=s.get(h,d),f===u?c++:(c>=5&&(o+=e.N1+(c-5)),u=f,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(s){const i=s.size;let o=0;for(let a=0;a<i-1;a++)for(let c=0;c<i-1;c++){const l=s.get(a,c)+s.get(a,c+1)+s.get(a+1,c)+s.get(a+1,c+1);(l===4||l===0)&&o++}return o*e.N2},t.getPenaltyN3=function(s){const i=s.size;let o=0,a=0,c=0;for(let l=0;l<i;l++){a=c=0;for(let u=0;u<i;u++)a=a<<1&2047|s.get(l,u),u>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|s.get(u,l),u>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(s){let i=0;const o=s.data.length;for(let c=0;c<o;c++)i+=s.data[c];return Math.abs(Math.ceil(i*100/o/5)-10)*e.N4};function n(r,s,i){switch(r){case t.Patterns.PATTERN000:return(s+i)%2===0;case t.Patterns.PATTERN001:return s%2===0;case t.Patterns.PATTERN010:return i%3===0;case t.Patterns.PATTERN011:return(s+i)%3===0;case t.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case t.Patterns.PATTERN101:return s*i%2+s*i%3===0;case t.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case t.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(s,i){const o=i.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)i.isReserved(c,a)||i.xor(c,a,n(s,c,a))},t.getBestMask=function(s,i){const o=Object.keys(t.Patterns).length;let a=0,c=1/0;for(let l=0;l<o;l++){i(l),t.applyMask(l,s);const u=t.getPenaltyN1(s)+t.getPenaltyN2(s)+t.getPenaltyN3(s)+t.getPenaltyN4(s);t.applyMask(l,s),u<c&&(c=u,a=l)}return a}})(LH);var G2={};const vh=q2,KA=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],qA=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];G2.getBlocksCount=function(e,n){switch(n){case vh.L:return KA[(e-1)*4+0];case vh.M:return KA[(e-1)*4+1];case vh.Q:return KA[(e-1)*4+2];case vh.H:return KA[(e-1)*4+3];default:return}};G2.getTotalCodewordsCount=function(e,n){switch(n){case vh.L:return qA[(e-1)*4+0];case vh.M:return qA[(e-1)*4+1];case vh.Q:return qA[(e-1)*4+2];case vh.H:return qA[(e-1)*4+3];default:return}};var UH={},Y2={};const e1=new Uint8Array(512),KC=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)e1[n]=e,KC[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)e1[n]=e1[n-255]})();Y2.log=function(e){if(e<1)throw new Error("log("+e+")");return KC[e]};Y2.exp=function(e){return e1[e]};Y2.mul=function(e,n){return e===0||n===0?0:e1[KC[e]+KC[n]]};(function(t){const e=Y2;t.mul=function(r,s){const i=new Uint8Array(r.length+s.length-1);for(let o=0;o<r.length;o++)for(let a=0;a<s.length;a++)i[o+a]^=e.mul(r[o],s[a]);return i},t.mod=function(r,s){let i=new Uint8Array(r);for(;i.length-s.length>=0;){const o=i[0];for(let c=0;c<s.length;c++)i[c]^=e.mul(s[c],o);let a=0;for(;a<i.length&&i[a]===0;)a++;i=i.slice(a)}return i},t.generateECPolynomial=function(r){let s=new Uint8Array([1]);for(let i=0;i<r;i++)s=t.mul(s,new Uint8Array([1,e.exp(i)]));return s}})(UH);const FH=UH;function KM(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}KM.prototype.initialize=function(e){this.degree=e,this.genPoly=FH.generateECPolynomial(this.degree)};KM.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const r=FH.mod(n,this.genPoly),s=this.degree-r.length;if(s>0){const i=new Uint8Array(this.degree);return i.set(r,s),i}return r};var Hae=KM,jH={},rf={},qM={};qM.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Ul={};const $H="[0-9]+",Vae="[A-Z $%*+\\-./:]+";let J1="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";J1=J1.replace(/u/g,"\\u");const Kae="(?:(?![A-Z0-9 $%*+\\-./:]|"+J1+`)(?:.|[\r
]))+`;Ul.KANJI=new RegExp(J1,"g");Ul.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Ul.BYTE=new RegExp(Kae,"g");Ul.NUMERIC=new RegExp($H,"g");Ul.ALPHANUMERIC=new RegExp(Vae,"g");const qae=new RegExp("^"+J1+"$"),Gae=new RegExp("^"+$H+"$"),Yae=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Ul.testKanji=function(e){return qae.test(e)};Ul.testNumeric=function(e){return Gae.test(e)};Ul.testAlphanumeric=function(e){return Yae.test(e)};(function(t){const e=qM,n=Ul;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},t.getBestModeForData=function(i){return n.testNumeric(i)?t.NUMERIC:n.testAlphanumeric(i)?t.ALPHANUMERIC:n.testKanji(i)?t.KANJI:t.BYTE},t.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},t.isValid=function(i){return i&&i.bit&&i.ccBits};function r(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+s)}}t.from=function(i,o){if(t.isValid(i))return i;try{return r(i)}catch{return o}}})(rf);(function(t){const e=sa,n=G2,r=q2,s=rf,i=qM,o=7973,a=e.getBCHDigit(o);function c(h,f,p){for(let m=1;m<=40;m++)if(f<=t.getCapacity(m,p,h))return m}function l(h,f){return s.getCharCountIndicator(h,f)+4}function u(h,f){let p=0;return h.forEach(function(m){const E=l(m.mode,f);p+=E+m.getBitsLength()}),p}function d(h,f){for(let p=1;p<=40;p++)if(u(h,p)<=t.getCapacity(p,f,s.MIXED))return p}t.from=function(f,p){return i.isValid(f)?parseInt(f,10):p},t.getCapacity=function(f,p,m){if(!i.isValid(f))throw new Error("Invalid QR Code version");typeof m>"u"&&(m=s.BYTE);const E=e.getSymbolTotalCodewords(f),b=n.getTotalCodewordsCount(f,p),x=(E-b)*8;if(m===s.MIXED)return x;const w=x-l(m,f);switch(m){case s.NUMERIC:return Math.floor(w/10*3);case s.ALPHANUMERIC:return Math.floor(w/11*2);case s.KANJI:return Math.floor(w/13);case s.BYTE:default:return Math.floor(w/8)}},t.getBestVersionForData=function(f,p){let m;const E=r.from(p,r.M);if(Array.isArray(f)){if(f.length>1)return d(f,E);if(f.length===0)return 1;m=f[0]}else m=f;return c(m.mode,m.getLength(),E)},t.getEncodedBits=function(f){if(!i.isValid(f)||f<7)throw new Error("Invalid QR Code version");let p=f<<12;for(;e.getBCHDigit(p)-a>=0;)p^=o<<e.getBCHDigit(p)-a;return f<<12|p}})(jH);var zH={};const oR=sa,WH=1335,Zae=21522,K8=oR.getBCHDigit(WH);zH.getEncodedBits=function(e,n){const r=e.bit<<3|n;let s=r<<10;for(;oR.getBCHDigit(s)-K8>=0;)s^=WH<<oR.getBCHDigit(s)-K8;return(r<<10|s)^Zae};var HH={};const Qae=rf;function zy(t){this.mode=Qae.NUMERIC,this.data=t.toString()}zy.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};zy.prototype.getLength=function(){return this.data.length};zy.prototype.getBitsLength=function(){return zy.getBitsLength(this.data.length)};zy.prototype.write=function(e){let n,r,s;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),s=parseInt(r,10),e.put(s,10);const i=this.data.length-n;i>0&&(r=this.data.substr(n),s=parseInt(r,10),e.put(s,i*3+1))};var Jae=zy;const Xae=rf,lT=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Wy(t){this.mode=Xae.ALPHANUMERIC,this.data=t}Wy.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Wy.prototype.getLength=function(){return this.data.length};Wy.prototype.getBitsLength=function(){return Wy.getBitsLength(this.data.length)};Wy.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let r=lT.indexOf(this.data[n])*45;r+=lT.indexOf(this.data[n+1]),e.put(r,11)}this.data.length%2&&e.put(lT.indexOf(this.data[n]),6)};var ece=Wy;const tce=rf;function Hy(t){this.mode=tce.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}Hy.getBitsLength=function(e){return e*8};Hy.prototype.getLength=function(){return this.data.length};Hy.prototype.getBitsLength=function(){return Hy.getBitsLength(this.data.length)};Hy.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var nce=Hy;const rce=rf,sce=sa;function Vy(t){this.mode=rce.KANJI,this.data=t}Vy.getBitsLength=function(e){return e*13};Vy.prototype.getLength=function(){return this.data.length};Vy.prototype.getBitsLength=function(){return Vy.getBitsLength(this.data.length)};Vy.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=sce.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var ice=Vy,VH={exports:{}};(function(t){var e={single_source_shortest_paths:function(n,r,s){var i={},o={};o[r]=0;var a=e.PriorityQueue.make();a.push(r,0);for(var c,l,u,d,h,f,p,m,E;!a.empty();){c=a.pop(),l=c.value,d=c.cost,h=n[l]||{};for(u in h)h.hasOwnProperty(u)&&(f=h[u],p=d+f,m=o[u],E=typeof o[u]>"u",(E||m>p)&&(o[u]=p,a.push(u,p),i[u]=l))}if(typeof s<"u"&&typeof o[s]>"u"){var b=["Could not find a path from ",r," to ",s,"."].join("");throw new Error(b)}return i},extract_shortest_path_from_predecessor_list:function(n,r){for(var s=[],i=r;i;)s.push(i),n[i],i=n[i];return s.reverse(),s},find_path:function(n,r,s){var i=e.single_source_shortest_paths(n,r,s);return e.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(n){var r=e.PriorityQueue,s={},i;n=n||{};for(i in r)r.hasOwnProperty(i)&&(s[i]=r[i]);return s.queue=[],s.sorter=n.sorter||r.default_sorter,s},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var s={value:n,cost:r};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(VH);var oce=VH.exports;(function(t){const e=rf,n=Jae,r=ece,s=nce,i=ice,o=Ul,a=sa,c=oce;function l(b){return unescape(encodeURIComponent(b)).length}function u(b,x,w){const N=[];let _;for(;(_=b.exec(w))!==null;)N.push({data:_[0],index:_.index,mode:x,length:_[0].length});return N}function d(b){const x=u(o.NUMERIC,e.NUMERIC,b),w=u(o.ALPHANUMERIC,e.ALPHANUMERIC,b);let N,_;return a.isKanjiModeEnabled()?(N=u(o.BYTE,e.BYTE,b),_=u(o.KANJI,e.KANJI,b)):(N=u(o.BYTE_KANJI,e.BYTE,b),_=[]),x.concat(w,N,_).sort(function(U,F){return U.index-F.index}).map(function(U){return{data:U.data,mode:U.mode,length:U.length}})}function h(b,x){switch(x){case e.NUMERIC:return n.getBitsLength(b);case e.ALPHANUMERIC:return r.getBitsLength(b);case e.KANJI:return i.getBitsLength(b);case e.BYTE:return s.getBitsLength(b)}}function f(b){return b.reduce(function(x,w){const N=x.length-1>=0?x[x.length-1]:null;return N&&N.mode===w.mode?(x[x.length-1].data+=w.data,x):(x.push(w),x)},[])}function p(b){const x=[];for(let w=0;w<b.length;w++){const N=b[w];switch(N.mode){case e.NUMERIC:x.push([N,{data:N.data,mode:e.ALPHANUMERIC,length:N.length},{data:N.data,mode:e.BYTE,length:N.length}]);break;case e.ALPHANUMERIC:x.push([N,{data:N.data,mode:e.BYTE,length:N.length}]);break;case e.KANJI:x.push([N,{data:N.data,mode:e.BYTE,length:l(N.data)}]);break;case e.BYTE:x.push([{data:N.data,mode:e.BYTE,length:l(N.data)}])}}return x}function m(b,x){const w={},N={start:{}};let _=["start"];for(let L=0;L<b.length;L++){const U=b[L],F=[];for(let M=0;M<U.length;M++){const W=U[M],H=""+L+M;F.push(H),w[H]={node:W,lastCount:0},N[H]={};for(let K=0;K<_.length;K++){const P=_[K];w[P]&&w[P].node.mode===W.mode?(N[P][H]=h(w[P].lastCount+W.length,W.mode)-h(w[P].lastCount,W.mode),w[P].lastCount+=W.length):(w[P]&&(w[P].lastCount=W.length),N[P][H]=h(W.length,W.mode)+4+e.getCharCountIndicator(W.mode,x))}}_=F}for(let L=0;L<_.length;L++)N[_[L]].end=0;return{map:N,table:w}}function E(b,x){let w;const N=e.getBestModeForData(b);if(w=e.from(x,N),w!==e.BYTE&&w.bit<N.bit)throw new Error('"'+b+'" cannot be encoded with mode '+e.toString(w)+`.
 Suggested mode is: `+e.toString(N));switch(w===e.KANJI&&!a.isKanjiModeEnabled()&&(w=e.BYTE),w){case e.NUMERIC:return new n(b);case e.ALPHANUMERIC:return new r(b);case e.KANJI:return new i(b);case e.BYTE:return new s(b)}}t.fromArray=function(x){return x.reduce(function(w,N){return typeof N=="string"?w.push(E(N,null)):N.data&&w.push(E(N.data,N.mode)),w},[])},t.fromString=function(x,w){const N=d(x,a.isKanjiModeEnabled()),_=p(N),L=m(_,w),U=c.find_path(L.map,"start","end"),F=[];for(let M=1;M<U.length-1;M++)F.push(L.table[U[M]].node);return t.fromArray(f(F))},t.rawSplit=function(x){return t.fromArray(d(x,a.isKanjiModeEnabled()))}})(HH);const Z2=sa,uT=q2,ace=$ae,cce=zae,lce=DH,uce=BH,aR=LH,cR=G2,dce=Hae,qC=jH,hce=zH,fce=rf,dT=HH;function pce(t,e){const n=t.size,r=uce.getPositions(e);for(let s=0;s<r.length;s++){const i=r[s][0],o=r[s][1];for(let a=-1;a<=7;a++)if(!(i+a<=-1||n<=i+a))for(let c=-1;c<=7;c++)o+c<=-1||n<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?t.set(i+a,o+c,!0,!0):t.set(i+a,o+c,!1,!0))}}function mce(t){const e=t.size;for(let n=8;n<e-8;n++){const r=n%2===0;t.set(n,6,r,!0),t.set(6,n,r,!0)}}function gce(t,e){const n=lce.getPositions(e);for(let r=0;r<n.length;r++){const s=n[r][0],i=n[r][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(s+o,i+a,!0,!0):t.set(s+o,i+a,!1,!0)}}function yce(t,e){const n=t.size,r=qC.getEncodedBits(e);let s,i,o;for(let a=0;a<18;a++)s=Math.floor(a/3),i=a%3+n-8-3,o=(r>>a&1)===1,t.set(s,i,o,!0),t.set(i,s,o,!0)}function hT(t,e,n){const r=t.size,s=hce.getEncodedBits(e,n);let i,o;for(i=0;i<15;i++)o=(s>>i&1)===1,i<6?t.set(i,8,o,!0):i<8?t.set(i+1,8,o,!0):t.set(r-15+i,8,o,!0),i<8?t.set(8,r-i-1,o,!0):i<9?t.set(8,15-i-1+1,o,!0):t.set(8,15-i-1,o,!0);t.set(r-8,8,1,!0)}function wce(t,e){const n=t.size;let r=-1,s=n-1,i=7,o=0;for(let a=n-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!t.isReserved(s,a-c)){let l=!1;o<e.length&&(l=(e[o]>>>i&1)===1),t.set(s,a-c,l),i--,i===-1&&(o++,i=7)}if(s+=r,s<0||n<=s){s-=r,r=-r;break}}}function bce(t,e,n){const r=new ace;n.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),fce.getCharCountIndicator(c.mode,t)),c.write(r)});const s=Z2.getSymbolTotalCodewords(t),i=cR.getTotalCodewordsCount(t,e),o=(s-i)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const a=(o-r.getLengthInBits())/8;for(let c=0;c<a;c++)r.put(c%2?17:236,8);return vce(r,t,e)}function vce(t,e,n){const r=Z2.getSymbolTotalCodewords(e),s=cR.getTotalCodewordsCount(e,n),i=r-s,o=cR.getBlocksCount(e,n),a=r%o,c=o-a,l=Math.floor(r/o),u=Math.floor(i/o),d=u+1,h=l-u,f=new dce(h);let p=0;const m=new Array(o),E=new Array(o);let b=0;const x=new Uint8Array(t.buffer);for(let U=0;U<o;U++){const F=U<c?u:d;m[U]=x.slice(p,p+F),E[U]=f.encode(m[U]),p+=F,b=Math.max(b,F)}const w=new Uint8Array(r);let N=0,_,L;for(_=0;_<b;_++)for(L=0;L<o;L++)_<m[L].length&&(w[N++]=m[L][_]);for(_=0;_<h;_++)for(L=0;L<o;L++)w[N++]=E[L][_];return w}function Ece(t,e,n,r){let s;if(Array.isArray(t))s=dT.fromArray(t);else if(typeof t=="string"){let l=e;if(!l){const u=dT.rawSplit(t);l=qC.getBestVersionForData(u,n)}s=dT.fromString(t,l||40)}else throw new Error("Invalid data");const i=qC.getBestVersionForData(s,n);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=i;else if(e<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const o=bce(e,n,s),a=Z2.getSymbolSize(e),c=new cce(a);return pce(c,e),mce(c),gce(c,e),hT(c,n,0),e>=7&&yce(c,e),wce(c,o),isNaN(r)&&(r=aR.getBestMask(c,hT.bind(null,c,n))),aR.applyMask(r,c),hT(c,n,r),{modules:c,version:e,errorCorrectionLevel:n,maskPattern:r,segments:s}}OH.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let r=uT.M,s,i;return typeof n<"u"&&(r=uT.from(n.errorCorrectionLevel,uT.M),s=qC.from(n.version),i=aR.from(n.maskPattern),n.toSJISFunc&&Z2.setToSJISFunction(n.toSJISFunc)),Ece(e,s,r,i)};var KH={},GM={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(i){return[i,i]}))),r.length===6&&r.push("F","F");const s=parseInt(r.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const s=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,i=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:i,scale:i?4:o,margin:s,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,s){return s.width&&s.width>=r+s.margin*2?s.width/(r+s.margin*2):s.scale},t.getImageWidth=function(r,s){const i=t.getScale(r,s);return Math.floor((r+s.margin*2)*i)},t.qrToImageData=function(r,s,i){const o=s.modules.size,a=s.modules.data,c=t.getScale(o,i),l=Math.floor((o+i.margin*2)*c),u=i.margin*c,d=[i.color.light,i.color.dark];for(let h=0;h<l;h++)for(let f=0;f<l;f++){let p=(h*l+f)*4,m=i.color.light;if(h>=u&&f>=u&&h<l-u&&f<l-u){const E=Math.floor((h-u)/c),b=Math.floor((f-u)/c);m=d[a[E*o+b]?1:0]}r[p++]=m.r,r[p++]=m.g,r[p++]=m.b,r[p]=m.a}}})(GM);(function(t){const e=GM;function n(s,i,o){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(i,o,a){let c=a,l=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(l=r()),c=e.getOptions(c);const u=e.getImageWidth(i.modules.size,c),d=l.getContext("2d"),h=d.createImageData(u,u);return e.qrToImageData(h.data,i,c),n(d,l,u),d.putImageData(h,0,0),l},t.renderToDataURL=function(i,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const l=t.render(i,o,c),u=c.type||"image/png",d=c.rendererOpts||{};return l.toDataURL(u,d.quality)}})(KH);var qH={};const Ace=GM;function q8(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function fT(t,e,n){let r=t+e;return typeof n<"u"&&(r+=" "+n),r}function xce(t,e,n){let r="",s=0,i=!1,o=0;for(let a=0;a<t.length;a++){const c=Math.floor(a%e),l=Math.floor(a/e);!c&&!i&&(i=!0),t[a]?(o++,a>0&&c>0&&t[a-1]||(r+=i?fT("M",c+n,.5+l+n):fT("m",s,0),s=0,i=!1),c+1<e&&t[a+1]||(r+=fT("h",o),o=0)):s++}return r}qH.render=function(e,n,r){const s=Ace.getOptions(n),i=e.modules.size,o=e.modules.data,a=i+s.margin*2,c=s.color.light.a?"<path "+q8(s.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",l="<path "+q8(s.color.dark,"stroke")+' d="'+xce(o,i,s.margin)+'"/>',u='viewBox="0 0 '+a+" "+a+'"',h='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+l+`</svg>
`;return typeof r=="function"&&r(null,h),h};const Sce=Fae,lR=OH,GH=KH,Cce=qH;function YM(t,e,n,r,s){const i=[].slice.call(arguments,1),o=i.length,a=typeof i[o-1]=="function";if(!a&&!Sce())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(s=n,n=e,e=r=void 0):o===3&&(e.getContext&&typeof s>"u"?(s=r,r=void 0):(s=r,r=n,n=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(n=e,e=r=void 0):o===2&&!e.getContext&&(r=n,n=e,e=void 0),new Promise(function(c,l){try{const u=lR.create(n,r);c(t(u,e,r))}catch(u){l(u)}})}try{const c=lR.create(n,r);s(null,t(c,e,r))}catch(c){s(c)}}KE.create=lR.create;KE.toCanvas=YM.bind(null,GH.render);KE.toDataURL=YM.bind(null,GH.renderToDataURL);KE.toString=YM.bind(null,function(t,e,n){return Cce.render(t,n)});function pT(t){switch(t){case"processed":case"confirmed":case"finalized":case void 0:return t;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}var dl={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SOLANA_CHAINS=t.SOLANA_LOCALNET_CHAIN=t.SOLANA_TESTNET_CHAIN=t.SOLANA_DEVNET_CHAIN=t.SOLANA_MAINNET_CHAIN=void 0,t.isSolanaChain=e,t.SOLANA_MAINNET_CHAIN="solana:mainnet",t.SOLANA_DEVNET_CHAIN="solana:devnet",t.SOLANA_TESTNET_CHAIN="solana:testnet",t.SOLANA_LOCALNET_CHAIN="solana:localnet",t.SOLANA_CHAINS=[t.SOLANA_MAINNET_CHAIN,t.SOLANA_DEVNET_CHAIN,t.SOLANA_TESTNET_CHAIN,t.SOLANA_LOCALNET_CHAIN];function e(n){return t.SOLANA_CHAINS.includes(n)}})(dl);const _ce="https://api.mainnet-beta.solana.com";function Ice(t){return t.includes(_ce)?dl.SOLANA_MAINNET_CHAIN:/\bdevnet\b/i.test(t)?dl.SOLANA_DEVNET_CHAIN:/\btestnet\b/i.test(t)?dl.SOLANA_TESTNET_CHAIN:/\blocalhost\b/i.test(t)||/\b127\.0\.0\.1\b/.test(t)?dl.SOLANA_LOCALNET_CHAIN:dl.SOLANA_MAINNET_CHAIN}function Nce(t){let e=`${t.domain} wants you to sign in with your Solana account:
`;e+=`${t.address}`,t.statement&&(e+=`

${t.statement}`);const n=[];if(t.uri&&n.push(`URI: ${t.uri}`),t.version&&n.push(`Version: ${t.version}`),t.chainId&&n.push(`Chain ID: ${t.chainId}`),t.nonce&&n.push(`Nonce: ${t.nonce}`),t.issuedAt&&n.push(`Issued At: ${t.issuedAt}`),t.expirationTime&&n.push(`Expiration Time: ${t.expirationTime}`),t.notBefore&&n.push(`Not Before: ${t.notBefore}`),t.requestId&&n.push(`Request ID: ${t.requestId}`),t.resources){n.push("Resources:");for(const r of t.resources)n.push(`- ${r}`)}return n.length&&(e+=`

${n.join(`
`)}`),e}const Zo={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_REFLECTOR_ID_OUT_OF_RANGE:"ERROR_REFLECTOR_ID_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION",ERROR_BROWSER_NOT_SUPPORTED:"ERROR_BROWSER_NOT_SUPPORTED"};class Qo extends Error{constructor(...e){const[n,r,s]=e;super(r),this.code=n,this.data=s,this.name="SolanaMobileWalletAdapterError"}}const Tce={ERROR_AUTHORIZATION_FAILED:-1,ERROR_INVALID_PAYLOADS:-2,ERROR_NOT_SIGNED:-3,ERROR_NOT_SUBMITTED:-4,ERROR_TOO_MANY_PAYLOADS:-5,ERROR_ATTEST_ORIGIN_ANDROID:-100};class Q2 extends Error{constructor(...e){const[n,r,s,i]=e;super(s),this.code=r,this.data=i,this.jsonRpcMessageId=n,this.name="SolanaMobileWalletAdapterProtocolError"}}function vn(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function kce(t){return window.btoa(t)}function uR(t,e){const n=window.btoa(String.fromCharCode.call(null,...t));return e?n.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):n}function Pce(t){return new Uint8Array(window.atob(t).split("").map(e=>e.charCodeAt(0)))}function eS(t,e){return vn(this,void 0,void 0,function*(){const n=yield crypto.subtle.exportKey("raw",t),r=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},e,n),s=new Uint8Array(n.byteLength+r.byteLength);return s.set(new Uint8Array(n),0),s.set(new Uint8Array(r),n.byteLength),s})}function Rce(t){return Nce(t)}function Oce(t){return kce(Rce(t))}const YH="solana:signTransactions",dR="solana:cloneAuthorization",Mce="solana:signInWithSolana";function ZH(t,e){return new Proxy({},{get(n,r){return r==="then"?null:(n[r]==null&&(n[r]=function(s){return vn(this,void 0,void 0,function*(){const{method:i,params:o}=Dce(r,s,t),a=yield e(i,o);return i==="authorize"&&o.sign_in_payload&&!a.sign_in_result&&(a.sign_in_result=yield Lce(o.sign_in_payload,a,e)),Bce(r,a,t)})}),n[r])},defineProperty(){return!1},deleteProperty(){return!1}})}function Dce(t,e,n){let r=e,s=t.toString().replace(/[A-Z]/g,i=>`_${i.toLowerCase()}`).toLowerCase();switch(t){case"authorize":{let{chain:i}=r;if(n==="legacy"){switch(i){case"solana:testnet":{i="testnet";break}case"solana:devnet":{i="devnet";break}case"solana:mainnet":{i="mainnet-beta";break}default:i=r.cluster}r.cluster=i}else{switch(i){case"testnet":case"devnet":{i=`solana:${i}`;break}case"mainnet-beta":{i="solana:mainnet";break}}r.chain=i}}case"reauthorize":{const{auth_token:i,identity:o}=r;if(i)switch(n){case"legacy":{s="reauthorize",r={auth_token:i,identity:o};break}default:{s="authorize";break}}break}}return{method:s,params:r}}function Bce(t,e,n){switch(t){case"getCapabilities":{const r=e;switch(n){case"legacy":{const s=[YH];return r.supports_clone_authorization===!0&&s.push(dR),Object.assign(Object.assign({},r),{features:s})}case"v1":return Object.assign(Object.assign({},r),{supports_sign_and_send_transactions:!0,supports_clone_authorization:r.features.includes(dR)})}}}return e}function Lce(t,e,n){var r;return vn(this,void 0,void 0,function*(){const s=(r=t.domain)!==null&&r!==void 0?r:window.location.host,i=e.accounts[0].address,o=Oce(Object.assign(Object.assign({},t),{domain:s,address:i})),a=yield n("sign_messages",{addresses:[i],payloads:[o]});return{address:i,signed_message:o,signature:a.signed_payloads[0].slice(o.length)}})}const ku=4;function Uce(t){if(t>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const e=new ArrayBuffer(ku);return new DataView(e).setUint32(0,t,!1),new Uint8Array(e)}const hR=12,ZM=65;function Fce(t,e,n){return vn(this,void 0,void 0,function*(){const r=Uce(e),s=new Uint8Array(hR);crypto.getRandomValues(s);const i=yield crypto.subtle.encrypt(JH(r,s),n,new TextEncoder().encode(t)),o=new Uint8Array(r.byteLength+s.byteLength+i.byteLength);return o.set(new Uint8Array(r),0),o.set(new Uint8Array(s),r.byteLength),o.set(new Uint8Array(i),r.byteLength+s.byteLength),o})}function QH(t,e){return vn(this,void 0,void 0,function*(){const n=t.slice(0,ku),r=t.slice(ku,ku+hR),s=t.slice(ku+hR),i=yield crypto.subtle.decrypt(JH(n,r),e,s);return jce().decode(i)})}function JH(t,e){return{additionalData:t,iv:e,name:"AES-GCM",tagLength:128}}let mT;function jce(){return mT===void 0&&(mT=new TextDecoder("utf-8")),mT}function XH(){return vn(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function tS(){return vn(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function eV(t){let e="";const n=new Uint8Array(t),r=n.byteLength;for(let s=0;s<r;s++)e+=String.fromCharCode(n[s]);return window.btoa(e)}function $ce(){return tV(49152+Math.floor(Math.random()*(65535-49152+1)))}function tV(t){if(t<49152||t>65535)throw new Qo(Zo.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${t} given.`,{port:t});return t}function nV(t){return t.replace(/[/+=]/g,e=>({"/":"_","+":"-","=":"."})[e])}const zce="solana-wallet";function G8(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function rV(t,e){let n=null;if(e){try{n=new URL(e)}catch{}if((n==null?void 0:n.protocol)!=="https:")throw new Qo(Zo.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}n||(n=new URL(`${zce}:/`));const r=t.startsWith("/")?t:[...G8(n.pathname),...G8(t)].join("/");return new URL(r,n)}function Wce(t,e,n,r=["v1"]){return vn(this,void 0,void 0,function*(){const s=tV(e),i=yield crypto.subtle.exportKey("raw",t),o=eV(i),a=rV("v1/associate/local",n);return a.searchParams.set("association",nV(o)),a.searchParams.set("port",`${s}`),r.forEach(c=>{a.searchParams.set("v",c)}),a})}function Hce(t,e,n,r,s=["v1"]){return vn(this,void 0,void 0,function*(){const i=yield crypto.subtle.exportKey("raw",t),o=eV(i),a=rV("v1/associate/remote",r);return a.searchParams.set("association",nV(o)),a.searchParams.set("reflector",`${e}`),a.searchParams.set("id",`${uR(n,!0)}`),s.forEach(c=>{a.searchParams.set("v",c)}),a})}function sV(t,e){return vn(this,void 0,void 0,function*(){const n=JSON.stringify(t),r=t.id;return Fce(n,r,e)})}function iV(t,e){return vn(this,void 0,void 0,function*(){const n=yield QH(t,e),r=JSON.parse(n);if(Object.hasOwnProperty.call(r,"error"))throw new Q2(r.id,r.error.code,r.error.message);return r})}function oV(t,e,n){return vn(this,void 0,void 0,function*(){const[r,s]=yield Promise.all([crypto.subtle.exportKey("raw",e),crypto.subtle.importKey("raw",t.slice(0,ZM),{name:"ECDH",namedCurve:"P-256"},!1,[])]),i=yield crypto.subtle.deriveBits({name:"ECDH",public:s},n,256),o=yield crypto.subtle.importKey("raw",i,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(r),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function aV(t,e){return vn(this,void 0,void 0,function*(){const n=yield QH(t,e),r=JSON.parse(n);let s="legacy";if(Object.hasOwnProperty.call(r,"v"))switch(r.v){case 1:case"1":case"v1":s="v1";break;case"legacy":s="legacy";break;default:throw new Qo(Zo.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${r.v}`)}return{protocol_version:s}})}const GC={Firefox:0,Other:1};function Vce(){return navigator.userAgent.indexOf("Firefox/")!==-1?GC.Firefox:GC.Other}function Kce(){return new Promise((t,e)=>{function n(){clearTimeout(s),window.removeEventListener("blur",r)}function r(){n(),t()}window.addEventListener("blur",r);const s=setTimeout(()=>{n(),e()},3e3)})}let Kw=null;function qce(t){Kw==null&&(Kw=document.createElement("iframe"),Kw.style.display="none",document.body.appendChild(Kw)),Kw.contentWindow.location.href=t.toString()}function Gce(t){return vn(this,void 0,void 0,function*(){if(t.protocol==="https:")window.location.assign(t);else try{const e=Vce();switch(e){case GC.Firefox:qce(t);break;case GC.Other:{const n=Kce();window.location.assign(t),yield n;break}default:}}catch{throw new Qo(Zo.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function Yce(t,e){return vn(this,void 0,void 0,function*(){const n=$ce(),r=yield Wce(t,n,e);return yield Gce(r),n})}const YC={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},cV="com.solana.mobilewalletadapter.v1",Y8="com.solana.mobilewalletadapter.v1.base64";function lV(){if(typeof window>"u"||window.isSecureContext!==!0)throw new Qo(Zo.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function uV(t){let e;try{e=new URL(t)}catch{throw new Qo(Zo.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(e.protocol!=="https:")throw new Qo(Zo.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function ZC(t){return new DataView(t).getUint32(0,!1)}function Zce(t){var e=new Uint8Array(t),n=t.byteLength,r=10,s=0,i=0,o;do{if(i>=n||i>r)throw new RangeError("Failed to decode varint");o=e[i++],s|=(o&127)<<7*i}while(o>=128);return{value:s,offset:i}}function Qce(t){let{value:e,offset:n}=Zce(t);return new Uint8Array(t.slice(n,n+e))}function Jce(t,e){return vn(this,void 0,void 0,function*(){lV();const n=yield XH(),s=`ws://localhost:${yield Yce(n.publicKey,e==null?void 0:e.baseUri)}/solana-wallet`;let i;const o=(()=>{const u=[...YC.retryDelayScheduleMs];return()=>u.length>1?u.shift():u[0]})();let a=1,c=0,l={__type:"disconnected"};return new Promise((u,d)=>{let h;const f={},p=()=>vn(this,void 0,void 0,function*(){if(l.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${l.__type}\`.`);return}h.removeEventListener("open",p);const{associationKeypair:_}=l,L=yield tS();h.send(yield eS(L.publicKey,_.privateKey)),l={__type:"hello_req_sent",associationPublicKey:_.publicKey,ecdhPrivateKey:L.privateKey}}),m=_=>{_.wasClean?l={__type:"disconnected"}:d(new Qo(Zo.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${_.code}: ${_.reason}).`,{closeEvent:_})),x()},E=_=>vn(this,void 0,void 0,function*(){x(),Date.now()-i>=YC.timeoutMs?d(new Qo(Zo.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${s}.`)):(yield new Promise(L=>{const U=o();w=window.setTimeout(L,U)}),N())}),b=_=>vn(this,void 0,void 0,function*(){const L=yield _.data.arrayBuffer();switch(l.__type){case"connecting":if(L.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const U=yield tS();h.send(yield eS(U.publicKey,n.privateKey)),l={__type:"hello_req_sent",associationPublicKey:n.publicKey,ecdhPrivateKey:U.privateKey};break;case"connected":try{const F=L.slice(0,ku),M=ZC(F);if(M!==c+1)throw new Error("Encrypted message has invalid sequence number");c=M;const W=yield iV(L,l.sharedSecret),H=f[W.id];delete f[W.id],H.resolve(W.result)}catch(F){if(F instanceof Q2){const M=f[F.jsonRpcMessageId];delete f[F.jsonRpcMessageId],M.reject(F)}else throw F}break;case"hello_req_sent":{if(L.byteLength===0){const K=yield tS();h.send(yield eS(K.publicKey,n.privateKey)),l={__type:"hello_req_sent",associationPublicKey:n.publicKey,ecdhPrivateKey:K.privateKey};break}const F=yield oV(L,l.associationPublicKey,l.ecdhPrivateKey),M=L.slice(ZM),W=M.byteLength!==0?yield(()=>vn(this,void 0,void 0,function*(){const K=M.slice(0,ku),P=ZC(K);if(P!==c+1)throw new Error("Encrypted message has invalid sequence number");return c=P,aV(M,F)}))():{protocol_version:"legacy"};l={__type:"connected",sharedSecret:F,sessionProperties:W};const H=ZH(W.protocol_version,(K,P)=>vn(this,void 0,void 0,function*(){const y=a++;return h.send(yield sV({id:y,jsonrpc:"2.0",method:K,params:P??{}},F)),new Promise((g,A)=>{f[y]={resolve(I){switch(K){case"authorize":case"reauthorize":{const{wallet_uri_base:T}=I;if(T!=null)try{uV(T)}catch(R){A(R);return}break}}g(I)},reject:A}})}));try{u(yield t(H))}catch(K){d(K)}finally{x(),h.close()}break}}});let x,w;const N=()=>{x&&x(),l={__type:"connecting",associationKeypair:n},i===void 0&&(i=Date.now()),h=new WebSocket(s,[cV]),h.addEventListener("open",p),h.addEventListener("close",m),h.addEventListener("error",E),h.addEventListener("message",b),x=()=>{window.clearTimeout(w),h.removeEventListener("open",p),h.removeEventListener("close",m),h.removeEventListener("error",E),h.removeEventListener("message",b)}};N()})})}function Xce(t){return vn(this,void 0,void 0,function*(){lV();const e=yield XH(),n=`wss://${t==null?void 0:t.remoteHostAuthority}/reflect`;let r;const s=(()=>{const m=[...YC.retryDelayScheduleMs];return()=>m.length>1?m.shift():m[0]})();let i=1,o=0,a,c={__type:"disconnected"},l,u,d=m=>vn(this,void 0,void 0,function*(){if(a=="base64"){const E=yield m.data;return Pce(E).buffer}else return yield m.data.arrayBuffer()});const h=yield new Promise((m,E)=>{const b=()=>vn(this,void 0,void 0,function*(){if(c.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${c.__type}\`.`);return}l.protocol.includes(Y8)?a="base64":a="binary",l.removeEventListener("open",b)}),x=U=>{U.wasClean?c={__type:"disconnected"}:E(new Qo(Zo.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${U.code}: ${U.reason}).`,{closeEvent:U})),u()},w=U=>vn(this,void 0,void 0,function*(){u(),Date.now()-r>=YC.timeoutMs?E(new Qo(Zo.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${n}.`)):(yield new Promise(F=>{const M=s();_=window.setTimeout(F,M)}),L())}),N=U=>vn(this,void 0,void 0,function*(){const F=yield d(U);if(c.__type==="connecting"){if(F.byteLength==0)throw new Error("Encountered unexpected message while connecting");const M=Qce(F);c={__type:"reflector_id_received",reflectorId:M};const W=yield Hce(e.publicKey,t.remoteHostAuthority,M,t==null?void 0:t.baseUri);l.removeEventListener("message",N),m(W)}});let _;const L=()=>{u&&u(),c={__type:"connecting",associationKeypair:e},r===void 0&&(r=Date.now()),l=new WebSocket(n,[cV,Y8]),l.addEventListener("open",b),l.addEventListener("close",x),l.addEventListener("error",w),l.addEventListener("message",N),u=()=>{window.clearTimeout(_),l.removeEventListener("open",b),l.removeEventListener("close",x),l.removeEventListener("error",w),l.removeEventListener("message",N)}};L()});let f=!1,p;return{associationUrl:h,close:()=>{l.close(),p()},wallet:new Promise((m,E)=>{const b={},x=w=>vn(this,void 0,void 0,function*(){const N=yield d(w);switch(c.__type){case"reflector_id_received":if(N.byteLength!==0)throw new Error("Encountered unexpected message while awaiting reflection");const _=yield tS(),L=yield eS(_.publicKey,e.privateKey);a=="base64"?l.send(uR(L)):l.send(L),c={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:_.privateKey};break;case"connected":try{const U=N.slice(0,ku),F=ZC(U);if(F!==o+1)throw new Error("Encrypted message has invalid sequence number");o=F;const M=yield iV(N,c.sharedSecret),W=b[M.id];delete b[M.id],W.resolve(M.result)}catch(U){if(U instanceof Q2){const F=b[U.jsonRpcMessageId];delete b[U.jsonRpcMessageId],F.reject(U)}else throw U}break;case"hello_req_sent":{const U=yield oV(N,c.associationPublicKey,c.ecdhPrivateKey),F=N.slice(ZM),M=F.byteLength!==0?yield(()=>vn(this,void 0,void 0,function*(){const H=F.slice(0,ku),K=ZC(H);if(K!==o+1)throw new Error("Encrypted message has invalid sequence number");return o=K,aV(F,U)}))():{protocol_version:"legacy"};c={__type:"connected",sharedSecret:U,sessionProperties:M};const W=ZH(M.protocol_version,(H,K)=>vn(this,void 0,void 0,function*(){const P=i++,y=yield sV({id:P,jsonrpc:"2.0",method:H,params:K??{}},U);return a=="base64"?l.send(uR(y)):l.send(y),new Promise((g,A)=>{b[P]={resolve(I){switch(H){case"authorize":case"reauthorize":{const{wallet_uri_base:T}=I;if(T!=null)try{uV(T)}catch(R){A(R);return}break}}g(I)},reject:A}})}));f=!0;try{m(W)}catch(H){E(H)}break}}});l.addEventListener("message",x),p=()=>{l.removeEventListener("message",x),u(),f||E(new Qo(Zo.ERROR_SESSION_CLOSED,"The wallet session was closed before connection.",{closeEvent:new CloseEvent("socket was closed before connection")}))}})}})}const ele=Object.freeze(Object.defineProperty({__proto__:null,SolanaCloneAuthorization:dR,SolanaMobileWalletAdapterError:Qo,SolanaMobileWalletAdapterErrorCode:Zo,SolanaMobileWalletAdapterProtocolError:Q2,SolanaMobileWalletAdapterProtocolErrorCode:Tce,SolanaSignInWithSolana:Mce,SolanaSignTransactions:YH,startRemoteScenario:Xce,transact:Jce},Symbol.toStringTag,{value:"Module"})),tle=Ol(ele),nle=Ol(Oae);function rle(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var s=t.charAt(r),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=r}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";for(var p=0,m=0,E=0,b=f.length;E!==b&&f[E]===0;)E++,p++;for(var x=(b-E)*l+1>>>0,w=new Uint8Array(x);E!==b;){for(var N=f[E],_=0,L=x-1;(N!==0||_<m)&&L!==-1;L--,_++)N+=256*w[L]>>>0,w[L]=N%o>>>0,N=N/o>>>0;if(N!==0)throw new Error("Non-zero carry");m=_,E++}for(var U=x-m;U!==x&&w[U]===0;)U++;for(var F=a.repeat(p);U<x;++U)F+=t.charAt(w[U]);return F}function d(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;for(var p=0,m=0,E=0;f[p]===a;)m++,p++;for(var b=(f.length-p)*c+1>>>0,x=new Uint8Array(b);f[p];){var w=f.charCodeAt(p);if(w>255)return;var N=e[w];if(N===255)return;for(var _=0,L=b-1;(N!==0||_<E)&&L!==-1;L--,_++)N+=o*x[L]>>>0,x[L]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");E=_,p++}for(var U=b-E;U!==b&&x[U]===0;)U++;for(var F=new Uint8Array(m+(b-U)),M=m;U!==b;)F[M++]=x[U++];return F}function h(f){var p=d(f);if(p)return p;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:d,decode:h}}var sle=rle;const ile=sle,ole="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var ale=ile(ole);Object.defineProperty(Ll,"__esModule",{value:!0});var Kr=RH,cle=KE,dV=tle,C0=nle,lle=ale,Z8=dl;function hV(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var ule=hV(cle),X1=hV(lle);function pt(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function ee(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function Nt(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n}var Eb,ts,vf,Ag,fV,pV,mV,nS;const dle=`
<div class="mobile-wallet-adapter-embedded-modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div data-modal-close style="position: absolute; width: 100%; height: 100%;"></div>
	<div class="mobile-wallet-adapter-embedded-modal-card">
		<div>
			<button data-modal-close class="mobile-wallet-adapter-embedded-modal-close">
				<svg width="14" height="14">
					<path d="M 6.7125,8.3036995 1.9082,13.108199 c -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 C 0.1056,12.896899 0,12.631699 0,12.312499 c 0,-0.3192 0.1056,-0.5844 0.3167,-0.7958 L 5.1212,6.7124995 0.3167,1.9082 C 0.1056,1.6969 0,1.4317 0,1.1125 0,0.7933 0.1056,0.5281 0.3167,0.3167 0.5281,0.1056 0.7933,0 1.1125,0 1.4317,0 1.6969,0.1056 1.9082,0.3167 L 6.7125,5.1212 11.5167,0.3167 C 11.7281,0.1056 11.9933,0 12.3125,0 c 0.3192,0 0.5844,0.1056 0.7957,0.3167 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 L 8.3037001,6.7124995 13.1082,11.516699 c 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 z" />
				</svg>
			</button>
		</div>
		<div class="mobile-wallet-adapter-embedded-modal-content"></div>
	</div>
</div>
`,hle=`
.mobile-wallet-adapter-embedded-modal-container {
    display: flex; /* Use flexbox to center content */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    overflow-y: auto; /* enable scrolling */
}

.mobile-wallet-adapter-embedded-modal-card {
    display: flex;
    flex-direction: column;
    margin: auto 20px;
    max-width: 780px;
    padding: 20px;
    border-radius: 24px;
    background: #ffffff;
    font-family: "Inter Tight", "PT Sans", Calibri, sans-serif;
    transform: translateY(-200%);
    animation: slide-in 0.5s forwards;
}

@keyframes slide-in {
    100% { transform: translateY(0%); }
}

.mobile-wallet-adapter-embedded-modal-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: #e4e9e9;
    border: none;
    border-radius: 50%;
}

.mobile-wallet-adapter-embedded-modal-close:focus-visible {
    outline-color: red;
}

.mobile-wallet-adapter-embedded-modal-close svg {
    fill: #546266;
    transition: fill 200ms ease 0s;
}

.mobile-wallet-adapter-embedded-modal-close:hover svg {
    fill: #fff;
}
`,fle=`
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
`;class gV{constructor(){Eb.add(this),ts.set(this,null),vf.set(this,{}),Ag.set(this,!1),this.dom=null,this.open=()=>{console.debug("Modal open"),ee(this,Eb,"m",pV).call(this),ee(this,ts,"f")&&(ee(this,ts,"f").style.display="flex")},this.close=(e=void 0)=>{var n;console.debug("Modal close"),ee(this,Eb,"m",mV).call(this),ee(this,ts,"f")&&(ee(this,ts,"f").style.display="none"),(n=ee(this,vf,"f").close)===null||n===void 0||n.forEach(r=>r(e))},nS.set(this,e=>{e.key==="Escape"&&this.close(e)}),this.init=this.init.bind(this),Nt(this,ts,document.getElementById("mobile-wallet-adapter-embedded-root-ui"),"f")}init(){return pt(this,void 0,void 0,function*(){console.log("Injecting modal"),ee(this,Eb,"m",fV).call(this)})}addEventListener(e,n){var r;return!((r=ee(this,vf,"f")[e])===null||r===void 0)&&r.push(n)||(ee(this,vf,"f")[e]=[n]),()=>this.removeEventListener(e,n)}removeEventListener(e,n){var r;ee(this,vf,"f")[e]=(r=ee(this,vf,"f")[e])===null||r===void 0?void 0:r.filter(s=>n!==s)}}ts=new WeakMap,vf=new WeakMap,Ag=new WeakMap,nS=new WeakMap,Eb=new WeakSet,fV=function(){if(document.getElementById("mobile-wallet-adapter-embedded-root-ui")){ee(this,ts,"f")||Nt(this,ts,document.getElementById("mobile-wallet-adapter-embedded-root-ui"),"f");return}Nt(this,ts,document.createElement("div"),"f"),ee(this,ts,"f").id="mobile-wallet-adapter-embedded-root-ui",ee(this,ts,"f").innerHTML=dle,ee(this,ts,"f").style.display="none";const e=ee(this,ts,"f").querySelector(".mobile-wallet-adapter-embedded-modal-content");e&&(e.innerHTML=this.contentHtml);const n=document.createElement("style");n.id="mobile-wallet-adapter-embedded-modal-styles",n.textContent=hle+this.contentStyles;const r=document.createElement("div");r.innerHTML=fle,this.dom=r.attachShadow({mode:"closed"}),this.dom.appendChild(n),this.dom.appendChild(ee(this,ts,"f")),document.body.appendChild(r)},pV=function(){if(!ee(this,ts,"f")||ee(this,Ag,"f"))return;[...ee(this,ts,"f").querySelectorAll("[data-modal-close]")].forEach(n=>n==null?void 0:n.addEventListener("click",this.close)),window.addEventListener("load",this.close),document.addEventListener("keydown",ee(this,nS,"f")),Nt(this,Ag,!0,"f")},mV=function(){if(!ee(this,Ag,"f")||(window.removeEventListener("load",this.close),document.removeEventListener("keydown",ee(this,nS,"f")),!ee(this,ts,"f")))return;[...ee(this,ts,"f").querySelectorAll("[data-modal-close]")].forEach(n=>n==null?void 0:n.removeEventListener("click",this.close)),Nt(this,Ag,!1,"f")};class ple extends gV{constructor(){super(...arguments),this.contentStyles=gle,this.contentHtml=mle}initWithQR(e){const n=Object.create(null,{init:{get:()=>super.init}});return pt(this,void 0,void 0,function*(){n.init.call(this),this.populateQRCode(e)})}populateQRCode(e){var n;return pt(this,void 0,void 0,function*(){const r=(n=this.dom)===null||n===void 0?void 0:n.getElementById("mobile-wallet-adapter-embedded-modal-qr-code-container");if(r){const s=yield ule.default.toCanvas(e,{width:200,margin:0});r.firstElementChild!==null?r.replaceChild(s,r.firstElementChild):r.appendChild(s)}else console.error("QRCode Container not found")})}}const mle=`
<div class="mobile-wallet-adapter-embedded-modal-qr-content">
    <div>
        <svg class="mobile-wallet-adapter-embedded-modal-icon" width="100%" height="100%">
            <circle r="52" cx="53" cy="53" fill="#99b3be" stroke="#000000" stroke-width="2"/>
            <path d="m 53,82.7305 c -3.3116,0 -6.1361,-1.169 -8.4735,-3.507 -2.338,-2.338 -3.507,-5.1625 -3.507,-8.4735 0,-3.3116 1.169,-6.1364 3.507,-8.4744 2.3374,-2.338 5.1619,-3.507 8.4735,-3.507 3.3116,0 6.1361,1.169 8.4735,3.507 2.338,2.338 3.507,5.1628 3.507,8.4744 0,3.311 -1.169,6.1355 -3.507,8.4735 -2.3374,2.338 -5.1619,3.507 -8.4735,3.507 z m 0.007,-5.25 c 1.8532,0 3.437,-0.6598 4.7512,-1.9793 1.3149,-1.3195 1.9723,-2.9058 1.9723,-4.7591 0,-1.8526 -0.6598,-3.4364 -1.9793,-4.7512 -1.3195,-1.3149 -2.9055,-1.9723 -4.7582,-1.9723 -1.8533,0 -3.437,0.6598 -4.7513,1.9793 -1.3148,1.3195 -1.9722,2.9058 -1.9722,4.7591 0,1.8527 0.6597,3.4364 1.9792,4.7512 1.3195,1.3149 2.9056,1.9723 4.7583,1.9723 z m -28,-33.5729 -3.85,-3.6347 c 4.1195,-4.025 8.8792,-7.1984 14.2791,-9.52 5.4005,-2.3223 11.2551,-3.4834 17.5639,-3.4834 6.3087,0 12.1634,1.1611 17.5639,3.4834 5.3999,2.3216 10.1596,5.495 14.2791,9.52 l -3.85,3.6347 C 77.2999,40.358 73.0684,37.5726 68.2985,35.5514 63.5292,33.5301 58.4296,32.5195 53,32.5195 c -5.4297,0 -10.5292,1.0106 -15.2985,3.0319 -4.7699,2.0212 -9.0014,4.8066 -12.6945,8.3562 z m 44.625,10.8771 c -2.2709,-2.1046 -4.7962,-3.7167 -7.5758,-4.8361 -2.7795,-1.12 -5.7983,-1.68 -9.0562,-1.68 -3.2579,0 -6.2621,0.56 -9.0125,1.68 -2.7504,1.1194 -5.2903,2.7315 -7.6195,4.8361 L 32.5189,51.15 c 2.8355,-2.6028 5.9777,-4.6086 9.4263,-6.0174 3.4481,-1.4087 7.133,-2.1131 11.0548,-2.1131 3.9217,0 7.5979,0.7044 11.0285,2.1131 3.43,1.4088 6.5631,3.4146 9.3992,6.0174 z"/>
        </svg>
        <div class="mobile-wallet-adapter-embedded-modal-title">Remote Mobile Wallet Adapter</div>
    </div>
    <div>
        <div>
            <h4 class="mobile-wallet-adapter-embedded-modal-qr-label">
                Open your wallet and scan this code
            </h4>
        </div>
        <div id="mobile-wallet-adapter-embedded-modal-qr-code-container" class="mobile-wallet-adapter-embedded-modal-qr-code-container"></div>
    </div>
</div>
<div class="mobile-wallet-adapter-embedded-modal-divider"><hr></div>
<div class="mobile-wallet-adapter-embedded-modal-footer">
    <div class="mobile-wallet-adapter-embedded-modal-subtitle">
        Follow the instructions on your device. When you're finished, this screen will update.
    </div>
    <div class="mobile-wallet-adapter-embedded-modal-progress-badge">
        <div>
            <div class="spinner">
                <div class="leftWrapper">
                    <div class="left">
                        <div class="circle"></div>
                    </div>
                </div>
                <div class="rightWrapper">
                    <div class="right">
                        <div class="circle"></div>
                    </div>
                </div>
            </div>
        </div>
        <div>Waiting for scan</div>
    </div>
</div>
`,gle=`
.mobile-wallet-adapter-embedded-modal-qr-content {
    display: flex; 
    margin-top: 10px;
    padding: 10px;
}

.mobile-wallet-adapter-embedded-modal-qr-content > div:first-child {
    display: flex;
    flex-direction: column;
    flex: 2;
    margin-top: auto;
    margin-right: 30px;
}

.mobile-wallet-adapter-embedded-modal-qr-content > div:nth-child(2) {
    display: flex;
    flex-direction: column;
    flex: 1;
    margin-left: auto;
}

.mobile-wallet-adapter-embedded-modal-footer {
    display: flex;
    padding: 10px;
}

.mobile-wallet-adapter-embedded-modal-icon {}

.mobile-wallet-adapter-embedded-modal-title {
    color: #000000;
    font-size: 2.5em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-qr-label {
    text-align: right;
    color: #000000;
}

.mobile-wallet-adapter-embedded-modal-qr-code-container {
    margin-left: auto;
}

.mobile-wallet-adapter-embedded-modal-divider {
    margin-top: 20px;
    padding-left: 10px;
    padding-right: 10px;
}

.mobile-wallet-adapter-embedded-modal-divider hr {
    border-top: 1px solid #D9DEDE;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: auto;
    margin-right: 60px;
    padding: 20px;
    color: #6E8286;
}

.mobile-wallet-adapter-embedded-modal-progress-badge {
    display: flex;
    background: #F7F8F8;
    height: 56px;
    min-width: 200px;
    margin: auto;
    padding-left: 20px;
    padding-right: 20px;
    border-radius: 18px;
    color: #A8B6B8;
    align-items: center;
}

.mobile-wallet-adapter-embedded-modal-progress-badge > div:first-child {
    margin-left: auto;
    margin-right: 20px;
}

.mobile-wallet-adapter-embedded-modal-progress-badge > div:nth-child(2) {
    margin-right: auto;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-card {
        text-align: center;
    }
    .mobile-wallet-adapter-embedded-modal-qr-content {
        flex-direction: column;
    }
    .mobile-wallet-adapter-embedded-modal-qr-content > div:first-child {
        margin: auto;
    }
    .mobile-wallet-adapter-embedded-modal-qr-content > div:nth-child(2) {
        margin: auto;
        flex: 2 auto;
    }
    .mobile-wallet-adapter-embedded-modal-footer {
        flex-direction: column;
    }
    .mobile-wallet-adapter-embedded-modal-icon {
        display: none;
    }
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: unset;
    }
    .mobile-wallet-adapter-embedded-modal-qr-label {
        text-align: center;
    }
    .mobile-wallet-adapter-embedded-modal-qr-code-container {
        margin: auto;
    }
}

/* Spinner */
@keyframes spinLeft {
    0% {
        transform: rotate(20deg);
    }
    50% {
        transform: rotate(160deg);
    }
    100% {
        transform: rotate(20deg);
    }
}
@keyframes spinRight {
    0% {
        transform: rotate(160deg);
    }
    50% {
        transform: rotate(20deg);
    }
    100% {
        transform: rotate(160deg);
    }
}
@keyframes spin {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(2520deg);
    }
}

.spinner {
    position: relative;
    width: 1.5em;
    height: 1.5em;
    margin: auto;
    animation: spin 10s linear infinite;
}
.spinner::before {
    content: "";
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
}
.right, .rightWrapper, .left, .leftWrapper {
    position: absolute;
    top: 0;
    overflow: hidden;
    width: .75em;
    height: 1.5em;
}
.left, .leftWrapper {
    left: 0;
}
.right {
    left: -12px;
}
.rightWrapper {
    right: 0;
}
.circle {
    border: .125em solid #A8B6B8;
    width: 1.25em; /* 1.5em - 2*0.125em border */
    height: 1.25em; /* 1.5em - 2*0.125em border */
    border-radius: 0.75em; /* 0.5*1.5em spinner size 8 */
}
.left {
    transform-origin: 100% 50%;
    animation: spinLeft 2.5s cubic-bezier(.2,0,.8,1) infinite;
}
.right {
    transform-origin: 100% 50%;
    animation: spinRight 2.5s cubic-bezier(.2,0,.8,1) infinite;
}
`,yV="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo=";function Eh(t){return window.btoa(String.fromCharCode.call(null,...t))}function bi(t){return new Uint8Array(window.atob(t).split("").map(e=>e.charCodeAt(0)))}var xg,np,fR,pR,mR,gR,Ab,ui,Zl,Td,Sg,Ef,rS,xb,sS,yR,iS,wV,wR,oS,Cg,aS,Sb,cS,_g,Cb,lS,bR,vR,uS,dS,ER,AR,hS,Ig,rp,xR,SR,CR,_R,_b,di,kd,Pd,Ng,Af,fS,Ib,pS,mS,qa,IR,gS,bV,NR,yS,Nb,TR,Tb,wS,Tg,kb,bS,kR,PR,vS,ES,RR,OR,AS;const QM="Mobile Wallet Adapter",vV=64,EV=[Kr.SolanaSignAndSendTransaction,Kr.SolanaSignTransaction,Kr.SolanaSignMessage,Kr.SolanaSignIn];class AV{constructor(e){xg.add(this),np.set(this,{}),fR.set(this,"1.0.0"),pR.set(this,QM),mR.set(this,"https://solanamobile.com/wallets"),gR.set(this,yV),Ab.set(this,void 0),ui.set(this,void 0),Zl.set(this,void 0),Td.set(this,!1),Sg.set(this,0),Ef.set(this,[]),rS.set(this,void 0),xb.set(this,void 0),sS.set(this,void 0),yR.set(this,(n,r)=>{var s;return!((s=ee(this,np,"f")[n])===null||s===void 0)&&s.push(r)||(ee(this,np,"f")[n]=[r]),()=>ee(this,xg,"m",wV).call(this,n,r)}),wR.set(this,({silent:n}={})=>pt(this,void 0,void 0,function*(){if(ee(this,Td,"f")||this.connected)return{accounts:this.accounts};Nt(this,Td,!0,"f");try{if(n){const r=yield ee(this,Zl,"f").get();if(r)yield ee(this,aS,"f").call(this,r.capabilities),yield ee(this,Cg,"f").call(this,r);else return{accounts:this.accounts}}else yield ee(this,oS,"f").call(this)}catch(r){throw new Error(r instanceof Error&&r.message||"Unknown error")}finally{Nt(this,Td,!1,"f")}return{accounts:this.accounts}})),oS.set(this,n=>pt(this,void 0,void 0,function*(){try{const r=yield ee(this,Zl,"f").get();if(r)return ee(this,Cg,"f").call(this,r),r;const s=yield ee(this,rS,"f").select(ee(this,Ef,"f"));return yield ee(this,_g,"f").call(this,i=>pt(this,void 0,void 0,function*(){const[o,a]=yield Promise.all([i.getCapabilities(),i.authorize({chain:s,identity:ee(this,Ab,"f"),sign_in_payload:n})]),c=ee(this,lS,"f").call(this,a.accounts),l=Object.assign(Object.assign({},a),{accounts:c,chain:s,capabilities:o});return Promise.all([ee(this,aS,"f").call(this,o),ee(this,Zl,"f").set(l),ee(this,Cg,"f").call(this,l)]),l}))}catch(r){throw new Error(r instanceof Error&&r.message||"Unknown error")}})),Cg.set(this,n=>pt(this,void 0,void 0,function*(){var r;const s=ee(this,ui,"f")==null||((r=ee(this,ui,"f"))===null||r===void 0?void 0:r.accounts.length)!==n.accounts.length||ee(this,ui,"f").accounts.some((i,o)=>i.address!==n.accounts[o].address);Nt(this,ui,n,"f"),s&&ee(this,xg,"m",iS).call(this,"change",{accounts:this.accounts})})),aS.set(this,n=>pt(this,void 0,void 0,function*(){const r=n.features.includes("solana:signTransactions"),s=n.supports_sign_and_send_transactions,i=Kr.SolanaSignAndSendTransaction in this.features!==s||Kr.SolanaSignTransaction in this.features!==r;Nt(this,xb,Object.assign(Object.assign({},(s||!s&&!r)&&{[Kr.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:ee(this,uS,"f")}}),r&&{[Kr.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:ee(this,dS,"f")}}),"f"),i&&ee(this,xg,"m",iS).call(this,"change",{features:this.features})})),Sb.set(this,(n,r,s)=>pt(this,void 0,void 0,function*(){var i,o;try{const[a,c]=yield Promise.all([(o=(i=ee(this,ui,"f"))===null||i===void 0?void 0:i.capabilities)!==null&&o!==void 0?o:yield n.getCapabilities(),n.authorize({auth_token:r,identity:ee(this,Ab,"f"),chain:s})]),l=ee(this,lS,"f").call(this,c.accounts),u=Object.assign(Object.assign({},c),{accounts:l,chain:s,capabilities:a});Promise.all([ee(this,Zl,"f").set(u),ee(this,Cg,"f").call(this,u)])}catch(a){throw ee(this,cS,"f").call(this),new Error(a instanceof Error&&a.message||"Unknown error")}})),cS.set(this,()=>pt(this,void 0,void 0,function*(){var n;ee(this,Zl,"f").clear(),Nt(this,Td,!1,"f"),Nt(this,Sg,(n=ee(this,Sg,"f"),n++,n),"f"),Nt(this,ui,void 0,"f"),ee(this,xg,"m",iS).call(this,"change",{accounts:this.accounts})})),_g.set(this,n=>pt(this,void 0,void 0,function*(){var r;const s=(r=ee(this,ui,"f"))===null||r===void 0?void 0:r.wallet_uri_base,i=s?{baseUri:s}:void 0,o=ee(this,Sg,"f");try{return yield dV.transact(n,i)}catch(a){throw ee(this,Sg,"f")!==o&&(yield new Promise(()=>{})),a instanceof Error&&a.name==="SolanaMobileWalletAdapterError"&&a.code==="ERROR_WALLET_NOT_FOUND"&&(yield ee(this,sS,"f").call(this,this)),a}})),Cb.set(this,()=>{if(!ee(this,ui,"f"))throw new Error("Wallet not connected");return{authToken:ee(this,ui,"f").auth_token,chain:ee(this,ui,"f").chain}}),lS.set(this,n=>n.map(r=>{var s,i;const o=bi(r.address);return{address:X1.default.encode(o),publicKey:o,label:r.label,icon:r.icon,chains:(s=r.chains)!==null&&s!==void 0?s:ee(this,Ef,"f"),features:(i=r.features)!==null&&i!==void 0?i:EV}})),bR.set(this,n=>pt(this,void 0,void 0,function*(){const{authToken:r,chain:s}=ee(this,Cb,"f").call(this);try{const i=n.map(o=>Eh(o));return yield ee(this,_g,"f").call(this,o=>pt(this,void 0,void 0,function*(){return yield ee(this,Sb,"f").call(this,o,r,s),(yield o.signTransactions({payloads:i})).signed_payloads.map(bi)}))}catch(i){throw new Error(i instanceof Error&&i.message||"Unknown error")}})),vR.set(this,(n,r)=>pt(this,void 0,void 0,function*(){const{authToken:s,chain:i}=ee(this,Cb,"f").call(this);try{return yield ee(this,_g,"f").call(this,o=>pt(this,void 0,void 0,function*(){const[a,c]=yield Promise.all([o.getCapabilities(),ee(this,Sb,"f").call(this,o,s,i)]);if(a.supports_sign_and_send_transactions){const l=Eh(n);return(yield o.signAndSendTransactions(Object.assign(Object.assign({},r),{payloads:[l]}))).signatures.map(bi)[0]}else throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}})),uS.set(this,(...n)=>pt(this,void 0,void 0,function*(){const r=[];for(const s of n){const i=yield ee(this,vR,"f").call(this,s.transaction,s.options);r.push({signature:i})}return r})),dS.set(this,(...n)=>pt(this,void 0,void 0,function*(){return(yield ee(this,bR,"f").call(this,n.map(({transaction:r})=>r))).map(r=>({signedTransaction:r}))})),ER.set(this,(...n)=>pt(this,void 0,void 0,function*(){const{authToken:r,chain:s}=ee(this,Cb,"f").call(this),i=n.map(({account:a})=>Eh(a.publicKey)),o=n.map(({message:a})=>Eh(a));try{return yield ee(this,_g,"f").call(this,a=>pt(this,void 0,void 0,function*(){return yield ee(this,Sb,"f").call(this,a,r,s),(yield a.signMessages({addresses:i,payloads:o})).signed_payloads.map(bi).map(l=>({signedMessage:l,signature:l.slice(-vV)}))}))}catch(a){throw new Error(a instanceof Error&&a.message||"Unknown error")}})),AR.set(this,(...n)=>pt(this,void 0,void 0,function*(){const r=[];if(n.length>1)for(const s of n)r.push(yield ee(this,hS,"f").call(this,s));else return[yield ee(this,hS,"f").call(this,n[0])];return r})),hS.set(this,n=>pt(this,void 0,void 0,function*(){var r,s,i;Nt(this,Td,!0,"f");try{const o=yield ee(this,oS,"f").call(this,Object.assign(Object.assign({},n),{domain:(r=n==null?void 0:n.domain)!==null&&r!==void 0?r:window.location.host}));if(!o.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const a=o.sign_in_result.address,c=o.accounts.find(l=>l.address==a);return{account:Object.assign(Object.assign({},c??{address:X1.default.encode(bi(a))}),{publicKey:bi(a),chains:(s=c==null?void 0:c.chains)!==null&&s!==void 0?s:ee(this,Ef,"f"),features:(i=c==null?void 0:c.features)!==null&&i!==void 0?i:o.capabilities.features}),signedMessage:bi(o.sign_in_result.signed_message),signature:bi(o.sign_in_result.signature)}}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}finally{Nt(this,Td,!1,"f")}})),Nt(this,Zl,e.authorizationCache,"f"),Nt(this,Ab,e.appIdentity,"f"),Nt(this,Ef,e.chains,"f"),Nt(this,rS,e.chainSelector,"f"),Nt(this,sS,e.onWalletNotFound,"f"),Nt(this,xb,{[Kr.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:ee(this,uS,"f")},[Kr.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:ee(this,dS,"f")}},"f")}get version(){return ee(this,fR,"f")}get name(){return ee(this,pR,"f")}get url(){return ee(this,mR,"f")}get icon(){return ee(this,gR,"f")}get chains(){return ee(this,Ef,"f")}get features(){return Object.assign({[C0.StandardConnect]:{version:"1.0.0",connect:ee(this,wR,"f")},[C0.StandardDisconnect]:{version:"1.0.0",disconnect:ee(this,cS,"f")},[C0.StandardEvents]:{version:"1.0.0",on:ee(this,yR,"f")},[Kr.SolanaSignMessage]:{version:"1.0.0",signMessage:ee(this,ER,"f")},[Kr.SolanaSignIn]:{version:"1.0.0",signIn:ee(this,AR,"f")}},ee(this,xb,"f"))}get accounts(){var e,n;return(n=(e=ee(this,ui,"f"))===null||e===void 0?void 0:e.accounts)!==null&&n!==void 0?n:[]}get connected(){return!!ee(this,ui,"f")}get isAuthorized(){return!!ee(this,ui,"f")}get currentAuthorization(){return ee(this,ui,"f")}get cachedAuthorizationResult(){return ee(this,Zl,"f").get()}}np=new WeakMap,fR=new WeakMap,pR=new WeakMap,mR=new WeakMap,gR=new WeakMap,Ab=new WeakMap,ui=new WeakMap,Zl=new WeakMap,Td=new WeakMap,Sg=new WeakMap,Ef=new WeakMap,rS=new WeakMap,xb=new WeakMap,sS=new WeakMap,yR=new WeakMap,wR=new WeakMap,oS=new WeakMap,Cg=new WeakMap,aS=new WeakMap,Sb=new WeakMap,cS=new WeakMap,_g=new WeakMap,Cb=new WeakMap,lS=new WeakMap,bR=new WeakMap,vR=new WeakMap,uS=new WeakMap,dS=new WeakMap,ER=new WeakMap,AR=new WeakMap,hS=new WeakMap,xg=new WeakSet,iS=function(e,...n){var r;(r=ee(this,np,"f")[e])===null||r===void 0||r.forEach(s=>s.apply(null,n))},wV=function(e,n){var r;ee(this,np,"f")[e]=(r=ee(this,np,"f")[e])===null||r===void 0?void 0:r.filter(s=>n!==s)};class xV{constructor(e){Ig.add(this),rp.set(this,{}),xR.set(this,"1.0.0"),SR.set(this,QM),CR.set(this,"https://solanamobile.com/wallets"),_R.set(this,yV),_b.set(this,void 0),di.set(this,void 0),kd.set(this,void 0),Pd.set(this,!1),Ng.set(this,0),Af.set(this,[]),fS.set(this,void 0),Ib.set(this,void 0),pS.set(this,void 0),mS.set(this,void 0),qa.set(this,void 0),IR.set(this,(n,r)=>{var s;return!((s=ee(this,rp,"f")[n])===null||s===void 0)&&s.push(r)||(ee(this,rp,"f")[n]=[r]),()=>ee(this,Ig,"m",bV).call(this,n,r)}),NR.set(this,({silent:n}={})=>pt(this,void 0,void 0,function*(){if(ee(this,Pd,"f")||this.connected)return{accounts:this.accounts};Nt(this,Pd,!0,"f");try{yield ee(this,yS,"f").call(this)}catch(r){throw new Error(r instanceof Error&&r.message||"Unknown error")}finally{Nt(this,Pd,!1,"f")}return{accounts:this.accounts}})),yS.set(this,n=>pt(this,void 0,void 0,function*(){try{const r=yield ee(this,kd,"f").get();if(r)return ee(this,Nb,"f").call(this,r),r;ee(this,qa,"f")&&Nt(this,qa,void 0,"f");const s=yield ee(this,fS,"f").select(ee(this,Af,"f"));return yield ee(this,Tg,"f").call(this,i=>pt(this,void 0,void 0,function*(){const[o,a]=yield Promise.all([i.getCapabilities(),i.authorize({chain:s,identity:ee(this,_b,"f"),sign_in_payload:n})]),c=ee(this,bS,"f").call(this,a.accounts),l=Object.assign(Object.assign({},a),{accounts:c,chain:s,capabilities:o});return Promise.all([ee(this,TR,"f").call(this,o),ee(this,kd,"f").set(l),ee(this,Nb,"f").call(this,l)]),l}))}catch(r){throw new Error(r instanceof Error&&r.message||"Unknown error")}})),Nb.set(this,n=>pt(this,void 0,void 0,function*(){var r;const s=ee(this,di,"f")==null||((r=ee(this,di,"f"))===null||r===void 0?void 0:r.accounts.length)!==n.accounts.length||ee(this,di,"f").accounts.some((i,o)=>i.address!==n.accounts[o].address);Nt(this,di,n,"f"),s&&ee(this,Ig,"m",gS).call(this,"change",{accounts:this.accounts})})),TR.set(this,n=>pt(this,void 0,void 0,function*(){const r=n.features.includes("solana:signTransactions"),s=n.supports_sign_and_send_transactions||n.features.includes("solana:signAndSendTransaction"),i=Kr.SolanaSignAndSendTransaction in this.features!==s||Kr.SolanaSignTransaction in this.features!==r;Nt(this,Ib,Object.assign(Object.assign({},s&&{[Kr.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:n.supported_transaction_versions,signAndSendTransaction:ee(this,vS,"f")}}),r&&{[Kr.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:n.supported_transaction_versions,signTransaction:ee(this,ES,"f")}}),"f"),i&&ee(this,Ig,"m",gS).call(this,"change",{features:this.features})})),Tb.set(this,(n,r,s)=>pt(this,void 0,void 0,function*(){var i,o;try{const[a,c]=yield Promise.all([(o=(i=ee(this,di,"f"))===null||i===void 0?void 0:i.capabilities)!==null&&o!==void 0?o:yield n.getCapabilities(),n.authorize({auth_token:r,identity:ee(this,_b,"f"),chain:s})]),l=ee(this,bS,"f").call(this,c.accounts),u=Object.assign(Object.assign({},c),{accounts:l,chain:s,capabilities:a});Promise.all([ee(this,kd,"f").set(u),ee(this,Nb,"f").call(this,u)])}catch(a){throw ee(this,wS,"f").call(this),new Error(a instanceof Error&&a.message||"Unknown error")}})),wS.set(this,()=>pt(this,void 0,void 0,function*(){var n,r;(n=ee(this,qa,"f"))===null||n===void 0||n.close(),ee(this,kd,"f").clear(),Nt(this,Pd,!1,"f"),Nt(this,Ng,(r=ee(this,Ng,"f"),r++,r),"f"),Nt(this,di,void 0,"f"),Nt(this,qa,void 0,"f"),ee(this,Ig,"m",gS).call(this,"change",{accounts:this.accounts})})),Tg.set(this,n=>pt(this,void 0,void 0,function*(){var r;const s=(r=ee(this,di,"f"))===null||r===void 0?void 0:r.wallet_uri_base,o=Object.assign(Object.assign({},s?{baseUri:s}:void 0),{remoteHostAuthority:ee(this,mS,"f")}),a=ee(this,Ng,"f"),c=new ple;if(ee(this,qa,"f"))return n(ee(this,qa,"f").wallet);try{const{associationUrl:l,close:u,wallet:d}=yield dV.startRemoteScenario(o),h=c.addEventListener("close",f=>{f&&u()});return c.initWithQR(l.toString()),c.open(),Nt(this,qa,{close:u,wallet:yield d},"f"),h(),c.close(),yield n(ee(this,qa,"f").wallet)}catch(l){throw c.close(),ee(this,Ng,"f")!==a&&(yield new Promise(()=>{})),l instanceof Error&&l.name==="SolanaMobileWalletAdapterError"&&l.code==="ERROR_WALLET_NOT_FOUND"&&(yield ee(this,pS,"f").call(this,this)),l}})),kb.set(this,()=>{if(!ee(this,di,"f"))throw new Error("Wallet not connected");return{authToken:ee(this,di,"f").auth_token,chain:ee(this,di,"f").chain}}),bS.set(this,n=>n.map(r=>{var s,i;const o=bi(r.address);return{address:X1.default.encode(o),publicKey:o,label:r.label,icon:r.icon,chains:(s=r.chains)!==null&&s!==void 0?s:ee(this,Af,"f"),features:(i=r.features)!==null&&i!==void 0?i:EV}})),kR.set(this,n=>pt(this,void 0,void 0,function*(){const{authToken:r,chain:s}=ee(this,kb,"f").call(this);try{return yield ee(this,Tg,"f").call(this,i=>pt(this,void 0,void 0,function*(){return yield ee(this,Tb,"f").call(this,i,r,s),(yield i.signTransactions({payloads:n.map(Eh)})).signed_payloads.map(bi)}))}catch(i){throw new Error(i instanceof Error&&i.message||"Unknown error")}})),PR.set(this,(n,r)=>pt(this,void 0,void 0,function*(){const{authToken:s,chain:i}=ee(this,kb,"f").call(this);try{return yield ee(this,Tg,"f").call(this,o=>pt(this,void 0,void 0,function*(){const[a,c]=yield Promise.all([o.getCapabilities(),ee(this,Tb,"f").call(this,o,s,i)]);if(a.supports_sign_and_send_transactions)return(yield o.signAndSendTransactions(Object.assign(Object.assign({},r),{payloads:[Eh(n)]}))).signatures.map(bi)[0];throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}})),vS.set(this,(...n)=>pt(this,void 0,void 0,function*(){const r=[];for(const s of n){const i=yield ee(this,PR,"f").call(this,s.transaction,s.options);r.push({signature:i})}return r})),ES.set(this,(...n)=>pt(this,void 0,void 0,function*(){return(yield ee(this,kR,"f").call(this,n.map(({transaction:r})=>r))).map(r=>({signedTransaction:r}))})),RR.set(this,(...n)=>pt(this,void 0,void 0,function*(){const{authToken:r,chain:s}=ee(this,kb,"f").call(this),i=n.map(({account:a})=>Eh(a.publicKey)),o=n.map(({message:a})=>Eh(a));try{return yield ee(this,Tg,"f").call(this,a=>pt(this,void 0,void 0,function*(){return yield ee(this,Tb,"f").call(this,a,r,s),(yield a.signMessages({addresses:i,payloads:o})).signed_payloads.map(bi).map(l=>({signedMessage:l,signature:l.slice(-vV)}))}))}catch(a){throw new Error(a instanceof Error&&a.message||"Unknown error")}})),OR.set(this,(...n)=>pt(this,void 0,void 0,function*(){const r=[];if(n.length>1)for(const s of n)r.push(yield ee(this,AS,"f").call(this,s));else return[yield ee(this,AS,"f").call(this,n[0])];return r})),AS.set(this,n=>pt(this,void 0,void 0,function*(){var r,s,i;Nt(this,Pd,!0,"f");try{const o=yield ee(this,yS,"f").call(this,Object.assign(Object.assign({},n),{domain:(r=n==null?void 0:n.domain)!==null&&r!==void 0?r:window.location.host}));if(!o.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const a=o.sign_in_result.address,c=o.accounts.find(l=>l.address==a);return{account:Object.assign(Object.assign({},c??{address:X1.default.encode(bi(a))}),{publicKey:bi(a),chains:(s=c==null?void 0:c.chains)!==null&&s!==void 0?s:ee(this,Af,"f"),features:(i=c==null?void 0:c.features)!==null&&i!==void 0?i:o.capabilities.features}),signedMessage:bi(o.sign_in_result.signed_message),signature:bi(o.sign_in_result.signature)}}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}finally{Nt(this,Pd,!1,"f")}})),Nt(this,kd,e.authorizationCache,"f"),Nt(this,_b,e.appIdentity,"f"),Nt(this,Af,e.chains,"f"),Nt(this,fS,e.chainSelector,"f"),Nt(this,mS,e.remoteHostAuthority,"f"),Nt(this,pS,e.onWalletNotFound,"f"),Nt(this,Ib,{[Kr.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:ee(this,vS,"f")},[Kr.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:ee(this,ES,"f")}},"f")}get version(){return ee(this,xR,"f")}get name(){return ee(this,SR,"f")}get url(){return ee(this,CR,"f")}get icon(){return ee(this,_R,"f")}get chains(){return ee(this,Af,"f")}get features(){return Object.assign({[C0.StandardConnect]:{version:"1.0.0",connect:ee(this,NR,"f")},[C0.StandardDisconnect]:{version:"1.0.0",disconnect:ee(this,wS,"f")},[C0.StandardEvents]:{version:"1.0.0",on:ee(this,IR,"f")},[Kr.SolanaSignMessage]:{version:"1.0.0",signMessage:ee(this,RR,"f")},[Kr.SolanaSignIn]:{version:"1.0.0",signIn:ee(this,OR,"f")}},ee(this,Ib,"f"))}get accounts(){var e,n;return(n=(e=ee(this,di,"f"))===null||e===void 0?void 0:e.accounts)!==null&&n!==void 0?n:[]}get connected(){return!!ee(this,qa,"f")&&!!ee(this,di,"f")}get isAuthorized(){return!!ee(this,di,"f")}get currentAuthorization(){return ee(this,di,"f")}get cachedAuthorizationResult(){return ee(this,kd,"f").get()}}rp=new WeakMap,xR=new WeakMap,SR=new WeakMap,CR=new WeakMap,_R=new WeakMap,_b=new WeakMap,di=new WeakMap,kd=new WeakMap,Pd=new WeakMap,Ng=new WeakMap,Af=new WeakMap,fS=new WeakMap,Ib=new WeakMap,pS=new WeakMap,mS=new WeakMap,qa=new WeakMap,IR=new WeakMap,NR=new WeakMap,yS=new WeakMap,Nb=new WeakMap,TR=new WeakMap,Tb=new WeakMap,wS=new WeakMap,Tg=new WeakMap,kb=new WeakMap,bS=new WeakMap,kR=new WeakMap,PR=new WeakMap,vS=new WeakMap,ES=new WeakMap,RR=new WeakMap,OR=new WeakMap,AS=new WeakMap,Ig=new WeakSet,gS=function(e,...n){var r;(r=ee(this,rp,"f")[e])===null||r===void 0||r.forEach(s=>s.apply(null,n))},bV=function(e,n){var r;ee(this,rp,"f")[e]=(r=ee(this,rp,"f")[e])===null||r===void 0?void 0:r.filter(s=>n!==s)};var yle=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},wle=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},xS;function Q8(t){const e=({register:n})=>n(t);try{window.dispatchEvent(new ble(e))}catch(n){console.error(`wallet-standard:register-wallet event could not be dispatched
`,n)}try{window.addEventListener("wallet-standard:app-ready",({detail:n})=>e(n))}catch(n){console.error(`wallet-standard:app-ready event listener could not be added
`,n)}}let ble=class extends Event{constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),xS.set(this,void 0),yle(this,xS,e,"f")}get detail(){return wle(this,xS,"f")}get type(){return"wallet-standard:register-wallet"}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}};xS=new WeakMap;function vle(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}function Ele(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function Ale(t){vle()?Q8(new AV(t)):Ele()&&t.remoteHostAuthority!==void 0&&Q8(new xV(Object.assign(Object.assign({},t),{remoteHostAuthority:t.remoteHostAuthority})))}const xle="To use mobile wallet adapter, you must have a compatible mobile wallet application installed on your device.",Sle="This browser appears to be incompatible with mobile wallet adapter. Open this page in a compatible mobile browser app and try again.";class Cle extends gV{constructor(){super(...arguments),this.contentStyles=Ile,this.contentHtml=_le}initWithError(e){super.init(),this.populateError(e)}populateError(e){var n,r;const s=(n=this.dom)===null||n===void 0?void 0:n.getElementById("mobile-wallet-adapter-error-message"),i=(r=this.dom)===null||r===void 0?void 0:r.getElementById("mobile-wallet-adapter-error-action");if(s){if(e.name==="SolanaMobileWalletAdapterError")switch(e.code){case"ERROR_WALLET_NOT_FOUND":s.innerHTML=xle,i&&i.addEventListener("click",()=>{window.location.href="https://solanamobile.com/wallets"});return;case"ERROR_BROWSER_NOT_SUPPORTED":s.innerHTML=Sle,i&&(i.style.display="none");return}s.innerHTML=`An unexpected error occurred: ${e.message}`}else console.log("Failed to locate error dialog element")}}const _le=`
<svg class="mobile-wallet-adapter-embedded-modal-error-icon" xmlns="http://www.w3.org/2000/svg" height="50px" viewBox="0 -960 960 960" width="50px" fill="#000000"><path d="M 280,-80 Q 197,-80 138.5,-138.5 80,-197 80,-280 80,-363 138.5,-421.5 197,-480 280,-480 q 83,0 141.5,58.5 58.5,58.5 58.5,141.5 0,83 -58.5,141.5 Q 363,-80 280,-80 Z M 824,-120 568,-376 Q 556,-389 542.5,-402.5 529,-416 516,-428 q 38,-24 61,-64 23,-40 23,-88 0,-75 -52.5,-127.5 Q 495,-760 420,-760 345,-760 292.5,-707.5 240,-655 240,-580 q 0,6 0.5,11.5 0.5,5.5 1.5,11.5 -18,2 -39.5,8 -21.5,6 -38.5,14 -2,-11 -3,-22 -1,-11 -1,-23 0,-109 75.5,-184.5 Q 311,-840 420,-840 q 109,0 184.5,75.5 75.5,75.5 75.5,184.5 0,43 -13.5,81.5 Q 653,-460 629,-428 l 251,252 z m -615,-61 71,-71 70,71 29,-28 -71,-71 71,-71 -28,-28 -71,71 -71,-71 -28,28 71,71 -71,71 z"/></svg>
<div class="mobile-wallet-adapter-embedded-modal-title">We can't find a wallet.</div>
<div id="mobile-wallet-adapter-error-message" class="mobile-wallet-adapter-embedded-modal-subtitle"></div>
<div>
    <button data-error-action id="mobile-wallet-adapter-error-action" class="mobile-wallet-adapter-embedded-modal-error-action">
        Find a wallet
    </button>
</div>
`,Ile=`
.mobile-wallet-adapter-embedded-modal-content {
    text-align: center;
}

.mobile-wallet-adapter-embedded-modal-error-icon {
    margin-top: 24px;
}

.mobile-wallet-adapter-embedded-modal-title {
    margin: 18px 100px auto 100px;
    color: #000000;
    font-size: 2.75em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: 30px 60px 40px 60px;
    color: #000000;
    font-size: 1.25em;
    font-weight: 400;
}

.mobile-wallet-adapter-embedded-modal-error-action {
    display: block;
    width: 100%;
    height: 56px;
    /*margin-top: 40px;*/
    font-size: 1.25em;
    /*line-height: 24px;*/
    /*letter-spacing: -1%;*/
    background: #000000;
    color: #FFFFFF;
    border-radius: 18px;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
        margin-right: 12px;
        margin-left: 12px;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: 12px;
        margin-left: 12px;
    }
}
`;function SV(){return pt(this,void 0,void 0,function*(){if(typeof window<"u"){const t=window.navigator.userAgent.toLowerCase(),e=new Cle;t.includes("wv")?e.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_BROWSER_NOT_SUPPORTED",message:""}):e.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_WALLET_NOT_FOUND",message:""}),e.open()}})}function Nle(){return()=>pt(this,void 0,void 0,function*(){SV()})}const gT="SolanaMobileWalletAdapterDefaultAuthorizationCache";function Tle(){let t;try{t=window.localStorage}catch{}return{clear(){return pt(this,void 0,void 0,function*(){if(t)try{t.removeItem(gT)}catch{}})},get(){return pt(this,void 0,void 0,function*(){if(t)try{const e=JSON.parse(t.getItem(gT));if(e&&e.accounts){const n=e.accounts.map(r=>Object.assign(Object.assign({},r),{publicKey:"publicKey"in r?new Uint8Array(Object.values(r.publicKey)):X1.default.decode(r.address)}));return Object.assign(Object.assign({},e),{accounts:n})}else return e||void 0}catch{}})},set(e){return pt(this,void 0,void 0,function*(){if(t)try{t.setItem(gT,JSON.stringify(e))}catch{}})}}}function kle(){return{select(t){return pt(this,void 0,void 0,function*(){return t.length===1?t[0]:t.includes(Z8.SOLANA_MAINNET_CHAIN)?Z8.SOLANA_MAINNET_CHAIN:t[0]})}}}Ll.LocalSolanaMobileWalletAdapterWallet=AV;Ll.RemoteSolanaMobileWalletAdapterWallet=xV;Ll.SolanaMobileWalletAdapterWalletName=QM;Ll.createDefaultAuthorizationCache=Tle;Ll.createDefaultChainSelector=kle;Ll.createDefaultWalletNotFoundHandler=Nle;Ll.defaultErrorModalWalletNotFoundHandler=SV;Ll.registerMwa=Ale;Object.defineProperty(nf,"__esModule",{value:!0});var ns=Lae,SS=Uae,Uf=RH,Ky=Ll;function Nn(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function st(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function Oo(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n}const MR="standard:connect",Ple="standard:disconnect",Rle="standard:events";function yT(t){return window.btoa(String.fromCharCode.call(null,...t))}function Ole(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}var hs,Xn,qd,Su,CS,au,xf,DR,BR,CV,QC,_S,Bd;const Mle="Mobile Wallet Adapter",Dle=64;function Ble(t){return"version"in t}function JM(t){switch(t){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet";default:return t}}class _V extends ns.BaseSignInMessageSignerWalletAdapter{constructor(e,n){super(),hs.add(this),this.supportedTransactionVersions=new Set(["legacy",0]),Xn.set(this,void 0),qd.set(this,!1),Su.set(this,Ole()?ns.WalletReadyState.Loadable:ns.WalletReadyState.Unsupported),CS.set(this,void 0),au.set(this,void 0),xf.set(this,void 0),DR.set(this,r=>Nn(this,void 0,void 0,function*(){if(r.accounts&&r.accounts.length>0){st(this,hs,"m",CV).call(this);const s=yield st(this,CS,"f").call(this,r.accounts);s!==st(this,au,"f")&&(Oo(this,au,s,"f"),Oo(this,xf,void 0,"f"),this.emit("connect",this.publicKey))}})),Oo(this,CS,r=>Nn(this,void 0,void 0,function*(){var s;const i=yield n.addressSelector.select(r.map(({publicKey:o})=>yT(o)));return(s=r.find(({publicKey:o})=>yT(o)===i))!==null&&s!==void 0?s:r[0]}),"f"),Oo(this,Xn,e,"f"),st(this,Xn,"f").features[Rle].on("change",st(this,DR,"f")),this.name=st(this,Xn,"f").name,this.icon=st(this,Xn,"f").icon,this.url=st(this,Xn,"f").url}get publicKey(){var e;if(!st(this,xf,"f")&&st(this,au,"f"))try{Oo(this,xf,new SS.PublicKey(st(this,au,"f").publicKey),"f")}catch(n){throw new ns.WalletPublicKeyError(n instanceof Error&&(n==null?void 0:n.message)||"Unknown error",n)}return(e=st(this,xf,"f"))!==null&&e!==void 0?e:null}get connected(){return st(this,Xn,"f").connected}get connecting(){return st(this,qd,"f")}get readyState(){return st(this,Su,"f")}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return Nn(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return Nn(this,void 0,void 0,function*(){st(this,hs,"m",BR).call(this,!0)})}connect(){return Nn(this,void 0,void 0,function*(){st(this,hs,"m",BR).call(this)})}performAuthorization(e){return Nn(this,void 0,void 0,function*(){try{const n=yield st(this,Xn,"f").cachedAuthorizationResult;return n?(yield st(this,Xn,"f").features[MR].connect({silent:!0}),n):(e?yield st(this,Xn,"f").features[Uf.SolanaSignIn].signIn(e):yield st(this,Xn,"f").features[MR].connect(),yield yield st(this,Xn,"f").cachedAuthorizationResult)}catch(n){throw new ns.WalletConnectionError(n instanceof Error&&n.message||"Unknown error",n)}})}disconnect(){return Nn(this,void 0,void 0,function*(){return yield st(this,hs,"m",Bd).call(this,()=>Nn(this,void 0,void 0,function*(){Oo(this,qd,!1,"f"),Oo(this,xf,void 0,"f"),Oo(this,au,void 0,"f"),yield st(this,Xn,"f").features[Ple].disconnect(),this.emit("disconnect")}))})}signIn(e){return Nn(this,void 0,void 0,function*(){return st(this,hs,"m",Bd).call(this,()=>Nn(this,void 0,void 0,function*(){var n;if(st(this,Su,"f")!==ns.WalletReadyState.Installed&&st(this,Su,"f")!==ns.WalletReadyState.Loadable)throw new ns.WalletNotReadyError;Oo(this,qd,!0,"f");try{const r=yield st(this,Xn,"f").features[Uf.SolanaSignIn].signIn(Object.assign(Object.assign({},e),{domain:(n=e==null?void 0:e.domain)!==null&&n!==void 0?n:window.location.host}));if(r.length>0)return r[0];throw new Error("Sign in failed, no sign in result returned by wallet")}catch(r){throw new ns.WalletConnectionError(r instanceof Error&&r.message||"Unknown error",r)}finally{Oo(this,qd,!1,"f")}}))})}signMessage(e){return Nn(this,void 0,void 0,function*(){return yield st(this,hs,"m",Bd).call(this,()=>Nn(this,void 0,void 0,function*(){const n=st(this,hs,"m",QC).call(this);try{return(yield st(this,Xn,"f").features[Uf.SolanaSignMessage].signMessage({account:n,message:e}))[0].signature}catch(r){throw new ns.WalletSignMessageError(r==null?void 0:r.message,r)}}))})}sendTransaction(e,n,r){return Nn(this,void 0,void 0,function*(){return yield st(this,hs,"m",Bd).call(this,()=>Nn(this,void 0,void 0,function*(){const s=st(this,hs,"m",QC).call(this);try{let i=function(){let o;switch(n.commitment){case"confirmed":case"finalized":case"processed":o=n.commitment;break;default:o="finalized"}let a;switch(r==null?void 0:r.preflightCommitment){case"confirmed":case"finalized":case"processed":a=r.preflightCommitment;break;case void 0:a=o;break;default:a="finalized"}return(a==="finalized"?2:a==="confirmed"?1:0)<(o==="finalized"?2:o==="confirmed"?1:0)?a:o};if(Uf.SolanaSignAndSendTransaction in st(this,Xn,"f").features){const o=JM(st(this,Xn,"f").currentAuthorization.chain),[a]=(yield st(this,Xn,"f").features[Uf.SolanaSignAndSendTransaction].signAndSendTransaction({account:s,transaction:e.serialize(),chain:o,options:r?{skipPreflight:r.skipPreflight,maxRetries:r.maxRetries}:void 0})).map(c=>yT(c.signature));return a}else{const[o]=yield st(this,hs,"m",_S).call(this,[e]);if(Ble(o))return yield n.sendTransaction(o);{const a=o.serialize();return yield n.sendRawTransaction(a,Object.assign(Object.assign({},r),{preflightCommitment:i()}))}}}catch(i){throw new ns.WalletSendTransactionError(i==null?void 0:i.message,i)}}))})}signTransaction(e){return Nn(this,void 0,void 0,function*(){return yield st(this,hs,"m",Bd).call(this,()=>Nn(this,void 0,void 0,function*(){const[n]=yield st(this,hs,"m",_S).call(this,[e]);return n}))})}signAllTransactions(e){return Nn(this,void 0,void 0,function*(){return yield st(this,hs,"m",Bd).call(this,()=>Nn(this,void 0,void 0,function*(){return yield st(this,hs,"m",_S).call(this,e)}))})}}Xn=new WeakMap,qd=new WeakMap,Su=new WeakMap,CS=new WeakMap,au=new WeakMap,xf=new WeakMap,DR=new WeakMap,hs=new WeakSet,BR=function(e=!1){return Nn(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield st(this,hs,"m",Bd).call(this,()=>Nn(this,void 0,void 0,function*(){if(st(this,Su,"f")!==ns.WalletReadyState.Installed&&st(this,Su,"f")!==ns.WalletReadyState.Loadable)throw new ns.WalletNotReadyError;Oo(this,qd,!0,"f");try{yield st(this,Xn,"f").features[MR].connect({silent:e})}catch(n){throw new ns.WalletConnectionError(n instanceof Error&&n.message||"Unknown error",n)}finally{Oo(this,qd,!1,"f")}}))})},CV=function(){st(this,Su,"f")!==ns.WalletReadyState.Installed&&this.emit("readyStateChange",Oo(this,Su,ns.WalletReadyState.Installed,"f"))},QC=function(){if(!st(this,Xn,"f").isAuthorized||!st(this,au,"f"))throw new ns.WalletNotConnectedError;return st(this,au,"f")},_S=function(e){return Nn(this,void 0,void 0,function*(){const n=st(this,hs,"m",QC).call(this);try{if(Uf.SolanaSignTransaction in st(this,Xn,"f").features)return st(this,Xn,"f").features[Uf.SolanaSignTransaction].signTransaction(...e.map(r=>({account:n,transaction:r.serialize()}))).then(r=>r.map(s=>{const i=s.signedTransaction,a=i[0]*Dle+1;return SS.VersionedMessage.deserializeMessageVersion(i.slice(a,i.length))==="legacy"?SS.Transaction.from(i):SS.VersionedTransaction.deserialize(i)}));throw new Error("Connected wallet does not support signing transactions")}catch(r){throw new ns.WalletSignTransactionError(r==null?void 0:r.message,r)}})},Bd=function(e){return Nn(this,void 0,void 0,function*(){try{return yield e()}catch(n){throw this.emit("error",n),n}})};class IV extends _V{constructor(e){var n;const r=JM((n=e.chain)!==null&&n!==void 0?n:e.cluster);super(new Ky.LocalSolanaMobileWalletAdapterWallet({appIdentity:e.appIdentity,authorizationCache:{set:e.authorizationResultCache.set,get:()=>Nn(this,void 0,void 0,function*(){return yield e.authorizationResultCache.get()}),clear:e.authorizationResultCache.clear},chains:[r],chainSelector:Ky.createDefaultChainSelector(),onWalletNotFound:()=>Nn(this,void 0,void 0,function*(){e.onWalletNotFound(this)})}),{addressSelector:e.addressSelector,chain:r})}}class Lle extends _V{constructor(e){const n=JM(e.chain);super(new Ky.RemoteSolanaMobileWalletAdapterWallet({appIdentity:e.appIdentity,authorizationCache:{set:e.authorizationResultCache.set,get:()=>Nn(this,void 0,void 0,function*(){return yield e.authorizationResultCache.get()}),clear:e.authorizationResultCache.clear},chains:[n],chainSelector:Ky.createDefaultChainSelector(),remoteHostAuthority:e.remoteHostAuthority,onWalletNotFound:()=>Nn(this,void 0,void 0,function*(){e.onWalletNotFound(this)})}),{addressSelector:e.addressSelector,chain:n})}}class Ule extends IV{}function Fle(){return{select(t){return Nn(this,void 0,void 0,function*(){return t[0]})}}}function jle(){return Ky.createDefaultAuthorizationCache()}function $le(t){return Nn(this,void 0,void 0,function*(){return Ky.defaultErrorModalWalletNotFoundHandler()})}function zle(){return $le}nf.LocalSolanaMobileWalletAdapter=IV;nf.RemoteSolanaMobileWalletAdapter=Lle;var Wle=nf.SolanaMobileWalletAdapter=Ule,IS=nf.SolanaMobileWalletAdapterWalletName=Mle,Hle=nf.createDefaultAddressSelector=Fle,Vle=nf.createDefaultAuthorizationResultCache=jle,Kle=nf.createDefaultWalletNotFoundHandler=zle,qle=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Gle=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},NS;function Yle(t){const e=({register:n})=>n(t);try{window.dispatchEvent(new Zle(e))}catch(n){console.error(`wallet-standard:register-wallet event could not be dispatched
`,n)}try{window.addEventListener("wallet-standard:app-ready",({detail:n})=>e(n))}catch(n){console.error(`wallet-standard:app-ready event listener could not be added
`,n)}}class Zle extends Event{get detail(){return qle(this,NS,"f")}get type(){return"wallet-standard:register-wallet"}constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),NS.set(this,void 0),Gle(this,NS,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}NS=new WeakMap;globalThis&&globalThis.__classPrivateFieldGet;globalThis&&globalThis.__classPrivateFieldSet;function Qle(t,e){if(t===e)return!0;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Jle(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,m=new Uint8Array(p);for(;h!==f;){let x=l[h],w=0;for(let N=p-1;(x!==0||w<d)&&N!==-1;N--,w++)x+=256*m[N]>>>0,m[N]=x%n>>>0,x=x/n>>>0;if(x!==0)throw new Error("Non-zero carry");d=w,h++}let E=p-d;for(;E!==p&&m[E]===0;)E++;let b=r.repeat(u);for(;E<p;++E)b+=t.charAt(m[E]);return b}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const x=l.charCodeAt(u);if(x>255)return;let w=e[x];if(w===255)return;let N=0;for(let _=f-1;(w!==0||N<h)&&_!==-1;_--,N++)w+=n*p[_]>>>0,p[_]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");h=N,u++}let m=f-h;for(;m!==f&&p[m]===0;)m++;const E=new Uint8Array(d+(f-m));let b=d;for(;m!==f;)E[b++]=p[m++];return E}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var Xle="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Im=Jle(Xle);var Ye=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Hr=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},Ds,io,sp,ip,Sf,Pb,JC,en,XC,LR,TS,UR,t1,FR,J8,X8,eB,tB;class eue extends zM{get name(){return Ye(this,en,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return Ye(this,en,"f").icon}get readyState(){return Ye(this,XC,"f")}get publicKey(){return Ye(this,sp,"f")}get connecting(){return Ye(this,ip,"f")}get supportedTransactionVersions(){return Ye(this,JC,"f")}get wallet(){return Ye(this,en,"f")}get standard(){return!0}constructor({wallet:e}){super(),Ds.add(this),io.set(this,void 0),sp.set(this,void 0),ip.set(this,void 0),Sf.set(this,void 0),Pb.set(this,void 0),JC.set(this,void 0),en.set(this,void 0),XC.set(this,typeof window>"u"||typeof document>"u"?nn.Unsupported:nn.Installed),FR.set(this,n=>{if("accounts"in n){const r=Ye(this,en,"f").accounts[0];Ye(this,io,"f")&&!Ye(this,Sf,"f")&&r!==Ye(this,io,"f")&&(r?Ye(this,Ds,"m",TS).call(this,r):(this.emit("error",new z2),Ye(this,Ds,"m",UR).call(this)))}"features"in n&&Ye(this,Ds,"m",t1).call(this)}),Hr(this,en,e,"f"),Hr(this,io,null,"f"),Hr(this,sp,null,"f"),Hr(this,ip,!1,"f"),Hr(this,Sf,!1,"f"),Hr(this,Pb,Ye(this,en,"f").features[VE].on("change",Ye(this,FR,"f")),"f"),Ye(this,Ds,"m",t1).call(this)}destroy(){Hr(this,io,null,"f"),Hr(this,sp,null,"f"),Hr(this,ip,!1,"f"),Hr(this,Sf,!1,"f");const e=Ye(this,Pb,"f");e&&(Hr(this,Pb,null,"f"),e())}async autoConnect(){return Ye(this,Ds,"m",LR).call(this,{silent:!0})}async connect(){return Ye(this,Ds,"m",LR).call(this)}async disconnect(){if(Q1 in Ye(this,en,"f").features)try{Hr(this,Sf,!0,"f"),await Ye(this,en,"f").features[Q1].disconnect()}catch(e){this.emit("error",new W2(e==null?void 0:e.message,e))}finally{Hr(this,Sf,!1,"f")}Ye(this,Ds,"m",UR).call(this)}async sendTransaction(e,n,r={}){try{const s=Ye(this,io,"f");if(!s)throw new Sr;let i;if(ul in Ye(this,en,"f").features)if(s.features.includes(ul))i=ul;else if(rs in Ye(this,en,"f").features&&s.features.includes(rs))i=rs;else throw new bh;else if(rs in Ye(this,en,"f").features){if(!s.features.includes(rs))throw new bh;i=rs}else throw new tp;const o=Ice(n.rpcEndpoint);if(!s.chains.includes(o))throw new Tu;try{const{signers:a,...c}=r;let l;if(ml(e)?(a!=null&&a.length&&e.sign(a),l=e.serialize()):(e=await this.prepareTransaction(e,n,c),a!=null&&a.length&&e.partialSign(...a),l=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),i===ul){const[u]=await Ye(this,en,"f").features[ul].signAndSendTransaction({account:s,chain:o,transaction:l,options:{preflightCommitment:pT(c.preflightCommitment||n.commitment),skipPreflight:c.skipPreflight,maxRetries:c.maxRetries,minContextSlot:c.minContextSlot}});return Im.encode(u.signature)}else{const[u]=await Ye(this,en,"f").features[rs].signTransaction({account:s,chain:o,transaction:l,options:{preflightCommitment:pT(c.preflightCommitment||n.commitment),minContextSlot:c.minContextSlot}});return await n.sendRawTransaction(u.signedTransaction,{...c,preflightCommitment:pT(c.preflightCommitment||n.commitment)})}}catch(a){throw a instanceof cr?a:new Tu(a==null?void 0:a.message,a)}}catch(s){throw this.emit("error",s),s}}}io=new WeakMap,sp=new WeakMap,ip=new WeakMap,Sf=new WeakMap,Pb=new WeakMap,JC=new WeakMap,en=new WeakMap,XC=new WeakMap,FR=new WeakMap,Ds=new WeakSet,LR=async function(e){try{if(this.connected||this.connecting)return;if(Ye(this,XC,"f")!==nn.Installed)throw new jy;if(Hr(this,ip,!0,"f"),!Ye(this,en,"f").accounts.length)try{await Ye(this,en,"f").features[HE].connect(e)}catch(r){throw new Z1(r==null?void 0:r.message,r)}const n=Ye(this,en,"f").accounts[0];if(!n)throw new bh;Ye(this,Ds,"m",TS).call(this,n)}catch(n){throw this.emit("error",n),n}finally{Hr(this,ip,!1,"f")}},TS=function(e){let n;try{n=new fe(e.address)}catch(r){throw new $y(r==null?void 0:r.message,r)}Hr(this,io,e,"f"),Hr(this,sp,n,"f"),Ye(this,Ds,"m",t1).call(this),this.emit("connect",n)},UR=function(){Hr(this,io,null,"f"),Hr(this,sp,null,"f"),Ye(this,Ds,"m",t1).call(this),this.emit("disconnect")},t1=function(){var n,r;const e=ul in Ye(this,en,"f").features?Ye(this,en,"f").features[ul].supportedTransactionVersions:Ye(this,en,"f").features[rs].supportedTransactionVersions;Hr(this,JC,Qle(e,["legacy"])?null:new Set(e),"f"),rs in Ye(this,en,"f").features&&((n=Ye(this,io,"f"))!=null&&n.features.includes(rs))?(this.signTransaction=Ye(this,Ds,"m",J8),this.signAllTransactions=Ye(this,Ds,"m",X8)):(delete this.signTransaction,delete this.signAllTransactions),Lf in Ye(this,en,"f").features&&((r=Ye(this,io,"f"))!=null&&r.features.includes(Lf))?this.signMessage=Ye(this,Ds,"m",eB):delete this.signMessage,Xx in Ye(this,en,"f").features?this.signIn=Ye(this,Ds,"m",tB):delete this.signIn},J8=async function(e){try{const n=Ye(this,io,"f");if(!n)throw new Sr;if(!(rs in Ye(this,en,"f").features))throw new tp;if(!n.features.includes(rs))throw new bh;try{const s=(await Ye(this,en,"f").features[rs].signTransaction({account:n,transaction:ml(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return ml(e)?q1.deserialize(s):ln.from(s)}catch(r){throw r instanceof cr?r:new gc(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}},X8=async function(e){try{const n=Ye(this,io,"f");if(!n)throw new Sr;if(!(rs in Ye(this,en,"f").features))throw new tp;if(!n.features.includes(rs))throw new bh;try{const r=await Ye(this,en,"f").features[rs].signTransaction(...e.map(s=>({account:n,transaction:ml(s)?s.serialize():new Uint8Array(s.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((s,i)=>{const o=r[i].signedTransaction;return ml(s)?q1.deserialize(o):ln.from(o)})}catch(r){throw new gc(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}},eB=async function(e){try{const n=Ye(this,io,"f");if(!n)throw new Sr;if(!(Lf in Ye(this,en,"f").features))throw new tp;if(!n.features.includes(Lf))throw new bh;try{return(await Ye(this,en,"f").features[Lf].signMessage({account:n,message:e}))[0].signature}catch(r){throw new H2(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}},tB=async function(e={}){try{if(!(Xx in Ye(this,en,"f").features))throw new tp;let n;try{[n]=await Ye(this,en,"f").features[Xx].signIn(e)}catch(r){throw new iR(r==null?void 0:r.message,r)}if(!n)throw new iR;return Ye(this,Ds,"m",TS).call(this,n.account),n}catch(n){throw this.emit("error",n),n}};const tue=kH;var nue=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},rue=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},kS;let jo;const J2=new Set;function sue(t){n1=void 0,J2.add(t)}function iue(t){n1=void 0,J2.delete(t)}const Xg={};function oue(){if(jo||(jo=Object.freeze({register:nB,get:aue,on:cue}),typeof window>"u"))return jo;const t=Object.freeze({register:nB});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new lue(t))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return jo}function nB(...t){var e;return t=t.filter(n=>!J2.has(n)),t.length?(t.forEach(n=>sue(n)),(e=Xg.register)==null||e.forEach(n=>jR(()=>n(...t))),function(){var r;t.forEach(s=>iue(s)),(r=Xg.unregister)==null||r.forEach(s=>jR(()=>s(...t)))}):()=>{}}let n1;function aue(){return n1||(n1=[...J2]),n1}function cue(t,e){var n;return(n=Xg[t])!=null&&n.push(e)||(Xg[t]=[e]),function(){var s;Xg[t]=(s=Xg[t])==null?void 0:s.filter(i=>e!==i)}}function jR(t){try{t()}catch(e){console.error(e)}}class lue extends Event{get detail(){return nue(this,kS,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),kS.set(this,void 0),rue(this,kS,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}kS=new WeakMap;function uue(){if(jo||(jo=oue(),typeof window>"u"))return jo;const t=window.navigator.wallets||[];if(!Array.isArray(t))return console.error("window.navigator.wallets is not an array"),jo;const{register:e}=jo,n=(...r)=>r.forEach(s=>jR(()=>s({register:e})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:n})})}catch{return console.error("window.navigator.wallets could not be set"),jo}return n(...t),jo}function due(t){const e=rB(()=>new Set),{get:n,on:r}=rB(()=>uue()),[s,i]=Z.useState(()=>sB(n()));Z.useEffect(()=>{const a=[r("register",(...c)=>i(l=>[...l,...sB(c)])),r("unregister",(...c)=>i(l=>l.filter(u=>c.some(d=>d===u.wallet))))];return()=>a.forEach(c=>c())},[r]);const o=hue(s);return Z.useEffect(()=>{if(!o)return;const a=new Set(s);new Set(o.filter(l=>!a.has(l))).forEach(l=>l.destroy())},[o,s]),Z.useEffect(()=>()=>s.forEach(a=>a.destroy()),[]),Z.useMemo(()=>[...s,...t.filter(({name:a})=>s.some(c=>c.name===a)?(e.has(a)||(e.add(a),console.warn(`${a} was registered as a Standard Wallet. The Wallet Adapter for ${a} can be removed from your app.`)),!1):!0)],[s,t,e])}function rB(t){const e=Z.useRef(void 0);return e.current===void 0&&(e.current={value:t()}),e.current.value}function hue(t){const e=Z.useRef(void 0);return Z.useEffect(()=>{e.current=t}),e.current}function sB(t){return t.filter(tue).map(e=>new eue({wallet:e}))}var _0;(function(t){t[t.DESKTOP_WEB=0]="DESKTOP_WEB",t[t.MOBILE_WEB=1]="MOBILE_WEB"})(_0||(_0={}));function fue(t){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(t)}function pue({adapters:t,userAgentString:e}){return t.some(n=>n.name!==IS&&n.readyState===nn.Installed)?_0.DESKTOP_WEB:e&&/android/i.test(e)&&!fue(e)?_0.MOBILE_WEB:_0.DESKTOP_WEB}function mue(t){return t?/devnet/i.test(t)?"devnet":/testnet/i.test(t)?"testnet":"mainnet-beta":"mainnet-beta"}function gue({children:t,wallets:e,adapter:n,isUnloadingRef:r,onAutoConnectRequest:s,onConnectError:i,onError:o,onSelectWallet:a}){const c=Z.useRef(!1),[l,u]=Z.useState(!1),d=Z.useRef(!1),[h,f]=Z.useState(!1),[p,m]=Z.useState(()=>(n==null?void 0:n.publicKey)??null),[E,b]=Z.useState(()=>(n==null?void 0:n.connected)??!1),x=Z.useRef(o);Z.useEffect(()=>(x.current=o,()=>{x.current=void 0}),[o]);const w=Z.useRef((g,A)=>(r.current||(x.current?x.current(g,A):(console.error(g,A),g instanceof jy&&typeof window<"u"&&A&&window.open(A.url,"_blank"))),g)),[N,_]=Z.useState(()=>e.map(g=>({adapter:g,readyState:g.readyState})).filter(({readyState:g})=>g!==nn.Unsupported));Z.useEffect(()=>{_(A=>e.map((I,T)=>{const R=A[T];return R&&R.adapter===I&&R.readyState===I.readyState?R:{adapter:I,readyState:I.readyState}}).filter(({readyState:I})=>I!==nn.Unsupported));function g(A){_(I=>{const T=I.findIndex(({adapter:B})=>B===this);if(T===-1)return I;const{adapter:R}=I[T];return[...I.slice(0,T),{adapter:R,readyState:A},...I.slice(T+1)].filter(({readyState:B})=>B!==nn.Unsupported)})}return e.forEach(A=>A.on("readyStateChange",g,A)),()=>{e.forEach(A=>A.off("readyStateChange",g,A))}},[n,e]);const L=Z.useMemo(()=>N.find(g=>g.adapter===n)??null,[n,N]);Z.useEffect(()=>{if(!n)return;const g=T=>{m(T),c.current=!1,u(!1),b(!0),d.current=!1,f(!1)},A=()=>{r.current||(m(null),c.current=!1,u(!1),b(!1),d.current=!1,f(!1))},I=T=>{w.current(T,n)};return n.on("connect",g),n.on("disconnect",A),n.on("error",I),()=>{n.off("connect",g),n.off("disconnect",A),n.off("error",I),A()}},[n,r]);const U=Z.useRef(!1);Z.useEffect(()=>()=>{U.current=!1},[n]),Z.useEffect(()=>{U.current||c.current||E||!s||!((L==null?void 0:L.readyState)===nn.Installed||(L==null?void 0:L.readyState)===nn.Loadable)||(c.current=!0,u(!0),U.current=!0,async function(){try{await s()}catch{i()}finally{u(!1),c.current=!1}}())},[E,s,i,L]);const F=Z.useCallback(async(g,A,I)=>{if(!n)throw w.current(new H8);if(!E)throw w.current(new Sr,n);return await n.sendTransaction(g,A,I)},[n,E]),M=Z.useMemo(()=>n&&"signTransaction"in n?async g=>{if(!E)throw w.current(new Sr,n);return await n.signTransaction(g)}:void 0,[n,E]),W=Z.useMemo(()=>n&&"signAllTransactions"in n?async g=>{if(!E)throw w.current(new Sr,n);return await n.signAllTransactions(g)}:void 0,[n,E]),H=Z.useMemo(()=>n&&"signMessage"in n?async g=>{if(!E)throw w.current(new Sr,n);return await n.signMessage(g)}:void 0,[n,E]),K=Z.useMemo(()=>n&&"signIn"in n?async g=>await n.signIn(g):void 0,[n]),P=Z.useCallback(async()=>{if(c.current||d.current||L!=null&&L.adapter.connected)return;if(!L)throw w.current(new H8);const{adapter:g,readyState:A}=L;if(!(A===nn.Installed||A===nn.Loadable))throw w.current(new jy,g);c.current=!0,u(!0);try{await g.connect()}catch(I){throw i(),I}finally{u(!1),c.current=!1}},[i,L]),y=Z.useCallback(async()=>{if(!d.current&&n){d.current=!0,f(!0);try{await n.disconnect()}finally{f(!1),d.current=!1}}},[n]);return we.createElement(PH.Provider,{value:{autoConnect:!!s,wallets:N,wallet:L,publicKey:p,connected:E,connecting:l,disconnecting:h,select:a,connect:P,disconnect:y,sendTransaction:F,signTransaction:M,signAllTransactions:W,signMessage:H,signIn:K}},t)}let wT;function yue(){var t;return wT===void 0&&(wT=((t=globalThis.navigator)==null?void 0:t.userAgent)??null),wT}function iB(t){const e=yue();return pue({adapters:t,userAgentString:e})===_0.MOBILE_WEB}function wue(){const t=globalThis.location;if(t)return`${t.protocol}//${t.host}`}function bue({children:t,wallets:e,autoConnect:n,localStorageKey:r="walletName",onError:s}){const{connection:i}=Eae(),o=due(e),a=Z.useMemo(()=>{if(!iB(o))return null;const x=o.find(w=>w.name===IS);return x||new Wle({addressSelector:Hle(),appIdentity:{uri:wue()},authorizationResultCache:Vle(),cluster:mue(i==null?void 0:i.rpcEndpoint),onWalletNotFound:Kle()})},[o,i==null?void 0:i.rpcEndpoint]),c=Z.useMemo(()=>a==null||o.indexOf(a)!==-1?o:[a,...o],[o,a]),[l,u]=Bae(r,null),d=Z.useMemo(()=>c.find(x=>x.name===l)??null,[c,l]),h=Z.useCallback(x=>{l!==x&&(d&&d.name!==IS&&d.disconnect(),u(x))},[d,u,l]);Z.useEffect(()=>{if(!d)return;function x(){m.current||u(null)}return d.on("disconnect",x),()=>{d.off("disconnect",x)}},[d,o,u,l]);const f=Z.useRef(!1),p=Z.useMemo(()=>{if(!(!n||!d))return async()=>{(n===!0||await n(d))&&(f.current?await d.connect():await d.autoConnect())}},[n,d]),m=Z.useRef(!1);Z.useEffect(()=>{if(l===IS&&iB(o)){m.current=!1;return}function x(){m.current=!0}return window.addEventListener("beforeunload",x),()=>{window.removeEventListener("beforeunload",x)}},[o,l]);const E=Z.useCallback(()=>{d&&h(null)},[d,h]),b=Z.useCallback(x=>{f.current=!0,h(x)},[h]);return we.createElement(gue,{wallets:c,adapter:d,isUnloadingRef:m,onAutoConnectRequest:p,onConnectError:E,onError:s,onSelectWallet:b},t)}const NV={setVisible(t){console.error(TV("call","setVisible"))},visible:!1};Object.defineProperty(NV,"visible",{get(){return console.error(TV("read","visible")),!1}});function TV(t,e){return`You have tried to  ${t} "${e}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}const kV=Z.createContext(NV);function PV(){return Z.useContext(kV)}function vue({onSelectWallet:t}){const{connect:e,connected:n,connecting:r,disconnect:s,disconnecting:i,publicKey:o,select:a,wallet:c,wallets:l}=HM();let u;r?u="connecting":n?u="connected":i?u="disconnecting":c?u="has-wallet":u="no-wallet";const d=Z.useCallback(()=>{e().catch(()=>{})},[e]),h=Z.useCallback(()=>{s().catch(()=>{})},[s]),f=Z.useCallback(()=>{t({onSelectWallet:a,wallets:l})},[t,a,l]);return{buttonState:u,onConnect:u==="has-wallet"?d:void 0,onDisconnect:u!=="disconnecting"&&u!=="no-wallet"?h:void 0,onSelectWallet:f,publicKey:o??void 0,walletIcon:c==null?void 0:c.adapter.icon,walletName:c==null?void 0:c.adapter.name}}const RV=t=>we.createElement("button",{className:`wallet-adapter-button ${t.className||""}`,disabled:t.disabled,style:t.style,onClick:t.onClick,tabIndex:t.tabIndex||0,type:"button"},t.startIcon&&we.createElement("i",{className:"wallet-adapter-button-start-icon"},t.startIcon),t.children,t.endIcon&&we.createElement("i",{className:"wallet-adapter-button-end-icon"},t.endIcon)),OV=({wallet:t,...e})=>t&&we.createElement("img",{src:t.adapter.icon,alt:`${t.adapter.name} icon`,...e});function Eue({walletIcon:t,walletName:e,...n}){return we.createElement(RV,{...n,className:"wallet-adapter-button-trigger",startIcon:t&&e?we.createElement(OV,{wallet:{adapter:{icon:t,name:e}}}):void 0})}function Aue({children:t,labels:e,...n}){const{setVisible:r}=PV(),{buttonState:s,onConnect:i,onDisconnect:o,publicKey:a,walletIcon:c,walletName:l}=vue({onSelectWallet(){r(!0)}}),[u,d]=Z.useState(!1),[h,f]=Z.useState(!1),p=Z.useRef(null);Z.useEffect(()=>{const E=b=>{const x=p.current;!x||x.contains(b.target)||f(!1)};return document.addEventListener("mousedown",E),document.addEventListener("touchstart",E),()=>{document.removeEventListener("mousedown",E),document.removeEventListener("touchstart",E)}},[]);const m=Z.useMemo(()=>{if(t)return t;if(a){const E=a.toBase58();return E.slice(0,4)+".."+E.slice(-4)}else return s==="connecting"||s==="has-wallet"?e[s]:e["no-wallet"]},[s,t,e,a]);return we.createElement("div",{className:"wallet-adapter-dropdown"},we.createElement(Eue,{...n,"aria-expanded":h,style:{pointerEvents:h?"none":"auto",...n.style},onClick:()=>{switch(s){case"no-wallet":r(!0);break;case"has-wallet":i&&i();break;case"connected":f(!0);break}},walletIcon:c,walletName:l},m),we.createElement("ul",{"aria-label":"dropdown-list",className:`wallet-adapter-dropdown-list ${h&&"wallet-adapter-dropdown-list-active"}`,ref:p,role:"menu"},a?we.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:async()=>{await navigator.clipboard.writeText(a.toBase58()),d(!0),setTimeout(()=>d(!1),400)},role:"menuitem"},u?e.copied:e["copy-address"]):null,we.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{r(!0),f(!1)},role:"menuitem"},e["change-wallet"]),o?we.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{o(),f(!1)},role:"menuitem"},e.disconnect):null))}const oB=({id:t,children:e,expanded:n=!1})=>{const r=Z.useRef(null),s=Z.useRef(!0),i="height 250ms ease-out",o=()=>{const c=r.current;c&&requestAnimationFrame(()=>{c.style.height=c.scrollHeight+"px"})},a=()=>{const c=r.current;c&&requestAnimationFrame(()=>{c.style.height=c.offsetHeight+"px",c.style.overflow="hidden",requestAnimationFrame(()=>{c.style.height="0"})})};return Z.useLayoutEffect(()=>{n?o():a()},[n]),Z.useLayoutEffect(()=>{const c=r.current;if(!c)return;function l(){c&&(c.style.overflow=n?"initial":"hidden",n&&(c.style.height="auto"))}function u(d){c&&d.target===c&&d.propertyName==="height"&&l()}return s.current&&(l(),s.current=!1),c.addEventListener("transitionend",u),()=>c.removeEventListener("transitionend",u)},[n]),we.createElement("div",{className:"wallet-adapter-collapse",id:t,ref:r,role:"region",style:{height:0,transition:s.current?void 0:i}},e)},bT=({handleClick:t,tabIndex:e,wallet:n})=>we.createElement("li",null,we.createElement(RV,{onClick:t,startIcon:we.createElement(OV,{wallet:n}),tabIndex:e},n.adapter.name,n.readyState===nn.Installed&&we.createElement("span",null,"Detected"))),xue=()=>we.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},we.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),we.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),we.createElement("g",{clipPath:"url(#clip0_880_5115)"},we.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),we.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),we.createElement("defs",null,we.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},we.createElement("stop",{stopColor:"#9945FF"}),we.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),we.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),we.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),we.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),we.createElement("stop",{offset:"1",stopColor:"#00D18C"})),we.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},we.createElement("stop",{stopColor:"#9945FF"}),we.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),we.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),we.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),we.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),we.createElement("stop",{offset:"1",stopColor:"#00D18C"})),we.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},we.createElement("stop",{stopColor:"#9945FF"}),we.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),we.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),we.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),we.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),we.createElement("stop",{offset:"1",stopColor:"#00D18C"})),we.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},we.createElement("stop",{stopColor:"#9945FF"}),we.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),we.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),we.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),we.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),we.createElement("stop",{offset:"1",stopColor:"#00D18C"})),we.createElement("clipPath",{id:"clip0_880_5115"},we.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),Sue=({className:t="",container:e="body"})=>{const n=Z.useRef(null),{wallets:r,select:s}=HM(),{setVisible:i}=PV(),[o,a]=Z.useState(!1),[c,l]=Z.useState(!1),[u,d]=Z.useState(null),[h,f]=Z.useMemo(()=>{const w=[],N=[];for(const _ of r)_.readyState===nn.Installed?w.push(_):N.push(_);return w.length?[w,N]:[N,[]]},[r]),p=Z.useCallback(()=>{l(!1),setTimeout(()=>i(!1),150)},[i]),m=Z.useCallback(w=>{w.preventDefault(),p()},[p]),E=Z.useCallback((w,N)=>{s(N),m(w)},[s,m]),b=Z.useCallback(()=>a(!o),[o]),x=Z.useCallback(w=>{const N=n.current;if(!N)return;const _=N.querySelectorAll("button"),L=_[0],U=_[_.length-1];w.shiftKey?document.activeElement===L&&(U.focus(),w.preventDefault()):document.activeElement===U&&(L.focus(),w.preventDefault())},[n]);return Z.useLayoutEffect(()=>{const w=_=>{_.key==="Escape"?p():_.key==="Tab"&&x(_)},{overflow:N}=window.getComputedStyle(document.body);return setTimeout(()=>l(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",w,!1),()=>{document.body.style.overflow=N,window.removeEventListener("keydown",w,!1)}},[p,x]),Z.useLayoutEffect(()=>d(document.querySelector(e)),[e]),u&&kz.createPortal(we.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${c&&"wallet-adapter-modal-fade-in"} ${t}`,ref:n,role:"dialog"},we.createElement("div",{className:"wallet-adapter-modal-container"},we.createElement("div",{className:"wallet-adapter-modal-wrapper"},we.createElement("button",{onClick:m,className:"wallet-adapter-modal-button-close"},we.createElement("svg",{width:"14",height:"14"},we.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),h.length?we.createElement(we.Fragment,null,we.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),we.createElement("ul",{className:"wallet-adapter-modal-list"},h.map(w=>we.createElement(bT,{key:w.adapter.name,handleClick:N=>E(N,w.adapter.name),wallet:w})),f.length?we.createElement(oB,{expanded:o,id:"wallet-adapter-modal-collapse"},f.map(w=>we.createElement(bT,{key:w.adapter.name,handleClick:N=>E(N,w.adapter.name),tabIndex:o?0:-1,wallet:w}))):null),f.length?we.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:b,tabIndex:0},we.createElement("span",null,o?"Less ":"More ","options"),we.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},we.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):we.createElement(we.Fragment,null,we.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),we.createElement("div",{className:"wallet-adapter-modal-middle"},we.createElement(xue,null)),f.length?we.createElement(we.Fragment,null,we.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:b,tabIndex:0},we.createElement("span",null,o?"Hide ":"Already have a wallet? View ","options"),we.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},we.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),we.createElement(oB,{expanded:o,id:"wallet-adapter-modal-collapse"},we.createElement("ul",{className:"wallet-adapter-modal-list"},f.map(w=>we.createElement(bT,{key:w.adapter.name,handleClick:N=>E(N,w.adapter.name),tabIndex:o?0:-1,wallet:w}))))):null))),we.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:m})),u)},Cue=({children:t,...e})=>{const[n,r]=Z.useState(!1);return we.createElement(kV.Provider,{value:{visible:n,setVisible:r}},t,n&&we.createElement(Sue,{...e}))},_ue={"change-wallet":"Change wallet",connecting:"Connecting ...","copy-address":"Copy address",copied:"Copied",disconnect:"Disconnect","has-wallet":"Connect","no-wallet":"Select Wallet"};function Iue(t){return we.createElement(Aue,{...t,labels:_ue})}var XM={exports:{}},I0=typeof Reflect=="object"?Reflect:null,aB=I0&&typeof I0.apply=="function"?I0.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},PS;I0&&typeof I0.ownKeys=="function"?PS=I0.ownKeys:Object.getOwnPropertySymbols?PS=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:PS=function(e){return Object.getOwnPropertyNames(e)};function Nue(t){console&&console.warn&&console.warn(t)}var MV=Number.isNaN||function(e){return e!==e};function kn(){kn.init.call(this)}XM.exports=kn;XM.exports.once=Rue;kn.EventEmitter=kn;kn.prototype._events=void 0;kn.prototype._eventsCount=0;kn.prototype._maxListeners=void 0;var cB=10;function X2(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(kn,"defaultMaxListeners",{enumerable:!0,get:function(){return cB},set:function(t){if(typeof t!="number"||t<0||MV(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");cB=t}});kn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};kn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||MV(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function DV(t){return t._maxListeners===void 0?kn.defaultMaxListeners:t._maxListeners}kn.prototype.getMaxListeners=function(){return DV(this)};kn.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")aB(c,this,n);else for(var l=c.length,u=jV(c,l),r=0;r<l;++r)aB(u[r],this,n);return!0};function BV(t,e,n,r){var s,i,o;if(X2(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=DV(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Nue(a)}return t}kn.prototype.addListener=function(e,n){return BV(this,e,n,!1)};kn.prototype.on=kn.prototype.addListener;kn.prototype.prependListener=function(e,n){return BV(this,e,n,!0)};function Tue(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function LV(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=Tue.bind(r);return s.listener=n,r.wrapFn=s,s}kn.prototype.once=function(e,n){return X2(n),this.on(e,LV(this,e,n)),this};kn.prototype.prependOnceListener=function(e,n){return X2(n),this.prependListener(e,LV(this,e,n)),this};kn.prototype.removeListener=function(e,n){var r,s,i,o,a;if(X2(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():kue(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};kn.prototype.off=kn.prototype.removeListener;kn.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function UV(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?Pue(s):jV(s,s.length)}kn.prototype.listeners=function(e){return UV(this,e,!0)};kn.prototype.rawListeners=function(e){return UV(this,e,!1)};kn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):FV.call(t,e)};kn.prototype.listenerCount=FV;function FV(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}kn.prototype.eventNames=function(){return this._eventsCount>0?PS(this._events):[]};function jV(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function kue(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Pue(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function Rue(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}$V(t,e,i,{once:!0}),e!=="error"&&Oue(t,s,{once:!0})})}function Oue(t,e,n){typeof t.on=="function"&&$V(t,"error",e,n)}function $V(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var ja=XM.exports;const eD=Qh(ja),Mue="Phantom";class Due extends V2{constructor(e={}){super(),this.name=Mue,this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?nn.Unsupported:nn.NotDetected,this._disconnected=()=>{const n=this._wallet;n&&(n.off("disconnect",this._disconnected),n.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new z2),this.emit("disconnect"))},this._accountChanged=n=>{const r=this._publicKey;if(r){try{n=new fe(n.toBytes())}catch(s){this.emit("error",new $y(s==null?void 0:s.message,s));return}r.equals(n)||(this._publicKey=n,this.emit("connect",n))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==nn.Unsupported&&(HC()?(this._readyState=nn.Loadable,this.emit("readyStateChange",this._readyState)):WM(()=>{var n,r,s;return(r=(n=window.phantom)==null?void 0:n.solana)!=null&&r.isPhantom||(s=window.solana)!=null&&s.isPhantom?(this._readyState=nn.Installed,this.emit("readyStateChange",this._readyState),!0):!1}))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===nn.Installed&&await this.connect()}async connect(){var e;try{if(this.connected||this.connecting)return;if(this.readyState===nn.Loadable){const s=encodeURIComponent(window.location.href),i=encodeURIComponent(window.location.origin);window.location.href=`https://phantom.app/ul/browse/${s}?ref=${i}`;return}if(this.readyState!==nn.Installed)throw new jy;this._connecting=!0;const n=((e=window.phantom)==null?void 0:e.solana)||window.solana;if(!n.isConnected)try{await n.connect()}catch(s){throw new Z1(s==null?void 0:s.message,s)}if(!n.publicKey)throw new bh;let r;try{r=new fe(n.publicKey.toBytes())}catch(s){throw new $y(s==null?void 0:s.message,s)}n.on("disconnect",this._disconnected),n.on("accountChanged",this._accountChanged),this._wallet=n,this._publicKey=r,this.emit("connect",r)}catch(n){throw this.emit("error",n),n}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(n){this.emit("error",new W2(n==null?void 0:n.message,n))}}this.emit("disconnect")}async sendTransaction(e,n,r={}){try{const s=this._wallet;if(!s)throw new Sr;try{const{signers:i,...o}=r;ml(e)?i!=null&&i.length&&e.sign(i):(e=await this.prepareTransaction(e,n,o),i!=null&&i.length&&e.partialSign(...i)),o.preflightCommitment=o.preflightCommitment||n.commitment;const{signature:a}=await s.signAndSendTransaction(e,o);return a}catch(i){throw i instanceof cr?i:new Tu(i==null?void 0:i.message,i)}}catch(s){throw this.emit("error",s),s}}async signTransaction(e){try{const n=this._wallet;if(!n)throw new Sr;try{return await n.signTransaction(e)||e}catch(r){throw new gc(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}}async signAllTransactions(e){try{const n=this._wallet;if(!n)throw new Sr;try{return await n.signAllTransactions(e)||e}catch(r){throw new gc(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}}async signMessage(e){try{const n=this._wallet;if(!n)throw new Sr;try{const{signature:r}=await n.signMessage(e);return r}catch(r){throw new H2(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}}}const Bue="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjMxIiB2aWV3Qm94PSIwIDAgMzEgMzEiIHdpZHRoPSIzMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjIwLjI1IiB4Mj0iMjYuNTcxIiB5MT0iMjcuMTczIiB5Mj0iMTkuODU4Ij48c3RvcCBvZmZzZXQ9Ii4wOCIgc3RvcC1jb2xvcj0iIzk5NDVmZiIvPjxzdG9wIG9mZnNldD0iLjMiIHN0b3AtY29sb3I9IiM4NzUyZjMiLz48c3RvcCBvZmZzZXQ9Ii41IiBzdG9wLWNvbG9yPSIjNTQ5N2Q1Ii8+PHN0b3Agb2Zmc2V0PSIuNiIgc3RvcC1jb2xvcj0iIzQzYjRjYSIvPjxzdG9wIG9mZnNldD0iLjcyIiBzdG9wLWNvbG9yPSIjMjhlMGI5Ii8+PHN0b3Agb2Zmc2V0PSIuOTciIHN0b3AtY29sb3I9IiMxOWZiOWIiLz48L2xpbmVhckdyYWRpZW50PjxnIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iLjA5NCI+PHBhdGggZD0ibTI2LjEwOSAzLjY0My05LjM2OSA2Ljk1OSAxLjczMy00LjEwNSA3LjYzNy0yLjg1M3oiIGZpbGw9IiNlMjc2MWIiIHN0cm9rZT0iI2UyNzYxYiIvPjxnIGZpbGw9IiNlNDc2MWIiIHN0cm9rZT0iI2U0NzYxYiI+PHBhdGggZD0ibTQuNDgxIDMuNjQzIDkuMjk0IDcuMDI0LTEuNjQ4LTQuMTcxem0xOC4yNTggMTYuMTMtMi40OTUgMy44MjMgNS4zMzkgMS40NjkgMS41MzUtNS4yMDctNC4zNzgtLjA4NXptLTE5LjI0Ny4wODUgMS41MjUgNS4yMDcgNS4zMzktMS40NjktMi40OTUtMy44MjN6Ii8+PHBhdGggZD0ibTEwLjA1NSAxMy4zMTMtMS40ODggMi4yNTEgNS4zMDEuMjM1LS4xODgtNS42OTd6bTEwLjQ4IDAtMy42NzItMy4yNzctLjEyMiA1Ljc2MyA1LjI5Mi0uMjM1LTEuNDk3LTIuMjUxem0tMTAuMTc4IDEwLjI4MyAzLjE4My0xLjU1NC0yLjc0OS0yLjE0Ny0uNDMzIDMuNzAxem02LjY5NS0xLjU1NCAzLjE5MiAxLjU1NC0uNDQzLTMuNzAxeiIvPjwvZz48cGF0aCBkPSJtMjAuMjQ0IDIzLjU5Ni0zLjE5Mi0xLjU1NC4yNTQgMi4wODEtLjAyOC44NzZ6bS05Ljg4NyAwIDIuOTY2IDEuNDAzLS4wMTktLjg3Ni4yMzUtMi4wODEtMy4xODMgMS41NTR6IiBmaWxsPSIjZDdjMWIzIiBzdHJva2U9IiNkN2MxYjMiLz48cGF0aCBkPSJtMTMuMzY5IDE4LjUyMS0yLjY1NS0uNzgxIDEuODc0LS44NTd6bTMuODUxIDAgLjc4MS0xLjYzOCAxLjg4My44NTctMi42NjUuNzgxeiIgZmlsbD0iIzIzMzQ0NyIgc3Ryb2tlPSIjMjMzNDQ3Ii8+PHBhdGggZD0ibTEwLjM1NyAyMy41OTYuNDUyLTMuODIzLTIuOTQ3LjA4NXptOS40MzUtMy44MjMuNDUyIDMuODIzIDIuNDk1LTMuNzM4em0yLjI0MS00LjIwOS01LjI5Mi4yMzUuNDkgMi43MjEuNzgyLTEuNjM4IDEuODgzLjg1N3ptLTExLjMxOCAyLjE3NSAxLjg4My0uODU3Ljc3MiAxLjYzOC40OTktMi43MjEtNS4zMDEtLjIzNXoiIGZpbGw9IiNjZDYxMTYiIHN0cm9rZT0iI2NkNjExNiIvPjxwYXRoIGQ9Im04LjU2NyAxNS41NjQgMi4yMjIgNC4zMzEtLjA3NS0yLjE1NnptMTEuMzI4IDIuMTc1LS4wOTQgMi4xNTYgMi4yMzItNC4zMzEtMi4xMzcgMi4xNzV6bS02LjAyNi0xLjk0LS40OTkgMi43MjEuNjIxIDMuMjExLjE0MS00LjIyOC0uMjY0LTEuNzA0em0yLjg3MiAwLS4yNTQgMS42OTUuMTEzIDQuMjM3LjYzMS0zLjIxMXoiIGZpbGw9IiNlNDc1MWYiIHN0cm9rZT0iI2U0NzUxZiIvPjxwYXRoIGQ9Im0xNy4yMyAxOC41Mi0uNjMxIDMuMjExLjQ1Mi4zMTEgMi43NS0yLjE0Ny4wOTQtMi4xNTZ6bS02LjUxNi0uNzgxLjA3NSAyLjE1NiAyLjc1IDIuMTQ3LjQ1Mi0uMzExLS42MjItMy4yMTF6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48cGF0aCBkPSJtMTcuMjc3IDI0Ljk5OS4wMjgtLjg3Ni0uMjM1LS4yMDdoLTMuNTVsLS4yMTcuMjA3LjAxOS44NzYtMi45NjYtMS40MDMgMS4wMzYuODQ4IDIuMSAxLjQ1OWgzLjYwNmwyLjEwOS0xLjQ1OSAxLjAzNi0uODQ4eiIgZmlsbD0iI2MwYWQ5ZSIgc3Ryb2tlPSIjYzBhZDllIi8+PHBhdGggZD0ibTE3LjA1MSAyMi4wNDItLjQ1Mi0uMzExaC0yLjYwOGwtLjQ1Mi4zMTEtLjIzNSAyLjA4MS4yMTctLjIwN2gzLjU1bC4yMzUuMjA3LS4yNTQtMi4wODF6IiBmaWxsPSIjMTYxNjE2IiBzdHJva2U9IiMxNjE2MTYiLz48cGF0aCBkPSJtMjYuNTA1IDExLjA1My44LTMuODQyLTEuMTk2LTMuNTY5LTkuMDU4IDYuNzIzIDMuNDg0IDIuOTQ3IDQuOTI1IDEuNDQxIDEuMDkyLTEuMjcxLS40NzEtLjMzOS43NTMtLjY4Ny0uNTg0LS40NTIuNzUzLS41NzQtLjQ5OS0uMzc3em0tMjMuMjExLTMuODQxLjggMy44NDItLjUwOC4zNzcuNzUzLjU3NC0uNTc0LjQ1Mi43NTMuNjg3LS40NzEuMzM5IDEuMDgzIDEuMjcxIDQuOTI1LTEuNDQxIDMuNDg0LTIuOTQ3LTkuMDU5LTYuNzIzeiIgZmlsbD0iIzc2M2QxNiIgc3Ryb2tlPSIjNzYzZDE2Ii8+PHBhdGggZD0ibTI1LjQ2IDE0Ljc1NC00LjkyNS0xLjQ0MSAxLjQ5NyAyLjI1MS0yLjIzMiA0LjMzMSAyLjkzOC0uMDM4aDQuMzc4bC0xLjY1Ny01LjEwNHptLTE1LjQwNS0xLjQ0MS00LjkyNSAxLjQ0MS0xLjYzOCA1LjEwNGg0LjM2OWwyLjkyOC4wMzgtMi4yMjItNC4zMzEgMS40ODgtMi4yNTF6bTYuNjg1IDIuNDg2LjMxMS01LjQzMyAxLjQzMS0zLjg3aC02LjM1NmwxLjQxMyAzLjg3LjMyOSA1LjQzMy4xMTMgMS43MTQuMDA5IDQuMjE5aDIuNjFsLjAxOS00LjIxOS4xMjItMS43MTR6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48L2c+PGNpcmNsZSBjeD0iMjMuNSIgY3k9IjIzLjUiIGZpbGw9IiMwMDAiIHI9IjYuNSIvPjxwYXRoIGQ9Im0yNy40NzMgMjUuNTQ1LTEuMzEgMS4zNjhjLS4wMjkuMDMtLjA2My4wNTMtLjEwMS4wN2EuMzEuMzEgMCAwIDEgLS4xMjEuMDI0aC02LjIwOWMtLjAzIDAtLjA1OS0uMDA4LS4wODMtLjAyNGEuMTUuMTUgMCAwIDEgLS4wNTYtLjA2NWMtLjAxMi0uMDI2LS4wMTUtLjA1Ni0uMDEtLjA4NHMuMDE4LS4wNTUuMDM5LS4wNzZsMS4zMTEtMS4zNjhjLjAyOC0uMDMuMDYzLS4wNTMuMTAxLS4wNjlhLjMxLjMxIDAgMCAxIC4xMjEtLjAyNWg2LjIwOGMuMDMgMCAuMDU5LjAwOC4wODMuMDI0YS4xNS4xNSAwIDAgMSAuMDU2LjA2NWMuMDEyLjAyNi4wMTUuMDU2LjAxLjA4NHMtLjAxOC4wNTUtLjAzOS4wNzZ6bS0xLjMxLTIuNzU2Yy0uMDI5LS4wMy0uMDYzLS4wNTMtLjEwMS0uMDdhLjMxLjMxIDAgMCAwIC0uMTIxLS4wMjRoLTYuMjA5Yy0uMDMgMC0uMDU5LjAwOC0uMDgzLjAyNHMtLjA0NC4wMzgtLjA1Ni4wNjUtLjAxNS4wNTYtLjAxLjA4NC4wMTguMDU1LjAzOS4wNzZsMS4zMTEgMS4zNjhjLjAyOC4wMy4wNjMuMDUzLjEwMS4wNjlhLjMxLjMxIDAgMCAwIC4xMjEuMDI1aDYuMjA4Yy4wMyAwIC4wNTktLjAwOC4wODMtLjAyNGEuMTUuMTUgMCAwIDAgLjA1Ni0uMDY1Yy4wMTItLjAyNi4wMTUtLjA1Ni4wMS0uMDg0cy0uMDE4LS4wNTUtLjAzOS0uMDc2em0tNi40MzEtLjk4M2g2LjIwOWEuMzEuMzEgMCAwIDAgLjEyMS0uMDI0Yy4wMzgtLjAxNi4wNzMtLjA0LjEwMS0uMDdsMS4zMS0xLjM2OGMuMDItLjAyMS4wMzQtLjA0Ny4wMzktLjA3NnMuMDAxLS4wNTgtLjAxLS4wODRhLjE1LjE1IDAgMCAwIC0uMDU2LS4wNjVjLS4wMjUtLjAxNi0uMDU0LS4wMjQtLjA4My0uMDI0aC02LjIwOGEuMzEuMzEgMCAwIDAgLS4xMjEuMDI1Yy0uMDM4LjAxNi0uMDcyLjA0LS4xMDEuMDY5bC0xLjMxIDEuMzY4Yy0uMDIuMDIxLS4wMzQuMDQ3LS4wMzkuMDc2cy0uMDAxLjA1OC4wMS4wODQuMDMxLjA0OS4wNTYuMDY1LjA1NC4wMjQuMDgzLjAyNHoiIGZpbGw9InVybCgjYSkiLz48L3N2Zz4=";var wn=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Lue=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},RS,op,$R,zR,WR,hi,HR,zV,WV,VR,KR,qR,GR,YR;class Uue{constructor(){RS.add(this),op.set(this,{}),$R.set(this,"1.0.0"),zR.set(this,"MetaMask"),WR.set(this,Bue),hi.set(this,null),HR.set(this,(e,n)=>{var r;return(r=wn(this,op,"f")[e])!=null&&r.push(n)||(wn(this,op,"f")[e]=[n]),()=>wn(this,RS,"m",WV).call(this,e,n)}),VR.set(this,async()=>{if(!wn(this,hi,"f")){let e;try{e=(await ur(()=>import("./index-4af6938a.js"),[])).default}catch{throw new Error("Unable to load Solflare MetaMask SDK")}Lue(this,hi,new e,"f"),wn(this,hi,"f").on("standard_change",n=>wn(this,RS,"m",zV).call(this,"change",n))}return this.accounts.length||await wn(this,hi,"f").connect(),{accounts:this.accounts}}),KR.set(this,async()=>{wn(this,hi,"f")&&await wn(this,hi,"f").disconnect()}),qR.set(this,async(...e)=>{if(!wn(this,hi,"f"))throw new Sr;return await wn(this,hi,"f").standardSignAndSendTransaction(...e)}),GR.set(this,async(...e)=>{if(!wn(this,hi,"f"))throw new Sr;return await wn(this,hi,"f").standardSignTransaction(...e)}),YR.set(this,async(...e)=>{if(!wn(this,hi,"f"))throw new Sr;return await wn(this,hi,"f").standardSignMessage(...e)})}get version(){return wn(this,$R,"f")}get name(){return wn(this,zR,"f")}get icon(){return wn(this,WR,"f")}get chains(){return[dl.SOLANA_MAINNET_CHAIN,dl.SOLANA_DEVNET_CHAIN,dl.SOLANA_TESTNET_CHAIN]}get features(){return{[HE]:{version:"1.0.0",connect:wn(this,VR,"f")},[Q1]:{version:"1.0.0",disconnect:wn(this,KR,"f")},[VE]:{version:"1.0.0",on:wn(this,HR,"f")},[ul]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:wn(this,qR,"f")},[rs]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:wn(this,GR,"f")},[Lf]:{version:"1.0.0",signMessage:wn(this,YR,"f")}}}get accounts(){return wn(this,hi,"f")?wn(this,hi,"f").standardAccounts:[]}}op=new WeakMap,$R=new WeakMap,zR=new WeakMap,WR=new WeakMap,hi=new WeakMap,HR=new WeakMap,VR=new WeakMap,KR=new WeakMap,qR=new WeakMap,GR=new WeakMap,YR=new WeakMap,RS=new WeakSet,zV=function(e,...n){var r;(r=wn(this,op,"f")[e])==null||r.forEach(s=>s.apply(null,n))},WV=function(e,n){var r;wn(this,op,"f")[e]=(r=wn(this,op,"f")[e])==null?void 0:r.filter(s=>n!==s)};let lB=!1;function Fue(){lB||(Yle(new Uue),lB=!0)}async function jue(){const t="solflare-detect-metamask";function e(){window.postMessage({target:"metamask-contentscript",data:{name:"metamask-provider",data:{id:t,jsonrpc:"2.0",method:"wallet_getSnaps"}}},window.location.origin)}function n(r){var i,o;const s=r.data;(s==null?void 0:s.target)==="metamask-inpage"&&((i=s.data)==null?void 0:i.name)==="metamask-provider"&&(((o=s.data.data)==null?void 0:o.id)===t?(window.removeEventListener("message",n),s.data.data.error||Fue()):e())}window.addEventListener("message",n),window.setTimeout(()=>window.removeEventListener("message",n),5e3),e()}const $ue="Solflare";class zue extends V2{constructor(e={}){super(),this.name=$ue,this.url="https://solflare.com",this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJTIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MCA1MCI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiMwMjA1MGE7c3Ryb2tlOiNmZmVmNDY7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLXdpZHRoOi41cHg7fS5jbHMtMntmaWxsOiNmZmVmNDY7fTwvc3R5bGU+PC9kZWZzPjxyZWN0IGNsYXNzPSJjbHMtMiIgeD0iMCIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiByeD0iMTIiIHJ5PSIxMiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTI0LjIzLDI2LjQybDIuNDYtMi4zOCw0LjU5LDEuNWMzLjAxLDEsNC41MSwyLjg0LDQuNTEsNS40MywwLDEuOTYtLjc1LDMuMjYtMi4yNSw0LjkzbC0uNDYuNS4xNy0xLjE3Yy42Ny00LjI2LS41OC02LjA5LTQuNzItNy40M2wtNC4zLTEuMzhoMFpNMTguMDUsMTEuODVsMTIuNTIsNC4xNy0yLjcxLDIuNTktNi41MS0yLjE3Yy0yLjI1LS43NS0zLjAxLTEuOTYtMy4zLTQuNTF2LS4wOGgwWk0xNy4zLDMzLjA2bDIuODQtMi43MSw1LjM0LDEuNzVjMi44LjkyLDMuNzYsMi4xMywzLjQ2LDUuMThsLTExLjY1LTQuMjJoMFpNMTMuNzEsMjAuOTVjMC0uNzkuNDItMS41NCwxLjEzLTIuMTcuNzUsMS4wOSwyLjA1LDIuMDUsNC4wOSwyLjcxbDQuNDIsMS40Ni0yLjQ2LDIuMzgtNC4zNC0xLjQyYy0yLS42Ny0yLjg0LTEuNjctMi44NC0yLjk2TTI2LjgyLDQyLjg3YzkuMTgtNi4wOSwxNC4xMS0xMC4yMywxNC4xMS0xNS4zMiwwLTMuMzgtMi01LjI2LTYuNDMtNi43MmwtMy4zNC0xLjEzLDkuMTQtOC43Ny0xLjg0LTEuOTYtMi43MSwyLjM4LTEyLjgxLTQuMjJjLTMuOTcsMS4yOS04Ljk3LDUuMDktOC45Nyw4Ljg5LDAsLjQyLjA0LjgzLjE3LDEuMjktMy4zLDEuODgtNC42MywzLjYzLTQuNjMsNS44LDAsMi4wNSwxLjA5LDQuMDksNC41NSw1LjIybDIuNzUuOTItOS41Miw5LjE0LDEuODQsMS45NiwyLjk2LTIuNzEsMTQuNzMsNS4yMmgwWiIvPjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?nn.Unsupported:nn.Loadable,this._disconnected=()=>{const n=this._wallet;n&&(n.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new z2),this.emit("disconnect"))},this._accountChanged=n=>{if(!n)return;const r=this._publicKey;if(r){try{n=new fe(n.toBytes())}catch(s){this.emit("error",new $y(s==null?void 0:s.message,s));return}r.equals(n)||(this._publicKey=n,this.emit("connect",n))}},this._connecting=!1,this._publicKey=null,this._wallet=null,this._config=e,this._readyState!==nn.Unsupported&&(WM(()=>{var n;return(n=window.solflare)!=null&&n.isSolflare||window.SolflareApp?(this._readyState=nn.Installed,this.emit("readyStateChange",this._readyState),!0):!1}),jue())}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){var e;return!!((e=this._wallet)!=null&&e.connected)}get readyState(){return this._readyState}async autoConnect(){this.readyState===nn.Loadable&&HC()||await this.connect()}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==nn.Loadable&&this._readyState!==nn.Installed)throw new jy;if(this.readyState===nn.Loadable&&HC()){const s=encodeURIComponent(window.location.href),i=encodeURIComponent(window.location.origin);window.location.href=`https://solflare.com/ul/v1/browse/${s}?ref=${i}`;return}let e;try{e=(await ur(()=>import("./index-de511bd0.js"),[])).default}catch(s){throw new NH(s==null?void 0:s.message,s)}let n;try{n=new e({network:this._config.network})}catch(s){throw new tp(s==null?void 0:s.message,s)}if(this._connecting=!0,!n.connected)try{await n.connect()}catch(s){throw new Z1(s==null?void 0:s.message,s)}if(!n.publicKey)throw new Z1;let r;try{r=new fe(n.publicKey.toBytes())}catch(s){throw new $y(s==null?void 0:s.message,s)}n.on("disconnect",this._disconnected),n.on("accountChanged",this._accountChanged),this._wallet=n,this._publicKey=r,this.emit("connect",r)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(n){this.emit("error",new W2(n==null?void 0:n.message,n))}}this.emit("disconnect")}async sendTransaction(e,n,r={}){try{const s=this._wallet;if(!s)throw new Sr;try{const{signers:i,...o}=r;return ml(e)?i!=null&&i.length&&e.sign(i):(e=await this.prepareTransaction(e,n,o),i!=null&&i.length&&e.partialSign(...i)),o.preflightCommitment=o.preflightCommitment||n.commitment,await s.signAndSendTransaction(e,o)}catch(i){throw i instanceof cr?i:new Tu(i==null?void 0:i.message,i)}}catch(s){throw this.emit("error",s),s}}async signTransaction(e){try{const n=this._wallet;if(!n)throw new Sr;try{return await n.signTransaction(e)||e}catch(r){throw new gc(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}}async signAllTransactions(e){try{const n=this._wallet;if(!n)throw new Sr;try{return await n.signAllTransactions(e)||e}catch(r){throw new gc(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}}async signMessage(e){try{const n=this._wallet;if(!n)throw new Sr;try{return await n.signMessage(e,"utf8")}catch(r){throw new H2(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}}}var Ce={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ZR=function(t,e){return ZR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},ZR(t,e)};function Wue(t,e){ZR(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var QR=function(){return QR=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},QR.apply(this,arguments)};function Hue(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Vue(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function Kue(t,e){return function(n,r){e(n,r,t)}}function que(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Gue(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Yue(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Zue(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function Que(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function JR(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function HV(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function Jue(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(HV(arguments[e]));return t}function Xue(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function ev(t){return this instanceof ev?(this.v=t,this):new ev(t)}function ede(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,m){i.push([h,f,p,m])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof ev?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function tde(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:ev(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function nde(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof JR=="function"?JR(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function rde(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function sde(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function ide(t){return t&&t.__esModule?t:{default:t}}function ode(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function ade(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const cde=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return QR},__asyncDelegator:tde,__asyncGenerator:ede,__asyncValues:nde,__await:ev,__awaiter:Gue,__classPrivateFieldGet:ode,__classPrivateFieldSet:ade,__createBinding:Zue,__decorate:Vue,__exportStar:Que,__extends:Wue,__generator:Yue,__importDefault:ide,__importStar:sde,__makeTemplateObject:rde,__metadata:que,__param:Kue,__read:HV,__rest:Hue,__spread:Jue,__spreadArrays:Xue,__values:JR},Symbol.toStringTag,{value:"Module"})),eI=Ol(cde);var vT={},qw={},uB;function lde(){if(uB)return qw;uB=1,Object.defineProperty(qw,"__esModule",{value:!0}),qw.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return qw.delay=t,qw}var lf={},ET={},uf={},dB;function ude(){return dB||(dB=1,Object.defineProperty(uf,"__esModule",{value:!0}),uf.ONE_THOUSAND=uf.ONE_HUNDRED=void 0,uf.ONE_HUNDRED=100,uf.ONE_THOUSAND=1e3),uf}var AT={},hB;function dde(){return hB||(hB=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(AT)),AT}var fB;function VV(){return fB||(fB=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=eI;e.__exportStar(ude(),t),e.__exportStar(dde(),t)}(ET)),ET}var pB;function hde(){if(pB)return lf;pB=1,Object.defineProperty(lf,"__esModule",{value:!0}),lf.fromMiliseconds=lf.toMiliseconds=void 0;const t=VV();function e(r){return r*t.ONE_THOUSAND}lf.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return lf.fromMiliseconds=n,lf}var mB;function fde(){return mB||(mB=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=eI;e.__exportStar(lde(),t),e.__exportStar(hde(),t)}(vT)),vT}var Gm={},gB;function pde(){if(gB)return Gm;gB=1,Object.defineProperty(Gm,"__esModule",{value:!0}),Gm.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Gm.Watch=t,Gm.default=t,Gm}var xT={},Gw={},yB;function mde(){if(yB)return Gw;yB=1,Object.defineProperty(Gw,"__esModule",{value:!0}),Gw.IWatch=void 0;class t{}return Gw.IWatch=t,Gw}var wB;function gde(){return wB||(wB=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),eI.__exportStar(mde(),t)}(xT)),xT}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=eI;e.__exportStar(fde(),t),e.__exportStar(pde(),t),e.__exportStar(gde(),t),e.__exportStar(VV(),t)})(Ce);class Nm{}let yde=class extends Nm{constructor(e){super()}};const bB=Ce.FIVE_SECONDS,Tm={pulse:"heartbeat_pulse"};let wde=class KV extends yde{constructor(e){super(e),this.events=new ja.EventEmitter,this.interval=bB,this.interval=(e==null?void 0:e.interval)||bB}static async init(e){const n=new KV(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Ce.toMiliseconds(this.interval))}pulse(){this.events.emit(Tm.pulse)}};const bde=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,vde=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Ede=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Ade(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){xde(t);return}return e}function xde(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function GA(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!Ede.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(bde.test(t)||vde.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Ade)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function km(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function qV(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=km(n);return(s,i)=>r.then(o=>i(o.transaction(e,s).objectStore(e)))}let ST;function GE(){return ST||(ST=qV("keyval-store","keyval")),ST}function vB(t,e=GE()){return e("readonly",n=>km(n.get(t)))}function Sde(t,e,n=GE()){return n("readwrite",r=>(r.put(e,t),km(r.transaction)))}function Cde(t,e=GE()){return e("readwrite",n=>(n.delete(t),km(n.transaction)))}function _de(t=GE()){return t("readwrite",e=>(e.clear(),km(e.transaction)))}function Ide(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},km(t.transaction)}function Nde(t=GE()){return t("readonly",e=>{if(e.getAllKeys)return km(e.getAllKeys());const n=[];return Ide(e,r=>n.push(r.key)).then(()=>n)})}const Tde=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),kde=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function im(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return kde(t)}catch{return t}}function Yu(t){return typeof t=="string"?t:Tde(t)||""}function Pde(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var Rde=Ode;function Ode(t,e,n){var r=n&&n.stringify||Pde,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const EB=Rde;var kg=xl;const tv=Wde().console||{},Mde={mapHttpRequest:YA,mapHttpResponse:YA,wrapRequestSerializer:CT,wrapResponseSerializer:CT,wrapErrorSerializer:CT,req:YA,res:YA,err:Fde};function Dde(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function xl(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||tv;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=Dde(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=nv),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:jde(t)};c.levels=xl.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=nv,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=XR());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,Ym(l,c,"error","log"),Ym(l,c,"fatal","error"),Ym(l,c,"warn","error"),Ym(l,c,"info","log"),Ym(l,c,"debug","log"),Ym(l,c,"trace","log")}function f(p,m){if(!p)throw new Error("missing bindings for child Pino");m=m||{},s&&p.serializers&&(m.serializers=p.serializers);const E=m.serializers;if(s&&E){var b=Object.assign({},r,E),x=t.browser.serialize===!0?Object.keys(b):s;delete p.serializers,tI([p],x,b,this._stdErrSerialize)}function w(N){this._childLevel=(N._childLevel|0)+1,this.error=Zm(N,p,"error"),this.fatal=Zm(N,p,"fatal"),this.warn=Zm(N,p,"warn"),this.info=Zm(N,p,"info"),this.debug=Zm(N,p,"debug"),this.trace=Zm(N,p,"trace"),b&&(this.serializers=b,this._serialize=x),e&&(this._logEvent=XR([].concat(N._logEvent.bindings,p)))}return w.prototype=this,new w(this)}return c}xl.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};xl.stdSerializers=Mde;xl.stdTimeFunctions=Object.assign({},{nullTime:GV,epochTime:YV,unixTime:$de,isoTime:zde});function Ym(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?nv:s[n]?s[n]:tv[n]||tv[r]||nv,Bde(t,e,n)}function Bde(t,e,n){!t.transmit&&e[n]===nv||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===tv?tv:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&tI(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,Lde(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=xl.levels.values[l],d=xl.levels.values[n];if(d<u)return;Ude(this,{ts:i,methodLevel:n,methodValue:d,transmitLevel:l,transmitValue:xl.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function Lde(t,e,n,r){t._serialize&&tI(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=xl.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?EB(s.shift(),s):void 0}else typeof i=="string"&&(i=EB(s.shift(),s));return i!==void 0&&(o.msg=i),o}function tI(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=xl.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Zm(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function Ude(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;tI(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=XR(c)}function XR(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Fde(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function jde(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?GV:YV}function YA(){return{}}function CT(t){return t}function nv(){}function GV(){return!1}function YV(){return Date.now()}function $de(){return Math.round(Date.now()/1e3)}function zde(){return new Date(Date.now()).toISOString()}function Wde(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const YE=Qh(kg),Hde={level:"info"},ZE="custom_context",tD=1e3*1024;let Vde=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},AB=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new Vde(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},ZV=class{constructor(e,n=tD){this.level=e??"error",this.levelValue=kg.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new AB(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===kg.levels.values.error?console.error(e):n===kg.levels.values.warn?console.warn(e):n===kg.levels.values.debug?console.debug(e):n===kg.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Yu({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new AB(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Yu({extraMetadata:e})),new Blob(n,{type:"application/json"})}},Kde=class{constructor(e,n=tD){this.baseChunkLogger=new ZV(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},qde=class{constructor(e,n=tD){this.baseChunkLogger=new ZV(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var Gde=Object.defineProperty,Yde=Object.defineProperties,Zde=Object.getOwnPropertyDescriptors,xB=Object.getOwnPropertySymbols,Qde=Object.prototype.hasOwnProperty,Jde=Object.prototype.propertyIsEnumerable,SB=(t,e,n)=>e in t?Gde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,e_=(t,e)=>{for(var n in e||(e={}))Qde.call(e,n)&&SB(t,n,e[n]);if(xB)for(var n of xB(e))Jde.call(e,n)&&SB(t,n,e[n]);return t},t_=(t,e)=>Yde(t,Zde(e));function Aw(t){return t_(e_({},t),{level:(t==null?void 0:t.level)||Hde.level})}function Xde(t,e=ZE){return t[e]||""}function ehe(t,e,n=ZE){return t[n]=e,t}function _o(t,e=ZE){let n="";return typeof t.bindings>"u"?n=Xde(t,e):n=t.bindings().context||"",n}function the(t,e,n=ZE){const r=_o(t,n);return r.trim()?`${r}/${e}`:e}function Si(t,e,n=ZE){const r=the(t,e,n),s=t.child({context:r});return ehe(s,r,n)}function nhe(t){var e,n;const r=new Kde((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:YE(t_(e_({},t.opts),{level:"trace",browser:t_(e_({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function rhe(t){var e;const n=new qde((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:YE(t_(e_({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function nD(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?nhe(t):rhe(t)}function she(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function QV(t,...e){if(!she(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function CB(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ihe(t,e){QV(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Qm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _T=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function ohe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function JV(t){return typeof t=="string"&&(t=ohe(t)),QV(t),t}let ahe=class{clone(){return this._cloneInto()}};function che(t){const e=r=>t().update(JV(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function XV(t=32){if(Qm&&typeof Qm.getRandomValues=="function")return Qm.getRandomValues(new Uint8Array(t));if(Qm&&typeof Qm.randomBytes=="function")return Qm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function lhe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let uhe=class extends ahe{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=_T(this.buffer)}update(e){CB(this);const{view:n,buffer:r,blockLen:s}=this;e=JV(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=_T(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){CB(this),ihe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;lhe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=_T(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const ZA=BigInt(2**32-1),e3=BigInt(32);function eK(t,e=!1){return e?{h:Number(t&ZA),l:Number(t>>e3&ZA)}:{h:Number(t>>e3&ZA)|0,l:Number(t&ZA)|0}}function dhe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=eK(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const hhe=(t,e)=>BigInt(t>>>0)<<e3|BigInt(e>>>0),fhe=(t,e,n)=>t>>>n,phe=(t,e,n)=>t<<32-n|e>>>n,mhe=(t,e,n)=>t>>>n|e<<32-n,ghe=(t,e,n)=>t<<32-n|e>>>n,yhe=(t,e,n)=>t<<64-n|e>>>n-32,whe=(t,e,n)=>t>>>n-32|e<<64-n,bhe=(t,e)=>e,vhe=(t,e)=>t,Ehe=(t,e,n)=>t<<n|e>>>32-n,Ahe=(t,e,n)=>e<<n|t>>>32-n,xhe=(t,e,n)=>e<<n-32|t>>>64-n,She=(t,e,n)=>t<<n-32|e>>>64-n;function Che(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const _he=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Ihe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Nhe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),The=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,khe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Phe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,xt={fromBig:eK,split:dhe,toBig:hhe,shrSH:fhe,shrSL:phe,rotrSH:mhe,rotrSL:ghe,rotrBH:yhe,rotrBL:whe,rotr32H:bhe,rotr32L:vhe,rotlSH:Ehe,rotlSL:Ahe,rotlBH:xhe,rotlBL:She,add:Che,add3L:_he,add3H:Ihe,add4L:Nhe,add4H:The,add5H:Phe,add5L:khe},[Rhe,Ohe]=(()=>xt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),dd=new Uint32Array(80),hd=new Uint32Array(80);let Mhe=class extends uhe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:m,Hl:E}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,m,E]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,m,E){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=m|0,this.Hl=E|0}process(e,n){for(let w=0;w<16;w++,n+=4)dd[w]=e.getUint32(n),hd[w]=e.getUint32(n+=4);for(let w=16;w<80;w++){const N=dd[w-15]|0,_=hd[w-15]|0,L=xt.rotrSH(N,_,1)^xt.rotrSH(N,_,8)^xt.shrSH(N,_,7),U=xt.rotrSL(N,_,1)^xt.rotrSL(N,_,8)^xt.shrSL(N,_,7),F=dd[w-2]|0,M=hd[w-2]|0,W=xt.rotrSH(F,M,19)^xt.rotrBH(F,M,61)^xt.shrSH(F,M,6),H=xt.rotrSL(F,M,19)^xt.rotrBL(F,M,61)^xt.shrSL(F,M,6),K=xt.add4L(U,H,hd[w-7],hd[w-16]),P=xt.add4H(K,L,W,dd[w-7],dd[w-16]);dd[w]=P|0,hd[w]=K|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:m,Gl:E,Hh:b,Hl:x}=this;for(let w=0;w<80;w++){const N=xt.rotrSH(d,h,14)^xt.rotrSH(d,h,18)^xt.rotrBH(d,h,41),_=xt.rotrSL(d,h,14)^xt.rotrSL(d,h,18)^xt.rotrBL(d,h,41),L=d&f^~d&m,U=h&p^~h&E,F=xt.add5L(x,_,U,Ohe[w],hd[w]),M=xt.add5H(F,b,N,L,Rhe[w],dd[w]),W=F|0,H=xt.rotrSH(r,s,28)^xt.rotrBH(r,s,34)^xt.rotrBH(r,s,39),K=xt.rotrSL(r,s,28)^xt.rotrBL(r,s,34)^xt.rotrBL(r,s,39),P=r&i^r&a^i&a,y=s&o^s&c^o&c;b=m|0,x=E|0,m=f|0,E=p|0,f=d|0,p=h|0,{h:d,l:h}=xt.add(l|0,u|0,M|0,W|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const g=xt.add3L(W,K,y);r=xt.add3H(g,M,H,P),s=g|0}({h:r,l:s}=xt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=xt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=xt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=xt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=xt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=xt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:m,l:E}=xt.add(this.Gh|0,this.Gl|0,m|0,E|0),{h:b,l:x}=xt.add(this.Hh|0,this.Hl|0,b|0,x|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,m,E,b,x)}roundClean(){dd.fill(0),hd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const Dhe=che(()=>new Mhe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rD=BigInt(0),tK=BigInt(1),Bhe=BigInt(2);function sD(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function iD(t){if(!sD(t))throw new Error("Uint8Array expected")}function IT(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Lhe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function oD(t){iD(t);let e="";for(let n=0;n<t.length;n++)e+=Lhe[t[n]];return e}function nK(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?rD:BigInt("0x"+t)}const $l={_0:48,_9:57,A:65,F:70,a:97,f:102};function _B(t){if(t>=$l._0&&t<=$l._9)return t-$l._0;if(t>=$l.A&&t<=$l.F)return t-($l.A-10);if(t>=$l.a&&t<=$l.f)return t-($l.a-10)}function rK(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=_B(t.charCodeAt(i)),a=_B(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Uhe(t){return nK(oD(t))}function OS(t){return iD(t),nK(oD(Uint8Array.from(t).reverse()))}function sK(t,e){return rK(t.toString(16).padStart(e*2,"0"))}function t3(t,e){return sK(t,e).reverse()}function zl(t,e,n){let r;if(typeof e=="string")try{r=rK(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(sD(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function IB(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];iD(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const NT=t=>typeof t=="bigint"&&rD<=t;function Fhe(t,e,n){return NT(t)&&NT(e)&&NT(n)&&e<=t&&t<n}function Yw(t,e,n,r){if(!Fhe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function jhe(t){let e;for(e=0;t>rD;t>>=tK,e+=1);return e}const $he=t=>(Bhe<<BigInt(t-1))-tK,zhe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||sD(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function aD(t,e,n={}){const r=(s,i,o)=>{const a=zhe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function NB(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const vs=BigInt(0),Ar=BigInt(1),Ff=BigInt(2),Whe=BigInt(3),n3=BigInt(4),TB=BigInt(5),kB=BigInt(8);function is(t,e){const n=t%e;return n>=vs?n:e+n}function Hhe(t,e,n){if(e<vs)throw new Error("invalid exponent, negatives unsupported");if(n<=vs)throw new Error("invalid modulus");if(n===Ar)return vs;let r=Ar;for(;e>vs;)e&Ar&&(r=r*t%n),t=t*t%n,e>>=Ar;return r}function Dc(t,e,n){let r=t;for(;e-- >vs;)r*=r,r%=n;return r}function PB(t,e){if(t===vs)throw new Error("invert: expected non-zero number");if(e<=vs)throw new Error("invert: expected positive modulus, got "+e);let n=is(t,e),r=e,s=vs,i=Ar;for(;n!==vs;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Ar)throw new Error("invert: does not exist");return is(s,e)}function Vhe(t){const e=(t-Ar)/Ff;let n,r,s;for(n=t-Ar,r=0;n%Ff===vs;n/=Ff,r++);for(s=Ff;s<t&&Hhe(s,e,t)!==t-Ar;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Ar)/n3;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Ar)/Ff;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Ar<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function Khe(t){if(t%n3===Whe){const e=(t+Ar)/n3;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%kB===TB){const e=(t-TB)/kB;return function(n,r){const s=n.mul(r,Ff),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,Ff),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return Vhe(t)}const qhe=(t,e)=>(is(t,e)&Ar)===Ar,Ghe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Yhe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Ghe.reduce((r,s)=>(r[s]="function",r),e);return aD(t,n)}function Zhe(t,e,n){if(n<vs)throw new Error("invalid exponent, negatives unsupported");if(n===vs)return t.ONE;if(n===Ar)return e;let r=t.ONE,s=e;for(;n>vs;)n&Ar&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Ar;return r}function Qhe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function iK(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function oK(t,e,n=!1,r={}){if(t<=vs)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=iK(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:$he(s),ZERO:vs,ONE:Ar,create:c=>is(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return vs<=c&&c<t},is0:c=>c===vs,isOdd:c=>(c&Ar)===Ar,neg:c=>is(-c,t),eql:(c,l)=>c===l,sqr:c=>is(c*c,t),add:(c,l)=>is(c+l,t),sub:(c,l)=>is(c-l,t),mul:(c,l)=>is(c*l,t),pow:(c,l)=>Zhe(a,c,l),div:(c,l)=>is(c*PB(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>PB(c,t),sqrt:r.sqrt||(c=>(o||(o=Khe(t)),o(a,c))),invertBatch:c=>Qhe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?t3(c,i):sK(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?OS(c):Uhe(c)}});return Object.freeze(a)}const RB=BigInt(0),QA=BigInt(1);function TT(t,e){const n=e.negate();return t?n:e}function aK(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function kT(t,e){aK(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function Jhe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Xhe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const PT=new WeakMap,cK=new WeakMap;function RT(t){return cK.get(t)||1}function efe(t,e){return{constTimeNegate:TT,hasPrecomputes(n){return RT(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>RB;)r&QA&&(s=s.add(i)),i=i.double(),r>>=QA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=kT(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=kT(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=QA);const m=f,E=f+Math.abs(p)-1,b=h%2!==0,x=p<0;p===0?c=c.add(TT(b,r[m])):a=a.add(TT(x,r[E]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=kT(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===RB)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=QA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=PT.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&PT.set(r,s(i))),i},wNAFCached(n,r,s){const i=RT(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=RT(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){aK(r,e),cK.set(n,r),PT.delete(n)}}}function tfe(t,e,n,r){if(Jhe(n,t),Xhe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=jhe(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],m=Number(p>>BigInt(d)&BigInt(a));c[m]=c[m].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function nfe(t){return Yhe(t.Fp),aD(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...iK(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Ha=BigInt(0),qi=BigInt(1),JA=BigInt(2),rfe=BigInt(8),sfe={zip215:!0};function ife(t){const e=nfe(t);return aD(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function ofe(t){const e=ife(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=JA<<BigInt(a*8)-qi,u=n.create,d=oK(e.n,e.nBitLength),h=e.uvRatio||((g,A)=>{try{return{isValid:!0,value:n.sqrt(g*n.inv(A))}}catch{return{isValid:!1,value:Ha}}}),f=e.adjustScalarBytes||(g=>g),p=e.domain||((g,A,I)=>{if(IT("phflag",I),A.length||I)throw new Error("Contexts/pre-hash are not supported");return g});function m(g,A){Yw("coordinate "+g,A,Ha,l)}function E(g){if(!(g instanceof w))throw new Error("ExtendedPoint expected")}const b=NB((g,A)=>{const{ex:I,ey:T,ez:R}=g,B=g.is0();A==null&&(A=B?rfe:n.inv(R));const O=u(I*A),S=u(T*A),z=u(R*A);if(B)return{x:Ha,y:qi};if(z!==qi)throw new Error("invZ was invalid");return{x:O,y:S}}),x=NB(g=>{const{a:A,d:I}=e;if(g.is0())throw new Error("bad point: ZERO");const{ex:T,ey:R,ez:B,et:O}=g,S=u(T*T),z=u(R*R),Y=u(B*B),J=u(Y*Y),ae=u(S*A),pe=u(Y*u(ae+z)),ve=u(J+u(I*u(S*z)));if(pe!==ve)throw new Error("bad point: equation left != right (1)");const de=u(T*R),$e=u(B*O);if(de!==$e)throw new Error("bad point: equation left != right (2)");return!0});class w{constructor(A,I,T,R){this.ex=A,this.ey=I,this.ez=T,this.et=R,m("x",A),m("y",I),m("z",T),m("t",R),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(A){if(A instanceof w)throw new Error("extended point not allowed");const{x:I,y:T}=A||{};return m("x",I),m("y",T),new w(I,T,qi,u(I*T))}static normalizeZ(A){const I=n.invertBatch(A.map(T=>T.ez));return A.map((T,R)=>T.toAffine(I[R])).map(w.fromAffine)}static msm(A,I){return tfe(w,d,A,I)}_setWindowSize(A){L.setWindowSize(this,A)}assertValidity(){x(this)}equals(A){E(A);const{ex:I,ey:T,ez:R}=this,{ex:B,ey:O,ez:S}=A,z=u(I*S),Y=u(B*R),J=u(T*S),ae=u(O*R);return z===Y&&J===ae}is0(){return this.equals(w.ZERO)}negate(){return new w(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:A}=e,{ex:I,ey:T,ez:R}=this,B=u(I*I),O=u(T*T),S=u(JA*u(R*R)),z=u(A*B),Y=I+T,J=u(u(Y*Y)-B-O),ae=z+O,pe=ae-S,ve=z-O,de=u(J*pe),$e=u(ae*ve),Te=u(J*ve),dt=u(pe*ae);return new w(de,$e,dt,Te)}add(A){E(A);const{a:I,d:T}=e,{ex:R,ey:B,ez:O,et:S}=this,{ex:z,ey:Y,ez:J,et:ae}=A;if(I===BigInt(-1)){const aa=u((B-R)*(Y+z)),dn=u((B+R)*(Y-z)),Cn=u(dn-aa);if(Cn===Ha)return this.double();const _r=u(O*JA*ae),gn=u(S*JA*J),hn=gn+_r,Ys=dn+aa,Pn=gn-_r,qn=u(hn*Cn),No=u(Ys*Pn),Gn=u(hn*Pn),j=u(Cn*Ys);return new w(qn,No,j,Gn)}const pe=u(R*z),ve=u(B*Y),de=u(S*T*ae),$e=u(O*J),Te=u((R+B)*(z+Y)-pe-ve),dt=$e-de,vt=$e+de,rt=u(ve-I*pe),cn=u(Te*dt),_i=u(vt*rt),Vt=u(Te*rt),Dn=u(dt*vt);return new w(cn,_i,Dn,Vt)}subtract(A){return this.add(A.negate())}wNAF(A){return L.wNAFCached(this,A,w.normalizeZ)}multiply(A){const I=A;Yw("scalar",I,qi,r);const{p:T,f:R}=this.wNAF(I);return w.normalizeZ([T,R])[0]}multiplyUnsafe(A,I=w.ZERO){const T=A;return Yw("scalar",T,Ha,r),T===Ha?_:this.is0()||T===qi?this:L.wNAFCachedUnsafe(this,T,w.normalizeZ,I)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return L.unsafeLadder(this,r).is0()}toAffine(A){return b(this,A)}clearCofactor(){const{h:A}=e;return A===qi?this:this.multiplyUnsafe(A)}static fromHex(A,I=!1){const{d:T,a:R}=e,B=n.BYTES;A=zl("pointHex",A,B),IT("zip215",I);const O=A.slice(),S=A[B-1];O[B-1]=S&-129;const z=OS(O),Y=I?l:n.ORDER;Yw("pointHex.y",z,Ha,Y);const J=u(z*z),ae=u(J-qi),pe=u(T*J-R);let{isValid:ve,value:de}=h(ae,pe);if(!ve)throw new Error("Point.fromHex: invalid y coordinate");const $e=(de&qi)===qi,Te=(S&128)!==0;if(!I&&de===Ha&&Te)throw new Error("Point.fromHex: x=0 and x_0=1");return Te!==$e&&(de=u(-de)),w.fromAffine({x:de,y:z})}static fromPrivateKey(A){return M(A).point}toRawBytes(){const{x:A,y:I}=this.toAffine(),T=t3(I,n.BYTES);return T[T.length-1]|=A&qi?128:0,T}toHex(){return oD(this.toRawBytes())}}w.BASE=new w(e.Gx,e.Gy,qi,u(e.Gx*e.Gy)),w.ZERO=new w(Ha,qi,qi,Ha);const{BASE:N,ZERO:_}=w,L=efe(w,a*8);function U(g){return is(g,r)}function F(g){return U(OS(g))}function M(g){const A=n.BYTES;g=zl("private key",g,A);const I=zl("hashed private key",i(g),2*A),T=f(I.slice(0,A)),R=I.slice(A,2*A),B=F(T),O=N.multiply(B),S=O.toRawBytes();return{head:T,prefix:R,scalar:B,point:O,pointBytes:S}}function W(g){return M(g).pointBytes}function H(g=new Uint8Array,...A){const I=IB(...A);return F(i(p(I,zl("context",g),!!s)))}function K(g,A,I={}){g=zl("message",g),s&&(g=s(g));const{prefix:T,scalar:R,pointBytes:B}=M(A),O=H(I.context,T,g),S=N.multiply(O).toRawBytes(),z=H(I.context,S,B,g),Y=U(O+z*R);Yw("signature.s",Y,Ha,r);const J=IB(S,t3(Y,n.BYTES));return zl("result",J,n.BYTES*2)}const P=sfe;function y(g,A,I,T=P){const{context:R,zip215:B}=T,O=n.BYTES;g=zl("signature",g,2*O),A=zl("message",A),I=zl("publicKey",I,O),B!==void 0&&IT("zip215",B),s&&(A=s(A));const S=OS(g.slice(O,2*O));let z,Y,J;try{z=w.fromHex(I,B),Y=w.fromHex(g.slice(0,O),B),J=N.multiplyUnsafe(S)}catch{return!1}if(!B&&z.isSmallOrder())return!1;const ae=H(R,Y.toRawBytes(),z.toRawBytes(),A);return Y.add(z.multiplyUnsafe(ae)).subtract(J).clearCofactor().equals(w.ZERO)}return N._setWindowSize(8),{CURVE:e,getPublicKey:W,sign:K,verify:y,ExtendedPoint:w,utils:{getExtendedPublicKey:M,randomPrivateKey:()=>o(n.BYTES),precompute(g=8,A=w.BASE){return A._setWindowSize(g),A.multiply(BigInt(3)),A}}}}BigInt(0),BigInt(1);const cD=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),OB=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const afe=BigInt(1),MB=BigInt(2);BigInt(3);const cfe=BigInt(5),lfe=BigInt(8);function ufe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=cD,o=t*t%i*t%i,a=Dc(o,MB,i)*o%i,c=Dc(a,afe,i)*t%i,l=Dc(c,cfe,i)*c%i,u=Dc(l,e,i)*l%i,d=Dc(u,n,i)*u%i,h=Dc(d,r,i)*d%i,f=Dc(h,s,i)*h%i,p=Dc(f,s,i)*h%i,m=Dc(p,e,i)*l%i;return{pow_p_5_8:Dc(m,MB,i)*t%i,b2:o}}function dfe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function hfe(t,e){const n=cD,r=is(e*e*e,n),s=is(r*r*e,n),i=ufe(t*s).pow_p_5_8;let o=is(t*r*i,n);const a=is(e*o*o,n),c=o,l=is(o*OB,n),u=a===t,d=a===is(-t,n),h=a===is(-t*OB,n);return u&&(o=c),(d||h)&&(o=l),qhe(o,n)&&(o=is(-o,n)),{isValid:u||d,value:o}}const ffe=(()=>oK(cD,void 0,!0))(),pfe=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:ffe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:lfe,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Dhe,randomBytes:XV,adjustScalarBytes:dfe,uvRatio:hfe}))(),lK=(()=>ofe(pfe))(),mfe="EdDSA",gfe="JWT",n_=".",nI="base64url",uK="utf8",dK="utf8",yfe=":",wfe="did",bfe="key",DB="base58btc",vfe="z",Efe="K36",Afe=32;function lD(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function hK(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?lD(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function fK(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=hK(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return lD(n)}function xfe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,E=0,b=0,x=p.length;b!==x&&p[b]===0;)b++,m++;for(var w=(x-b)*u+1>>>0,N=new Uint8Array(w);b!==x;){for(var _=p[b],L=0,U=w-1;(_!==0||L<E)&&U!==-1;U--,L++)_+=256*N[U]>>>0,N[U]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");E=L,b++}for(var F=w-E;F!==w&&N[F]===0;)F++;for(var M=c.repeat(m);F<w;++F)M+=t.charAt(N[F]);return M}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var E=0,b=0;p[m]===c;)E++,m++;for(var x=(p.length-m)*l+1>>>0,w=new Uint8Array(x);p[m];){var N=n[p.charCodeAt(m)];if(N===255)return;for(var _=0,L=x-1;(N!==0||_<b)&&L!==-1;L--,_++)N+=a*w[L]>>>0,w[L]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");b=_,m++}if(p[m]!==" "){for(var U=x-b;U!==x&&w[U]===0;)U++;for(var F=new Uint8Array(E+(x-U)),M=E;U!==x;)F[M++]=w[U++];return F}}}function f(p){var m=h(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Sfe=xfe,Cfe=Sfe;const pK=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},_fe=t=>new TextEncoder().encode(t),Ife=t=>new TextDecoder().decode(t);let Nfe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Tfe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return mK(this,e)}},kfe=class{constructor(e){this.decoders=e}or(e){return mK(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const mK=(t,e)=>new kfe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Pfe=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Nfe(e,n,r),this.decoder=new Tfe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const rI=({name:t,prefix:e,encode:n,decode:r})=>new Pfe(t,e,n,r),QE=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Cfe(n,e);return rI({prefix:t,name:e,encode:r,decode:i=>pK(s(i))})},Rfe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Ofe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Ks=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>rI({prefix:e,name:t,encode(s){return Ofe(s,r,n)},decode(s){return Rfe(s,r,n,t)}}),Mfe=rI({prefix:"\0",name:"identity",encode:t=>Ife(t),decode:t=>_fe(t)});var Dfe=Object.freeze({__proto__:null,identity:Mfe});const Bfe=Ks({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Lfe=Object.freeze({__proto__:null,base2:Bfe});const Ufe=Ks({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Ffe=Object.freeze({__proto__:null,base8:Ufe});const jfe=QE({prefix:"9",name:"base10",alphabet:"0123456789"});var $fe=Object.freeze({__proto__:null,base10:jfe});const zfe=Ks({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Wfe=Ks({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Hfe=Object.freeze({__proto__:null,base16:zfe,base16upper:Wfe});const Vfe=Ks({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Kfe=Ks({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),qfe=Ks({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Gfe=Ks({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Yfe=Ks({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Zfe=Ks({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Qfe=Ks({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Jfe=Ks({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Xfe=Ks({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var epe=Object.freeze({__proto__:null,base32:Vfe,base32upper:Kfe,base32pad:qfe,base32padupper:Gfe,base32hex:Yfe,base32hexupper:Zfe,base32hexpad:Qfe,base32hexpadupper:Jfe,base32z:Xfe});const tpe=QE({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),npe=QE({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var rpe=Object.freeze({__proto__:null,base36:tpe,base36upper:npe});const spe=QE({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ipe=QE({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var ope=Object.freeze({__proto__:null,base58btc:spe,base58flickr:ipe});const ape=Ks({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),cpe=Ks({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),lpe=Ks({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),upe=Ks({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var dpe=Object.freeze({__proto__:null,base64:ape,base64pad:cpe,base64url:lpe,base64urlpad:upe});const gK=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),hpe=gK.reduce((t,e,n)=>(t[n]=e,t),[]),fpe=gK.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function ppe(t){return t.reduce((e,n)=>(e+=hpe[n],e),"")}function mpe(t){const e=[];for(const n of t){const r=fpe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const gpe=rI({prefix:"🚀",name:"base256emoji",encode:ppe,decode:mpe});var ype=Object.freeze({__proto__:null,base256emoji:gpe}),wpe=yK,BB=128,bpe=127,vpe=~bpe,Epe=Math.pow(2,31);function yK(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Epe;)e[n++]=t&255|BB,t/=128;for(;t&vpe;)e[n++]=t&255|BB,t>>>=7;return e[n]=t|0,yK.bytes=n-r+1,e}var Ape=r3,xpe=128,LB=127;function r3(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw r3.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&LB)<<s:(o&LB)*Math.pow(2,s),s+=7}while(o>=xpe);return r3.bytes=i-r,n}var Spe=Math.pow(2,7),Cpe=Math.pow(2,14),_pe=Math.pow(2,21),Ipe=Math.pow(2,28),Npe=Math.pow(2,35),Tpe=Math.pow(2,42),kpe=Math.pow(2,49),Ppe=Math.pow(2,56),Rpe=Math.pow(2,63),Ope=function(t){return t<Spe?1:t<Cpe?2:t<_pe?3:t<Ipe?4:t<Npe?5:t<Tpe?6:t<kpe?7:t<Ppe?8:t<Rpe?9:10},Mpe={encode:wpe,decode:Ape,encodingLength:Ope},wK=Mpe;const UB=(t,e,n=0)=>(wK.encode(t,e,n),e),FB=t=>wK.encodingLength(t),s3=(t,e)=>{const n=e.byteLength,r=FB(t),s=r+FB(n),i=new Uint8Array(s+n);return UB(t,i,0),UB(n,i,r),i.set(e,s),new Dpe(t,n,e,i)};let Dpe=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const bK=({name:t,code:e,encode:n})=>new Bpe(t,e,n);let Bpe=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?s3(this.code,n):n.then(r=>s3(this.code,r))}else throw Error("Unknown type, must be binary type")}};const vK=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Lpe=bK({name:"sha2-256",code:18,encode:vK("SHA-256")}),Upe=bK({name:"sha2-512",code:19,encode:vK("SHA-512")});var Fpe=Object.freeze({__proto__:null,sha256:Lpe,sha512:Upe});const EK=0,jpe="identity",AK=pK,$pe=t=>s3(EK,AK(t)),zpe={code:EK,name:jpe,encode:AK,digest:$pe};var Wpe=Object.freeze({__proto__:null,identity:zpe});new TextEncoder,new TextDecoder;const jB={...Dfe,...Lfe,...Ffe,...$fe,...Hfe,...epe,...rpe,...ope,...dpe,...ype};({...Fpe,...Wpe});function xK(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const $B=xK("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),OT=xK("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=hK(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),SK={utf8:$B,"utf-8":$B,hex:jB.base16,latin1:OT,ascii:OT,binary:OT,...jB};function sI(t,e="utf8"){const n=SK[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function xw(t,e="utf8"){const n=SK[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?lD(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function zB(t){return im(sI(xw(t,nI),uK))}function r_(t){return sI(xw(Yu(t),uK),nI)}function CK(t){const e=xw(Efe,DB),n=vfe+sI(fK([e,t]),DB);return[wfe,bfe,n].join(yfe)}function Hpe(t){return sI(t,nI)}function Vpe(t){return xw(t,nI)}function Kpe(t){return xw([r_(t.header),r_(t.payload)].join(n_),dK)}function qpe(t){return[r_(t.header),r_(t.payload),Hpe(t.signature)].join(n_)}function i3(t){const e=t.split(n_),n=zB(e[0]),r=zB(e[1]),s=Vpe(e[2]),i=xw(e.slice(0,2).join(n_),dK);return{header:n,payload:r,signature:s,data:i}}function WB(t=XV(Afe)){const e=lK.getPublicKey(t);return{secretKey:fK([t,e]),publicKey:e}}async function Gpe(t,e,n,r,s=Ce.fromMiliseconds(Date.now())){const i={alg:mfe,typ:gfe},o=CK(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=Kpe({header:i,payload:c}),u=lK.sign(l,r.secretKey.slice(0,32));return qpe({header:i,payload:c,signature:u})}function Ype(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _K={exports:{}},Cr=_K.exports={},Kc,qc;function o3(){throw new Error("setTimeout has not been defined")}function a3(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Kc=setTimeout:Kc=o3}catch{Kc=o3}try{typeof clearTimeout=="function"?qc=clearTimeout:qc=a3}catch{qc=a3}})();function IK(t){if(Kc===setTimeout)return setTimeout(t,0);if((Kc===o3||!Kc)&&setTimeout)return Kc=setTimeout,setTimeout(t,0);try{return Kc(t,0)}catch{try{return Kc.call(null,t,0)}catch{return Kc.call(this,t,0)}}}function Zpe(t){if(qc===clearTimeout)return clearTimeout(t);if((qc===a3||!qc)&&clearTimeout)return qc=clearTimeout,clearTimeout(t);try{return qc(t)}catch{try{return qc.call(null,t)}catch{return qc.call(this,t)}}}var Pu=[],N0=!1,ap,MS=-1;function Qpe(){!N0||!ap||(N0=!1,ap.length?Pu=ap.concat(Pu):MS=-1,Pu.length&&NK())}function NK(){if(!N0){var t=IK(Qpe);N0=!0;for(var e=Pu.length;e;){for(ap=Pu,Pu=[];++MS<e;)ap&&ap[MS].run();MS=-1,e=Pu.length}ap=null,N0=!1,Zpe(t)}}Cr.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];Pu.push(new TK(t,e)),Pu.length===1&&!N0&&IK(NK)};function TK(t,e){this.fun=t,this.array=e}TK.prototype.run=function(){this.fun.apply(null,this.array)};Cr.title="browser";Cr.browser=!0;Cr.env={};Cr.argv=[];Cr.version="";Cr.versions={};function rd(){}Cr.on=rd;Cr.addListener=rd;Cr.once=rd;Cr.off=rd;Cr.removeListener=rd;Cr.removeAllListeners=rd;Cr.emit=rd;Cr.prependListener=rd;Cr.prependOnceListener=rd;Cr.listeners=function(t){return[]};Cr.binding=function(t){throw new Error("process.binding is not supported")};Cr.cwd=function(){return"/"};Cr.chdir=function(t){throw new Error("process.chdir is not supported")};Cr.umask=function(){return 0};var Jpe=_K.exports;const sn=Ype(Jpe);var HB=globalThis&&globalThis.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},Xpe=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),eme=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=sn.platform}return t}(),tme=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),nme=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),rme=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),sme=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,ime=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,VB=3,ome=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",sme]],KB=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ame(t){return t?qB(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new rme:typeof navigator<"u"?qB(navigator.userAgent):ume()}function cme(t){return t!==""&&ome.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function qB(t){var e=cme(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new nme;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<VB&&(s=HB(HB([],s,!0),dme(VB-s.length),!0)):s=[];var i=s.join("."),o=lme(t),a=ime.exec(t);return a&&a[1]?new tme(n,i,o,a[1]):new Xpe(n,i,o)}function lme(t){for(var e=0,n=KB.length;e<n;e++){var r=KB[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function ume(){var t=typeof sn<"u"&&sn.version;return t?new eme(sn.version.slice(1)):null}function dme(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.getLocalStorage=Fn.getLocalStorageOrThrow=Fn.getCrypto=Fn.getCryptoOrThrow=kK=Fn.getLocation=Fn.getLocationOrThrow=uD=Fn.getNavigator=Fn.getNavigatorOrThrow=om=Fn.getDocument=Fn.getDocumentOrThrow=Fn.getFromWindowOrThrow=Fn.getFromWindow=void 0;function Pm(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Fn.getFromWindow=Pm;function Sw(t){const e=Pm(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Fn.getFromWindowOrThrow=Sw;function hme(){return Sw("document")}Fn.getDocumentOrThrow=hme;function fme(){return Pm("document")}var om=Fn.getDocument=fme;function pme(){return Sw("navigator")}Fn.getNavigatorOrThrow=pme;function mme(){return Pm("navigator")}var uD=Fn.getNavigator=mme;function gme(){return Sw("location")}Fn.getLocationOrThrow=gme;function yme(){return Pm("location")}var kK=Fn.getLocation=yme;function wme(){return Sw("crypto")}Fn.getCryptoOrThrow=wme;function bme(){return Pm("crypto")}Fn.getCrypto=bme;function vme(){return Sw("localStorage")}Fn.getLocalStorageOrThrow=vme;function Eme(){return Pm("localStorage")}Fn.getLocalStorage=Eme;var dD={};Object.defineProperty(dD,"__esModule",{value:!0});var PK=dD.getWindowMetadata=void 0;const GB=Fn;function Ame(){let t,e;try{t=GB.getDocumentOrThrow(),e=GB.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],m=p.getAttribute("rel");if(m&&m.toLowerCase().indexOf("icon")>-1){const E=p.getAttribute("href");if(E)if(E.toLowerCase().indexOf("https:")===-1&&E.toLowerCase().indexOf("http:")===-1&&E.indexOf("//")!==0){let b=e.protocol+"//"+e.host;if(E.indexOf("/")===0)b+=E;else{const x=e.pathname.split("/");x.pop();const w=x.join("/");b+=w+"/"+E}h.push(b)}else if(E.indexOf("//")===0){const b=e.protocol+E;h.push(b)}else h.push(E)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],m=["itemprop","property","name"].map(E=>p.getAttribute(E)).filter(E=>E?d.includes(E):!1);if(m.length&&m){const E=p.getAttribute("content");if(E)return E}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}PK=dD.getWindowMetadata=Ame;function xme(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,E=0,b=0,x=p.length;b!==x&&p[b]===0;)b++,m++;for(var w=(x-b)*u+1>>>0,N=new Uint8Array(w);b!==x;){for(var _=p[b],L=0,U=w-1;(_!==0||L<E)&&U!==-1;U--,L++)_+=256*N[U]>>>0,N[U]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");E=L,b++}for(var F=w-E;F!==w&&N[F]===0;)F++;for(var M=c.repeat(m);F<w;++F)M+=t.charAt(N[F]);return M}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var E=0,b=0;p[m]===c;)E++,m++;for(var x=(p.length-m)*l+1>>>0,w=new Uint8Array(x);p[m];){var N=n[p.charCodeAt(m)];if(N===255)return;for(var _=0,L=x-1;(N!==0||_<b)&&L!==-1;L--,_++)N+=a*w[L]>>>0,w[L]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");b=_,m++}if(p[m]!==" "){for(var U=x-b;U!==x&&w[U]===0;)U++;for(var F=new Uint8Array(E+(x-U)),M=E;U!==x;)F[M++]=w[U++];return F}}}function f(p){var m=h(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Sme=xme,Cme=Sme;const _me=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Ime=t=>new TextEncoder().encode(t),Nme=t=>new TextDecoder().decode(t);let Tme=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},kme=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return RK(this,e)}};class Pme{constructor(e){this.decoders=e}or(e){return RK(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const RK=(t,e)=>new Pme({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Rme{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Tme(e,n,r),this.decoder=new kme(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const iI=({name:t,prefix:e,encode:n,decode:r})=>new Rme(t,e,n,r),JE=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Cme(n,e);return iI({prefix:t,name:e,encode:r,decode:i=>_me(s(i))})},Ome=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Mme=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},qs=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>iI({prefix:e,name:t,encode(s){return Mme(s,r,n)},decode(s){return Ome(s,r,n,t)}}),Dme=iI({prefix:"\0",name:"identity",encode:t=>Nme(t),decode:t=>Ime(t)}),Bme=Object.freeze(Object.defineProperty({__proto__:null,identity:Dme},Symbol.toStringTag,{value:"Module"})),Lme=qs({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Ume=Object.freeze(Object.defineProperty({__proto__:null,base2:Lme},Symbol.toStringTag,{value:"Module"})),Fme=qs({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),jme=Object.freeze(Object.defineProperty({__proto__:null,base8:Fme},Symbol.toStringTag,{value:"Module"})),$me=JE({prefix:"9",name:"base10",alphabet:"0123456789"}),zme=Object.freeze(Object.defineProperty({__proto__:null,base10:$me},Symbol.toStringTag,{value:"Module"})),Wme=qs({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Hme=qs({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Vme=Object.freeze(Object.defineProperty({__proto__:null,base16:Wme,base16upper:Hme},Symbol.toStringTag,{value:"Module"})),Kme=qs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),qme=qs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Gme=qs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Yme=qs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Zme=qs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Qme=qs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Jme=qs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Xme=qs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ege=qs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),tge=Object.freeze(Object.defineProperty({__proto__:null,base32:Kme,base32hex:Zme,base32hexpad:Jme,base32hexpadupper:Xme,base32hexupper:Qme,base32pad:Gme,base32padupper:Yme,base32upper:qme,base32z:ege},Symbol.toStringTag,{value:"Module"})),nge=JE({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),rge=JE({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),sge=Object.freeze(Object.defineProperty({__proto__:null,base36:nge,base36upper:rge},Symbol.toStringTag,{value:"Module"})),ige=JE({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),oge=JE({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),age=Object.freeze(Object.defineProperty({__proto__:null,base58btc:ige,base58flickr:oge},Symbol.toStringTag,{value:"Module"})),cge=qs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),lge=qs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),uge=qs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),dge=qs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),hge=Object.freeze(Object.defineProperty({__proto__:null,base64:cge,base64pad:lge,base64url:uge,base64urlpad:dge},Symbol.toStringTag,{value:"Module"})),OK=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),fge=OK.reduce((t,e,n)=>(t[n]=e,t),[]),pge=OK.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function mge(t){return t.reduce((e,n)=>(e+=fge[n],e),"")}function gge(t){const e=[];for(const n of t){const r=pge[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const yge=iI({prefix:"🚀",name:"base256emoji",encode:mge,decode:gge}),wge=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:yge},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const YB={...Bme,...Ume,...jme,...zme,...Vme,...tge,...sge,...age,...hge,...wge},bge={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},vge="PARSE_ERROR",Ege="INVALID_REQUEST",Age="METHOD_NOT_FOUND",xge="INVALID_PARAMS",MK="INTERNAL_ERROR",hD="SERVER_ERROR",Sge=[-32700,-32600,-32601,-32602,-32603],r1={[vge]:{code:-32700,message:"Parse error"},[Ege]:{code:-32600,message:"Invalid Request"},[Age]:{code:-32601,message:"Method not found"},[xge]:{code:-32602,message:"Invalid params"},[MK]:{code:-32603,message:"Internal error"},[hD]:{code:-32e3,message:"Server error"}},DK=hD;function Cge(t){return Sge.includes(t)}function ZB(t){return Object.keys(r1).includes(t)?r1[t]:r1[DK]}function _ge(t){const e=Object.values(r1).find(n=>n.code===t);return e||r1[DK]}function BK(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var LK={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var c3=function(t,e){return c3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},c3(t,e)};function Ige(t,e){c3(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var l3=function(){return l3=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l3.apply(this,arguments)};function Nge(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Tge(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function kge(t,e){return function(n,r){e(n,r,t)}}function Pge(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Rge(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Oge(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Mge(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function Dge(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function u3(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function UK(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function Bge(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(UK(arguments[e]));return t}function Lge(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function rv(t){return this instanceof rv?(this.v=t,this):new rv(t)}function Uge(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,m){i.push([h,f,p,m])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof rv?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Fge(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:rv(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function jge(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof u3=="function"?u3(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function $ge(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function zge(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Wge(t){return t&&t.__esModule?t:{default:t}}function Hge(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Vge(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Kge=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return l3},__asyncDelegator:Fge,__asyncGenerator:Uge,__asyncValues:jge,__await:rv,__awaiter:Rge,__classPrivateFieldGet:Hge,__classPrivateFieldSet:Vge,__createBinding:Mge,__decorate:Tge,__exportStar:Dge,__extends:Ige,__generator:Oge,__importDefault:Wge,__importStar:zge,__makeTemplateObject:$ge,__metadata:Pge,__param:kge,__read:UK,__rest:Nge,__spread:Bge,__spreadArrays:Lge,__values:u3},Symbol.toStringTag,{value:"Module"})),qge=Ol(Kge);var Wl={},QB;function Gge(){if(QB)return Wl;QB=1,Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.isBrowserCryptoAvailable=Wl.getSubtleCrypto=Wl.getBrowerCrypto=void 0;function t(){return(globalThis==null?void 0:globalThis.crypto)||(globalThis==null?void 0:globalThis.msCrypto)||{}}Wl.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}Wl.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return Wl.isBrowserCryptoAvailable=n,Wl}var Hl={},JB;function Yge(){if(JB)return Hl;JB=1,Object.defineProperty(Hl,"__esModule",{value:!0}),Hl.isBrowser=Hl.isNode=Hl.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Hl.isReactNative=t;function e(){return typeof sn<"u"&&typeof sn.versions<"u"&&typeof sn.versions.node<"u"}Hl.isNode=e;function n(){return!t()&&!e()}return Hl.isBrowser=n,Hl}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=qge;e.__exportStar(Gge(),t),e.__exportStar(Yge(),t)})(LK);function Wc(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Ah(t=6){return BigInt(Wc(t))}function rl(t,e,n){return{id:n||Wc(),jsonrpc:"2.0",method:t,params:e}}function sv(t,e){return{id:t,jsonrpc:"2.0",result:e}}function oI(t,e,n){return{id:t,jsonrpc:"2.0",error:Zge(e,n)}}function Zge(t,e){return typeof t>"u"?ZB(MK):(typeof t=="string"&&(t=Object.assign(Object.assign({},ZB(hD)),{message:t})),typeof e<"u"&&(t.data=e),Cge(t.code)&&(t=_ge(t.code)),t)}let Qge=class{},Jge=class extends Qge{constructor(){super()}},Xge=class extends Jge{constructor(e){super()}};const e0e="^https?:",t0e="^wss?:";function n0e(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function FK(t,e){const n=n0e(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function XB(t){return FK(t,e0e)}function eL(t){return FK(t,t0e)}function r0e(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function jK(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function fD(t){return jK(t)&&"method"in t}function aI(t){return jK(t)&&(Hc(t)||Sa(t))}function Hc(t){return"result"in t}function Sa(t){return"error"in t}let $a=class extends Xge{constructor(e){super(e),this.events=new ja.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(rl(e.method,e.params||[],e.id||Ah().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Sa(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),aI(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const s0e=()=>typeof WebSocket<"u"?WebSocket:typeof globalThis<"u"&&typeof globalThis.WebSocket<"u"?globalThis.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),i0e=()=>typeof WebSocket<"u"||typeof globalThis<"u"&&typeof globalThis.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",tL=t=>t.split("?")[0],nL=10,o0e=s0e();let a0e=class{constructor(e){if(this.url=e,this.events=new ja.EventEmitter,this.registering=!1,!eL(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Yu(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!eL(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=LK.isReactNative()?void 0:{rejectUnauthorized:!r0e(e)},i=new o0e(e,[],s);i0e()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?im(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=oI(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return BK(e,tL(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>nL&&this.events.setMaxListeners(nL)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${tL(this.url)}`));return this.events.emit("register_error",n),n}};var d3={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof globalThis<"u"&&globalThis,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof i<"u"&&i||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(g){return g&&DataView.prototype.isPrototypeOf(g)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(g){return g&&u.indexOf(Object.prototype.toString.call(g))>-1};function h(g){if(typeof g!="string"&&(g=String(g)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(g)||g==="")throw new TypeError('Invalid character in header field name: "'+g+'"');return g.toLowerCase()}function f(g){return typeof g!="string"&&(g=String(g)),g}function p(g){var A={next:function(){var I=g.shift();return{done:I===void 0,value:I}}};return c.iterable&&(A[Symbol.iterator]=function(){return A}),A}function m(g){this.map={},g instanceof m?g.forEach(function(A,I){this.append(I,A)},this):Array.isArray(g)?g.forEach(function(A){if(A.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+A.length);this.append(A[0],A[1])},this):g&&Object.getOwnPropertyNames(g).forEach(function(A){this.append(A,g[A])},this)}m.prototype.append=function(g,A){g=h(g),A=f(A);var I=this.map[g];this.map[g]=I?I+", "+A:A},m.prototype.delete=function(g){delete this.map[h(g)]},m.prototype.get=function(g){return g=h(g),this.has(g)?this.map[g]:null},m.prototype.has=function(g){return this.map.hasOwnProperty(h(g))},m.prototype.set=function(g,A){this.map[h(g)]=f(A)},m.prototype.forEach=function(g,A){for(var I in this.map)this.map.hasOwnProperty(I)&&g.call(A,this.map[I],I,this)},m.prototype.keys=function(){var g=[];return this.forEach(function(A,I){g.push(I)}),p(g)},m.prototype.values=function(){var g=[];return this.forEach(function(A){g.push(A)}),p(g)},m.prototype.entries=function(){var g=[];return this.forEach(function(A,I){g.push([I,A])}),p(g)},c.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function E(g){if(!g._noBody){if(g.bodyUsed)return Promise.reject(new TypeError("Already read"));g.bodyUsed=!0}}function b(g){return new Promise(function(A,I){g.onload=function(){A(g.result)},g.onerror=function(){I(g.error)}})}function x(g){var A=new FileReader,I=b(A);return A.readAsArrayBuffer(g),I}function w(g){var A=new FileReader,I=b(A),T=/charset=([A-Za-z0-9_-]+)/.exec(g.type),R=T?T[1]:"utf-8";return A.readAsText(g,R),I}function N(g){for(var A=new Uint8Array(g),I=new Array(A.length),T=0;T<A.length;T++)I[T]=String.fromCharCode(A[T]);return I.join("")}function _(g){if(g.slice)return g.slice(0);var A=new Uint8Array(g.byteLength);return A.set(new Uint8Array(g)),A.buffer}function L(){return this.bodyUsed=!1,this._initBody=function(g){this.bodyUsed=this.bodyUsed,this._bodyInit=g,g?typeof g=="string"?this._bodyText=g:c.blob&&Blob.prototype.isPrototypeOf(g)?this._bodyBlob=g:c.formData&&FormData.prototype.isPrototypeOf(g)?this._bodyFormData=g:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(g)?this._bodyText=g.toString():c.arrayBuffer&&c.blob&&l(g)?(this._bodyArrayBuffer=_(g.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(g)||d(g))?this._bodyArrayBuffer=_(g):this._bodyText=g=Object.prototype.toString.call(g):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof g=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(g)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var g=E(this);if(g)return g;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var g=E(this);return g||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(x);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var g=E(this);if(g)return g;if(this._bodyBlob)return w(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(N(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(W)}),this.json=function(){return this.text().then(JSON.parse)},this}var U=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function F(g){var A=g.toUpperCase();return U.indexOf(A)>-1?A:g}function M(g,A){if(!(this instanceof M))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');A=A||{};var I=A.body;if(g instanceof M){if(g.bodyUsed)throw new TypeError("Already read");this.url=g.url,this.credentials=g.credentials,A.headers||(this.headers=new m(g.headers)),this.method=g.method,this.mode=g.mode,this.signal=g.signal,!I&&g._bodyInit!=null&&(I=g._bodyInit,g.bodyUsed=!0)}else this.url=String(g);if(this.credentials=A.credentials||this.credentials||"same-origin",(A.headers||!this.headers)&&(this.headers=new m(A.headers)),this.method=F(A.method||this.method||"GET"),this.mode=A.mode||this.mode||null,this.signal=A.signal||this.signal||function(){if("AbortController"in a){var B=new AbortController;return B.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&I)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(I),(this.method==="GET"||this.method==="HEAD")&&(A.cache==="no-store"||A.cache==="no-cache")){var T=/([?&])_=[^&]*/;if(T.test(this.url))this.url=this.url.replace(T,"$1_="+new Date().getTime());else{var R=/\?/;this.url+=(R.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}M.prototype.clone=function(){return new M(this,{body:this._bodyInit})};function W(g){var A=new FormData;return g.trim().split("&").forEach(function(I){if(I){var T=I.split("="),R=T.shift().replace(/\+/g," "),B=T.join("=").replace(/\+/g," ");A.append(decodeURIComponent(R),decodeURIComponent(B))}}),A}function H(g){var A=new m,I=g.replace(/\r?\n[\t ]+/g," ");return I.split("\r").map(function(T){return T.indexOf(`
`)===0?T.substr(1,T.length):T}).forEach(function(T){var R=T.split(":"),B=R.shift().trim();if(B){var O=R.join(":").trim();try{A.append(B,O)}catch(S){console.warn("Response "+S.message)}}}),A}L.call(M.prototype);function K(g,A){if(!(this instanceof K))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(A||(A={}),this.type="default",this.status=A.status===void 0?200:A.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=A.statusText===void 0?"":""+A.statusText,this.headers=new m(A.headers),this.url=A.url||"",this._initBody(g)}L.call(K.prototype),K.prototype.clone=function(){return new K(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},K.error=function(){var g=new K(null,{status:200,statusText:""});return g.ok=!1,g.status=0,g.type="error",g};var P=[301,302,303,307,308];K.redirect=function(g,A){if(P.indexOf(A)===-1)throw new RangeError("Invalid status code");return new K(null,{status:A,headers:{location:g}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(A,I){this.message=A,this.name=I;var T=Error(A);this.stack=T.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function y(g,A){return new Promise(function(I,T){var R=new M(g,A);if(R.signal&&R.signal.aborted)return T(new o.DOMException("Aborted","AbortError"));var B=new XMLHttpRequest;function O(){B.abort()}B.onload=function(){var Y={statusText:B.statusText,headers:H(B.getAllResponseHeaders()||"")};R.url.indexOf("file://")===0&&(B.status<200||B.status>599)?Y.status=200:Y.status=B.status,Y.url="responseURL"in B?B.responseURL:Y.headers.get("X-Request-URL");var J="response"in B?B.response:B.responseText;setTimeout(function(){I(new K(J,Y))},0)},B.onerror=function(){setTimeout(function(){T(new TypeError("Network request failed"))},0)},B.ontimeout=function(){setTimeout(function(){T(new TypeError("Network request timed out"))},0)},B.onabort=function(){setTimeout(function(){T(new o.DOMException("Aborted","AbortError"))},0)};function S(Y){try{return Y===""&&a.location.href?a.location.href:Y}catch{return Y}}if(B.open(R.method,S(R.url),!0),R.credentials==="include"?B.withCredentials=!0:R.credentials==="omit"&&(B.withCredentials=!1),"responseType"in B&&(c.blob?B.responseType="blob":c.arrayBuffer&&(B.responseType="arraybuffer")),A&&typeof A.headers=="object"&&!(A.headers instanceof m||a.Headers&&A.headers instanceof a.Headers)){var z=[];Object.getOwnPropertyNames(A.headers).forEach(function(Y){z.push(h(Y)),B.setRequestHeader(Y,f(A.headers[Y]))}),R.headers.forEach(function(Y,J){z.indexOf(J)===-1&&B.setRequestHeader(J,Y)})}else R.headers.forEach(function(Y,J){B.setRequestHeader(J,Y)});R.signal&&(R.signal.addEventListener("abort",O),B.onreadystatechange=function(){B.readyState===4&&R.signal.removeEventListener("abort",O)}),B.send(typeof R._bodyInit>"u"?null:R._bodyInit)})}return y.polyfill=!0,a.fetch||(a.fetch=y,a.Headers=m,a.Request=M,a.Response=K),o.Headers=m,o.Request=M,o.Response=K,o.fetch=y,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(d3,d3.exports);var c0e=d3.exports;const rL=Qh(c0e);var l0e=Object.defineProperty,u0e=Object.defineProperties,d0e=Object.getOwnPropertyDescriptors,sL=Object.getOwnPropertySymbols,h0e=Object.prototype.hasOwnProperty,f0e=Object.prototype.propertyIsEnumerable,iL=(t,e,n)=>e in t?l0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oL=(t,e)=>{for(var n in e||(e={}))h0e.call(e,n)&&iL(t,n,e[n]);if(sL)for(var n of sL(e))f0e.call(e,n)&&iL(t,n,e[n]);return t},aL=(t,e)=>u0e(t,d0e(e));const p0e={Accept:"application/json","Content-Type":"application/json"},m0e="POST",cL={headers:p0e,method:m0e},lL=10;let Pc=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new ja.EventEmitter,this.isAvailable=!1,this.registering=!1,!XB(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=Yu(e),r=await(await rL(this.url,aL(oL({},cL),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!XB(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=Yu({id:1,jsonrpc:"2.0",method:"test",params:[]});await rL(e,aL(oL({},cL),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?im(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=oI(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return BK(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>lL&&this.events.setMaxListeners(lL)}};var g0e=20,y0e=1,am=1e6,uL=1e6,w0e=-7,b0e=21,v0e=!1,XE="[big.js] ",Rm=XE+"Invalid ",cI=Rm+"decimal places",E0e=Rm+"rounding mode",$K=XE+"Division by zero",An={},Sl=void 0,A0e=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function zK(){function t(e){var n=this;if(!(n instanceof t))return e===Sl?zK():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Rm+"value");e=e===0&&1/e<0?"-0":String(e)}x0e(n,e)}n.constructor=t}return t.prototype=An,t.DP=g0e,t.RM=y0e,t.NE=w0e,t.PE=b0e,t.strict=v0e,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function x0e(t,e){var n,r,s;if(!A0e.test(e))throw Error(Rm+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function Om(t,e,n,r){var s=t.c;if(n===Sl&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(E0e);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Sl))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Sl||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function Mm(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}An.abs=function(){var t=new this.constructor(this);return t.s=1,t};An.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};An.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>am)throw Error(cI);if(!s[0])throw Error($K);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,m=r.slice(0,a),E=m.length,b=t,x=b.c=[],w=0,N=o+(b.e=e.e-t.e)+1;for(b.s=i,i=N<0?0:N,h.unshift(0);E++<a;)m.push(0);do{for(l=0;l<10;l++){if(a!=(E=m.length))u=a>E?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=m[d]){u=s[d]>m[d]?1:-1;break}if(u<0){for(c=E==a?s:h;E;){if(m[--E]<c[E]){for(d=E;d&&!m[--d];)m[d]=9;--m[d],m[E]+=10}m[E]-=c[E]}for(;!m[0];)m.shift()}else break}x[w++]=u?l:++l,m[0]&&u?m[E]=r[f]||0:m=[r[f]]}while((f++<p||m[0]!==Sl)&&i--);return!x[0]&&w!=1&&(x.shift(),b.e--,N--),w>N&&Om(b,N,n.RM,m[0]!==Sl),b};An.eq=function(t){return this.cmp(t)===0};An.gt=function(t){return this.cmp(t)>0};An.gte=function(t){return this.cmp(t)>-1};An.lt=function(t){return this.cmp(t)<0};An.lte=function(t){return this.cmp(t)<1};An.minus=An.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};An.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error($K);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};An.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};An.plus=An.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};An.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-uL||t>uL)throw Error(Rm+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};An.prec=function(t,e){if(t!==~~t||t<1||t>am)throw Error(Rm+"precision");return Om(new this.constructor(this),t,e)};An.round=function(t,e){if(t===Sl)t=0;else if(t!==~~t||t<-am||t>am)throw Error(cI);return Om(new this.constructor(this),t+this.e+1,e)};An.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(XE+"No square root");i=Math.sqrt(+Mm(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return Om(t,(s.DP-=4)+t.e+1,s.RM)};An.times=An.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};An.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Sl){if(t!==~~t||t<0||t>am)throw Error(cI);for(n=Om(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return Mm(n,!0,!!r)};An.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Sl){if(t!==~~t||t<0||t>am)throw Error(cI);for(n=Om(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return Mm(n,!1,!!r)};An[Symbol.for("nodejs.util.inspect.custom")]=An.toJSON=An.toString=function(){var t=this,e=t.constructor;return Mm(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};An.toNumber=function(){var t=+Mm(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(XE+"Imprecise conversion");return t};An.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Sl){if(t!==~~t||t<1||t>am)throw Error(Rm+"precision");for(n=Om(new r(n),t,e);n.c.length<t;)n.c.push(0)}return Mm(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};An.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(XE+"valueOf disallowed");return Mm(t,t.e<=e.NE||t.e>=e.PE,!0)};var S0e=zK();const fd=S0e,C0e=Symbol(),dL=Object.getPrototypeOf,h3=new WeakMap,_0e=t=>t&&(h3.has(t)?h3.get(t):dL(t)===Object.prototype||dL(t)===Array.prototype),I0e=t=>_0e(t)&&t[C0e]||null,hL=(t,e=!0)=>{h3.set(t,e)},pD=t=>typeof t=="object"&&t!==null,N0e=t=>pD(t)&&!eA.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),WK=(t,e)=>{const n=f3.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return hL(r,!0),f3.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(eA.has(i))hL(i,!1);else if(zh.has(i)){const[c,l]=zh.get(i);a.value=WK(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},T0e=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(fL(l,o)||iv.has(o)&&fL(l,iv.get(o))))return!0;n(i),pD(o)&&(o=I0e(o)||o);const u=!zh.has(o)&&P0e(o)?zn(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),zh=new WeakMap,eA=new WeakSet,f3=new WeakMap,DS=[1],iv=new WeakMap;let fL=Object.is,k0e=(t,e)=>new Proxy(t,e),P0e=N0e,R0e=WK,O0e=T0e;function zn(t={}){if(!pD(t))throw new Error("object required");const e=iv.get(t);if(e)return e;let n=DS[0];const r=new Set,s=(E,b=++DS[0])=>{n!==b&&(i=n=b,r.forEach(x=>x(E,b)))};let i=n;const o=(E=DS[0])=>(i!==E&&(i=E,c.forEach(([b])=>{const x=b[1](E);x>n&&(n=x)})),n),a=E=>(b,x)=>{const w=[...b];w[1]=[E,...w[1]],s(w,x)},c=new Map,l=(E,b)=>{const x=!eA.has(b)&&zh.get(b);if(x)if(r.size){const w=x[2](a(E));c.set(E,[x,w])}else c.set(E,[x])},u=E=>{var b;const x=c.get(E);x&&(c.delete(E),(b=x[1])==null||b.call(x))},d=E=>(r.add(E),r.size===1&&c.forEach(([x,w],N)=>{const _=x[2](a(N));c.set(N,[x,_])}),()=>{r.delete(E),r.size===0&&c.forEach(([x,w],N)=>{w&&(w(),c.set(N,[x]))})});let h=!0;const f=O0e(()=>h,l,u,s),p=k0e(t,f);iv.set(t,p);const m=[t,o,d];return zh.set(p,m),Reflect.ownKeys(t).forEach(E=>{const b=Object.getOwnPropertyDescriptor(t,E);"value"in b&&b.writable&&(p[E]=t[E])}),h=!1,p}function Vs(t,e,n){const r=zh.get(t);let s;const i=[],o=r[2];let a=!1;const l=o(u=>{if(i.push(u),n){e(i.splice(0));return}s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function ov(t){const e=zh.get(t),[n,r]=e;return R0e(n,r())}function cm(t){return eA.add(t),t}function M0e(){return{proxyStateMap:zh,refSet:eA,snapCache:f3,versionHolder:DS,proxyCache:iv}}function HK(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function pL(t){return HK(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const VK="2.37.6";let Pg={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${VK}`};function WLe(t){Pg=t}let Sn=class p3 extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof p3?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=(()=>n.cause instanceof p3&&n.cause.docsPath||n.docsPath)(),i=(a=Pg.getDocsUrl)==null?void 0:a.call(Pg,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Pg.version?[`Version: ${Pg.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=VK}walk(e){return KK(this,e)}};function KK(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?KK(t.cause,e):e?null:t}class HLe extends Sn{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}let qK=class extends Sn{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class KLe extends Sn{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function Cw(t,{dir:e,size:n=32}={}){return typeof t=="string"?D0e(t,{dir:e,size:n}):B0e(t,{dir:e,size:n})}function D0e(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new qK({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function B0e(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new qK({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}let L0e=class extends Sn{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class GLe extends Sn{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class U0e extends Sn{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}class YLe extends Sn{constructor(e){super(`Hex value "${e}" is an odd length (${e.length}). It must be an even length.`,{name:"InvalidHexValueError"})}}let F0e=class extends Sn{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function BS(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function sf(t,{size:e}){if(pL(t)>e)throw new F0e({givenSize:pL(t),maxSize:e})}function QLe(t,e){const n=typeof e=="string"?{to:e}:e,r=n.to;return r==="number"?$0e(t,n):r==="bigint"?GK(t,n):r==="string"?z0e(t,n):r==="boolean"?j0e(t,n):lI(t,n)}function GK(t,e={}){const{signed:n}=e;e.size&&sf(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function j0e(t,e={}){let n=t;if(e.size&&(sf(n,{size:e.size}),n=BS(n)),BS(n)==="0x00")return!1;if(BS(n)==="0x01")return!0;throw new U0e(n)}function $0e(t,e={}){return Number(GK(t,e))}function z0e(t,e={}){let n=lI(t);return e.size&&(sf(n,{size:e.size}),n=BS(n,{dir:"right"})),new TextDecoder().decode(n)}const W0e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function mL(t,e={}){return typeof t=="number"||typeof t=="bigint"?ZK(t,e):typeof t=="string"?QK(t,e):typeof t=="boolean"?H0e(t,e):YK(t,e)}function H0e(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(sf(n,{size:e.size}),Cw(n,{size:e.size})):n}function YK(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=W0e[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(sf(r,{size:e.size}),Cw(r,{dir:"right",size:e.size})):r}function ZK(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new L0e({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Cw(a,{size:r}):a}const V0e=new TextEncoder;function QK(t,e={}){const n=V0e.encode(t);return YK(n,e)}const K0e=new TextEncoder;function JLe(t,e={}){return typeof t=="number"||typeof t=="bigint"?G0e(t,e):typeof t=="boolean"?q0e(t,e):HK(t)?lI(t,e):Y0e(t,e)}function q0e(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(sf(n,{size:e.size}),Cw(n,{size:e.size})):n}const Vl={zero:48,nine:57,A:65,F:70,a:97,f:102};function gL(t){if(t>=Vl.zero&&t<=Vl.nine)return t-Vl.zero;if(t>=Vl.A&&t<=Vl.F)return t-(Vl.A-10);if(t>=Vl.a&&t<=Vl.f)return t-(Vl.a-10)}function lI(t,e={}){let n=t;e.size&&(sf(n,{size:e.size}),n=Cw(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=gL(r.charCodeAt(a++)),l=gL(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new Sn(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function G0e(t,e){const n=ZK(t,e);return lI(n)}function Y0e(t,e={}){const n=K0e.encode(t);return typeof e.size=="number"?(sf(n,{size:e.size}),Cw(n,{dir:"right",size:e.size})):n}let Z0e=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const Oh=(t,e,n)=>JSON.stringify(t,(r,s)=>{const i=typeof s=="bigint"?s.toString():s;return typeof e=="function"?e(r,i):i},n),eUe={gwei:9,wei:18},Q0e={ether:-9,wei:9},tUe={ether:-18,gwei:-9};function mD(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function s_(t,e="wei"){return mD(t,Q0e[e])}const nUe=t=>t,tA=t=>t;class s1 extends Sn{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${tA(o)}`,e&&`Request body: ${Oh(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class rUe extends Sn{constructor({body:e,cause:n,details:r,url:s}){super("WebSocket request failed.",{cause:n,details:r,metaMessages:[`URL: ${tA(s)}`,e&&`Request body: ${Oh(e)}`].filter(Boolean),name:"WebSocketRequestError"})}}class JK extends Sn{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${tA(r)}`,`Request body: ${Oh(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class sUe extends Sn{constructor({url:e}={}){super("The socket has been closed.",{metaMessages:[e&&`URL: ${tA(e)}`].filter(Boolean),name:"SocketClosedError"})}}class yL extends Sn{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${tA(n)}`,`Request body: ${Oh(e)}`],name:"TimeoutError"})}}const J0e=-1;class Io extends Sn{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof JK?e.code:n??J0e}}class ia extends Io{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class av extends Io{constructor(e){super(e,{code:av.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(av,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class cv extends Io{constructor(e){super(e,{code:cv.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(cv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class lv extends Io{constructor(e,{method:n}={}){super(e,{code:lv.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(lv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class uv extends Io{constructor(e){super(e,{code:uv.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(uv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class qy extends Io{constructor(e){super(e,{code:qy.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(qy,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class dv extends Io{constructor(e){super(e,{code:dv.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(dv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class hv extends Io{constructor(e){super(e,{code:hv.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(hv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class fv extends Io{constructor(e){super(e,{code:fv.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(fv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Gy extends Io{constructor(e){super(e,{code:Gy.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Gy,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class cp extends Io{constructor(e,{method:n}={}){super(e,{code:cp.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(cp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Yy extends Io{constructor(e){super(e,{code:Yy.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Yy,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class pv extends Io{constructor(e){super(e,{code:pv.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(pv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Vp extends ia{constructor(e){super(e,{code:Vp.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Vp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class mv extends ia{constructor(e){super(e,{code:mv.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(mv,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class gv extends ia{constructor(e,{method:n}={}){super(e,{code:gv.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(gv,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class yv extends ia{constructor(e){super(e,{code:yv.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(yv,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class wv extends ia{constructor(e){super(e,{code:wv.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(wv,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class bv extends ia{constructor(e){super(e,{code:bv.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(bv,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class vv extends ia{constructor(e){super(e,{code:vv.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(vv,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Ev extends ia{constructor(e){super(e,{code:Ev.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Ev,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Av extends ia{constructor(e){super(e,{code:Av.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Av,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class xv extends ia{constructor(e){super(e,{code:xv.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(xv,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Sv extends ia{constructor(e){super(e,{code:Sv.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Sv,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Cv extends ia{constructor(e){super(e,{code:Cv.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Cv,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class _v extends ia{constructor(e){super(e,{code:_v.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(_v,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class X0e extends Io{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}class gD extends Sn{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(gD,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(gD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class eye extends Sn{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${s_(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(eye,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class tye extends Sn{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${s_(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(tye,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class nye extends Sn{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(nye,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class rye extends Sn{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(rye,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class sye extends Sn{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(sye,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class iye extends Sn{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(iye,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class oye extends Sn{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(oye,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class aye extends Sn{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(aye,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class cye extends Sn{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(cye,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class lye extends Sn{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${s_(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${s_(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(lye,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class iUe extends Sn{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}const oUe=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],aUe=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],XK=[{inputs:[{name:"dns",type:"bytes"}],name:"DNSDecodingFailed",type:"error"},{inputs:[{name:"ens",type:"string"}],name:"DNSEncodingFailed",type:"error"},{inputs:[],name:"EmptyAddress",type:"error"},{inputs:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"HttpError",type:"error"},{inputs:[],name:"InvalidBatchGatewayResponse",type:"error"},{inputs:[{name:"errorData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{name:"name",type:"bytes"},{name:"resolver",type:"address"}],name:"ResolverNotContract",type:"error"},{inputs:[{name:"name",type:"bytes"}],name:"ResolverNotFound",type:"error"},{inputs:[{name:"primary",type:"string"},{name:"primaryAddress",type:"bytes"}],name:"ReverseAddressMismatch",type:"error"},{inputs:[{internalType:"bytes4",name:"selector",type:"bytes4"}],name:"UnsupportedResolverProfile",type:"error"}],cUe=[...XK,{name:"resolveWithGateways",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],lUe=[...XK,{name:"reverseWithGateways",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"uint256",name:"coinType"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolver"},{type:"address",name:"reverseResolver"}]}],uUe=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],dUe=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],hUe=[{name:"isValidSignature",type:"function",stateMutability:"view",inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],outputs:[{name:"",type:"bytes4"}]}],fUe=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],XA=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],pUe=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"bytes32"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"bytes32"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],mUe=[{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC1155InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC1155InvalidApprover",type:"error"},{inputs:[{internalType:"uint256",name:"idsLength",type:"uint256"},{internalType:"uint256",name:"valuesLength",type:"uint256"}],name:"ERC1155InvalidArrayLength",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"ERC1155InvalidOperator",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC1155InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC1155InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"ERC1155MissingApprovalForAll",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],gUe=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}]},{type:"event",name:"ApprovalForAll",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"operator",type:"address"},{indexed:!1,name:"approved",type:"bool"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}]},{type:"function",name:"approve",stateMutability:"payable",inputs:[{name:"spender",type:"address"},{name:"tokenId",type:"uint256"}],outputs:[]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"getApproved",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{type:"address"}]},{type:"function",name:"isApprovedForAll",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"operator",type:"address"}],outputs:[{type:"bool"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"ownerOf",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"owner",type:"address"}]},{type:"function",name:"safeTransferFrom",stateMutability:"payable",inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],outputs:[]},{type:"function",name:"safeTransferFrom",stateMutability:"nonpayable",inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"id",type:"uint256"},{name:"data",type:"bytes"}],outputs:[]},{type:"function",name:"setApprovalForAll",stateMutability:"nonpayable",inputs:[{name:"operator",type:"address"},{name:"approved",type:"bool"}],outputs:[]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"tokenByIndex",stateMutability:"view",inputs:[{name:"index",type:"uint256"}],outputs:[{type:"uint256"}]},{type:"function",name:"tokenByIndex",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"index",type:"uint256"}],outputs:[{name:"tokenId",type:"uint256"}]},{type:"function",name:"tokenURI",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transferFrom",stateMutability:"payable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"tokenId",type:"uint256"}],outputs:[]}],yUe=[{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"receiver",type:"address"},{indexed:!1,name:"assets",type:"uint256"},{indexed:!1,name:"shares",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"receiver",type:"address"},{indexed:!0,name:"owner",type:"address"},{indexed:!1,name:"assets",type:"uint256"},{indexed:!1,name:"shares",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],name:"approve",outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"asset",outputs:[{name:"assetTokenAddress",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"}],name:"convertToAssets",outputs:[{name:"assets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"assets",type:"uint256"}],name:"convertToShares",outputs:[{name:"shares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"assets",type:"uint256"},{name:"receiver",type:"address"}],name:"deposit",outputs:[{name:"shares",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"caller",type:"address"}],name:"maxDeposit",outputs:[{name:"maxAssets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"caller",type:"address"}],name:"maxMint",outputs:[{name:"maxShares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"address"}],name:"maxRedeem",outputs:[{name:"maxShares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"address"}],name:"maxWithdraw",outputs:[{name:"maxAssets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"},{name:"receiver",type:"address"}],name:"mint",outputs:[{name:"assets",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"assets",type:"uint256"}],name:"previewDeposit",outputs:[{name:"shares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"}],name:"previewMint",outputs:[{name:"assets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"}],name:"previewRedeem",outputs:[{name:"assets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"assets",type:"uint256"}],name:"previewWithdraw",outputs:[{name:"shares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"},{name:"receiver",type:"address"},{name:"owner",type:"address"}],name:"redeem",outputs:[{name:"assets",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"totalAssets",outputs:[{name:"totalManagedAssets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"to",type:"address"},{name:"amount",type:"uint256"}],name:"transfer",outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"assets",type:"uint256"},{name:"receiver",type:"address"},{name:"owner",type:"address"}],name:"withdraw",outputs:[{name:"shares",type:"uint256"}],stateMutability:"nonpayable",type:"function"}];function uye(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const MT=new Map;function dye({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>MT.delete(e),a=()=>c().map(({args:u})=>u),c=()=>MT.get(e)||[],l=u=>MT.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=uye();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function eq(t){return new Promise(e=>setTimeout(e,t))}function hye(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await eq(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}const m3=256;let ex=m3,tx;function fye(t=11){if(!tx||ex+t>m3*2){tx="",ex=0;for(let e=0;e<m3;e++)tx+=(256+Math.random()*256|0).toString(16).substring(1)}return tx.substring(ex,ex+++t)}const nx=new Z0e(8192);function pye(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(nx.get(n))return nx.get(n);const r=t().finally(()=>nx.delete(n));return nx.set(n,r),r}function mye(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new cp(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new cp(new Error("method not supported"),{method:l});const u=s?QK(`${c}.${Oh(n)}`):void 0;return pye(()=>hye(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case av.code:throw new av(f);case cv.code:throw new cv(f);case lv.code:throw new lv(f,{method:n.method});case uv.code:throw new uv(f);case qy.code:throw new qy(f);case dv.code:throw new dv(f);case hv.code:throw new hv(f);case fv.code:throw new fv(f);case Gy.code:throw new Gy(f);case cp.code:throw new cp(f,{method:n.method});case Yy.code:throw new Yy(f);case pv.code:throw new pv(f);case Vp.code:throw new Vp(f);case mv.code:throw new mv(f);case gv.code:throw new gv(f);case yv.code:throw new yv(f);case wv.code:throw new wv(f);case bv.code:throw new bv(f);case vv.code:throw new vv(f);case Ev.code:throw new Ev(f);case Av.code:throw new Av(f);case xv.code:throw new xv(f);case Sv.code:throw new Sv(f);case Cv.code:throw new Cv(f);case _v.code:throw new _v(f);case 5e3:throw new Vp(f);default:throw h instanceof Sn?h:new X0e(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof s1){const m=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(m!=null&&m.match(/\d/))return Number.parseInt(m,10)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>gye(h)}),{enabled:s,id:u})}}function gye(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Yy.code||t.code===qy.code:t instanceof s1&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function yye(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function wye(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function bye(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const wL=bye();function vye(t,e={}){return{async request(n){var h;const{body:r,fetchFn:s=e.fetchFn??fetch,onRequest:i=e.onRequest,onResponse:o=e.onResponse,timeout:a=e.timeout??1e4}=n,c={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:l,method:u,signal:d}=c;try{const f=await wye(async({signal:m})=>{const E={...c,body:Array.isArray(r)?Oh(r.map(N=>({jsonrpc:"2.0",id:N.id??wL.take(),...N}))):Oh({jsonrpc:"2.0",id:r.id??wL.take(),...r}),headers:{"Content-Type":"application/json",...l},method:u||"POST",signal:d||(a>0?m:null)},b=new Request(t,E),x=await(i==null?void 0:i(b,E))??{...E,url:t};return await s(x.url??t,x)},{errorInstance:new yL({body:r,url:t}),timeout:a,signal:!0});o&&await o(f);let p;if((h=f.headers.get("Content-Type"))!=null&&h.startsWith("application/json"))p=await f.json();else{p=await f.text();try{p=JSON.parse(p||"{}")}catch(m){if(f.ok)throw m;p={error:p}}}if(!f.ok)throw new s1({body:r,details:Oh(p.error)||f.statusText,headers:f.headers,status:f.status,url:t});return p}catch(f){throw f instanceof s1||f instanceof yL?f:new s1({body:r,cause:f,url:t})}}}}function tq({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=fye();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:mye(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function bL(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=Eye,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=tq({key:n,name:r,async request({method:m,params:E}){let b;const x=async(w=0)=>{const N=h[w]({...d,chain:c,retryCount:0,timeout:u});try{const _=await N.request({method:m,params:E});return f({method:m,params:E,response:_,transport:N,status:"success"}),_}catch(_){if(f({error:_,method:m,params:E,transport:N,status:"error"}),i(_)||w===h.length-1||(b??(b=h.slice(w+1).some(L=>{const{include:U,exclude:F}=L({chain:c}).config.methods||{};return U?U.includes(m):F?!F.includes(m):!0})),!b))throw _;return x(w+1)}};return x()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:m=>f=m,transports:h.map(m=>m({chain:c,retryCount:0}))});if(s){const m=typeof s=="object"?s:{};Aye({chain:c,interval:m.interval??l,onTransports:E=>h=E,ping:m.ping,sampleCount:m.sampleCount,timeout:m.timeout,transports:h,weights:m.weights})}return p}}function Eye(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===Gy.code||t.code===Vp.code||gD.nodeMessage.test(t.message)||t.code===5e3))}function Aye({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async m=>{const E=m({chain:t,retryCount:0,timeout:i}),b=Date.now();let x,w;try{await(r?r({transport:E}):E.request({method:"net_listening"})),w=1}catch{w=0}finally{x=Date.now()}return{latency:x-b,success:w}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(m=>Math.max(...m.map(({latency:E})=>E)))),p=o.map((m,E)=>{const b=u.map(L=>L[E].latency),w=1-b.reduce((L,U)=>L+U,0)/b.length/f,N=u.map(L=>L[E].success),_=N.reduce((L,U)=>L+U,0)/N.length;return _===0?[0,E]:[l*w+c*_,E]}).sort((m,E)=>E[0]-m[0]);n(p.map(([,m])=>o[m])),await eq(e),d()};d()}class xye extends Sn{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function rx(t,e={}){const{batch:n,fetchFn:r,fetchOptions:s,key:i="http",methods:o,name:a="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:l,retryDelay:u,raw:d}=e;return({chain:h,retryCount:f,timeout:p})=>{const{batchSize:m=1e3,wait:E=0}=typeof n=="object"?n:{},b=e.retryCount??f,x=p??e.timeout??1e4,w=t||(h==null?void 0:h.rpcUrls.default.http[0]);if(!w)throw new xye;const N=vye(w,{fetchFn:r,fetchOptions:s,onRequest:c,onResponse:l,timeout:x});return tq({key:i,methods:o,name:a,async request({method:_,params:L}){const U={method:_,params:L},{schedule:F}=dye({id:w,wait:E,shouldSplitBatch(K){return K.length>m},fn:K=>N.request({body:K}),sort:(K,P)=>K.id-P.id}),M=async K=>n?F(K):[await N.request({body:K})],[{error:W,result:H}]=await M(U);if(d)return{error:W,result:H};if(W)throw new JK({body:U,error:W,url:w});return H},retryCount:b,retryDelay:u,timeout:x,type:"http"},{fetchOptions:s,url:w})}}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const LS=globalThis,yD=LS.ShadowRoot&&(LS.ShadyCSS===void 0||LS.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,wD=Symbol(),vL=new WeakMap;let nq=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==wD)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(yD&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=vL.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&vL.set(n,e))}return e}toString(){return this.cssText}};const tc=t=>new nq(typeof t=="string"?t:t+"",void 0,wD),Gd=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new nq(n,t,wD)},Sye=(t,e)=>{if(yD)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=LS.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},EL=yD?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return tc(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Cye,defineProperty:_ye,getOwnPropertyDescriptor:Iye,getOwnPropertyNames:Nye,getOwnPropertySymbols:Tye,getPrototypeOf:kye}=Object,Mh=globalThis,AL=Mh.trustedTypes,Pye=AL?AL.emptyScript:"",DT=Mh.reactiveElementPolyfillSupport,i1=(t,e)=>t,g3={toAttribute(t,e){switch(e){case Boolean:t=t?Pye:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},rq=(t,e)=>!Cye(t,e),xL={attribute:!0,type:String,converter:g3,reflect:!1,useDefault:!1,hasChanged:rq};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Mh.litPropertyMetadata??(Mh.litPropertyMetadata=new WeakMap);let Rg=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=xL){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&_ye(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=Iye(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??xL}static _$Ei(){if(this.hasOwnProperty(i1("elementProperties")))return;const e=kye(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(i1("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(i1("properties"))){const n=this.properties,r=[...Nye(n),...Tye(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(EL(s))}else e!==void 0&&n.push(EL(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Sye(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:g3).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:g3;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??rq)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};Rg.elementStyles=[],Rg.shadowRootOptions={mode:"open"},Rg[i1("elementProperties")]=new Map,Rg[i1("finalized")]=new Map,DT==null||DT({ReactiveElement:Rg}),(Mh.reactiveElementVersions??(Mh.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const o1=globalThis,i_=o1.trustedTypes,SL=i_?i_.createPolicy("lit-html",{createHTML:t=>t}):void 0,sq="$lit$",Yd=`lit$${Math.random().toFixed(9).slice(2)}$`,iq="?"+Yd,Rye=`<${iq}>`,lm=document,Iv=()=>lm.createComment(""),Nv=t=>t===null||typeof t!="object"&&typeof t!="function",bD=Array.isArray,Oye=t=>bD(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",BT=`[ 	
\f\r]`,Zw=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,CL=/-->/g,_L=/>/g,df=RegExp(`>|${BT}(?:([^\\s"'>=/]+)(${BT}*=${BT}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),IL=/'/g,NL=/"/g,oq=/^(?:script|style|textarea|title)$/i,aq=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),vUe=aq(1),EUe=aq(2),Zy=Symbol.for("lit-noChange"),ws=Symbol.for("lit-nothing"),TL=new WeakMap,lp=lm.createTreeWalker(lm,129);function cq(t,e){if(!bD(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return SL!==void 0?SL.createHTML(e):e}const Mye=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Zw;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===Zw?u[1]==="!--"?o=CL:u[1]!==void 0?o=_L:u[2]!==void 0?(oq.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=df):u[3]!==void 0&&(o=df):o===df?u[0]===">"?(o=s??Zw,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?df:u[3]==='"'?NL:IL):o===NL||o===IL?o=df:o===CL||o===_L?o=Zw:(o=df,s=void 0);const f=o===df&&t[a+1].startsWith("/>")?" ":"";i+=o===Zw?c+Rye:d>=0?(r.push(l),c.slice(0,d)+sq+c.slice(d)+Yd+f):c+Yd+(d===-2?a:f)}return[cq(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};let y3=class lq{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=Mye(e,n);if(this.el=lq.createElement(l,r),lp.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=lp.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(sq)){const h=u[o++],f=s.getAttribute(d).split(Yd),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?Bye:p[1]==="?"?Lye:p[1]==="@"?Uye:uI}),s.removeAttribute(d)}else d.startsWith(Yd)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(oq.test(s.tagName)){const d=s.textContent.split(Yd),h=d.length-1;if(h>0){s.textContent=i_?i_.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],Iv()),lp.nextNode(),c.push({type:2,index:++i});s.append(d[h],Iv())}}}else if(s.nodeType===8)if(s.data===iq)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(Yd,d+1))!==-1;)c.push({type:7,index:i}),d+=Yd.length-1}i++}}static createElement(e,n){const r=lm.createElement("template");return r.innerHTML=e,r}};function Qy(t,e,n=t,r){var o,a;if(e===Zy)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=Nv(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=Qy(t,s._$AS(t,e.values),s,r)),e}let Dye=class{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??lm).importNode(n,!0);lp.currentNode=s;let i=lp.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new vD(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new Fye(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=lp.nextNode(),o++)}return lp.currentNode=lm,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}},vD=class uq{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=ws,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Qy(this,e,n),Nv(e)?e===ws||e==null||e===""?(this._$AH!==ws&&this._$AR(),this._$AH=ws):e!==this._$AH&&e!==Zy&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Oye(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==ws&&Nv(this._$AH)?this._$AA.nextSibling.data=e:this.T(lm.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=y3.createElement(cq(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new Dye(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=TL.get(e.strings);return n===void 0&&TL.set(e.strings,n=new y3(e)),n}k(e){bD(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new uq(this.O(Iv()),this.O(Iv()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}},uI=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=ws,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=ws}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=Qy(this,e,n,0),o=!Nv(e)||e!==this._$AH&&e!==Zy,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=Qy(this,a[r+c],n,c),l===Zy&&(l=this._$AH[c]),o||(o=!Nv(l)||l!==this._$AH[c]),l===ws?e=ws:e!==ws&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===ws?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},Bye=class extends uI{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===ws?void 0:e}},Lye=class extends uI{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==ws)}},Uye=class extends uI{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=Qy(this,e,n,0)??ws)===Zy)return;const r=this._$AH,s=e===ws&&r!==ws||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==ws&&(r===ws||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}},Fye=class{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Qy(this,e)}};const LT=o1.litHtmlPolyfillSupport;LT==null||LT(y3,vD),(o1.litHtmlVersions??(o1.litHtmlVersions=[])).push("3.3.1");const jye=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new vD(e.insertBefore(Iv(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Kp=globalThis;let US=class extends Rg{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=jye(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Zy}};var y9;US._$litElement$=!0,US.finalized=!0,(y9=Kp.litElementHydrateSupport)==null||y9.call(Kp,{LitElement:US});const UT=Kp.litElementPolyfillSupport;UT==null||UT({LitElement:US});(Kp.litElementVersions??(Kp.litElementVersions=[])).push("4.2.1");const $ye=yye({id:97,name:"BNB Smart Chain Testnet",nativeCurrency:{decimals:18,name:"BNB",symbol:"tBNB"},rpcUrls:{default:{http:["https://data-seed-prebsc-1-s1.bnbchain.org:8545"]}},blockExplorers:{default:{name:"BscScan",url:"https://testnet.bscscan.com",apiUrl:"https://api-testnet.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:17422483}},testnet:!0}),Os={solana:{programId:"B3E513xm5sMJ3gJM6CxukpwW1hvNDXK4qireHLaT54dm",globalEscrow:"FuTysuyjyYmZxsTwK1b2qfPnhu5K2ijwWyb3nHj8DnV4",tokenMint:"BuADRo6dtezwqPwoK6ich4R3V7GqtSNDZPMTfcRZVv4E"},bnb:{escrow:"0xC37Bb6B20eE13E59B6ac4A21D3D35bDD2Cc98f7C",token:"0xD0E3c0366BE2d7Df1d9E2b05ee2BA85b1A892bA8",priceFeed:"0x2514895c72f50D8bd4B4F9b1110F0D6bD2c97526"}},Ld={solana:{name:"Solana Devnet",chainId:"devnet",rpcUrl:"https://api.devnet.solana.com",blockExplorer:"https://explorer.solana.com",currency:{name:"Solana",symbol:"SOL",decimals:9}},bnb:{name:"BSC Testnet",chainId:97,rpcUrl:"https://data-seed-prebsc-1-s1.binance.org:8545",blockExplorer:"https://testnet.bscscan.com",currency:{name:"Test BNB",symbol:"tBNB",decimals:18}}},kL=["function getEscrowStatus() view returns (bool isInitialized, uint256 totalTokensAvailable, uint256 tokensSold, uint256 totalBnbDeposited, uint256 totalBnbWithdrawn, uint256 lockDuration)","function getInvestorInfo(address investor) view returns (bool isInitialized, uint256 bnbDeposited, uint256 tokensReceived, uint256 depositTimestamp, uint256 firstDepositPrice, uint256 weightedAveragePrice, uint8 status, uint256 lockedBnbAmount)","function isUnlockTime(address investor) view returns (bool)","function getLockedBnbAmount(address investor) view returns (uint256)","function calculateTokensForBnb(uint256 bnbAmount, uint256 bnbUsdPrice) view returns (uint256)","function getPendingWithdrawal(address user) view returns (uint256)","function emergencyStop() view returns (bool)","function getChainlinkPrice() view returns (uint256 price, uint256 timestamp)","function depositBnb() payable","function withdrawLockedBnb(address investor)","function withdrawPendingBnb()","function activateEmergencyStop()","function deactivateEmergencyStop()","event BnbDeposited(address indexed investor, uint256 bnbAmount, uint256 tokensReceived, uint256 bnbPrice)","event LockedBnbWithdrawn(address indexed investor, uint256 bnbAmount, address indexed recipientWallet)","event WithdrawalQueued(address indexed recipient, uint256 amount)","event EmergencyStopActivated()","event EmergencyStopDeactivated()"],zye=["function latestRoundData() view returns (uint80 roundId, int256 answer, uint256 startedAt, uint256 updatedAt, uint80 answeredInRound)","function decimals() view returns (uint8)"],dq=Z.createContext(null),Dm=()=>{const t=Z.useContext(dq);if(!t)throw new Error("useWallet must be used within a WalletProvider");return t};function Wye(){const n=[new Due,new zue].filter(r=>{const s=r.name.toLowerCase();return s==="phantom"||s==="solflare"}).filter((r,s,i)=>s===i.findIndex(o=>o.name===r.name));return console.log("Configured Solana wallets:",n.map(r=>r.name)),n}const Hye=({children:t,enabled:e})=>{const n=VC.Devnet,r=Z.useMemo(()=>_H(n),[n]),s=Z.useMemo(()=>e?Wye():[],[e]);return e?v.jsx(Aae,{endpoint:r,children:v.jsx(bue,{wallets:s,autoConnect:!1,localStorageKey:"solana-wallet-ondrix",onError:i=>{var o;(o=i.message)!=null&&o.includes("User rejected")||console.warn("Solana wallet error:",i.message)},children:v.jsx(Cue,{children:t})})}):v.jsx(v.Fragment,{children:t})},Vye=({children:t})=>{const[e,n]=Z.useState(null),[r,s]=Z.useState(()=>localStorage.getItem("ondrix-selected-chain")||"bnb"),[i,o]=Z.useState(!1),[a,c]=Z.useState(!1),[l,u]=Z.useState(null),[d,h]=Z.useState(null),[f,p]=Z.useState(null),[m,E]=Z.useState(null),[b,x]=Z.useState(null),[w,N]=Z.useState(null);let _=null;try{_=HM()}catch(A){console.warn("Solana wallet not available:",A),_=null}const L=Z.useMemo(()=>r==="solana"?(_==null?void 0:_.connected)&&(_==null?void 0:_.publicKey)!=null:r==="bnb"?m!=null:!1,[r,_==null?void 0:_.connected,_==null?void 0:_.publicKey,m]);Z.useEffect(()=>{r==="solana"&&(_!=null&&_.connected)&&(_!=null&&_.publicKey)?n(_.publicKey.toString()):n(r==="bnb"&&m?m:null)},[r,_==null?void 0:_.connected,_==null?void 0:_.publicKey,m]),Z.useEffect(()=>{const A=new F2(Ld.solana.rpcUrl,"confirmed");N(A)},[]),Z.useEffect(()=>{!e&&!i&&(async()=>{if(console.log("🔄 Attempting to restore wallet state after page reload..."),r==="solana"&&_){if(_.connected&&_.publicKey){console.log("✅ Restored Solana wallet state:",_.publicKey.toString()),n(_.publicKey.toString()),u(null);return}try{_.wallet&&(await _.connect(),console.log("✅ Auto-reconnected Solana wallet"))}catch{console.log("ℹ️ Solana wallet auto-reconnect not needed or failed (normal)")}}r==="bnb"&&(localStorage.getItem("wc@2:client:0.3//session")||localStorage.getItem("reown.connected")||localStorage.getItem("walletconnect"))&&(console.log("🔍 Found Reown connection data, attempting to restore..."),await ur(()=>Promise.resolve().then(()=>SBe),void 0),setTimeout(()=>{console.log("⏰ Checking for restored Reown connection...")},2e3))})()},[r,_==null?void 0:_.wallet,e,i]),Z.useEffect(()=>{(async()=>{setTimeout(()=>{console.log(`🔍 Checking existing connections for ${r} chain...`),r==="solana"&&(_!=null&&_.connected)&&(_!=null&&_.publicKey)&&!e&&(console.log("✅ Found connected Solana wallet, updating address"),n(_.publicKey.toString())),r==="bnb"&&!e&&localStorage.getItem("wc@2:client:0.3//session")&&console.log("🔍 Found stored Reown session, triggering connection check")},1e3)})()},[r]),Z.useEffect(()=>{r==="solana"&&_&&(_.connected&&_.publicKey?(n(_.publicKey.toString()),u(null),console.log("✅ Solana wallet connected:",_.publicKey.toString())):L&&e&&(n(null),console.log("❌ Solana wallet disconnected")))},[_==null?void 0:_.connected,_==null?void 0:_.publicKey,r]),Z.useEffect(()=>{r==="solana"&&_&&o(_.connecting)},[_==null?void 0:_.connecting,r]),Z.useEffect(()=>{console.log("🔍 WalletContext state changed:",{address:e,isConnected:L,chain:r,reownAddress:m,source:e===m?"reown":e?"other":"none"})},[e,L,r,m]);const U=async()=>{throw new Error("BNB connections are handled through WalletConnect/Reown. Use the WalletConnect button.")},F=async()=>{if(r!=="solana")throw new Error("Switch to Solana chain first");if(!_)throw new Error("Solana wallet provider not available");if(console.log("👻 Connecting to Solana wallet..."),_.wallet)await _.connect();else throw new Error("Please use the wallet selection button to choose and connect your wallet")},M=async()=>{o(!0),u(null);try{r==="bnb"?await U():r==="solana"&&await F()}catch(A){throw u(A.message),console.error("❌ Connection error:",A),A}finally{r==="bnb"&&o(!1)}},W=async()=>{if(console.log("🔌 Disconnecting wallet..."),n(null),u(null),r==="bnb")h(null),p(null),E(null),x(null);else if(r==="solana"&&_)try{await _.disconnect(),console.log("✅ Solana wallet disconnected")}catch(A){console.warn("⚠️ Error disconnecting Solana wallet:",A)}},H=A=>{A!==r&&(console.log(`🔄 Switching from ${r} to ${A} (keeping wallets connected)`),c(!0),A==="bnb"&&r==="solana"?(h(null),p(null),console.log("🔄 Switching to BNB: cleared Solana state, waiting for Reown connection...")):A==="solana"&&r==="bnb"&&(h(null),p(null),E(null),x(null),console.log("🔄 Switching to Solana: cleared BNB state, waiting for Solana connection...")),s(A),u(null),localStorage.setItem("ondrix-selected-chain",A),setTimeout(()=>{c(!1)},1500))},K=(A,I)=>{console.log("🔗 WalletContext setReownConnection called:",{reownAddr:A,hasProvider:!!I,currentChain:r}),E(A),x(I),r==="bnb"&&A&&I?(console.log("✅ Setting Reown as active connection for BNB"),n(A),h(I),p(null)):A||m===e&&(n(null),h(null),p(null))},P=async()=>{console.log("🔌 WalletContext disconnectReown called");try{const A=window.__reownDisconnect;A&&(console.log("🔄 Calling AppKit.disconnect()..."),await A(),console.log("✅ AppKit.disconnect() completed")),localStorage.clear(),sessionStorage.clear(),E(null),x(null),n(null),h(null),p(null),console.log("✅ Reown completely disconnected")}catch(A){console.error("❌ Error disconnecting Reown:",A)}},y=async()=>{if(r==="bnb"&&b&&L)try{if(!f){console.log("🔄 Getting signer from provider...");const A=await b.getSigner();return p(A),A}return f}catch(A){return console.error("❌ Error getting signer:",A),null}return null},g={isConnected:L,address:e,chain:r,isConnecting:i,isChainSwitching:a,error:l,provider:d,signer:f,solanaConnection:w,solanaPublicKey:(_==null?void 0:_.publicKey)||null,solanaWallet:_,reownAddress:m,reownProvider:b,setReownConnection:K,disconnectReown:P,connect:M,disconnect:W,switchChain:H,getSigner:y};return v.jsx(dq.Provider,{value:g,children:t})},Kye=({children:t})=>v.jsx(Hye,{enabled:!0,children:v.jsx(Vye,{children:t})}),hq=Z.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),dI=Z.createContext({}),hI=Z.createContext(null),fI=typeof document<"u",ED=fI?Z.useLayoutEffect:Z.useEffect,fq=Z.createContext({strict:!1}),AD=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),qye="framerAppearId",pq="data-"+AD(qye);function Gye(t,e,n,r){const{visualElement:s}=Z.useContext(dI),i=Z.useContext(fq),o=Z.useContext(hI),a=Z.useContext(hq).reducedMotion,c=Z.useRef();r=r||i.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const l=c.current;Z.useInsertionEffect(()=>{l&&l.update(n,o)});const u=Z.useRef(!!(n[pq]&&!window.HandoffComplete));return ED(()=>{l&&(l.render(),u.current&&l.animationState&&l.animationState.animateChanges())}),Z.useEffect(()=>{l&&(l.updateFeatures(),!u.current&&l.animationState&&l.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),l}function e0(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Yye(t,e,n){return Z.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):e0(n)&&(n.current=r))},[e])}function Tv(t){return typeof t=="string"||Array.isArray(t)}function pI(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const xD=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],SD=["initial",...xD];function mI(t){return pI(t.animate)||SD.some(e=>Tv(t[e]))}function mq(t){return!!(mI(t)||t.variants)}function Zye(t,e){if(mI(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Tv(n)?n:void 0,animate:Tv(r)?r:void 0}}return t.inherit!==!1?e:{}}function Qye(t){const{initial:e,animate:n}=Zye(t,Z.useContext(dI));return Z.useMemo(()=>({initial:e,animate:n}),[PL(e),PL(n)])}function PL(t){return Array.isArray(t)?t.join(" "):t}const RL={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},kv={};for(const t in RL)kv[t]={isEnabled:e=>RL[t].some(n=>!!e[n])};function Jye(t){for(const e in t)kv[e]={...kv[e],...t[e]}}const CD=Z.createContext({}),gq=Z.createContext({}),Xye=Symbol.for("motionComponentSymbol");function ewe({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&Jye(t);function i(a,c){let l;const u={...Z.useContext(hq),...a,layoutId:twe(a)},{isStatic:d}=u,h=Qye(a),f=r(a,d);if(!d&&fI){h.visualElement=Gye(s,f,u,e);const p=Z.useContext(gq),m=Z.useContext(fq).strict;h.visualElement&&(l=h.visualElement.loadFeatures(u,m,t,p))}return Z.createElement(dI.Provider,{value:h},l&&h.visualElement?Z.createElement(l,{visualElement:h.visualElement,...u}):null,n(s,a,Yye(f,h.visualElement,c),f,d,h.visualElement))}const o=Z.forwardRef(i);return o[Xye]=s,o}function twe({layoutId:t}){const e=Z.useContext(CD).id;return e&&t!==void 0?e+"-"+t:t}function nwe(t){function e(r,s={}){return ewe(t(r,s))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,s)=>(n.has(s)||n.set(s,e(s)),n.get(s))})}const rwe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function _D(t){return typeof t!="string"||t.includes("-")?!1:!!(rwe.indexOf(t)>-1||/[A-Z]/.test(t))}const o_={};function swe(t){Object.assign(o_,t)}const nA=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bm=new Set(nA);function yq(t,{layout:e,layoutId:n}){return Bm.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!o_[t]||t==="opacity")}const So=t=>!!(t&&t.getVelocity),iwe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},owe=nA.length;function awe(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<owe;o++){const a=nA[o];if(t[a]!==void 0){const c=iwe[a]||a;i+=`${c}(${t[a]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(t,r?"":i):n&&r&&(i="none"),i}const wq=t=>e=>typeof e=="string"&&e.startsWith(t),bq=wq("--"),w3=wq("var(--"),cwe=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,lwe=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Wh=(t,e,n)=>Math.min(Math.max(n,t),e),Lm={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},a1={...Lm,transform:t=>Wh(0,1,t)},sx={...Lm,default:1},c1=t=>Math.round(t*1e5)/1e5,gI=/(-)?([\d]*\.?[\d])+/g,vq=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,uwe=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function rA(t){return typeof t=="string"}const sA=t=>({test:e=>rA(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Rd=sA("deg"),Cl=sA("%"),lt=sA("px"),dwe=sA("vh"),hwe=sA("vw"),OL={...Cl,parse:t=>Cl.parse(t)/100,transform:t=>Cl.transform(t*100)},ML={...Lm,transform:Math.round},Eq={borderWidth:lt,borderTopWidth:lt,borderRightWidth:lt,borderBottomWidth:lt,borderLeftWidth:lt,borderRadius:lt,radius:lt,borderTopLeftRadius:lt,borderTopRightRadius:lt,borderBottomRightRadius:lt,borderBottomLeftRadius:lt,width:lt,maxWidth:lt,height:lt,maxHeight:lt,size:lt,top:lt,right:lt,bottom:lt,left:lt,padding:lt,paddingTop:lt,paddingRight:lt,paddingBottom:lt,paddingLeft:lt,margin:lt,marginTop:lt,marginRight:lt,marginBottom:lt,marginLeft:lt,rotate:Rd,rotateX:Rd,rotateY:Rd,rotateZ:Rd,scale:sx,scaleX:sx,scaleY:sx,scaleZ:sx,skew:Rd,skewX:Rd,skewY:Rd,distance:lt,translateX:lt,translateY:lt,translateZ:lt,x:lt,y:lt,z:lt,perspective:lt,transformPerspective:lt,opacity:a1,originX:OL,originY:OL,originZ:lt,zIndex:ML,fillOpacity:a1,strokeOpacity:a1,numOctaves:ML};function ID(t,e,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=t;let c=!1,l=!1,u=!0;for(const d in e){const h=e[d];if(bq(d)){i[d]=h;continue}const f=Eq[d],p=lwe(h,f);if(Bm.has(d)){if(c=!0,o[d]=p,!u)continue;h!==(f.default||0)&&(u=!1)}else d.startsWith("origin")?(l=!0,a[d]=p):s[d]=p}if(e.transform||(c||r?s.transform=awe(t.transform,n,u,r):s.transform&&(s.transform="none")),l){const{originX:d="50%",originY:h="50%",originZ:f=0}=a;s.transformOrigin=`${d} ${h} ${f}`}}const ND=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Aq(t,e,n){for(const r in e)!So(e[r])&&!yq(r,n)&&(t[r]=e[r])}function fwe({transformTemplate:t},e,n){return Z.useMemo(()=>{const r=ND();return ID(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function pwe(t,e,n){const r=t.style||{},s={};return Aq(s,r,t),Object.assign(s,fwe(t,e,n)),t.transformValues?t.transformValues(s):s}function mwe(t,e,n){const r={},s=pwe(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=s,r}const gwe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function a_(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||gwe.has(t)}let xq=t=>!a_(t);function ywe(t){t&&(xq=e=>e.startsWith("on")?!a_(e):t(e))}try{ywe(require("@emotion/is-prop-valid").default)}catch{}function wwe(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(xq(s)||n===!0&&a_(s)||!e&&!a_(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function DL(t,e,n){return typeof t=="string"?t:lt.transform(e+n*t)}function bwe(t,e,n){const r=DL(e,t.x,t.width),s=DL(n,t.y,t.height);return`${r} ${s}`}const vwe={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ewe={offset:"strokeDashoffset",array:"strokeDasharray"};function Awe(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?vwe:Ewe;t[i.offset]=lt.transform(-r);const o=lt.transform(e),a=lt.transform(n);t[i.array]=`${o} ${a}`}function TD(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:c=0,...l},u,d,h){if(ID(t,l,u,h),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:p,dimensions:m}=t;f.transform&&(m&&(p.transform=f.transform),delete f.transform),m&&(s!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=bwe(m,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),o!==void 0&&Awe(f,o,a,c,!1)}const Sq=()=>({...ND(),attrs:{}}),kD=t=>typeof t=="string"&&t.toLowerCase()==="svg";function xwe(t,e,n,r){const s=Z.useMemo(()=>{const i=Sq();return TD(i,e,{enableHardwareAcceleration:!1},kD(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};Aq(i,t.style,t),s.style={...i,...s.style}}return s}function Swe(t=!1){return(n,r,s,{latestValues:i},o)=>{const c=(_D(n)?xwe:mwe)(r,i,o,n),u={...wwe(r,typeof n=="string",t),...c,ref:s},{children:d}=r,h=Z.useMemo(()=>So(d)?d.get():d,[d]);return Z.createElement(n,{...u,children:h})}}function Cq(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const _q=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Iq(t,e,n,r){Cq(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(_q.has(s)?s:AD(s),e.attrs[s])}function PD(t,e){const{style:n}=t,r={};for(const s in n)(So(n[s])||e.style&&So(e.style[s])||yq(s,t))&&(r[s]=n[s]);return r}function Nq(t,e){const n=PD(t,e);for(const r in t)if(So(t[r])||So(e[r])){const s=nA.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=t[r]}return n}function RD(t,e,n,r={},s={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),e}function Tq(t){const e=Z.useRef(null);return e.current===null&&(e.current=t()),e.current}const c_=t=>Array.isArray(t),Cwe=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),_we=t=>c_(t)?t[t.length-1]||0:t;function FS(t){const e=So(t)?t.get():t;return Cwe(e)?e.toValue():e}function Iwe({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,i){const o={latestValues:Nwe(r,s,i,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const kq=t=>(e,n)=>{const r=Z.useContext(dI),s=Z.useContext(hI),i=()=>Iwe(t,e,r,s);return n?i():Tq(i)};function Nwe(t,e,n,r){const s={},i=r(t,{});for(const h in i)s[h]=FS(i[h]);let{initial:o,animate:a}=t;const c=mI(t),l=mq(t);e&&l&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const d=u?a:o;return d&&typeof d!="boolean"&&!pI(d)&&(Array.isArray(d)?d:[d]).forEach(f=>{const p=RD(t,f);if(!p)return;const{transitionEnd:m,transition:E,...b}=p;for(const x in b){let w=b[x];if(Array.isArray(w)){const N=u?w.length-1:0;w=w[N]}w!==null&&(s[x]=w)}for(const x in m)s[x]=m[x]}),s}const gr=t=>t;class BL{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function Twe(t){let e=new BL,n=new BL,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(c,l=!1,u=!1)=>{const d=u&&s,h=d?e:n;return l&&o.add(c),h.add(c)&&d&&s&&(r=e.order.length),c},cancel:c=>{n.remove(c),o.delete(c)},process:c=>{if(s){i=!0;return}if(s=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let l=0;l<r;l++){const u=e.order[l];u(c),o.has(u)&&(a.schedule(u),t())}s=!1,i&&(i=!1,a.process(c))}};return a}const ix=["prepare","read","update","preRender","render","postRender"],kwe=40;function Pwe(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=ix.reduce((d,h)=>(d[h]=Twe(()=>n=!0),d),{}),o=d=>i[d].process(s),a=()=>{const d=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(d-s.timestamp,kwe),1),s.timestamp=d,s.isProcessing=!0,ix.forEach(o),s.isProcessing=!1,n&&e&&(r=!1,t(a))},c=()=>{n=!0,r=!0,s.isProcessing||t(a)};return{schedule:ix.reduce((d,h)=>{const f=i[h];return d[h]=(p,m=!1,E=!1)=>(n||c(),f.schedule(p,m,E)),d},{}),cancel:d=>ix.forEach(h=>i[h].cancel(d)),state:s,steps:i}}const{schedule:$n,cancel:Zu,state:yi,steps:FT}=Pwe(typeof requestAnimationFrame<"u"?requestAnimationFrame:gr,!0),Rwe={useVisualState:kq({scrapeMotionValuesFromProps:Nq,createRenderState:Sq,onMount:(t,e,{renderState:n,latestValues:r})=>{$n.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),$n.render(()=>{TD(n,r,{enableHardwareAcceleration:!1},kD(e.tagName),t.transformTemplate),Iq(e,n)})}})},Owe={useVisualState:kq({scrapeMotionValuesFromProps:PD,createRenderState:ND})};function Mwe(t,{forwardMotionProps:e=!1},n,r){return{..._D(t)?Rwe:Owe,preloadedFeatures:n,useRender:Swe(e),createVisualElement:r,Component:t}}function Ru(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const Pq=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function yI(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const Dwe=t=>e=>Pq(e)&&t(e,yI(e));function Bu(t,e,n,r){return Ru(t,e,Dwe(n),r)}const Bwe=(t,e)=>n=>e(t(n)),Dh=(...t)=>t.reduce(Bwe);function Rq(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const LL=Rq("dragHorizontal"),UL=Rq("dragVertical");function Oq(t){let e=!1;if(t==="y")e=UL();else if(t==="x")e=LL();else{const n=LL(),r=UL();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function Mq(){const t=Oq(!0);return t?(t(),!1):!0}class of{constructor(e){this.isMounted=!1,this.node=e}update(){}}function FL(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||Mq())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&$n.update(()=>a[r](i,o))};return Bu(t.current,n,s,{passive:!t.getProps()[r]})}class Lwe extends of{mount(){this.unmount=Dh(FL(this.node,!0),FL(this.node,!1))}unmount(){}}class Uwe extends of{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Dh(Ru(this.node.current,"focus",()=>this.onFocus()),Ru(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Dq=(t,e)=>e?t===e?!0:Dq(t,e.parentElement):!1;function jT(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,yI(n))}class Fwe extends of{constructor(){super(...arguments),this.removeStartListeners=gr,this.removeEndListeners=gr,this.removeAccessibleListeners=gr,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=Bu(window,"pointerup",(a,c)=>{if(!this.checkPressEnd())return;const{onTap:l,onTapCancel:u,globalTapTarget:d}=this.node.getProps();$n.update(()=>{!d&&!Dq(this.node.current,a.target)?u&&u(a,c):l&&l(a,c)})},{passive:!(r.onTap||r.onPointerUp)}),o=Bu(window,"pointercancel",(a,c)=>this.cancelPress(a,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Dh(i,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||jT("up",(c,l)=>{const{onTap:u}=this.node.getProps();u&&$n.update(()=>u(c,l))})};this.removeEndListeners(),this.removeEndListeners=Ru(this.node.current,"keyup",o),jT("down",(a,c)=>{this.startPress(a,c)})},n=Ru(this.node.current,"keydown",e),r=()=>{this.isPressing&&jT("cancel",(i,o)=>this.cancelPress(i,o))},s=Ru(this.node.current,"blur",r);this.removeAccessibleListeners=Dh(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&$n.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Mq()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&$n.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Bu(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Ru(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Dh(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const b3=new WeakMap,$T=new WeakMap,jwe=t=>{const e=b3.get(t.target);e&&e(t)},$we=t=>{t.forEach(jwe)};function zwe({root:t,...e}){const n=t||document;$T.has(n)||$T.set(n,{});const r=$T.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver($we,{root:t,...e})),r[s]}function Wwe(t,e,n){const r=zwe(e);return b3.set(t,n),r.observe(t),()=>{b3.delete(t),r.unobserve(t)}}const Hwe={some:0,all:1};class Vwe extends of{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:Hwe[s]},a=c=>{const{isIntersecting:l}=c;if(this.isInView===l||(this.isInView=l,i&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),h=l?u:d;h&&h(c)};return Wwe(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Kwe(e,n))&&this.startObserver()}unmount(){}}function Kwe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const qwe={inView:{Feature:Vwe},tap:{Feature:Fwe},focus:{Feature:Uwe},hover:{Feature:Lwe}};function Bq(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Gwe(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function Ywe(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function wI(t,e,n){const r=t.getProps();return RD(r,e,n!==void 0?n:r.custom,Gwe(t),Ywe(t))}let Zwe=gr,OD=gr;const Bh=t=>t*1e3,Lu=t=>t/1e3,Qwe={current:!1},Lq=t=>Array.isArray(t)&&typeof t[0]=="number";function Uq(t){return!!(!t||typeof t=="string"&&Fq[t]||Lq(t)||Array.isArray(t)&&t.every(Uq))}const Rb=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Fq={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Rb([0,.65,.55,1]),circOut:Rb([.55,0,1,.45]),backIn:Rb([.31,.01,.66,-.59]),backOut:Rb([.33,1.53,.69,.99])};function jq(t){if(t)return Lq(t)?Rb(t):Array.isArray(t)?t.map(jq):Fq[t]}function Jwe(t,e,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:c}={}){const l={[e]:n};c&&(l.offset=c);const u=jq(a);return Array.isArray(u)&&(l.easing=u),t.animate(l,{delay:r,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function Xwe(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const $q=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,ebe=1e-7,tbe=12;function nbe(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=$q(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>ebe&&++a<tbe);return o}function iA(t,e,n,r){if(t===e&&n===r)return gr;const s=i=>nbe(i,0,1,t,n);return i=>i===0||i===1?i:$q(s(i),e,r)}const rbe=iA(.42,0,1,1),sbe=iA(0,0,.58,1),zq=iA(.42,0,.58,1),ibe=t=>Array.isArray(t)&&typeof t[0]!="number",Wq=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Hq=t=>e=>1-t(1-e),MD=t=>1-Math.sin(Math.acos(t)),Vq=Hq(MD),obe=Wq(MD),Kq=iA(.33,1.53,.69,.99),DD=Hq(Kq),abe=Wq(DD),cbe=t=>(t*=2)<1?.5*DD(t):.5*(2-Math.pow(2,-10*(t-1))),lbe={linear:gr,easeIn:rbe,easeInOut:zq,easeOut:sbe,circIn:MD,circInOut:obe,circOut:Vq,backIn:DD,backInOut:abe,backOut:Kq,anticipate:cbe},jL=t=>{if(Array.isArray(t)){OD(t.length===4);const[e,n,r,s]=t;return iA(e,n,r,s)}else if(typeof t=="string")return lbe[t];return t},BD=(t,e)=>n=>!!(rA(n)&&uwe.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),qq=(t,e,n)=>r=>{if(!rA(r))return r;const[s,i,o,a]=r.match(gI);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},ube=t=>Wh(0,255,t),zT={...Lm,transform:t=>Math.round(ube(t))},up={test:BD("rgb","red"),parse:qq("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+zT.transform(t)+", "+zT.transform(e)+", "+zT.transform(n)+", "+c1(a1.transform(r))+")"};function dbe(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const v3={test:BD("#"),parse:dbe,transform:up.transform},t0={test:BD("hsl","hue"),parse:qq("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Cl.transform(c1(e))+", "+Cl.transform(c1(n))+", "+c1(a1.transform(r))+")"},Ri={test:t=>up.test(t)||v3.test(t)||t0.test(t),parse:t=>up.test(t)?up.parse(t):t0.test(t)?t0.parse(t):v3.parse(t),transform:t=>rA(t)?t:t.hasOwnProperty("red")?up.transform(t):t0.transform(t)},sr=(t,e,n)=>-n*t+n*e+t;function WT(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function hbe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,c=2*n-a;s=WT(c,a,t+1/3),i=WT(c,a,t),o=WT(c,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const HT=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},fbe=[v3,up,t0],pbe=t=>fbe.find(e=>e.test(t));function $L(t){const e=pbe(t);let n=e.parse(t);return e===t0&&(n=hbe(n)),n}const Gq=(t,e)=>{const n=$L(t),r=$L(e),s={...n};return i=>(s.red=HT(n.red,r.red,i),s.green=HT(n.green,r.green,i),s.blue=HT(n.blue,r.blue,i),s.alpha=sr(n.alpha,r.alpha,i),up.transform(s))};function mbe(t){var e,n;return isNaN(t)&&rA(t)&&(((e=t.match(gI))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(vq))===null||n===void 0?void 0:n.length)||0)>0}const Yq={regex:cwe,countKey:"Vars",token:"${v}",parse:gr},Zq={regex:vq,countKey:"Colors",token:"${c}",parse:Ri.parse},Qq={regex:gI,countKey:"Numbers",token:"${n}",parse:Lm.parse};function VT(t,{regex:e,countKey:n,token:r,parse:s}){const i=t.tokenised.match(e);i&&(t["num"+n]=i.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...i.map(s)))}function l_(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&VT(n,Yq),VT(n,Zq),VT(n,Qq),n}function Jq(t){return l_(t).values}function Xq(t){const{values:e,numColors:n,numVars:r,tokenised:s}=l_(t),i=e.length;return o=>{let a=s;for(let c=0;c<i;c++)c<r?a=a.replace(Yq.token,o[c]):c<r+n?a=a.replace(Zq.token,Ri.transform(o[c])):a=a.replace(Qq.token,c1(o[c]));return a}}const gbe=t=>typeof t=="number"?0:t;function ybe(t){const e=Jq(t);return Xq(t)(e.map(gbe))}const Hh={test:mbe,parse:Jq,createTransformer:Xq,getAnimatableNone:ybe},eG=(t,e)=>n=>`${n>0?e:t}`;function tG(t,e){return typeof t=="number"?n=>sr(t,e,n):Ri.test(t)?Gq(t,e):t.startsWith("var(")?eG(t,e):rG(t,e)}const nG=(t,e)=>{const n=[...t],r=n.length,s=t.map((i,o)=>tG(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},wbe=(t,e)=>{const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=tG(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},rG=(t,e)=>{const n=Hh.createTransformer(e),r=l_(t),s=l_(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?Dh(nG(r.values,s.values),n):eG(t,e)},Pv=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},zL=(t,e)=>n=>sr(t,e,n);function bbe(t){return typeof t=="number"?zL:typeof t=="string"?Ri.test(t)?Gq:rG:Array.isArray(t)?nG:typeof t=="object"?wbe:zL}function vbe(t,e,n){const r=[],s=n||bbe(t[0]),i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||gr:e;a=Dh(c,a)}r.push(a)}return r}function sG(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(OD(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=vbe(e,r,s),a=o.length,c=l=>{let u=0;if(a>1)for(;u<t.length-2&&!(l<t[u+1]);u++);const d=Pv(t[u],t[u+1],l);return o[u](d)};return n?l=>c(Wh(t[0],t[i-1],l)):c}function Ebe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Pv(0,e,r);t.push(sr(n,1,s))}}function Abe(t){const e=[0];return Ebe(e,t.length-1),e}function xbe(t,e){return t.map(n=>n*e)}function Sbe(t,e){return t.map(()=>e||zq).splice(0,t.length-1)}function u_({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=ibe(r)?r.map(jL):jL(r),i={done:!1,value:e[0]},o=xbe(n&&n.length===e.length?n:Abe(e),t),a=sG(o,e,{ease:Array.isArray(s)?s:Sbe(e,s)});return{calculatedDuration:t,next:c=>(i.value=a(c),i.done=c>=t,i)}}function iG(t,e){return e?t*(1e3/e):0}const Cbe=5;function oG(t,e,n){const r=Math.max(e-Cbe,0);return iG(n-t(r),e-r)}const KT=.001,_be=.01,WL=10,Ibe=.05,Nbe=1;function Tbe({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let s,i;Zwe(t<=Bh(WL));let o=1-e;o=Wh(Ibe,Nbe,o),t=Wh(_be,WL,Lu(t)),o<1?(s=l=>{const u=l*o,d=u*t,h=u-n,f=E3(l,o),p=Math.exp(-d);return KT-h/f*p},i=l=>{const d=l*o*t,h=d*n+n,f=Math.pow(o,2)*Math.pow(l,2)*t,p=Math.exp(-d),m=E3(Math.pow(l,2),o);return(-s(l)+KT>0?-1:1)*((h-f)*p)/m}):(s=l=>{const u=Math.exp(-l*t),d=(l-n)*t+1;return-KT+u*d},i=l=>{const u=Math.exp(-l*t),d=(n-l)*(t*t);return u*d});const a=5/t,c=Pbe(s,i,a);if(t=Bh(t),isNaN(c))return{stiffness:100,damping:10,duration:t};{const l=Math.pow(c,2)*r;return{stiffness:l,damping:o*2*Math.sqrt(r*l),duration:t}}}const kbe=12;function Pbe(t,e,n){let r=n;for(let s=1;s<kbe;s++)r=r-t(r)/e(r);return r}function E3(t,e){return t*Math.sqrt(1-e*e)}const Rbe=["duration","bounce"],Obe=["stiffness","damping","mass"];function HL(t,e){return e.some(n=>t[n]!==void 0)}function Mbe(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!HL(t,Obe)&&HL(t,Rbe)){const n=Tbe(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function aG({keyframes:t,restDelta:e,restSpeed:n,...r}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:c,mass:l,duration:u,velocity:d,isResolvedFromDuration:h}=Mbe({...r,velocity:-Lu(r.velocity||0)}),f=d||0,p=c/(2*Math.sqrt(a*l)),m=i-s,E=Lu(Math.sqrt(a/l)),b=Math.abs(m)<5;n||(n=b?.01:2),e||(e=b?.005:.5);let x;if(p<1){const w=E3(E,p);x=N=>{const _=Math.exp(-p*E*N);return i-_*((f+p*E*m)/w*Math.sin(w*N)+m*Math.cos(w*N))}}else if(p===1)x=w=>i-Math.exp(-E*w)*(m+(f+E*m)*w);else{const w=E*Math.sqrt(p*p-1);x=N=>{const _=Math.exp(-p*E*N),L=Math.min(w*N,300);return i-_*((f+p*E*m)*Math.sinh(L)+w*m*Math.cosh(L))/w}}return{calculatedDuration:h&&u||null,next:w=>{const N=x(w);if(h)o.done=w>=u;else{let _=f;w!==0&&(p<1?_=oG(x,w,N):_=0);const L=Math.abs(_)<=n,U=Math.abs(i-N)<=e;o.done=L&&U}return o.value=o.done?i:N,o}}}function VL({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:c,restDelta:l=.5,restSpeed:u}){const d=t[0],h={done:!1,value:d},f=F=>a!==void 0&&F<a||c!==void 0&&F>c,p=F=>a===void 0?c:c===void 0||Math.abs(a-F)<Math.abs(c-F)?a:c;let m=n*e;const E=d+m,b=o===void 0?E:o(E);b!==E&&(m=b-d);const x=F=>-m*Math.exp(-F/r),w=F=>b+x(F),N=F=>{const M=x(F),W=w(F);h.done=Math.abs(M)<=l,h.value=h.done?b:W};let _,L;const U=F=>{f(h.value)&&(_=F,L=aG({keyframes:[h.value,p(h.value)],velocity:oG(w,F,h.value),damping:s,stiffness:i,restDelta:l,restSpeed:u}))};return U(0),{calculatedDuration:null,next:F=>{let M=!1;return!L&&_===void 0&&(M=!0,N(F),U(F)),_!==void 0&&F>_?L.next(F-_):(!M&&N(F),h)}}}const Dbe=t=>{const e=({timestamp:n})=>t(n);return{start:()=>$n.update(e,!0),stop:()=>Zu(e),now:()=>yi.isProcessing?yi.timestamp:performance.now()}},KL=2e4;function qL(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<KL;)e+=n,r=t.next(e);return e>=KL?1/0:e}const Bbe={decay:VL,inertia:VL,tween:u_,keyframes:u_,spring:aG};function d_({autoplay:t=!0,delay:e=0,driver:n=Dbe,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:c,onStop:l,onComplete:u,onUpdate:d,...h}){let f=1,p=!1,m,E;const b=()=>{E=new Promise(O=>{m=O})};b();let x;const w=Bbe[s]||u_;let N;w!==u_&&typeof r[0]!="number"&&(N=sG([0,100],r,{clamp:!1}),r=[0,100]);const _=w({...h,keyframes:r});let L;a==="mirror"&&(L=w({...h,keyframes:[...r].reverse(),velocity:-(h.velocity||0)}));let U="idle",F=null,M=null,W=null;_.calculatedDuration===null&&i&&(_.calculatedDuration=qL(_));const{calculatedDuration:H}=_;let K=1/0,P=1/0;H!==null&&(K=H+o,P=K*(i+1)-o);let y=0;const g=O=>{if(M===null)return;f>0&&(M=Math.min(M,O)),f<0&&(M=Math.min(O-P/f,M)),F!==null?y=F:y=Math.round(O-M)*f;const S=y-e*(f>=0?1:-1),z=f>=0?S<0:S>P;y=Math.max(S,0),U==="finished"&&F===null&&(y=P);let Y=y,J=_;if(i){const de=Math.min(y,P)/K;let $e=Math.floor(de),Te=de%1;!Te&&de>=1&&(Te=1),Te===1&&$e--,$e=Math.min($e,i+1),!!($e%2)&&(a==="reverse"?(Te=1-Te,o&&(Te-=o/K)):a==="mirror"&&(J=L)),Y=Wh(0,1,Te)*K}const ae=z?{done:!1,value:r[0]}:J.next(Y);N&&(ae.value=N(ae.value));let{done:pe}=ae;!z&&H!==null&&(pe=f>=0?y>=P:y<=0);const ve=F===null&&(U==="finished"||U==="running"&&pe);return d&&d(ae.value),ve&&T(),ae},A=()=>{x&&x.stop(),x=void 0},I=()=>{U="idle",A(),m(),b(),M=W=null},T=()=>{U="finished",u&&u(),A(),m()},R=()=>{if(p)return;x||(x=n(g));const O=x.now();c&&c(),F!==null?M=O-F:(!M||U==="finished")&&(M=O),U==="finished"&&b(),W=M,F=null,U="running",x.start()};t&&R();const B={then(O,S){return E.then(O,S)},get time(){return Lu(y)},set time(O){O=Bh(O),y=O,F!==null||!x||f===0?F=O:M=x.now()-O/f},get duration(){const O=_.calculatedDuration===null?qL(_):_.calculatedDuration;return Lu(O)},get speed(){return f},set speed(O){O===f||!x||(f=O,B.time=Lu(y))},get state(){return U},play:R,pause:()=>{U="paused",F=y},stop:()=>{p=!0,U!=="idle"&&(U="idle",l&&l(),I())},cancel:()=>{W!==null&&g(W),I()},complete:()=>{U="finished"},sample:O=>(M=0,g(O))};return B}function Lbe(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ube=Lbe(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Fbe=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),ox=10,jbe=2e4,$be=(t,e)=>e.type==="spring"||t==="backgroundColor"||!Uq(e.ease);function zbe(t,e,{onUpdate:n,onComplete:r,...s}){if(!(Ube()&&Fbe.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,c,l=!1;const u=()=>{c=new Promise(w=>{a=w})};u();let{keyframes:d,duration:h=300,ease:f,times:p}=s;if($be(e,s)){const w=d_({...s,repeat:0,delay:0});let N={done:!1,value:d[0]};const _=[];let L=0;for(;!N.done&&L<jbe;)N=w.sample(L),_.push(N.value),L+=ox;p=void 0,d=_,h=L-ox,f="linear"}const m=Jwe(t.owner.current,e,d,{...s,duration:h,ease:f,times:p}),E=()=>{l=!1,m.cancel()},b=()=>{l=!0,$n.update(E),a(),u()};return m.onfinish=()=>{l||(t.set(Xwe(d,s)),r&&r(),b())},{then(w,N){return c.then(w,N)},attachTimeline(w){return m.timeline=w,m.onfinish=null,gr},get time(){return Lu(m.currentTime||0)},set time(w){m.currentTime=Bh(w)},get speed(){return m.playbackRate},set speed(w){m.playbackRate=w},get duration(){return Lu(h)},play:()=>{o||(m.play(),Zu(E))},pause:()=>m.pause(),stop:()=>{if(o=!0,m.playState==="idle")return;const{currentTime:w}=m;if(w){const N=d_({...s,autoplay:!1});t.setWithVelocity(N.sample(w-ox).value,N.sample(w).value,ox)}b()},complete:()=>{l||m.finish()},cancel:b}}function Wbe({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const s=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:gr,pause:gr,stop:gr,then:i=>(i(),Promise.resolve()),cancel:gr,complete:gr});return e?d_({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const Hbe={type:"spring",stiffness:500,damping:25,restSpeed:10},Vbe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Kbe={type:"keyframes",duration:.8},qbe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Gbe=(t,{keyframes:e})=>e.length>2?Kbe:Bm.has(t)?t.startsWith("scale")?Vbe(e[1]):Hbe:qbe,A3=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Hh.test(e)||e==="0")&&!e.startsWith("url(")),Ybe=new Set(["brightness","contrast","saturate","opacity"]);function Zbe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(gI)||[];if(!r)return t;const s=n.replace(r,"");let i=Ybe.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const Qbe=/([a-z-]*)\(.*?\)/g,x3={...Hh,getAnimatableNone:t=>{const e=t.match(Qbe);return e?e.map(Zbe).join(" "):t}},Jbe={...Eq,color:Ri,backgroundColor:Ri,outlineColor:Ri,fill:Ri,stroke:Ri,borderColor:Ri,borderTopColor:Ri,borderRightColor:Ri,borderBottomColor:Ri,borderLeftColor:Ri,filter:x3,WebkitFilter:x3},LD=t=>Jbe[t];function cG(t,e){let n=LD(t);return n!==x3&&(n=Hh),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const lG=t=>/^0[^.\s]+$/.test(t);function Xbe(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||lG(t)}function e1e(t,e,n,r){const s=A3(e,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const c=[];for(let l=0;l<i.length;l++)i[l]===null&&(i[l]=l===0?o:i[l-1]),Xbe(i[l])&&c.push(l),typeof i[l]=="string"&&i[l]!=="none"&&i[l]!=="0"&&(a=i[l]);if(s&&c.length&&a)for(let l=0;l<c.length;l++){const u=c[l];i[u]=cG(e,a)}return i}function t1e({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:c,elapsed:l,...u}){return!!Object.keys(u).length}function UD(t,e){return t[e]||t.default||t}const n1e={skipAnimations:!1},FD=(t,e,n,r={})=>s=>{const i=UD(r,t)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Bh(o);const c=e1e(e,t,n,i),l=c[0],u=c[c.length-1],d=A3(t,l),h=A3(t,u);let f={keyframes:c,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:p=>{e.set(p),i.onUpdate&&i.onUpdate(p)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(t1e(i)||(f={...f,...Gbe(t,f)}),f.duration&&(f.duration=Bh(f.duration)),f.repeatDelay&&(f.repeatDelay=Bh(f.repeatDelay)),!d||!h||Qwe.current||i.type===!1||n1e.skipAnimations)return Wbe(f);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const p=zbe(e,t,f);if(p)return p}return d_(f)};function h_(t){return!!(So(t)&&t.add)}const uG=t=>/^\-?\d*\.?\d+$/.test(t);function jD(t,e){t.indexOf(e)===-1&&t.push(e)}function $D(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class zD{constructor(){this.subscriptions=[]}add(e){return jD(this.subscriptions,e),()=>$D(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const r1e=t=>!isNaN(parseFloat(t));class s1e{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=yi;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,$n.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>$n.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=r1e(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new zD);const r=this.events[e].add(n);return e==="change"?()=>{r(),$n.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?iG(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Jy(t,e){return new s1e(t,e)}const dG=t=>e=>e.test(t),i1e={test:t=>t==="auto",parse:t=>t},hG=[Lm,lt,Cl,Rd,hwe,dwe,i1e],Qw=t=>hG.find(dG(t)),o1e=[...hG,Ri,Hh],a1e=t=>o1e.find(dG(t));function c1e(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Jy(n))}function l1e(t,e){const n=wI(t,e);let{transitionEnd:r={},transition:s={},...i}=n?t.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=_we(i[o]);c1e(t,o,a)}}function u1e(t,e,n){var r,s;const i=Object.keys(e).filter(a=>!t.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const c=i[a],l=e[c];let u=null;Array.isArray(l)&&(u=l[0]),u===null&&(u=(s=(r=n[c])!==null&&r!==void 0?r:t.readValue(c))!==null&&s!==void 0?s:e[c]),u!=null&&(typeof u=="string"&&(uG(u)||lG(u))?u=parseFloat(u):!a1e(u)&&Hh.test(l)&&(u=cG(c,l)),t.addValue(c,Jy(u,{owner:t})),n[c]===void 0&&(n[c]=u),u!==null&&t.setBaseTarget(c,u))}}function d1e(t,e){return e?(e[t]||e.default||e).from:void 0}function h1e(t,e,n){const r={};for(const s in t){const i=d1e(s,e);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function f1e({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function p1e(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function fG(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const c=t.getValue("willChange");r&&(i=r);const l=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const d in a){const h=t.getValue(d),f=a[d];if(!h||f===void 0||u&&f1e(u,d))continue;const p={delay:n,elapsed:0,...UD(i||{},d)};if(window.HandoffAppearAnimations){const b=t.getProps()[pq];if(b){const x=window.HandoffAppearAnimations(b,d,h,$n);x!==null&&(p.elapsed=x,p.isHandoff=!0)}}let m=!p.isHandoff&&!p1e(h,f);if(p.type==="spring"&&(h.getVelocity()||p.velocity)&&(m=!1),h.animation&&(m=!1),m)continue;h.start(FD(d,h,f,t.shouldReduceMotion&&Bm.has(d)?{type:!1}:p));const E=h.animation;h_(c)&&(c.add(d),E.then(()=>c.remove(d))),l.push(E)}return o&&Promise.all(l).then(()=>{o&&l1e(t,o)}),l}function S3(t,e,n={}){const r=wI(t,e,n.custom);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(fG(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:l=0,staggerChildren:u,staggerDirection:d}=s;return m1e(t,e,l+c,u,d,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[c,l]=a==="beforeChildren"?[i,o]:[o,i];return c().then(()=>l())}else return Promise.all([i(),o(n.delay)])}function m1e(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,c=s===1?(l=0)=>l*r:(l=0)=>a-l*r;return Array.from(t.variantChildren).sort(g1e).forEach((l,u)=>{l.notify("AnimationStart",e),o.push(S3(l,e,{...i,delay:n+c(u)}).then(()=>l.notify("AnimationComplete",e)))}),Promise.all(o)}function g1e(t,e){return t.sortNodePosition(e)}function y1e(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>S3(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=S3(t,e,n);else{const s=typeof e=="function"?wI(t,e,n.custom):e;r=Promise.all(fG(t,s,n))}return r.then(()=>t.notify("AnimationComplete",e))}const w1e=[...xD].reverse(),b1e=xD.length;function v1e(t){return e=>Promise.all(e.map(({animation:n,options:r})=>y1e(t,n,r)))}function E1e(t){let e=v1e(t);const n=x1e();let r=!0;const s=(c,l)=>{const u=wI(t,l);if(u){const{transition:d,transitionEnd:h,...f}=u;c={...c,...f,...h}}return c};function i(c){e=c(t)}function o(c,l){const u=t.getProps(),d=t.getVariantContext(!0)||{},h=[],f=new Set;let p={},m=1/0;for(let b=0;b<b1e;b++){const x=w1e[b],w=n[x],N=u[x]!==void 0?u[x]:d[x],_=Tv(N),L=x===l?w.isActive:null;L===!1&&(m=b);let U=N===d[x]&&N!==u[x]&&_;if(U&&r&&t.manuallyAnimateOnMount&&(U=!1),w.protectedKeys={...p},!w.isActive&&L===null||!N&&!w.prevProp||pI(N)||typeof N=="boolean")continue;let M=A1e(w.prevProp,N)||x===l&&w.isActive&&!U&&_||b>m&&_,W=!1;const H=Array.isArray(N)?N:[N];let K=H.reduce(s,{});L===!1&&(K={});const{prevResolvedValues:P={}}=w,y={...P,...K},g=A=>{M=!0,f.has(A)&&(W=!0,f.delete(A)),w.needsAnimating[A]=!0};for(const A in y){const I=K[A],T=P[A];if(p.hasOwnProperty(A))continue;let R=!1;c_(I)&&c_(T)?R=!Bq(I,T):R=I!==T,R?I!==void 0?g(A):f.add(A):I!==void 0&&f.has(A)?g(A):w.protectedKeys[A]=!0}w.prevProp=N,w.prevResolvedValues=K,w.isActive&&(p={...p,...K}),r&&t.blockInitialAnimation&&(M=!1),M&&(!U||W)&&h.push(...H.map(A=>({animation:A,options:{type:x,...c}})))}if(f.size){const b={};f.forEach(x=>{const w=t.getBaseTarget(x);w!==void 0&&(b[x]=w)}),h.push({animation:b})}let E=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(E=!1),r=!1,E?e(h):Promise.resolve()}function a(c,l,u){var d;if(n[c].isActive===l)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(f=>{var p;return(p=f.animationState)===null||p===void 0?void 0:p.setActive(c,l)}),n[c].isActive=l;const h=o(u,c);for(const f in n)n[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function A1e(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Bq(e,t):!1}function hf(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function x1e(){return{animate:hf(!0),whileInView:hf(),whileHover:hf(),whileTap:hf(),whileDrag:hf(),whileFocus:hf(),exit:hf()}}class S1e extends of{constructor(e){super(e),e.animationState||(e.animationState=E1e(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),pI(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let C1e=0;class _1e extends of{constructor(){super(...arguments),this.id=C1e++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const I1e={animation:{Feature:S1e},exit:{Feature:_1e}},GL=(t,e)=>Math.abs(t-e);function N1e(t,e){const n=GL(t.x,e.x),r=GL(t.y,e.y);return Math.sqrt(n**2+r**2)}class pG{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=GT(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,f=N1e(d.offset,{x:0,y:0})>=3;if(!h&&!f)return;const{point:p}=d,{timestamp:m}=yi;this.history.push({...p,timestamp:m});const{onStart:E,onMove:b}=this.handlers;h||(E&&E(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=qT(h,this.transformPagePoint),$n.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:f,onSessionEnd:p,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=GT(d.type==="pointercancel"?this.lastMoveEventInfo:qT(h,this.transformPagePoint),this.history);this.startEvent&&f&&f(d,E),p&&p(d,E)},!Pq(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=yI(e),a=qT(o,this.transformPagePoint),{point:c}=a,{timestamp:l}=yi;this.history=[{...c,timestamp:l}];const{onSessionStart:u}=n;u&&u(e,GT(a,this.history)),this.removeListeners=Dh(Bu(this.contextWindow,"pointermove",this.handlePointerMove),Bu(this.contextWindow,"pointerup",this.handlePointerUp),Bu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Zu(this.updatePoint)}}function qT(t,e){return e?{point:e(t.point)}:t}function YL(t,e){return{x:t.x-e.x,y:t.y-e.y}}function GT({point:t},e){return{point:t,delta:YL(t,mG(e)),offset:YL(t,T1e(e)),velocity:k1e(e,.1)}}function T1e(t){return t[0]}function mG(t){return t[t.length-1]}function k1e(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=mG(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Bh(e)));)n--;if(!r)return{x:0,y:0};const i=Lu(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Xo(t){return t.max-t.min}function C3(t,e=0,n=.01){return Math.abs(t-e)<=n}function ZL(t,e,n,r=.5){t.origin=r,t.originPoint=sr(e.min,e.max,t.origin),t.scale=Xo(n)/Xo(e),(C3(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=sr(n.min,n.max,t.origin)-t.originPoint,(C3(t.translate)||isNaN(t.translate))&&(t.translate=0)}function l1(t,e,n,r){ZL(t.x,e.x,n.x,r?r.originX:void 0),ZL(t.y,e.y,n.y,r?r.originY:void 0)}function QL(t,e,n){t.min=n.min+e.min,t.max=t.min+Xo(e)}function P1e(t,e,n){QL(t.x,e.x,n.x),QL(t.y,e.y,n.y)}function JL(t,e,n){t.min=e.min-n.min,t.max=t.min+Xo(e)}function u1(t,e,n){JL(t.x,e.x,n.x),JL(t.y,e.y,n.y)}function R1e(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?sr(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?sr(n,t,r.max):Math.min(t,n)),t}function XL(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function O1e(t,{top:e,left:n,bottom:r,right:s}){return{x:XL(t.x,n,s),y:XL(t.y,e,r)}}function eU(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function M1e(t,e){return{x:eU(t.x,e.x),y:eU(t.y,e.y)}}function D1e(t,e){let n=.5;const r=Xo(t),s=Xo(e);return s>r?n=Pv(e.min,e.max-r,t.min):r>s&&(n=Pv(t.min,t.max-s,e.min)),Wh(0,1,n)}function B1e(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const _3=.35;function L1e(t=_3){return t===!1?t=0:t===!0&&(t=_3),{x:tU(t,"left","right"),y:tU(t,"top","bottom")}}function tU(t,e,n){return{min:nU(t,e),max:nU(t,n)}}function nU(t,e){return typeof t=="number"?t:t[e]||0}const rU=()=>({translate:0,scale:1,origin:0,originPoint:0}),n0=()=>({x:rU(),y:rU()}),sU=()=>({min:0,max:0}),Wr=()=>({x:sU(),y:sU()});function pa(t){return[t("x"),t("y")]}function gG({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function U1e({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function F1e(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function YT(t){return t===void 0||t===1}function I3({scale:t,scaleX:e,scaleY:n}){return!YT(t)||!YT(e)||!YT(n)}function Cf(t){return I3(t)||yG(t)||t.z||t.rotate||t.rotateX||t.rotateY}function yG(t){return iU(t.x)||iU(t.y)}function iU(t){return t&&t!=="0%"}function f_(t,e,n){const r=t-n,s=e*r;return n+s}function oU(t,e,n,r,s){return s!==void 0&&(t=f_(t,s,r)),f_(t,n,r)+e}function N3(t,e=0,n=1,r,s){t.min=oU(t.min,e,n,r,s),t.max=oU(t.max,e,n,r,s)}function wG(t,{x:e,y:n}){N3(t.x,e.translate,e.scale,e.originPoint),N3(t.y,n.translate,n.scale,n.originPoint)}function j1e(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&r0(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,wG(t,o)),r&&Cf(i.latestValues)&&r0(t,i.latestValues))}e.x=aU(e.x),e.y=aU(e.y)}function aU(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Ud(t,e){t.min=t.min+e,t.max=t.max+e}function cU(t,e,[n,r,s]){const i=e[s]!==void 0?e[s]:.5,o=sr(t.min,t.max,i);N3(t,e[n],e[r],o,e.scale)}const $1e=["x","scaleX","originX"],z1e=["y","scaleY","originY"];function r0(t,e){cU(t.x,e,$1e),cU(t.y,e,z1e)}function bG(t,e){return gG(F1e(t.getBoundingClientRect(),e))}function W1e(t,e,n){const r=bG(t,n),{scroll:s}=e;return s&&(Ud(r.x,s.offset.x),Ud(r.y,s.offset.y)),r}const vG=({current:t})=>t?t.ownerDocument.defaultView:null,H1e=new WeakMap;class V1e{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Wr(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(yI(u,"page").point)},i=(u,d)=>{const{drag:h,dragPropagation:f,onDragStart:p}=this.getProps();if(h&&!f&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Oq(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),pa(E=>{let b=this.getAxisMotionValue(E).get()||0;if(Cl.test(b)){const{projection:x}=this.visualElement;if(x&&x.layout){const w=x.layout.layoutBox[E];w&&(b=Xo(w)*(parseFloat(b)/100))}}this.originPoint[E]=b}),p&&$n.update(()=>p(u,d),!1,!0);const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:h,dragDirectionLock:f,onDirectionLock:p,onDrag:m}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:E}=d;if(f&&this.currentDirection===null){this.currentDirection=K1e(E),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",d.point,E),this.updateAxis("y",d.point,E),this.visualElement.render(),m&&m(u,d)},a=(u,d)=>this.stop(u,d),c=()=>pa(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:l}=this.getProps();this.panSession=new pG(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:l,contextWindow:vG(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&$n.update(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!ax(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=R1e(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&e0(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=O1e(s.layoutBox,n):this.constraints=!1,this.elastic=L1e(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&pa(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=B1e(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!e0(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=W1e(r,s.root,this.visualElement.getTransformPagePoint());let o=M1e(s.layout.layoutBox,i);if(n){const a=n(U1e(o));this.hasMutatedConstraints=!!a,a&&(o=gG(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},l=pa(u=>{if(!ax(u,n,this.currentDirection))return;let d=c&&c[u]||{};o&&(d={min:0,max:0});const h=s?200:1e6,f=s?40:1e7,p={type:"inertia",velocity:r?e[u]:0,bounceStiffness:h,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(u,p)});return Promise.all(l).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(FD(e,r,0,n))}stopAnimation(){pa(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){pa(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){pa(n=>{const{drag:r}=this.getProps();if(!ax(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-sr(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!e0(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};pa(o=>{const a=this.getAxisMotionValue(o);if(a){const c=a.get();s[o]=D1e({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),pa(o=>{if(!ax(o,e,null))return;const a=this.getAxisMotionValue(o),{min:c,max:l}=this.constraints[o];a.set(sr(c,l,s[o]))})}addListeners(){if(!this.visualElement.current)return;H1e.set(this.visualElement,this);const e=this.visualElement.current,n=Bu(e,"pointerdown",c=>{const{drag:l,dragListener:u=!0}=this.getProps();l&&u&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();e0(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=Ru(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:l})=>{this.isDragging&&l&&(pa(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=c[u].translate,d.set(d.get()+c[u].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=_3,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function ax(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function K1e(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class q1e extends of{constructor(e){super(e),this.removeGroupControls=gr,this.removeListeners=gr,this.controls=new V1e(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||gr}unmount(){this.removeGroupControls(),this.removeListeners()}}const lU=t=>(e,n)=>{t&&$n.update(()=>t(e,n))};class G1e extends of{constructor(){super(...arguments),this.removePointerDownListener=gr}onPointerDown(e){this.session=new pG(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:vG(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:lU(e),onStart:lU(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&$n.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=Bu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Y1e(){const t=Z.useContext(hI);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=Z.useId();return Z.useEffect(()=>r(s),[]),!e&&n?[!1,()=>n&&n(s)]:[!0]}const jS={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function uU(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Jw={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(lt.test(t))t=parseFloat(t);else return t;const n=uU(t,e.target.x),r=uU(t,e.target.y);return`${n}% ${r}%`}},Z1e={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Hh.parse(t);if(s.length>5)return r;const i=Hh.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,c=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=c;const l=sr(a,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=l),typeof s[3+o]=="number"&&(s[3+o]/=l),i(s)}};class Q1e extends we.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;swe(J1e),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),jS.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||$n.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function EG(t){const[e,n]=Y1e(),r=Z.useContext(CD);return we.createElement(Q1e,{...t,layoutGroup:r,switchLayoutGroup:Z.useContext(gq),isPresent:e,safeToRemove:n})}const J1e={borderRadius:{...Jw,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Jw,borderTopRightRadius:Jw,borderBottomLeftRadius:Jw,borderBottomRightRadius:Jw,boxShadow:Z1e},AG=["TopLeft","TopRight","BottomLeft","BottomRight"],X1e=AG.length,dU=t=>typeof t=="string"?parseFloat(t):t,hU=t=>typeof t=="number"||lt.test(t);function eve(t,e,n,r,s,i){s?(t.opacity=sr(0,n.opacity!==void 0?n.opacity:1,tve(r)),t.opacityExit=sr(e.opacity!==void 0?e.opacity:1,0,nve(r))):i&&(t.opacity=sr(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<X1e;o++){const a=`border${AG[o]}Radius`;let c=fU(e,a),l=fU(n,a);if(c===void 0&&l===void 0)continue;c||(c=0),l||(l=0),c===0||l===0||hU(c)===hU(l)?(t[a]=Math.max(sr(dU(c),dU(l),r),0),(Cl.test(l)||Cl.test(c))&&(t[a]+="%")):t[a]=l}(e.rotate||n.rotate)&&(t.rotate=sr(e.rotate||0,n.rotate||0,r))}function fU(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const tve=xG(0,.5,Vq),nve=xG(.5,.95,gr);function xG(t,e,n){return r=>r<t?0:r>e?1:n(Pv(t,e,r))}function pU(t,e){t.min=e.min,t.max=e.max}function ca(t,e){pU(t.x,e.x),pU(t.y,e.y)}function mU(t,e,n,r,s){return t-=e,t=f_(t,1/n,r),s!==void 0&&(t=f_(t,1/s,r)),t}function rve(t,e=0,n=1,r=.5,s,i=t,o=t){if(Cl.test(e)&&(e=parseFloat(e),e=sr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=sr(i.min,i.max,r);t===i&&(a-=e),t.min=mU(t.min,e,n,a,s),t.max=mU(t.max,e,n,a,s)}function gU(t,e,[n,r,s],i,o){rve(t,e[n],e[r],e[s],e.scale,i,o)}const sve=["x","scaleX","originX"],ive=["y","scaleY","originY"];function yU(t,e,n,r){gU(t.x,e,sve,n?n.x:void 0,r?r.x:void 0),gU(t.y,e,ive,n?n.y:void 0,r?r.y:void 0)}function wU(t){return t.translate===0&&t.scale===1}function SG(t){return wU(t.x)&&wU(t.y)}function ove(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function CG(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function bU(t){return Xo(t.x)/Xo(t.y)}class ave{constructor(){this.members=[]}add(e){jD(this.members,e),e.scheduleRender()}remove(e){if($D(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function vU(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:c,rotateX:l,rotateY:u}=n;c&&(r+=`rotate(${c}deg) `),l&&(r+=`rotateX(${l}deg) `),u&&(r+=`rotateY(${u}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const cve=(t,e)=>t.depth-e.depth;class lve{constructor(){this.children=[],this.isDirty=!1}add(e){jD(this.children,e),this.isDirty=!0}remove(e){$D(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(cve),this.isDirty=!1,this.children.forEach(e)}}function uve(t,e){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(Zu(r),t(i-e))};return $n.read(r,!0),()=>Zu(r)}function dve(t){window.MotionDebug&&window.MotionDebug.record(t)}function hve(t){return t instanceof SVGElement&&t.tagName!=="svg"}function fve(t,e,n){const r=So(t)?t:Jy(t);return r.start(FD("",r,e,n)),r.animation}const EU=["","X","Y","Z"],pve={visibility:"hidden"},AU=1e3;let mve=0;const _f={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function _G({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=mve++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,_f.totalNodes=_f.resolvedTargetDeltas=_f.recalculatedProjection=0,this.nodes.forEach(wve),this.nodes.forEach(xve),this.nodes.forEach(Sve),this.nodes.forEach(bve),dve(_f)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new lve)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new zD),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=hve(o),this.instance=o;const{layoutId:c,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(l||c)&&(this.isLayoutDirty=!0),t){let d;const h=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=uve(h,250),jS.hasAnimatedSinceResize&&(jS.hasAnimatedSinceResize=!1,this.nodes.forEach(SU))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeTargetChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||Tve,{onLayoutAnimationStart:E,onLayoutAnimationComplete:b}=u.getProps(),x=!this.targetLayout||!CG(this.targetLayout,p)||f,w=!h&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||h&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,w);const N={...UD(m,"layout"),onPlay:E,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else h||SU(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Zu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Cve),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(xU);return}this.isUpdating||this.nodes.forEach(Eve),this.isUpdating=!1,this.nodes.forEach(Ave),this.nodes.forEach(gve),this.nodes.forEach(yve),this.clearAllSnapshots();const a=performance.now();yi.delta=Wh(0,1e3/60,a-yi.timestamp),yi.timestamp=a,yi.isProcessing=!0,FT.update.process(yi),FT.preRender.process(yi),FT.render.process(yi),yi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(vve),this.sharedNodes.forEach(_ve)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$n.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$n.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Wr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!SG(this.projectionDelta),c=this.getTransformTemplate(),l=c?c(this.latestValues,""):void 0,u=l!==this.prevTransformTemplateValue;o&&(a||Cf(this.latestValues)||u)&&(s(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),kve(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Wr();const a=o.measureViewportBox(),{scroll:c}=this.root;return c&&(Ud(a.x,c.offset.x),Ud(a.y,c.offset.y)),a}removeElementScroll(o){const a=Wr();ca(a,o);for(let c=0;c<this.path.length;c++){const l=this.path[c],{scroll:u,options:d}=l;if(l!==this.root&&u&&d.layoutScroll){if(u.isRoot){ca(a,o);const{scroll:h}=this.root;h&&(Ud(a.x,-h.offset.x),Ud(a.y,-h.offset.y))}Ud(a.x,u.offset.x),Ud(a.y,u.offset.y)}}return a}applyTransform(o,a=!1){const c=Wr();ca(c,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&r0(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Cf(u.latestValues)&&r0(c,u.latestValues)}return Cf(this.latestValues)&&r0(c,this.latestValues),c}removeTransform(o){const a=Wr();ca(a,o);for(let c=0;c<this.path.length;c++){const l=this.path[c];if(!l.instance||!Cf(l.latestValues))continue;I3(l.latestValues)&&l.updateSnapshot();const u=Wr(),d=l.measurePageBox();ca(u,d),yU(a,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,u)}return Cf(this.latestValues)&&yU(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==yi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==c;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=yi.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Wr(),this.relativeTargetOrigin=Wr(),u1(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),ca(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Wr(),this.targetWithTransforms=Wr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),P1e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ca(this.target,this.layout.layoutBox),wG(this.target,this.targetDelta)):ca(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Wr(),this.relativeTargetOrigin=Wr(),u1(this.relativeTargetOrigin,this.target,f.target),ca(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}_f.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||I3(this.parent.latestValues)||yG(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(l=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===yi.timestamp&&(l=!1),l)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;ca(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;j1e(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:p}=a;if(!p){this.projectionTransform&&(this.projectionDelta=n0(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=n0(),this.projectionDeltaWithTransform=n0());const m=this.projectionTransform;l1(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=vU(this.projectionDelta,this.treeScale),(this.projectionTransform!==m||this.treeScale.x!==h||this.treeScale.y!==f)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),_f.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const c=this.snapshot,l=c?c.latestValues:{},u={...this.latestValues},d=n0();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=Wr(),f=c?c.source:void 0,p=this.layout?this.layout.source:void 0,m=f!==p,E=this.getStack(),b=!E||E.members.length<=1,x=!!(m&&!b&&this.options.crossfade===!0&&!this.path.some(Nve));this.animationProgress=0;let w;this.mixTargetDelta=N=>{const _=N/1e3;CU(d.x,o.x,_),CU(d.y,o.y,_),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(u1(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Ive(this.relativeTarget,this.relativeTargetOrigin,h,_),w&&ove(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Wr()),ca(w,this.relativeTarget)),m&&(this.animationValues=u,eve(u,l,this.latestValues,_,x,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Zu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$n.update(()=>{jS.hasAnimatedSinceResize=!0,this.currentAnimation=fve(0,AU,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(AU),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:l,latestValues:u}=o;if(!(!a||!c||!l)){if(this!==o&&this.layout&&l&&IG(this.options.animationType,this.layout.layoutBox,l.layoutBox)){c=this.target||Wr();const d=Xo(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+d;const h=Xo(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+h}ca(a,c),r0(a,u),l1(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new ave),this.sharedNodes.get(o).add(a);const l=a.options.initialPromotionConfig;a.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const l=this.getStack();l&&l.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(a=!0),!a)return;const l={};for(let u=0;u<EU.length;u++){const d="rotate"+EU[u];c[d]&&(l[d]=c[d],o.setStaticValue(d,0))}o.render();for(const u in l)o.setStaticValue(u,l[u]);o.scheduleRender()}getProjectionStyles(o){var a,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return pve;const l={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=FS(o==null?void 0:o.pointerEvents)||"",l.transform=u?u(this.latestValues,""):"none",l;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=FS(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Cf(this.latestValues)&&(m.transform=u?u({},""):"none",this.hasProjected=!1),m}const h=d.animationValues||d.latestValues;this.applyTransformsToTarget(),l.transform=vU(this.projectionDeltaWithTransform,this.treeScale,h),u&&(l.transform=u(h,l.transform));const{x:f,y:p}=this.projectionDelta;l.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,d.animationValues?l.opacity=d===this?(c=(a=h.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:l.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const m in o_){if(h[m]===void 0)continue;const{correct:E,applyTo:b}=o_[m],x=l.transform==="none"?h[m]:E(h[m],d);if(b){const w=b.length;for(let N=0;N<w;N++)l[b[N]]=x}else l[m]=x}return this.options.layoutId&&(l.pointerEvents=d===this?FS(o==null?void 0:o.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(xU),this.root.sharedNodes.clear()}}}function gve(t){t.updateLayout()}function yve(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?pa(d=>{const h=o?n.measuredBox[d]:n.layoutBox[d],f=Xo(h);h.min=r[d].min,h.max=h.min+f}):IG(i,n.layoutBox,r)&&pa(d=>{const h=o?n.measuredBox[d]:n.layoutBox[d],f=Xo(r[d]);h.max=h.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+f)});const a=n0();l1(a,r,n.layoutBox);const c=n0();o?l1(c,t.applyTransform(s,!0),n.measuredBox):l1(c,r,n.layoutBox);const l=!SG(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:f}=d;if(h&&f){const p=Wr();u1(p,n.layoutBox,h.layoutBox);const m=Wr();u1(m,r,f.layoutBox),CG(p,m)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=p,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:a,hasLayoutChanged:l,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function wve(t){_f.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function bve(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function vve(t){t.clearSnapshot()}function xU(t){t.clearMeasurements()}function Eve(t){t.isLayoutDirty=!1}function Ave(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function SU(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function xve(t){t.resolveTargetDelta()}function Sve(t){t.calcProjection()}function Cve(t){t.resetRotation()}function _ve(t){t.removeLeadSnapshot()}function CU(t,e,n){t.translate=sr(e.translate,0,n),t.scale=sr(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function _U(t,e,n,r){t.min=sr(e.min,n.min,r),t.max=sr(e.max,n.max,r)}function Ive(t,e,n,r){_U(t.x,e.x,n.x,r),_U(t.y,e.y,n.y,r)}function Nve(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Tve={duration:.45,ease:[.4,0,.1,1]},IU=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),NU=IU("applewebkit/")&&!IU("chrome/")?Math.round:gr;function TU(t){t.min=NU(t.min),t.max=NU(t.max)}function kve(t){TU(t.x),TU(t.y)}function IG(t,e,n){return t==="position"||t==="preserve-aspect"&&!C3(bU(e),bU(n),.2)}const Pve=_G({attachResizeListener:(t,e)=>Ru(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ZT={current:void 0},NG=_G({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ZT.current){const t=new Pve({});t.mount(window),t.setOptions({layoutScroll:!0}),ZT.current=t}return ZT.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Rve={pan:{Feature:G1e},drag:{Feature:q1e,ProjectionNode:NG,MeasureLayout:EG}},Ove=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Mve(t){const e=Ove.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function T3(t,e,n=1){const[r,s]=Mve(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return uG(o)?parseFloat(o):o}else return w3(s)?T3(s,e,n+1):s}function Dve(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(s=>{const i=s.get();if(!w3(i))return;const o=T3(i,r);o&&s.set(o)});for(const s in e){const i=e[s];if(!w3(i))continue;const o=T3(i,r);o&&(e[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:e,transitionEnd:n}}const Bve=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),TG=t=>Bve.has(t),Lve=t=>Object.keys(t).some(TG),kU=t=>t===Lm||t===lt,PU=(t,e)=>parseFloat(t.split(", ")[e]),RU=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return PU(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?PU(i[1],t):0}},Uve=new Set(["x","y","z"]),Fve=nA.filter(t=>!Uve.has(t));function jve(t){const e=[];return Fve.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Xy={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:RU(4,13),y:RU(5,14)};Xy.translateX=Xy.x;Xy.translateY=Xy.y;const $ve=(t,e,n)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(l=>{a[l]=Xy[l](r,i)}),e.render();const c=e.measureViewportBox();return n.forEach(l=>{const u=e.getValue(l);u&&u.jump(a[l]),t[l]=Xy[l](c,i)}),t},zve=(t,e,n={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(TG);let i=[],o=!1;const a=[];if(s.forEach(c=>{const l=t.getValue(c);if(!t.hasValue(c))return;let u=n[c],d=Qw(u);const h=e[c];let f;if(c_(h)){const p=h.length,m=h[0]===null?1:0;u=h[m],d=Qw(u);for(let E=m;E<p&&h[E]!==null;E++)f?OD(Qw(h[E])===f):f=Qw(h[E])}else f=Qw(h);if(d!==f)if(kU(d)&&kU(f)){const p=l.get();typeof p=="string"&&l.set(parseFloat(p)),typeof h=="string"?e[c]=parseFloat(h):Array.isArray(h)&&f===lt&&(e[c]=h.map(parseFloat))}else d!=null&&d.transform&&(f!=null&&f.transform)&&(u===0||h===0)?u===0?l.set(f.transform(u)):e[c]=d.transform(h):(o||(i=jve(t),o=!0),a.push(c),r[c]=r[c]!==void 0?r[c]:e[c],l.jump(h))}),a.length){const c=a.indexOf("height")>=0?window.pageYOffset:null,l=$ve(e,t,a);return i.length&&i.forEach(([u,d])=>{t.getValue(u).set(d)}),t.render(),fI&&c!==null&&window.scrollTo({top:c}),{target:l,transitionEnd:r}}else return{target:e,transitionEnd:r}};function Wve(t,e,n,r){return Lve(e)?zve(t,e,n,r):{target:e,transitionEnd:r}}const Hve=(t,e,n,r)=>{const s=Dve(t,e,r);return e=s.target,r=s.transitionEnd,Wve(t,e,n,r)},k3={current:null},kG={current:!1};function Vve(){if(kG.current=!0,!!fI)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>k3.current=t.matches;t.addListener(e),e()}else k3.current=!1}function Kve(t,e,n){const{willChange:r}=e;for(const s in e){const i=e[s],o=n[s];if(So(i))t.addValue(s,i),h_(r)&&r.add(s);else if(So(o))t.addValue(s,Jy(i,{owner:t})),h_(r)&&r.remove(s);else if(o!==i)if(t.hasValue(s)){const a=t.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,Jy(a!==void 0?a:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const OU=new WeakMap,PG=Object.keys(kv),qve=PG.length,MU=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Gve=SD.length;class Yve{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>$n.render(this.render,!1,!0);const{latestValues:a,renderState:c}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=mI(n),this.isVariantNode=mq(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:l,...u}=this.scrapeMotionValuesFromProps(n,{});for(const d in u){const h=u[d];a[d]!==void 0&&So(h)&&(h.set(a[d],!1),h_(l)&&l.add(d))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,OU.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),kG.current||Vve(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:k3.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){OU.delete(this.current),this.projection&&this.projection.unmount(),Zu(this.notifyUpdate),Zu(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=Bm.has(e),s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&$n.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,s,i){let o,a;for(let c=0;c<qve;c++){const l=PG[c],{isEnabled:u,Feature:d,ProjectionNode:h,MeasureLayout:f}=kv[l];h&&(o=h),u(n)&&(!this.features[l]&&d&&(this.features[l]=new d(this)),f&&(a=f))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:l,drag:u,dragConstraints:d,layoutScroll:h,layoutRoot:f}=n;this.projection.setOptions({layoutId:c,layout:l,alwaysMeasureLayout:!!u||d&&e0(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof l=="string"?l:"both",initialPromotionConfig:i,layoutScroll:h,layoutRoot:f})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Wr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<MU.length;r++){const s=MU[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=Kve(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<Gve;r++){const s=SD[r],i=this.props[s];(Tv(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Jy(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=RD(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!So(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new zD),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class RG extends Yve{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:s},i){let o=h1e(r,e||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){u1e(this,r,o);const a=Hve(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function Zve(t){return window.getComputedStyle(t)}class Qve extends RG{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(Bm.has(n)){const r=LD(n);return r&&r.default||0}else{const r=Zve(e),s=(bq(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return bG(e,n)}build(e,n,r,s){ID(e,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,n){return PD(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;So(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,s){Cq(e,n,r,s)}}class Jve extends RG{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Bm.has(n)){const r=LD(n);return r&&r.default||0}return n=_q.has(n)?n:AD(n),e.getAttribute(n)}measureInstanceViewportBox(){return Wr()}scrapeMotionValuesFromProps(e,n){return Nq(e,n)}build(e,n,r,s){TD(e,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,r,s){Iq(e,n,r,s)}mount(e){this.isSVGTag=kD(e.tagName),super.mount(e)}}const Xve=(t,e)=>_D(t)?new Jve(e,{enableHardwareAcceleration:!1}):new Qve(e,{enableHardwareAcceleration:!0}),eEe={layout:{ProjectionNode:NG,MeasureLayout:EG}},tEe={...I1e,...qwe,...Rve,...eEe},Ee=nwe((t,e)=>Mwe(t,e,tEe,Xve));function OG(){const t=Z.useRef(!1);return ED(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function nEe(){const t=OG(),[e,n]=Z.useState(0),r=Z.useCallback(()=>{t.current&&n(e+1)},[e]);return[Z.useCallback(()=>$n.postRender(r),[r]),e]}class rEe extends Z.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function sEe({children:t,isPresent:e}){const n=Z.useId(),r=Z.useRef(null),s=Z.useRef({width:0,height:0,top:0,left:0});return Z.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:c}=s.current;if(e||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(l)}},[e]),Z.createElement(rEe,{isPresent:e,childRef:r,sizeRef:s},Z.cloneElement(t,{ref:r}))}const QT=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=Tq(iEe),c=Z.useId(),l=Z.useMemo(()=>({id:c,initial:e,isPresent:n,custom:s,onExitComplete:u=>{a.set(u,!0);for(const d of a.values())if(!d)return;r&&r()},register:u=>(a.set(u,!1),()=>a.delete(u))}),i?void 0:[n]);return Z.useMemo(()=>{a.forEach((u,d)=>a.set(d,!1))},[n]),Z.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=Z.createElement(sEe,{isPresent:n},t)),Z.createElement(hI.Provider,{value:l},t)};function iEe(){return new Map}function oEe(t){return Z.useEffect(()=>()=>t(),[])}const If=t=>t.key||"";function aEe(t,e){t.forEach(n=>{const r=If(n);e.set(r,n)})}function cEe(t){const e=[];return Z.Children.forEach(t,n=>{Z.isValidElement(n)&&e.push(n)}),e}const Rv=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=Z.useContext(CD).forceRender||nEe()[0],c=OG(),l=cEe(t);let u=l;const d=Z.useRef(new Map).current,h=Z.useRef(u),f=Z.useRef(new Map).current,p=Z.useRef(!0);if(ED(()=>{p.current=!1,aEe(l,f),h.current=u}),oEe(()=>{p.current=!0,f.clear(),d.clear()}),p.current)return Z.createElement(Z.Fragment,null,u.map(x=>Z.createElement(QT,{key:If(x),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},x)));u=[...u];const m=h.current.map(If),E=l.map(If),b=m.length;for(let x=0;x<b;x++){const w=m[x];E.indexOf(w)===-1&&!d.has(w)&&d.set(w,void 0)}return o==="wait"&&d.size&&(u=[]),d.forEach((x,w)=>{if(E.indexOf(w)!==-1)return;const N=f.get(w);if(!N)return;const _=m.indexOf(w);let L=x;if(!L){const U=()=>{d.delete(w);const F=Array.from(f.keys()).filter(M=>!E.includes(M));if(F.forEach(M=>f.delete(M)),h.current=l.filter(M=>{const W=If(M);return W===w||F.includes(W)}),!d.size){if(c.current===!1)return;a(),r&&r()}};L=Z.createElement(QT,{key:If(N),isPresent:!1,onExitComplete:U,custom:e,presenceAffectsLayout:i,mode:o},N),d.set(w,L)}u.splice(_,0,L)}),u=u.map(x=>{const w=x.key;return d.has(w)?x:Z.createElement(QT,{key:If(x),isPresent:!0,presenceAffectsLayout:i,mode:o},x)}),Z.createElement(Z.Fragment,null,d.size?u:u.map(x=>Z.cloneElement(x)))},p_=({size:t=24,className:e=""})=>v.jsx("div",{className:`rounded-full bg-white flex items-center justify-center p-1 ${e}`,style:{width:t,height:t},children:v.jsx("img",{src:"/solana-sol-logo.png",alt:"",width:t*.85,height:t*.85,style:{width:t*.85,height:t*.85,objectFit:"contain"},onError:n=>{console.log("Solana icon failed to load"),n.currentTarget.style.display="none"}})}),m_=({size:t=24,className:e=""})=>v.jsx("img",{src:"/bnb-bnb-logo.png",alt:"",width:t,height:t,className:`rounded-full ${e}`,style:{width:t,height:t,objectFit:"cover"},onError:n=>{console.log("BNB icon failed to load"),n.currentTarget.style.display="none"}}),lEe=({size:t=32,className:e=""})=>v.jsx("img",{src:"https://gold-secondary-clam-627.mypinata.cloud/ipfs/bafybeidjnom2r63q66gkh33t3yf7przdp3pouf7bmrvptdn56l5kkq4nhy",alt:"ODX Token",width:t,height:t,className:`rounded-lg ${e}`,style:{width:t,height:t,objectFit:"cover"}}),uEe=()=>v.jsx(Ee.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-bg-card border-b border-border-dark sticky top-0 z-50 backdrop-blur-sm bg-bg-card/95",children:v.jsx("div",{className:"container mx-auto px-4",children:v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs(Ee.div,{whileHover:{scale:1.05},className:"flex items-center space-x-3",children:[v.jsx(lEe,{size:40,className:"shadow-lg"}),v.jsx("div",{children:v.jsxs("h1",{className:"text-text-primary font-bold text-lg",children:["Ondrix ",v.jsx("span",{className:"gradient-text",children:"Escrow"})]})})]}),v.jsxs("nav",{className:"hidden md:flex items-center space-x-8",children:[v.jsx("a",{href:"#features",className:"text-text-secondary hover:text-accent-green transition-colors duration-200",children:"Features"}),v.jsx("a",{href:"#how-it-works",className:"text-text-secondary hover:text-accent-green transition-colors duration-200",children:"How It Works"}),v.jsx("a",{href:"#security",className:"text-text-secondary hover:text-accent-green transition-colors duration-200",children:"Security"})]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("div",{className:"w-2 h-2 bg-accent-green rounded-full animate-pulse"}),v.jsx("span",{className:"text-text-muted text-sm hidden sm:block",children:"Live"})]})]})})});var dEe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const hEe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fEe=(t,e)=>{const n=Z.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:a,...c},l)=>Z.createElement("svg",{ref:l,...dEe,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${hEe(t)}`,...c},[...e.map(([u,d])=>Z.createElement(u,d)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n};var xs=fEe;const s0=xs("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Nf=xs("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),pEe=xs("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),i0=xs("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Tf=xs("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),JT=xs("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Ni=xs("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),mEe=xs("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),DU=xs("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ov=xs("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),gEe=xs("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),P3=xs("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),yEe=xs("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),Og=xs("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),BU=xs("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),wEe=xs("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),R3=xs("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),bEe=xs("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Jm={solana:"Solana Devnet",bnb:"BSC Testnet"},LU={solana:p_,bnb:m_},O3=({isOpen:t,onClose:e,onConfirm:n,currentChain:r,targetChain:s})=>v.jsx(Rv,{children:t&&v.jsxs(v.Fragment,{children:[v.jsx(Ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50"}),v.jsx(Ee.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-bg-card rounded-xl border border-border-dark max-w-md w-full p-6",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx("div",{className:"p-2 bg-accent-green/20 rounded-lg",children:v.jsx(P3,{className:"text-accent-green",size:20})}),v.jsxs("h3",{className:"text-lg font-semibold text-text-primary",children:["Switch to ",Jm[s]]})]}),v.jsx("button",{onClick:e,className:"p-2 hover:bg-bg-hover rounded-lg transition-colors",children:v.jsx(bEe,{size:20,className:"text-text-muted"})})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("p",{className:"text-text-secondary",children:["You'll be switched to ",Jm[s],". Your wallets will remain connected, and you can continue investing on the new network."]}),v.jsx("div",{className:"bg-bg-hover rounded-lg p-4",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:we.createElement(LU[r],{size:32})}),v.jsxs("div",{children:[v.jsx("div",{className:"text-sm font-medium text-text-primary",children:"From"}),v.jsx("div",{className:"text-xs text-text-muted",children:Jm[r]})]})]}),v.jsx("div",{className:"px-4",children:v.jsx("div",{className:"text-text-muted",children:"→"})}),v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:we.createElement(LU[s],{size:32})}),v.jsxs("div",{children:[v.jsx("div",{className:"text-sm font-medium text-text-primary",children:"To"}),v.jsx("div",{className:"text-xs text-text-muted",children:Jm[s]})]})]})]})}),v.jsx("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-3",children:v.jsxs("p",{className:"text-blue-300 text-sm",children:["💡 ",v.jsx("strong",{children:"What happens next:"})," You'll be switched to ",Jm[s]," with your wallets still connected. You can immediately start investing on the new network."]})})]}),v.jsxs("div",{className:"flex space-x-3 mt-6",children:[v.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 bg-bg-hover border border-border-dark rounded-lg text-text-primary hover:bg-bg-secondary transition-colors",children:"Cancel"}),v.jsxs("button",{onClick:n,className:"flex-1 px-4 py-2 bg-gradient-green text-white rounded-lg hover:opacity-90 transition-opacity",children:["Switch to ",Jm[s]]})]})]})})]})}),UU={solana:{name:"Solana",displayName:"Solana",color:"from-purple-500 to-pink-500",currency:"SOL"},bnb:{name:"BNB Chain",displayName:"BSC",color:"from-yellow-500 to-orange-500",currency:"BNB"}},FU=()=>{const t=Dm(),[e,n]=Z.useState(!1),[r,s]=Z.useState(null),i=c=>{c!==t.chain&&(t.isConnected?(s(c),n(!0)):t.switchChain(c))},o=()=>{r&&(t.switchChain(r),n(!1),s(null))},a=()=>{n(!1),s(null)};return v.jsxs("div",{className:"w-full max-w-md mx-auto",children:[v.jsx("div",{className:"text-text-muted text-sm mb-3 text-center",children:"Select Network"}),v.jsx("div",{className:"bg-bg-card rounded-xl p-2 border border-border-dark",children:v.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.keys(UU).map(c=>{const l=UU[c],u=t.chain===c;return v.jsxs(Ee.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>i(c),className:`
                  relative p-3 sm:p-4 rounded-lg transition-all duration-200 cursor-pointer
                  ${u?"bg-gradient-green text-white shadow-lg shadow-accent-green/25":"bg-bg-dark hover:bg-bg-hover border border-border-dark hover:border-border-green/50"}
                `,children:[v.jsxs("div",{className:"flex flex-col items-center space-y-1.5 sm:space-y-2",children:[v.jsx("div",{className:`
                    w-8 h-8 sm:w-12 sm:h-12 rounded-full flex items-center justify-center
                    ${u?"bg-white/20":`bg-gradient-to-br ${l.color}`}
                  `,children:c==="solana"?v.jsx(p_,{size:u?48:40,className:"sm:w-12 sm:h-12"}):v.jsx(m_,{size:u?48:40,className:"sm:w-12 sm:h-12"})}),v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:`text-sm sm:text-base font-semibold ${u?"text-white":"text-text-primary"}`,children:l.name}),v.jsx("div",{className:`text-xs ${u?"text-white/70":"text-text-muted"}`,children:l.displayName})]}),v.jsx("div",{className:`
                    text-xs px-2 py-1 rounded-full
                    ${u?"bg-white/20 text-white":"bg-bg-hover text-text-muted"}
                  `,children:l.currency})]}),u&&v.jsx(Ee.div,{initial:{scale:0},animate:{scale:1},className:"absolute top-2 right-2",children:v.jsx("div",{className:"w-3 h-3 bg-white rounded-full flex items-center justify-center",children:v.jsx("div",{className:"w-1.5 h-1.5 bg-accent-green rounded-full"})})})]},c)})})}),t.isConnected&&v.jsx(Ee.p,{initial:{opacity:0},animate:{opacity:1},className:"text-text-muted text-xs text-center mt-2",children:"Click to switch networks (wallets stay connected)"}),v.jsx(O3,{isOpen:e,onClose:a,onConfirm:o,currentChain:t.chain,targetChain:r||t.chain})]})},vEe="6.15.0";function EEe(t,e,n){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}async function Mi(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function at(t,e,n){for(let r in e){let s=e[r];const i=n?n[r]:null;i&&EEe(s,i,r),Object.defineProperty(t,r,{enumerable:!0,value:s,writable:!1})}}function o0(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>o0(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let s=0;s<t.length;s++)r+=n[t[s]>>4],r+=n[t[s]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return o0(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${o0(r,e)}: ${o0(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Fs(t,e){return t&&t.code===e}function WD(t){return Fs(t,"CALL_EXCEPTION")}function Zn(t,e,n){let r=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${o0(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+o0(a))}}i.push(`code=${e}`),i.push(`version=${vEe}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return at(s,{code:e}),n&&Object.assign(s,n),s.shortMessage==null&&at(s,{shortMessage:r}),s}function ue(t,e,n,r){if(!t)throw Zn(e,n,r)}function Q(t,e,n,r){ue(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function MG(t,e,n){n==null&&(n=""),n&&(n=": "+n),ue(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),ue(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}const AEe=["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"){const n=String.fromCharCode(233).normalize("NFD"),r=String.fromCharCode(101,769);if(n!==r)throw new Error("broken")}t.push(e)}catch{}return t},[]);function xEe(t){ue(AEe.indexOf(t)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:t}})}function oA(t,e,n){if(n==null&&(n=""),t!==e){let r=n,s="new";n&&(r+=".",s+=" "+n),ue(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function DG(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(s,s+2),16),s+=2;return r}Q(!1,"invalid BytesLike value",e||"value",t)}function Tt(t,e){return DG(t,e,!1)}function Di(t,e){return DG(t,e,!0)}function Mn(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function HD(t){return Mn(t,!0)||t instanceof Uint8Array}const jU="0123456789abcdef";function Pe(t){const e=Tt(t);let n="0x";for(let r=0;r<e.length;r++){const s=e[r];n+=jU[(s&240)>>4]+jU[s&15]}return n}function yr(t){return"0x"+t.map(e=>Pe(e).substring(2)).join("")}function T0(t){return Mn(t,!0)?(t.length-2)/2:Tt(t).length}function fr(t,e,n){const r=Tt(t);return n!=null&&n>r.length&&ue(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),Pe(r.slice(e??0,n??r.length))}function BG(t,e,n){const r=Tt(t);ue(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),n?s.set(r,e-r.length):s.set(r,0),Pe(s)}function Qu(t,e){return BG(t,e,!0)}function SEe(t,e){return BG(t,e,!1)}const bI=BigInt(0),pc=BigInt(1),a0=9007199254740991;function g_(t,e){const n=vI(t,"value"),r=BigInt(At(e,"width"));if(ue(n>>r===bI,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-pc){const s=(pc<<r)-pc;return-((~n&s)+pc)}return n}function LG(t,e){let n=He(t,"value");const r=BigInt(At(e,"width")),s=pc<<r-pc;if(n<bI){n=-n,ue(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(pc<<r)-pc;return(~n&i)+pc}else ue(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function dp(t,e){const n=vI(t,"value"),r=BigInt(At(e,"bits"));return n&(pc<<r)-pc}function He(t,e){switch(typeof t){case"bigint":return t;case"number":return Q(Number.isInteger(t),"underflow",e||"value",t),Q(t>=-a0&&t<=a0,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){Q(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}Q(!1,"invalid BigNumberish value",e||"value",t)}function vI(t,e){const n=He(t,e);return ue(n>=bI,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const $U="0123456789abcdef";function EI(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=$U[n>>4],e+=$U[n&15];return BigInt(e)}return He(t)}function At(t,e){switch(typeof t){case"bigint":return Q(t>=-a0&&t<=a0,"overflow",e||"value",t),Number(t);case"number":return Q(Number.isInteger(t),"underflow",e||"value",t),Q(t>=-a0&&t<=a0,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return At(BigInt(t),e)}catch(n){Q(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}Q(!1,"invalid numeric value",e||"value",t)}function CEe(t){return At(EI(t))}function Vh(t,e){let r=vI(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=At(e,"width");for(ue(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<s*2;)r="0"+r}return"0x"+r}function cs(t){const e=vI(t,"value");if(e===bI)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(n.substring(i,i+2),16)}return r}function fc(t){let e=Pe(HD(t)?t:cs(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const zU="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const WU=BigInt(58);function _Ee(t){const e=Tt(t);let n=EI(e),r="";for(;n;)r=zU[Number(n%WU)]+r,n/=WU;for(let s=0;s<e.length&&!e[s];s++)r=zU[0]+r;return r}function IEe(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return Tt(e)}function NEe(t){const e=Tt(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var U0;class UG{constructor(e,n,r){te(this,"filter");te(this,"emitter");se(this,U0,void 0);G(this,U0,n),at(this,{emitter:e,filter:r})}async removeListener(){D(this,U0)!=null&&await this.emitter.off(this.filter,D(this,U0))}}U0=new WeakMap;function TEe(t,e,n,r,s){Q(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function FG(t,e,n,r,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?n.length-e-1:0}function kEe(t,e,n,r,s){return t==="OVERLONG"?(Q(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),FG(t,e,n))}const PEe=Object.freeze({error:TEe,ignore:FG,replace:kEe});function REe(t,e){e==null&&(e=PEe.error);const n=Tt(t,"bytes"),r=[];let s=0;for(;s<n.length;){const i=n[s++];if(!(i>>7)){r.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,n,r):s+=e("BAD_PREFIX",s-1,n,r);continue}if(s-1+o>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=n[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,n,r),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,n,r,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,n,r,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,n,r,c);continue}r.push(c)}}return r}function _l(t,e){Q(typeof t=="string","invalid string value","str",t),e!=null&&(xEe(e),t=t.normalize(e));let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);Q(r<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return new Uint8Array(n)}function OEe(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function y_(t,e){return OEe(REe(t,e))}function jG(t){async function e(n,r){ue(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=n.url.split(":")[0].toLowerCase();ue(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),ue(s==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=Zn("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{i=Zn("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let l;try{l=await fetch(n.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const u={};l.headers.forEach((f,p)=>{u[p.toLowerCase()]=f});const d=await l.arrayBuffer(),h=d==null?null:new Uint8Array(d);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:h}}return e}const MEe=12,DEe=250;let HU=jG();const BEe=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),LEe=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let XT=!1;async function $G(t,e){try{const n=t.match(BEe);if(!n)throw new Error("invalid data");return new Lh(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?IEe(n[3]):FEe(n[3]))}catch{return new Lh(599,"BAD REQUEST (invalid data: URI)",{},null,new Ju(t))}}function zG(t){async function e(n,r){try{const s=n.match(LEe);if(!s)throw new Error("invalid link");return new Ju(`${t}${s[2]}`)}catch{return new Lh(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Ju(n))}}return e}const cx={data:$G,ipfs:zG("https://gateway.ipfs.io/ipfs/")},WG=new WeakMap;var vp,Jd;class UEe{constructor(e){se(this,vp,void 0);se(this,Jd,void 0);G(this,vp,[]),G(this,Jd,!1),WG.set(e,()=>{if(!D(this,Jd)){G(this,Jd,!0);for(const n of D(this,vp))setTimeout(()=>{n()},0);G(this,vp,[])}})}addListener(e){ue(!D(this,Jd),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),D(this,vp).push(e)}get cancelled(){return D(this,Jd)}checkSignal(){ue(!this.cancelled,"cancelled","CANCELLED",{})}}vp=new WeakMap,Jd=new WeakMap;function lx(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var F0,j0,rc,uu,$0,z0,fs,Do,du,Ep,Ap,xp,Gc,sc,Xd,Sp,Ob;const t2=class t2{constructor(e){se(this,Sp);se(this,F0,void 0);se(this,j0,void 0);se(this,rc,void 0);se(this,uu,void 0);se(this,$0,void 0);se(this,z0,void 0);se(this,fs,void 0);se(this,Do,void 0);se(this,du,void 0);se(this,Ep,void 0);se(this,Ap,void 0);se(this,xp,void 0);se(this,Gc,void 0);se(this,sc,void 0);se(this,Xd,void 0);G(this,z0,String(e)),G(this,F0,!1),G(this,j0,!0),G(this,rc,{}),G(this,uu,""),G(this,$0,3e5),G(this,sc,{slotInterval:DEe,maxAttempts:MEe}),G(this,Xd,null)}get url(){return D(this,z0)}set url(e){G(this,z0,String(e))}get body(){return D(this,fs)==null?null:new Uint8Array(D(this,fs))}set body(e){if(e==null)G(this,fs,void 0),G(this,Do,void 0);else if(typeof e=="string")G(this,fs,_l(e)),G(this,Do,"text/plain");else if(e instanceof Uint8Array)G(this,fs,e),G(this,Do,"application/octet-stream");else if(typeof e=="object")G(this,fs,_l(JSON.stringify(e))),G(this,Do,"application/json");else throw new Error("invalid body")}hasBody(){return D(this,fs)!=null}get method(){return D(this,uu)?D(this,uu):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),G(this,uu,String(e).toUpperCase())}get headers(){const e=Object.assign({},D(this,rc));return D(this,du)&&(e.authorization=`Basic ${NEe(_l(D(this,du)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&D(this,Do)&&(e["content-type"]=D(this,Do)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){D(this,rc)[String(e).toLowerCase()]=String(n)}clearHeaders(){G(this,rc,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return D(this,du)||null}setCredentials(e,n){Q(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),G(this,du,`${e}:${n}`)}get allowGzip(){return D(this,j0)}set allowGzip(e){G(this,j0,!!e)}get allowInsecureAuthentication(){return!!D(this,F0)}set allowInsecureAuthentication(e){G(this,F0,!!e)}get timeout(){return D(this,$0)}set timeout(e){Q(e>=0,"timeout must be non-zero","timeout",e),G(this,$0,e)}get preflightFunc(){return D(this,Ep)||null}set preflightFunc(e){G(this,Ep,e)}get processFunc(){return D(this,Ap)||null}set processFunc(e){G(this,Ap,e)}get retryFunc(){return D(this,xp)||null}set retryFunc(e){G(this,xp,e)}get getUrlFunc(){return D(this,Xd)||HU}set getUrlFunc(e){G(this,Xd,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${D(this,fs)?Pe(D(this,fs)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(D(this,sc).slotInterval=e.slotInterval),e.maxAttempts!=null&&(D(this,sc).maxAttempts=e.maxAttempts)}send(){return ue(D(this,Gc)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),G(this,Gc,new UEe(this)),ye(this,Sp,Ob).call(this,0,VU()+this.timeout,0,this,new Lh(0,"",{},null,this))}cancel(){ue(D(this,Gc)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=WG.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();ue(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new t2(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,G(s,rc,Object.assign({},D(this,rc))),D(this,fs)&&G(s,fs,new Uint8Array(D(this,fs))),G(s,Do,D(this,Do)),s}clone(){const e=new t2(this.url);return G(e,uu,D(this,uu)),D(this,fs)&&G(e,fs,D(this,fs)),G(e,Do,D(this,Do)),G(e,rc,Object.assign({},D(this,rc))),G(e,du,D(this,du)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),G(e,Ep,D(this,Ep)),G(e,Ap,D(this,Ap)),G(e,xp,D(this,xp)),G(e,sc,Object.assign({},D(this,sc))),G(e,Xd,D(this,Xd)),e}static lockConfig(){XT=!0}static getGateway(e){return cx[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(XT)throw new Error("gateways locked");cx[e]=n}static registerGetUrl(e){if(XT)throw new Error("gateways locked");HU=e}static createGetUrlFunc(e){return jG(e)}static createDataGateway(){return $G}static createIpfsGatewayFunc(e){return zG(e)}};F0=new WeakMap,j0=new WeakMap,rc=new WeakMap,uu=new WeakMap,$0=new WeakMap,z0=new WeakMap,fs=new WeakMap,Do=new WeakMap,du=new WeakMap,Ep=new WeakMap,Ap=new WeakMap,xp=new WeakMap,Gc=new WeakMap,sc=new WeakMap,Xd=new WeakMap,Sp=new WeakSet,Ob=async function(e,n,r,s,i){var u,d,h;if(e>=D(this,sc).maxAttempts)return i.makeServerError("exceeded maximum retry limit");ue(VU()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await jEe(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in cx){const f=await cx[a](o.url,lx(D(s,Gc)));if(f instanceof Lh){let p=f;if(this.processFunc){lx(D(s,Gc));try{p=await this.processFunc(o,p)}catch(m){(m.throttle==null||typeof m.stall!="number")&&p.makeServerError("error in post-processing function",m).assertOk()}}return p}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,lx(D(s,Gc)));let l=new Lh(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const f=l.headers.location||"";return ye(u=o.redirect(f),Sp,Ob).call(u,e+1,n,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const f=l.headers["retry-after"];let p=D(this,sc).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(p=parseInt(f)),ye(d=o.clone(),Sp,Ob).call(d,e+1,n,p,s,l)}if(this.processFunc){lx(D(s,Gc));try{l=await this.processFunc(o,l)}catch(f){(f.throttle==null||typeof f.stall!="number")&&l.makeServerError("error in post-processing function",f).assertOk();let p=D(this,sc).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(p=f.stall),ye(h=o.clone(),Sp,Ob).call(h,e+1,n,p,s,l)}}return l};let Ju=t2;var lE,uE,dE,Bo,W0,Cp;const F5=class F5{constructor(e,n,r,s,i){se(this,lE,void 0);se(this,uE,void 0);se(this,dE,void 0);se(this,Bo,void 0);se(this,W0,void 0);se(this,Cp,void 0);G(this,lE,e),G(this,uE,n),G(this,dE,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),G(this,Bo,s==null?null:new Uint8Array(s)),G(this,W0,i||null),G(this,Cp,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${D(this,Bo)?Pe(D(this,Bo)):"null"}>`}get statusCode(){return D(this,lE)}get statusMessage(){return D(this,uE)}get headers(){return Object.assign({},D(this,dE))}get body(){return D(this,Bo)==null?null:new Uint8Array(D(this,Bo))}get bodyText(){try{return D(this,Bo)==null?"":y_(D(this,Bo))}catch{ue(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{ue(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new F5(599,r,this.headers,this.body,D(this,W0)||void 0);return G(s,Cp,{message:e,error:n}),s}throwThrottleError(e,n){n==null?n=-1:Q(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw at(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return D(this,Bo)!=null}get request(){return D(this,W0)}ok(){return D(this,Cp).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=D(this,Cp);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{D(this,Bo)&&(s=y_(D(this,Bo)))}catch{}ue(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};lE=new WeakMap,uE=new WeakMap,dE=new WeakMap,Bo=new WeakMap,W0=new WeakMap,Cp=new WeakMap;let Lh=F5;function VU(){return new Date().getTime()}function FEe(t){return _l(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function jEe(t){return new Promise(e=>setTimeout(e,t))}const $Ee=BigInt(-1),Za=BigInt(0),c0=BigInt(1),zEe=BigInt(5),Xm={};let k0="0000";for(;k0.length<80;)k0+=k0;function ff(t){let e=k0;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function Xw(t,e,n){const r=BigInt(e.width);if(e.signed){const s=c0<<r-c0;ue(n==null||t>=-s&&t<s,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t>Za?t=g_(dp(t,r),r):t=-g_(dp(-t,r),r)}else{const s=c0<<r;ue(n==null||t>=0&&t<s,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=(t%s+s)%s&s-c0}return t}function ek(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,n=128,r=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const i=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);Q(i,"invalid fixed format","format",t),e=i[1]!=="u",n=parseInt(i[2]),r=parseInt(i[3])}}else if(t){const i=t,o=(a,c,l)=>i[a]==null?l:(Q(typeof i[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,i[a]),i[a]);e=o("signed","boolean",e),n=o("width","number",n),r=o("decimals","number",r)}Q(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),Q(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const s=(e?"":"u")+"fixed"+String(n)+"x"+String(r);return{signed:e,width:n,decimals:r,name:s}}function WEe(t,e){let n="";t<Za&&(n="-",t*=$Ee);let r=t.toString();if(e===0)return n+r;for(;r.length<=e;)r=k0+r;const s=r.length-e;for(r=r.substring(0,s)+"."+r.substring(s);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return n+r}var ic,In,Ti,hu,kf,oc,Ql,hE,M3,fE,D3,pE,B3,mE,L3;const Hd=class Hd{constructor(e,n,r){se(this,hu);se(this,oc);se(this,hE);se(this,fE);se(this,pE);se(this,mE);te(this,"format");se(this,ic,void 0);se(this,In,void 0);se(this,Ti,void 0);te(this,"_value");oA(e,Xm,"FixedNumber"),G(this,In,n),G(this,ic,r);const s=WEe(n,r.decimals);at(this,{format:r.name,_value:s}),G(this,Ti,ff(r.decimals))}get signed(){return D(this,ic).signed}get width(){return D(this,ic).width}get decimals(){return D(this,ic).decimals}get value(){return D(this,In)}addUnsafe(e){return ye(this,hE,M3).call(this,e)}add(e){return ye(this,hE,M3).call(this,e,"add")}subUnsafe(e){return ye(this,fE,D3).call(this,e)}sub(e){return ye(this,fE,D3).call(this,e,"sub")}mulUnsafe(e){return ye(this,pE,B3).call(this,e)}mul(e){return ye(this,pE,B3).call(this,e,"mul")}mulSignal(e){ye(this,hu,kf).call(this,e);const n=D(this,In)*D(e,In);return ue(n%D(this,Ti)===Za,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),ye(this,oc,Ql).call(this,n/D(this,Ti),"mulSignal")}divUnsafe(e){return ye(this,mE,L3).call(this,e)}div(e){return ye(this,mE,L3).call(this,e,"div")}divSignal(e){ue(D(e,In)!==Za,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),ye(this,hu,kf).call(this,e);const n=D(this,In)*D(this,Ti);return ue(n%D(e,In)===Za,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),ye(this,oc,Ql).call(this,n/D(e,In),"divSignal")}cmp(e){let n=this.value,r=e.value;const s=this.decimals-e.decimals;return s>0?r*=ff(s):s<0&&(n*=ff(-s)),n<r?-1:n>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=D(this,In);return D(this,In)<Za&&(e-=D(this,Ti)-c0),e=D(this,In)/D(this,Ti)*D(this,Ti),ye(this,oc,Ql).call(this,e,"floor")}ceiling(){let e=D(this,In);return D(this,In)>Za&&(e+=D(this,Ti)-c0),e=D(this,In)/D(this,Ti)*D(this,Ti),ye(this,oc,Ql).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const n=this.decimals-e,r=zEe*ff(n-1);let s=this.value+r;const i=ff(n);return s=s/i*i,Xw(s,D(this,ic),"round"),new Hd(Xm,s,D(this,ic))}isZero(){return D(this,In)===Za}isNegative(){return D(this,In)<Za}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Hd.fromString(this.toString(),e)}static fromValue(e,n,r){const s=n==null?0:At(n),i=ek(r);let o=He(e,"value");const a=s-i.decimals;if(a>0){const c=ff(a);ue(o%c===Za,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=c}else a<0&&(o*=ff(-a));return Xw(o,i,"fromValue"),new Hd(Xm,o,i)}static fromString(e,n){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);Q(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const s=ek(n);let i=r[2]||"0",o=r[3]||"";for(;o.length<s.decimals;)o+=k0;ue(o.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,s.decimals);const a=BigInt(r[1]+i+o);return Xw(a,s,"fromString"),new Hd(Xm,a,s)}static fromBytes(e,n){let r=EI(Tt(e,"value"));const s=ek(n);return s.signed&&(r=g_(r,s.width)),Xw(r,s,"fromBytes"),new Hd(Xm,r,s)}};ic=new WeakMap,In=new WeakMap,Ti=new WeakMap,hu=new WeakSet,kf=function(e){Q(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},oc=new WeakSet,Ql=function(e,n){return e=Xw(e,D(this,ic),n),new Hd(Xm,e,D(this,ic))},hE=new WeakSet,M3=function(e,n){return ye(this,hu,kf).call(this,e),ye(this,oc,Ql).call(this,D(this,In)+D(e,In),n)},fE=new WeakSet,D3=function(e,n){return ye(this,hu,kf).call(this,e),ye(this,oc,Ql).call(this,D(this,In)-D(e,In),n)},pE=new WeakSet,B3=function(e,n){return ye(this,hu,kf).call(this,e),ye(this,oc,Ql).call(this,D(this,In)*D(e,In)/D(this,Ti),n)},mE=new WeakSet,L3=function(e,n){return ue(D(e,In)!==Za,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),ye(this,hu,kf).call(this,e),ye(this,oc,Ql).call(this,D(this,In)*D(this,Ti)/D(e,In),n)};let w_=Hd;function HEe(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function KU(t,e,n){let r=0;for(let s=0;s<n;s++)r=r*256+t[e+s];return r}function qU(t,e,n,r){const s=[];for(;n<e+1+r;){const i=HG(t,n);s.push(i.result),n+=i.consumed,ue(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:s}}function HG(t,e){ue(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{ue(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const s=KU(t,e+1,r);return n(e+1+r+s),qU(t,e,e+1+r,r+s)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),qU(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const s=KU(t,e+1,r);n(e+1+r+s);const i=Pe(t.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const s=Pe(t.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:HEe(t[e])}}function aA(t){const e=Tt(t,"data"),n=HG(e,0);return Q(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function GU(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function VG(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(i){r=r.concat(VG(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=GU(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(Tt(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=GU(e.length);return n.unshift(183+n.length),n.concat(e)}const YU="0123456789abcdef";function Kh(t){let e="0x";for(const n of VG(t))e+=YU[n>>4],e+=YU[n&15];return e}const KG=["wei","kwei","mwei","gwei","szabo","finney","ether"];function AI(t,e){let n=18;if(typeof e=="string"){const r=KG.indexOf(e);Q(r>=0,"invalid unit","unit",e),n=3*r}else e!=null&&(n=At(e,"unit"));return w_.fromValue(t,n,{decimals:n,width:512}).toString()}function qG(t,e){Q(typeof t=="string","value must be a string","value",t);let n=18;if(typeof e=="string"){const r=KG.indexOf(e);Q(r>=0,"invalid unit","unit",e),n=3*r}else e!=null&&(n=At(e,"unit"));return w_.fromString(t,{decimals:n,width:512}).value}function Ga(t){return AI(t,18)}function ZU(t){return qG(t,18)}const Li=32,U3=new Uint8Array(Li),VEe=["then"],ux={},GG=new WeakMap;function jf(t){return GG.get(t)}function QU(t,e){GG.set(t,e)}function eb(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function F3(t,e,n){return t.indexOf(null)>=0?e.map((r,s)=>r instanceof ew?F3(jf(r),r,n):r):t.reduce((r,s,i)=>{let o=e.getValue(s);return s in r||(n&&o instanceof ew&&(o=F3(jf(o),o,n)),r[s]=o),r},{})}var H0;const h0=class h0 extends Array{constructor(...n){const r=n[0];let s=n[1],i=(n[2]||[]).slice(),o=!0;r!==ux&&(s=n,i=[],o=!1);super(s.length);se(this,H0,void 0);s.forEach((l,u)=>{this[u]=l});const a=i.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(QU(this,Object.freeze(s.map((l,u)=>{const d=i[u];return d!=null&&a.get(d)===1?d:null}))),G(this,H0,[]),D(this,H0)==null&&D(this,H0),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,d)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const f=At(u,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const p=l[f];return p instanceof Error&&eb(`index ${f}`,p),p}if(VEe.indexOf(u)>=0)return Reflect.get(l,u,d);const h=l[u];if(h instanceof Function)return function(...f){return h.apply(this===d?l:this,f)};if(!(u in l))return l.getValue.apply(this===d?l:this,[u])}return Reflect.get(l,u,d)}});return QU(c,jf(this)),c}toArray(n){const r=[];return this.forEach((s,i)=>{s instanceof Error&&eb(`index ${i}`,s),n&&s instanceof h0&&(s=s.toArray(n)),r.push(s)}),r}toObject(n){const r=jf(this);return r.reduce((s,i,o)=>(ue(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),F3(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=jf(this),i=[],o=[];for(let a=n;a<r;a++)i.push(this[a]),o.push(s[a]);return new h0(ux,i,o)}filter(n,r){const s=jf(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&eb(`index ${a}`,c),n.call(r,c,a,this)&&(i.push(c),o.push(s[a]))}return new h0(ux,i,o)}map(n,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&eb(`index ${i}`,o),s.push(n.call(r,o,i,this))}return s}getValue(n){const r=jf(this).indexOf(n);if(r===-1)return;const s=this[r];return s instanceof Error&&eb(`property ${JSON.stringify(n)}`,s.error),s}static fromItems(n,r){return new h0(ux,n,r)}};H0=new WeakMap;let ew=h0;function JU(t){let e=cs(t);return ue(e.length<=Li,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:Li,offset:e.length}),e.length!==Li&&(e=Di(yr([U3.slice(e.length%Li),e]))),e}class sd{constructor(e,n,r,s){te(this,"name");te(this,"type");te(this,"localName");te(this,"dynamic");at(this,{name:e,type:n,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){Q(!1,e,this.localName,n)}}var fu,_p,V0,$S;class j3{constructor(){se(this,V0);se(this,fu,void 0);se(this,_p,void 0);G(this,fu,[]),G(this,_p,0)}get data(){return yr(D(this,fu))}get length(){return D(this,_p)}appendWriter(e){return ye(this,V0,$S).call(this,Di(e.data))}writeBytes(e){let n=Di(e);const r=n.length%Li;return r&&(n=Di(yr([n,U3.slice(r)]))),ye(this,V0,$S).call(this,n)}writeValue(e){return ye(this,V0,$S).call(this,JU(e))}writeUpdatableValue(){const e=D(this,fu).length;return D(this,fu).push(U3),G(this,_p,D(this,_p)+Li),n=>{D(this,fu)[e]=JU(n)}}}fu=new WeakMap,_p=new WeakMap,V0=new WeakSet,$S=function(e){return D(this,fu).push(e),G(this,_p,D(this,_p)+e.length),e.length};var to,Lo,Ip,Np,eh,gE,z3,n2,YG;const j5=class j5{constructor(e,n,r){se(this,gE);se(this,n2);te(this,"allowLoose");se(this,to,void 0);se(this,Lo,void 0);se(this,Ip,void 0);se(this,Np,void 0);se(this,eh,void 0);at(this,{allowLoose:!!n}),G(this,to,Di(e)),G(this,Ip,0),G(this,Np,null),G(this,eh,r??1024),G(this,Lo,0)}get data(){return Pe(D(this,to))}get dataLength(){return D(this,to).length}get consumed(){return D(this,Lo)}get bytes(){return new Uint8Array(D(this,to))}subReader(e){const n=new j5(D(this,to).slice(D(this,Lo)+e),this.allowLoose,D(this,eh));return G(n,Np,this),n}readBytes(e,n){let r=ye(this,n2,YG).call(this,0,e,!!n);return ye(this,gE,z3).call(this,e),G(this,Lo,D(this,Lo)+r.length),r.slice(0,e)}readValue(){return EI(this.readBytes(Li))}readIndex(){return CEe(this.readBytes(Li))}};to=new WeakMap,Lo=new WeakMap,Ip=new WeakMap,Np=new WeakMap,eh=new WeakMap,gE=new WeakSet,z3=function(e){var n;if(D(this,Np))return ye(n=D(this,Np),gE,z3).call(n,e);G(this,Ip,D(this,Ip)+e),ue(D(this,eh)<1||D(this,Ip)<=D(this,eh)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${D(this,eh)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:Di(D(this,to)),offset:D(this,Lo),length:e,info:{bytesRead:D(this,Ip),dataLength:this.dataLength}})},n2=new WeakSet,YG=function(e,n,r){let s=Math.ceil(n/Li)*Li;return D(this,Lo)+s>D(this,to).length&&(this.allowLoose&&r&&D(this,Lo)+n<=D(this,to).length?s=n:ue(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Di(D(this,to)),length:D(this,to).length,offset:D(this,Lo)+s})),D(this,to).slice(D(this,Lo),D(this,Lo)+s)};let $3=j5;function b_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function VD(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function KEe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");b_(t.outputLen),b_(t.blockLen)}function tw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ZG(t,e){VD(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const tk=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const QG=t=>t instanceof Uint8Array,qEe=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),nk=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Bc=(t,e)=>t<<32-e|t>>>e,GEe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!GEe)throw new Error("Non little-endian hardware is not supported");function YEe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function xI(t){if(typeof t=="string"&&(t=YEe(t)),!QG(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function ZEe(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!QG(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class KD{clone(){return this._cloneInto()}}function qD(t){const e=r=>t().update(xI(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function QEe(t=32){if(tk&&typeof tk.getRandomValues=="function")return tk.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class JG extends KD{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,KEe(e);const r=xI(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return tw(this),this.iHash.update(e),this}digestInto(e){tw(this),VD(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const XG=(t,e,n)=>new JG(t,e).update(n).digest();XG.create=(t,e)=>new JG(t,e);function JEe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}class eY extends KD{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=nk(this.buffer)}update(e){tw(this);const{view:n,buffer:r,blockLen:s}=this;e=xI(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=nk(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){tw(this),ZG(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;JEe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=nk(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const XEe=(t,e,n)=>t&e^~t&n,eAe=(t,e,n)=>t&e^t&n^e&n,tAe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),pd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),md=new Uint32Array(64);class nAe extends eY{constructor(){super(64,32,8,!1),this.A=pd[0]|0,this.B=pd[1]|0,this.C=pd[2]|0,this.D=pd[3]|0,this.E=pd[4]|0,this.F=pd[5]|0,this.G=pd[6]|0,this.H=pd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)md[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=md[d-15],f=md[d-2],p=Bc(h,7)^Bc(h,18)^h>>>3,m=Bc(f,17)^Bc(f,19)^f>>>10;md[d]=m+md[d-7]+p+md[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Bc(a,6)^Bc(a,11)^Bc(a,25),f=u+h+XEe(a,c,l)+tAe[d]+md[d]|0,m=(Bc(r,2)^Bc(r,13)^Bc(r,22))+eAe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+m|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){md.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const tY=qD(()=>new nAe),dx=BigInt(2**32-1),W3=BigInt(32);function nY(t,e=!1){return e?{h:Number(t&dx),l:Number(t>>W3&dx)}:{h:Number(t>>W3&dx)|0,l:Number(t&dx)|0}}function rY(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=nY(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const rAe=(t,e)=>BigInt(t>>>0)<<W3|BigInt(e>>>0),sAe=(t,e,n)=>t>>>n,iAe=(t,e,n)=>t<<32-n|e>>>n,oAe=(t,e,n)=>t>>>n|e<<32-n,aAe=(t,e,n)=>t<<32-n|e>>>n,cAe=(t,e,n)=>t<<64-n|e>>>n-32,lAe=(t,e,n)=>t>>>n-32|e<<64-n,uAe=(t,e)=>e,dAe=(t,e)=>t,sY=(t,e,n)=>t<<n|e>>>32-n,iY=(t,e,n)=>e<<n|t>>>32-n,oY=(t,e,n)=>e<<n-32|t>>>64-n,aY=(t,e,n)=>t<<n-32|e>>>64-n;function hAe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const fAe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),pAe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,mAe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),gAe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,yAe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),wAe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,bAe={fromBig:nY,split:rY,toBig:rAe,shrSH:sAe,shrSL:iAe,rotrSH:oAe,rotrSL:aAe,rotrBH:cAe,rotrBL:lAe,rotr32H:uAe,rotr32L:dAe,rotlSH:sY,rotlSL:iY,rotlBH:oY,rotlBL:aY,add:hAe,add3L:fAe,add3H:pAe,add4L:mAe,add4H:gAe,add5H:wAe,add5L:yAe},St=bAe,[vAe,EAe]=(()=>St.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),gd=new Uint32Array(80),yd=new Uint32Array(80);class AAe extends eY{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:m,Hl:E}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,m,E]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,m,E){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=m|0,this.Hl=E|0}process(e,n){for(let w=0;w<16;w++,n+=4)gd[w]=e.getUint32(n),yd[w]=e.getUint32(n+=4);for(let w=16;w<80;w++){const N=gd[w-15]|0,_=yd[w-15]|0,L=St.rotrSH(N,_,1)^St.rotrSH(N,_,8)^St.shrSH(N,_,7),U=St.rotrSL(N,_,1)^St.rotrSL(N,_,8)^St.shrSL(N,_,7),F=gd[w-2]|0,M=yd[w-2]|0,W=St.rotrSH(F,M,19)^St.rotrBH(F,M,61)^St.shrSH(F,M,6),H=St.rotrSL(F,M,19)^St.rotrBL(F,M,61)^St.shrSL(F,M,6),K=St.add4L(U,H,yd[w-7],yd[w-16]),P=St.add4H(K,L,W,gd[w-7],gd[w-16]);gd[w]=P|0,yd[w]=K|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:m,Gl:E,Hh:b,Hl:x}=this;for(let w=0;w<80;w++){const N=St.rotrSH(d,h,14)^St.rotrSH(d,h,18)^St.rotrBH(d,h,41),_=St.rotrSL(d,h,14)^St.rotrSL(d,h,18)^St.rotrBL(d,h,41),L=d&f^~d&m,U=h&p^~h&E,F=St.add5L(x,_,U,EAe[w],yd[w]),M=St.add5H(F,b,N,L,vAe[w],gd[w]),W=F|0,H=St.rotrSH(r,s,28)^St.rotrBH(r,s,34)^St.rotrBH(r,s,39),K=St.rotrSL(r,s,28)^St.rotrBL(r,s,34)^St.rotrBL(r,s,39),P=r&i^r&a^i&a,y=s&o^s&c^o&c;b=m|0,x=E|0,m=f|0,E=p|0,f=d|0,p=h|0,{h:d,l:h}=St.add(l|0,u|0,M|0,W|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const g=St.add3L(W,K,y);r=St.add3H(g,M,H,P),s=g|0}({h:r,l:s}=St.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=St.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=St.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=St.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=St.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=St.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:m,l:E}=St.add(this.Gh|0,this.Gl|0,m|0,E|0),{h:b,l:x}=St.add(this.Hh|0,this.Hl|0,b|0,x|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,m,E,b,x)}roundClean(){gd.fill(0),yd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const xAe=qD(()=>new AAe);function SAe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate globalThis object")}const XU=SAe();XU.crypto||XU.msCrypto;function CAe(t){switch(t){case"sha256":return tY.create();case"sha512":return xAe.create()}Q(!1,"invalid hashing algorithm name","algorithm",t)}const[cY,lY,uY]=[[],[],[]],_Ae=BigInt(0),tb=BigInt(1),IAe=BigInt(2),NAe=BigInt(7),TAe=BigInt(256),kAe=BigInt(113);for(let t=0,e=tb,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],cY.push(2*(5*r+n)),lY.push((t+1)*(t+2)/2%64);let s=_Ae;for(let i=0;i<7;i++)e=(e<<tb^(e>>NAe)*kAe)%TAe,e&IAe&&(s^=tb<<(tb<<BigInt(i))-tb);uY.push(s)}const[PAe,RAe]=rY(uY,!0),eF=(t,e,n)=>n>32?oY(t,e,n):sY(t,e,n),tF=(t,e,n)=>n>32?aY(t,e,n):iY(t,e,n);function OAe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=eF(l,u,1)^n[a],h=tF(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=lY[o],c=eF(s,i,a),l=tF(s,i,a),u=cY[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=PAe[r],t[1]^=RAe[r]}n.fill(0)}class GD extends KD{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,b_(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=qEe(this.state)}keccak(){OAe(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){tw(this);const{blockLen:n,state:r}=this;e=xI(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){tw(this,!1),VD(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return b_(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ZG(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new GD(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const MAe=(t,e,n)=>qD(()=>new GD(e,t,n)),DAe=MAe(1,136,256/8);let dY=!1;const hY=function(t){return DAe(t)};let fY=hY;function Zr(t){const e=Tt(t,"data");return Pe(fY(e))}Zr._=hY;Zr.lock=function(){dY=!0};Zr.register=function(t){if(dY)throw new TypeError("keccak256 is locked");fY=t};Object.freeze(Zr);const pY=function(t){return CAe("sha256").update(t).digest()};let mY=pY,gY=!1;function _w(t){const e=Tt(t,"data");return Pe(mY(e))}_w._=pY;_w.lock=function(){gY=!0};_w.register=function(t){if(gY)throw new Error("sha256 is locked");mY=t};Object.freeze(_w);Object.freeze(_w);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yY=BigInt(0),SI=BigInt(1),BAe=BigInt(2),CI=t=>t instanceof Uint8Array,LAe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function nw(t){if(!CI(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=LAe[t[n]];return e}function wY(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function YD(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function rw(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function qp(t){return YD(nw(t))}function ZD(t){if(!CI(t))throw new Error("Uint8Array expected");return YD(nw(Uint8Array.from(t).reverse()))}function sw(t,e){return rw(t.toString(16).padStart(e*2,"0"))}function QD(t,e){return sw(t,e).reverse()}function UAe(t){return rw(wY(t))}function nc(t,e,n){let r;if(typeof e=="string")try{r=rw(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(CI(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function Mv(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!CI(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function FAe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function jAe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function $Ae(t){let e;for(e=0;t>yY;t>>=SI,e+=1);return e}function zAe(t,e){return t>>BigInt(e)&SI}const WAe=(t,e,n)=>t|(n?SI:yY)<<BigInt(e),JD=t=>(BAe<<BigInt(t-1))-SI,rk=t=>new Uint8Array(t),nF=t=>Uint8Array.from(t);function bY(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=rk(t),s=rk(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=rk())=>{s=a(nF([0]),d),r=a(),d.length!==0&&(s=a(nF([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return Mv(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const HAe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function cA(t,e,n={}){const r=(s,i,o)=>{const a=HAe[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const VAe=Object.freeze(Object.defineProperty({__proto__:null,bitGet:zAe,bitLen:$Ae,bitMask:JD,bitSet:WAe,bytesToHex:nw,bytesToNumberBE:qp,bytesToNumberLE:ZD,concatBytes:Mv,createHmacDrbg:bY,ensureBytes:nc,equalBytes:FAe,hexToBytes:rw,hexToNumber:YD,numberToBytesBE:sw,numberToBytesLE:QD,numberToHexUnpadded:wY,numberToVarBytesBE:UAe,utf8ToBytes:jAe,validateObject:cA},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Es=BigInt(0),xr=BigInt(1),$f=BigInt(2),KAe=BigInt(3),H3=BigInt(4),rF=BigInt(5),sF=BigInt(8);BigInt(9);BigInt(16);function co(t,e){const n=t%e;return n>=Es?n:e+n}function qAe(t,e,n){if(n<=Es||e<Es)throw new Error("Expected power/modulo > 0");if(n===xr)return Es;let r=xr;for(;e>Es;)e&xr&&(r=r*t%n),t=t*t%n,e>>=xr;return r}function la(t,e,n){let r=t;for(;e-- >Es;)r*=r,r%=n;return r}function V3(t,e){if(t===Es||e<=Es)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=co(t,e),r=e,s=Es,i=xr;for(;n!==Es;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==xr)throw new Error("invert: does not exist");return co(s,e)}function GAe(t){const e=(t-xr)/$f;let n,r,s;for(n=t-xr,r=0;n%$f===Es;n/=$f,r++);for(s=$f;s<t&&qAe(s,e,t)!==t-xr;s++);if(r===1){const o=(t+xr)/H3;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+xr)/$f;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,s),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let m=a.sqr(h);f<l&&!a.eql(m,a.ONE);f++)m=a.sqr(m);const p=a.pow(u,xr<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function YAe(t){if(t%H3===KAe){const e=(t+xr)/H3;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%sF===rF){const e=(t-rF)/sF;return function(r,s){const i=r.mul(s,$f),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,$f),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return GAe(t)}const ZAe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function QAe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=ZAe.reduce((r,s)=>(r[s]="function",r),e);return cA(t,n)}function JAe(t,e,n){if(n<Es)throw new Error("Expected power > 0");if(n===Es)return t.ONE;if(n===xr)return e;let r=t.ONE,s=e;for(;n>Es;)n&xr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=xr;return r}function XAe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function vY(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function exe(t,e,n=!1,r={}){if(t<=Es)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=vY(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=YAe(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:JD(s),ZERO:Es,ONE:xr,create:c=>co(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Es<=c&&c<t},is0:c=>c===Es,isOdd:c=>(c&xr)===xr,neg:c=>co(-c,t),eql:(c,l)=>c===l,sqr:c=>co(c*c,t),add:(c,l)=>co(c+l,t),sub:(c,l)=>co(c-l,t),mul:(c,l)=>co(c*l,t),pow:(c,l)=>JAe(a,c,l),div:(c,l)=>co(c*V3(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>V3(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>XAe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?QD(c,i):sw(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?ZD(c):qp(c)}});return Object.freeze(a)}function EY(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function AY(t){const e=EY(t);return e+Math.ceil(e/2)}function txe(t,e,n=!1){const r=t.length,s=EY(e),i=AY(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=n?qp(t):ZD(t),a=co(o,e-xr)+xr;return n?QD(a,s):sw(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nxe=BigInt(0),sk=BigInt(1);function rxe(t,e){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>nxe;)i&sk&&(o=o.add(a)),a=a.double(),i>>=sk;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let l=s,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let l=t.ZERO,u=t.BASE;const d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){const m=p*c;let E=Number(o&d);o>>=f,E>c&&(E-=h,o+=sk);const b=m,x=m+Math.abs(E)-1,w=p%2!==0,N=E<0;E===0?u=u.add(n(w,i[b])):l=l.add(n(N,i[x]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function xY(t){return QAe(t.Fp),cA(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...vY(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function sxe(t){const e=xY(t);cA(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:ixe,hexToBytes:oxe}=VAe,hp={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=hp;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:ixe(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=hp,n=typeof t=="string"?oxe(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=hp._parseInt(n.subarray(2)),{d:o,l:a}=hp._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},Cu=BigInt(0),Ca=BigInt(1);BigInt(2);const iF=BigInt(3);BigInt(4);function axe(t){const e=sxe(t),{Fp:n}=e,r=e.toBytes||((p,m,E)=>{const b=m.toAffine();return Mv(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),s=e.fromBytes||(p=>{const m=p.subarray(1),E=n.fromBytes(m.subarray(0,n.BYTES)),b=n.fromBytes(m.subarray(n.BYTES,2*n.BYTES));return{x:E,y:b}});function i(p){const{a:m,b:E}=e,b=n.sqr(p),x=n.mul(b,p);return n.add(n.add(x,n.mul(p,m)),E)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&Cu<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:m,nByteLength:E,wrapPrivateKey:b,n:x}=e;if(m&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=nw(p)),typeof p!="string"||!m.includes(p.length))throw new Error("Invalid key");p=p.padStart(E*2,"0")}let w;try{w=typeof p=="bigint"?p:qp(nc("private key",p,E))}catch{throw new Error(`private key must be ${E} bytes, hex or bigint, not ${typeof p}`)}return b&&(w=co(w,x)),a(w),w}const l=new Map;function u(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(m,E,b){if(this.px=m,this.py=E,this.pz=b,m==null||!n.isValid(m))throw new Error("x required");if(E==null||!n.isValid(E))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required")}static fromAffine(m){const{x:E,y:b}=m||{};if(!m||!n.isValid(E)||!n.isValid(b))throw new Error("invalid affine point");if(m instanceof d)throw new Error("projective point not allowed");const x=w=>n.eql(w,n.ZERO);return x(E)&&x(b)?d.ZERO:new d(E,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const E=n.invertBatch(m.map(b=>b.pz));return m.map((b,x)=>b.toAffine(E[x])).map(d.fromAffine)}static fromHex(m){const E=d.fromAffine(s(nc("pointHex",m)));return E.assertValidity(),E}static fromPrivateKey(m){return d.BASE.multiply(c(m))}_setWindowSize(m){this._WINDOW_SIZE=m,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:m,y:E}=this.toAffine();if(!n.isValid(m)||!n.isValid(E))throw new Error("bad point: x or y not FE");const b=n.sqr(E),x=i(m);if(!n.eql(b,x))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:m}=this.toAffine();if(n.isOdd)return!n.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){u(m);const{px:E,py:b,pz:x}=this,{px:w,py:N,pz:_}=m,L=n.eql(n.mul(E,_),n.mul(w,x)),U=n.eql(n.mul(b,_),n.mul(N,x));return L&&U}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:m,b:E}=e,b=n.mul(E,iF),{px:x,py:w,pz:N}=this;let _=n.ZERO,L=n.ZERO,U=n.ZERO,F=n.mul(x,x),M=n.mul(w,w),W=n.mul(N,N),H=n.mul(x,w);return H=n.add(H,H),U=n.mul(x,N),U=n.add(U,U),_=n.mul(m,U),L=n.mul(b,W),L=n.add(_,L),_=n.sub(M,L),L=n.add(M,L),L=n.mul(_,L),_=n.mul(H,_),U=n.mul(b,U),W=n.mul(m,W),H=n.sub(F,W),H=n.mul(m,H),H=n.add(H,U),U=n.add(F,F),F=n.add(U,F),F=n.add(F,W),F=n.mul(F,H),L=n.add(L,F),W=n.mul(w,N),W=n.add(W,W),F=n.mul(W,H),_=n.sub(_,F),U=n.mul(W,M),U=n.add(U,U),U=n.add(U,U),new d(_,L,U)}add(m){u(m);const{px:E,py:b,pz:x}=this,{px:w,py:N,pz:_}=m;let L=n.ZERO,U=n.ZERO,F=n.ZERO;const M=e.a,W=n.mul(e.b,iF);let H=n.mul(E,w),K=n.mul(b,N),P=n.mul(x,_),y=n.add(E,b),g=n.add(w,N);y=n.mul(y,g),g=n.add(H,K),y=n.sub(y,g),g=n.add(E,x);let A=n.add(w,_);return g=n.mul(g,A),A=n.add(H,P),g=n.sub(g,A),A=n.add(b,x),L=n.add(N,_),A=n.mul(A,L),L=n.add(K,P),A=n.sub(A,L),F=n.mul(M,g),L=n.mul(W,P),F=n.add(L,F),L=n.sub(K,F),F=n.add(K,F),U=n.mul(L,F),K=n.add(H,H),K=n.add(K,H),P=n.mul(M,P),g=n.mul(W,g),K=n.add(K,P),P=n.sub(H,P),P=n.mul(M,P),g=n.add(g,P),H=n.mul(K,g),U=n.add(U,H),H=n.mul(A,g),L=n.mul(y,L),L=n.sub(L,H),H=n.mul(y,K),F=n.mul(A,F),F=n.add(F,H),new d(L,U,F)}subtract(m){return this.add(m.negate())}is0(){return this.equals(d.ZERO)}wNAF(m){return f.wNAFCached(this,l,m,E=>{const b=n.invertBatch(E.map(x=>x.pz));return E.map((x,w)=>x.toAffine(b[w])).map(d.fromAffine)})}multiplyUnsafe(m){const E=d.ZERO;if(m===Cu)return E;if(a(m),m===Ca)return this;const{endo:b}=e;if(!b)return f.unsafeLadder(this,m);let{k1neg:x,k1:w,k2neg:N,k2:_}=b.splitScalar(m),L=E,U=E,F=this;for(;w>Cu||_>Cu;)w&Ca&&(L=L.add(F)),_&Ca&&(U=U.add(F)),F=F.double(),w>>=Ca,_>>=Ca;return x&&(L=L.negate()),N&&(U=U.negate()),U=new d(n.mul(U.px,b.beta),U.py,U.pz),L.add(U)}multiply(m){a(m);let E=m,b,x;const{endo:w}=e;if(w){const{k1neg:N,k1:_,k2neg:L,k2:U}=w.splitScalar(E);let{p:F,f:M}=this.wNAF(_),{p:W,f:H}=this.wNAF(U);F=f.constTimeNegate(N,F),W=f.constTimeNegate(L,W),W=new d(n.mul(W.px,w.beta),W.py,W.pz),b=F.add(W),x=M.add(H)}else{const{p:N,f:_}=this.wNAF(E);b=N,x=_}return d.normalizeZ([b,x])[0]}multiplyAndAddUnsafe(m,E,b){const x=d.BASE,w=(_,L)=>L===Cu||L===Ca||!_.equals(x)?_.multiplyUnsafe(L):_.multiply(L),N=w(this,E).add(w(m,b));return N.is0()?void 0:N}toAffine(m){const{px:E,py:b,pz:x}=this,w=this.is0();m==null&&(m=w?n.ONE:n.inv(x));const N=n.mul(E,m),_=n.mul(b,m),L=n.mul(x,m);if(w)return{x:n.ZERO,y:n.ZERO};if(!n.eql(L,n.ONE))throw new Error("invZ was invalid");return{x:N,y:_}}isTorsionFree(){const{h:m,isTorsionFree:E}=e;if(m===Ca)return!0;if(E)return E(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:E}=e;return m===Ca?this:E?E(d,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return this.assertValidity(),r(d,this,m)}toHex(m=!0){return nw(this.toRawBytes(m))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=rxe(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function cxe(t){const e=xY(t);return cA(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function lxe(t){const e=cxe(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(g){return Cu<g&&g<n.ORDER}function a(g){return co(g,r)}function c(g){return V3(g,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=axe({...e,toBytes(g,A,I){const T=A.toAffine(),R=n.toBytes(T.x),B=Mv;return I?B(Uint8Array.from([A.hasEvenY()?2:3]),R):B(Uint8Array.from([4]),R,n.toBytes(T.y))},fromBytes(g){const A=g.length,I=g[0],T=g.subarray(1);if(A===s&&(I===2||I===3)){const R=qp(T);if(!o(R))throw new Error("Point is not on curve");const B=d(R);let O=n.sqrt(B);const S=(O&Ca)===Ca;return(I&1)===1!==S&&(O=n.neg(O)),{x:R,y:O}}else if(A===i&&I===4){const R=n.fromBytes(T.subarray(0,n.BYTES)),B=n.fromBytes(T.subarray(n.BYTES,2*n.BYTES));return{x:R,y:B}}else throw new Error(`Point of length ${A} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=g=>nw(sw(g,e.nByteLength));function p(g){const A=r>>Ca;return g>A}function m(g){return p(g)?a(-g):g}const E=(g,A,I)=>qp(g.slice(A,I));class b{constructor(A,I,T){this.r=A,this.s=I,this.recovery=T,this.assertValidity()}static fromCompact(A){const I=e.nByteLength;return A=nc("compactSignature",A,I*2),new b(E(A,0,I),E(A,I,2*I))}static fromDER(A){const{r:I,s:T}=hp.toSig(nc("DER",A));return new b(I,T)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(A){return new b(this.r,this.s,A)}recoverPublicKey(A){const{r:I,s:T,recovery:R}=this,B=U(nc("msgHash",A));if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");const O=R===2||R===3?I+e.n:I;if(O>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const S=R&1?"03":"02",z=l.fromHex(S+f(O)),Y=c(O),J=a(-B*Y),ae=a(T*Y),pe=l.BASE.multiplyAndAddUnsafe(z,J,ae);if(!pe)throw new Error("point at infinify");return pe.assertValidity(),pe}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return rw(this.toDERHex())}toDERHex(){return hp.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return rw(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const x={isValidPrivateKey(g){try{return u(g),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const g=AY(e.n);return txe(e.randomBytes(g),e.n)},precompute(g=8,A=l.BASE){return A._setWindowSize(g),A.multiply(BigInt(3)),A}};function w(g,A=!0){return l.fromPrivateKey(g).toRawBytes(A)}function N(g){const A=g instanceof Uint8Array,I=typeof g=="string",T=(A||I)&&g.length;return A?T===s||T===i:I?T===2*s||T===2*i:g instanceof l}function _(g,A,I=!0){if(N(g))throw new Error("first arg must be private key");if(!N(A))throw new Error("second arg must be public key");return l.fromHex(A).multiply(u(g)).toRawBytes(I)}const L=e.bits2int||function(g){const A=qp(g),I=g.length*8-e.nBitLength;return I>0?A>>BigInt(I):A},U=e.bits2int_modN||function(g){return a(L(g))},F=JD(e.nBitLength);function M(g){if(typeof g!="bigint")throw new Error("bigint expected");if(!(Cu<=g&&g<F))throw new Error(`bigint expected < 2^${e.nBitLength}`);return sw(g,e.nByteLength)}function W(g,A,I=H){if(["recovered","canonical"].some(de=>de in I))throw new Error("sign() legacy options not supported");const{hash:T,randomBytes:R}=e;let{lowS:B,prehash:O,extraEntropy:S}=I;B==null&&(B=!0),g=nc("msgHash",g),O&&(g=nc("prehashed msgHash",T(g)));const z=U(g),Y=u(A),J=[M(Y),M(z)];if(S!=null){const de=S===!0?R(n.BYTES):S;J.push(nc("extraEntropy",de))}const ae=Mv(...J),pe=z;function ve(de){const $e=L(de);if(!h($e))return;const Te=c($e),dt=l.BASE.multiply($e).toAffine(),vt=a(dt.x);if(vt===Cu)return;const rt=a(Te*a(pe+vt*Y));if(rt===Cu)return;let cn=(dt.x===vt?0:2)|Number(dt.y&Ca),_i=rt;return B&&p(rt)&&(_i=m(rt),cn^=1),new b(vt,_i,cn)}return{seed:ae,k2sig:ve}}const H={lowS:e.lowS,prehash:!1},K={lowS:e.lowS,prehash:!1};function P(g,A,I=H){const{seed:T,k2sig:R}=W(g,A,I),B=e;return bY(B.hash.outputLen,B.nByteLength,B.hmac)(T,R)}l.BASE._setWindowSize(8);function y(g,A,I,T=K){var dt;const R=g;if(A=nc("msgHash",A),I=nc("publicKey",I),"strict"in T)throw new Error("options.strict was renamed to lowS");const{lowS:B,prehash:O}=T;let S,z;try{if(typeof R=="string"||R instanceof Uint8Array)try{S=b.fromDER(R)}catch(vt){if(!(vt instanceof hp.Err))throw vt;S=b.fromCompact(R)}else if(typeof R=="object"&&typeof R.r=="bigint"&&typeof R.s=="bigint"){const{r:vt,s:rt}=R;S=new b(vt,rt)}else throw new Error("PARSE");z=l.fromHex(I)}catch(vt){if(vt.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(B&&S.hasHighS())return!1;O&&(A=e.hash(A));const{r:Y,s:J}=S,ae=U(A),pe=c(J),ve=a(ae*pe),de=a(Y*pe),$e=(dt=l.BASE.multiplyAndAddUnsafe(z,ve,de))==null?void 0:dt.toAffine();return $e?a($e.x)===Y:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:_,sign:P,verify:y,ProjectivePoint:l,Signature:b,utils:x}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function uxe(t){return{hash:t,hmac:(e,...n)=>XG(t,e,ZEe(...n)),randomBytes:QEe}}function dxe(t,e){const n=r=>lxe({...t,...uxe(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const SY=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),oF=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),hxe=BigInt(1),K3=BigInt(2),aF=(t,e)=>(t+e/K3)/e;function fxe(t){const e=SY,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=la(u,n,e)*u%e,h=la(d,n,e)*u%e,f=la(h,K3,e)*l%e,p=la(f,s,e)*f%e,m=la(p,i,e)*p%e,E=la(m,a,e)*m%e,b=la(E,c,e)*E%e,x=la(b,a,e)*m%e,w=la(x,n,e)*u%e,N=la(w,o,e)*p%e,_=la(N,r,e)*l%e,L=la(_,K3,e);if(!q3.eql(q3.sqr(L),t))throw new Error("Cannot find square root");return L}const q3=exe(SY,void 0,void 0,{sqrt:fxe}),Od=dxe({a:BigInt(0),b:BigInt(7),Fp:q3,n:oF,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=oF,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-hxe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=aF(i*t,e),c=aF(-r*t,e);let l=co(t-a*n-c*s,e),u=co(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},tY);BigInt(0);Od.ProjectivePoint;const Dv="0x0000000000000000000000000000000000000000",cF="0x0000000000000000000000000000000000000000000000000000000000000000",lF=BigInt(0),uF=BigInt(1),dF=BigInt(2),hF=BigInt(27),fF=BigInt(28),hx=BigInt(35),eg={};function pF(t){return Qu(cs(t),32)}var K0,Yc,q0,Tp;const Ja=class Ja{constructor(e,n,r,s){se(this,K0,void 0);se(this,Yc,void 0);se(this,q0,void 0);se(this,Tp,void 0);oA(e,eg,"Signature"),G(this,K0,n),G(this,Yc,r),G(this,q0,s),G(this,Tp,null)}get r(){return D(this,K0)}set r(e){Q(T0(e)===32,"invalid r","value",e),G(this,K0,Pe(e))}get s(){return Q(parseInt(D(this,Yc).substring(0,3))<8,"non-canonical s; use ._s","s",D(this,Yc)),D(this,Yc)}set s(e){Q(T0(e)===32,"invalid s","value",e),G(this,Yc,Pe(e))}get _s(){return D(this,Yc)}isValid(){return parseInt(D(this,Yc).substring(0,3))<8}get v(){return D(this,q0)}set v(e){const n=At(e,"value");Q(n===27||n===28,"invalid v","v",e),G(this,q0,n)}get networkV(){return D(this,Tp)}get legacyChainId(){const e=this.networkV;return e==null?null:Ja.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Tt(this.s);return this.yParity&&(e[0]|=128),Pe(e)}get compactSerialized(){return yr([this.r,this.yParityAndS])}get serialized(){return yr([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Ja(eg,this.r,this._s,this.v);return this.networkV&&G(e,Tp,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const n=He(e,"v");return n==hF||n==fF?lF:(Q(n>=hx,"invalid EIP-155 v","v",e),(n-hx)/dF)}static getChainIdV(e,n){return He(e)*dF+BigInt(35+n-27)}static getNormalizedV(e){const n=He(e);return n===lF||n===hF?27:n===uF||n===fF?28:(Q(n>=hx,"invalid v","v",e),n&uF?27:28)}static from(e){function n(l,u){Q(l,u,"signature",e)}if(e==null)return new Ja(eg,cF,cF,27);if(typeof e=="string"){const l=Tt(e,"signature");if(l.length===64){const u=Pe(l.slice(0,32)),d=l.slice(32,64),h=d[0]&128?28:27;return d[0]&=127,new Ja(eg,u,Pe(d),h)}if(l.length===65){const u=Pe(l.slice(0,32)),d=Pe(l.slice(32,64)),h=Ja.getNormalizedV(l[64]);return new Ja(eg,u,d,h)}n(!1,"invalid raw signature length")}if(e instanceof Ja)return e.clone();const r=e.r;n(r!=null,"missing r");const s=pF(r),i=function(l,u){if(l!=null)return pF(l);if(u!=null){n(Mn(u,32),"invalid yParityAndS");const d=Tt(u);return d[0]&=127,Pe(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(l,u,d){if(l!=null){const h=He(l);return{networkV:h>=hx?h:void 0,v:Ja.getNormalizedV(h)}}if(u!=null)return n(Mn(u,32),"invalid yParityAndS"),{v:Tt(u)[0]&128?28:27};if(d!=null){switch(At(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new Ja(eg,s,i,a);return o&&G(c,Tp,o),n(e.yParity==null||At(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};K0=new WeakMap,Yc=new WeakMap,q0=new WeakMap,Tp=new WeakMap;let Eo=Ja;var pu;const Vf=class Vf{constructor(e){se(this,pu,void 0);Q(T0(e)===32,"invalid private key","privateKey","[REDACTED]"),G(this,pu,Pe(e))}get privateKey(){return D(this,pu)}get publicKey(){return Vf.computePublicKey(D(this,pu))}get compressedPublicKey(){return Vf.computePublicKey(D(this,pu),!0)}sign(e){Q(T0(e)===32,"invalid digest length","digest",e);const n=Od.sign(Di(e),Di(D(this,pu)),{lowS:!0});return Eo.from({r:Vh(n.r,32),s:Vh(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=Vf.computePublicKey(e);return Pe(Od.getSharedSecret(Di(D(this,pu)),Tt(n),!1))}static computePublicKey(e,n){let r=Tt(e,"key");if(r.length===32){const i=Od.getPublicKey(r,!!n);return Pe(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=Od.ProjectivePoint.fromHex(r);return Pe(s.toRawBytes(n))}static recoverPublicKey(e,n){Q(T0(e)===32,"invalid digest length","digest",e);const r=Eo.from(n);let s=Od.Signature.fromCompact(Di(yr([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(Di(e));return Q(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,r){const s=Od.ProjectivePoint.fromHex(Vf.computePublicKey(e).substring(2)),i=Od.ProjectivePoint.fromHex(Vf.computePublicKey(n).substring(2));return"0x"+s.add(i).toHex(!!r)}};pu=new WeakMap;let Bv=Vf;const pxe=BigInt(0),mxe=BigInt(36);function mF(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=Tt(Zr(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const XD={};for(let t=0;t<10;t++)XD[String(t)]=String(t);for(let t=0;t<26;t++)XD[String.fromCharCode(65+t)]=String(10+t);const gF=15;function gxe(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>XD[r]).join("");for(;e.length>=gF;){let r=e.substring(0,gF);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const yxe=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function wxe(t){t=t.toLowerCase();let e=pxe;for(let n=0;n<t.length;n++)e=e*mxe+yxe[t[n]];return e}function un(t){if(Q(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=mF(t);return Q(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Q(t.substring(2,4)===gxe(t),"bad icap checksum","address",t);let e=wxe(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return mF("0x"+e)}Q(!1,"invalid address","address",t)}function bxe(t){const e=un(t.from);let r=He(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,un(fr(Zr(Kh([e,r])),12))}function CY(t){return t&&typeof t.getAddress=="function"}async function ik(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(ue(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),Q(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),un(n)}function Ui(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?un(t):(ue(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),ik(t,e.resolveName(t)));if(CY(t))return ik(t,t.getAddress());if(t&&typeof t.then=="function")return ik(t,t);Q(!1,"unsupported addressable value","target",t)}const nu={};function ze(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new Ei(nu,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function Gt(t,e){return new Ei(nu,`bytes${e||""}`,t,{size:e})}const yF=Symbol.for("_ethers_typed");var kp;const su=class su{constructor(e,n,r,s){te(this,"type");te(this,"value");se(this,kp,void 0);te(this,"_typedSymbol");s==null&&(s=null),oA(nu,e,"Typed"),at(this,{_typedSymbol:yF,type:n,value:r}),G(this,kp,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return D(this,kp)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return D(this,kp)===!0?-1:D(this,kp)===!1?this.value.length:null}static from(e,n){return new su(nu,e,n)}static uint8(e){return ze(e,8)}static uint16(e){return ze(e,16)}static uint24(e){return ze(e,24)}static uint32(e){return ze(e,32)}static uint40(e){return ze(e,40)}static uint48(e){return ze(e,48)}static uint56(e){return ze(e,56)}static uint64(e){return ze(e,64)}static uint72(e){return ze(e,72)}static uint80(e){return ze(e,80)}static uint88(e){return ze(e,88)}static uint96(e){return ze(e,96)}static uint104(e){return ze(e,104)}static uint112(e){return ze(e,112)}static uint120(e){return ze(e,120)}static uint128(e){return ze(e,128)}static uint136(e){return ze(e,136)}static uint144(e){return ze(e,144)}static uint152(e){return ze(e,152)}static uint160(e){return ze(e,160)}static uint168(e){return ze(e,168)}static uint176(e){return ze(e,176)}static uint184(e){return ze(e,184)}static uint192(e){return ze(e,192)}static uint200(e){return ze(e,200)}static uint208(e){return ze(e,208)}static uint216(e){return ze(e,216)}static uint224(e){return ze(e,224)}static uint232(e){return ze(e,232)}static uint240(e){return ze(e,240)}static uint248(e){return ze(e,248)}static uint256(e){return ze(e,256)}static uint(e){return ze(e,256)}static int8(e){return ze(e,-8)}static int16(e){return ze(e,-16)}static int24(e){return ze(e,-24)}static int32(e){return ze(e,-32)}static int40(e){return ze(e,-40)}static int48(e){return ze(e,-48)}static int56(e){return ze(e,-56)}static int64(e){return ze(e,-64)}static int72(e){return ze(e,-72)}static int80(e){return ze(e,-80)}static int88(e){return ze(e,-88)}static int96(e){return ze(e,-96)}static int104(e){return ze(e,-104)}static int112(e){return ze(e,-112)}static int120(e){return ze(e,-120)}static int128(e){return ze(e,-128)}static int136(e){return ze(e,-136)}static int144(e){return ze(e,-144)}static int152(e){return ze(e,-152)}static int160(e){return ze(e,-160)}static int168(e){return ze(e,-168)}static int176(e){return ze(e,-176)}static int184(e){return ze(e,-184)}static int192(e){return ze(e,-192)}static int200(e){return ze(e,-200)}static int208(e){return ze(e,-208)}static int216(e){return ze(e,-216)}static int224(e){return ze(e,-224)}static int232(e){return ze(e,-232)}static int240(e){return ze(e,-240)}static int248(e){return ze(e,-248)}static int256(e){return ze(e,-256)}static int(e){return ze(e,-256)}static bytes1(e){return Gt(e,1)}static bytes2(e){return Gt(e,2)}static bytes3(e){return Gt(e,3)}static bytes4(e){return Gt(e,4)}static bytes5(e){return Gt(e,5)}static bytes6(e){return Gt(e,6)}static bytes7(e){return Gt(e,7)}static bytes8(e){return Gt(e,8)}static bytes9(e){return Gt(e,9)}static bytes10(e){return Gt(e,10)}static bytes11(e){return Gt(e,11)}static bytes12(e){return Gt(e,12)}static bytes13(e){return Gt(e,13)}static bytes14(e){return Gt(e,14)}static bytes15(e){return Gt(e,15)}static bytes16(e){return Gt(e,16)}static bytes17(e){return Gt(e,17)}static bytes18(e){return Gt(e,18)}static bytes19(e){return Gt(e,19)}static bytes20(e){return Gt(e,20)}static bytes21(e){return Gt(e,21)}static bytes22(e){return Gt(e,22)}static bytes23(e){return Gt(e,23)}static bytes24(e){return Gt(e,24)}static bytes25(e){return Gt(e,25)}static bytes26(e){return Gt(e,26)}static bytes27(e){return Gt(e,27)}static bytes28(e){return Gt(e,28)}static bytes29(e){return Gt(e,29)}static bytes30(e){return Gt(e,30)}static bytes31(e){return Gt(e,31)}static bytes32(e){return Gt(e,32)}static address(e){return new su(nu,"address",e)}static bool(e){return new su(nu,"bool",!!e)}static bytes(e){return new su(nu,"bytes",e)}static string(e){return new su(nu,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new su(nu,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===yF}static dereference(e,n){if(su.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};kp=new WeakMap;let Ei=su;class vxe extends sd{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=Ei.dereference(n,"string");try{r=un(r)}catch(s){return this._throwError(s.message,n)}return e.writeValue(r)}decode(e){return un(Vh(e.readValue(),20))}}class Exe extends sd{constructor(n){super(n.name,n.type,"_",n.dynamic);te(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function _Y(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return ue(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),ue(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else Q(!1,"invalid tuple value","tuple",n);Q(e.length===r.length,"types/value length mismatch","tuple",n);let s=new j3,i=new j3,o=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let d=i.length;c.encode(i,u);let h=s.writeUpdatableValue();o.push(f=>{h(f+d)})}else c.encode(s,u)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function IY(t,e){let n=[],r=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if(Fs(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(Fs(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");n.push(o),r.push(i.localName||null)}),ew.fromItems(n,r)}class Axe extends sd{constructor(n,r,s){const i=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",i,s,o);te(this,"coder");te(this,"length");at(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(n);return r}encode(n,r){const s=Ei.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,n.writeValue(s.length)),MG(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return _Y(n,o,s)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),ue(r*Li<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*Li,length:n.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new Exe(this.coder));return IY(n,s)}}class xxe extends sd{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=Ei.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class NY extends sd{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=Di(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class Sxe extends NY{constructor(e){super("bytes",e)}decode(e){return Pe(super.decode(e))}}class Cxe extends sd{constructor(n,r){let s="bytes"+String(n);super(s,s,r,!1);te(this,"size");at(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let s=Di(Ei.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(s)}decode(n){return Pe(n.readBytes(this.size))}}const _xe=new Uint8Array([]);class Ixe extends sd{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(_xe)}decode(e){return e.readBytes(0),null}}const Nxe=BigInt(0),Txe=BigInt(1),kxe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Pxe extends sd{constructor(n,r,s){const i=(r?"int":"uint")+n*8;super(i,i,s,!1);te(this,"size");te(this,"signed");at(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let s=He(Ei.dereference(r,this.type)),i=dp(kxe,Li*8);if(this.signed){let o=dp(i,this.size*8-1);(s>o||s<-(o+Txe))&&this._throwError("value out-of-bounds",r),s=LG(s,8*Li)}else(s<Nxe||s>dp(i,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(s)}decode(n){let r=dp(n.readValue(),this.size*8);return this.signed&&(r=g_(r,this.size*8)),r}}class Rxe extends NY{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,_l(Ei.dereference(n,"string")))}decode(e){return y_(super.decode(e))}}class fx extends sd{constructor(n,r){let s=!1;const i=[];n.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);te(this,"coders");at(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(s=>{n.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[i]))}),Object.freeze(n)}encode(n,r){const s=Ei.dereference(r,"tuple");return _Y(n,this.coders,s)}decode(n){return IY(n,this.coders)}}function ok(t,e){return{address:un(t),storageKeys:e.map((n,r)=>(Q(Mn(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function Um(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(Q(n.length===2,"invalid slot set",`value[${r}]`,n),ok(n[0],n[1])):(Q(n!=null&&typeof n=="object","invalid address-slot set","value",t),ok(n.address,n.storageKeys)));Q(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,i)=>(s[i]=!0,s),{});return ok(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function TY(t){return{address:un(t.address),nonce:He(t.nonce!=null?t.nonce:0),chainId:He(t.chainId!=null?t.chainId:0),signature:Eo.from(t.signature)}}function Oxe(t){let e;return typeof t=="string"?e=Bv.computePublicKey(t,!1):e=t.publicKey,un(Zr("0x"+e.substring(4)).substring(26))}function Mxe(t,e){return Oxe(Bv.recoverPublicKey(t,e))}const ys=BigInt(0),Dxe=BigInt(2),Bxe=BigInt(27),Lxe=BigInt(28),Uxe=BigInt(35),Fxe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),ak=4096*32;function jxe(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Tt(t.blobToKzgCommitment(Pe(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Tt(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return Tt(t.blobToKZGCommitment(Pe(r)));Q(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return Tt(t.computeBlobProof(Pe(r),Pe(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return Tt(t.computeBlobKZGProof(Pe(r),Pe(s)));Q(!1,"unsupported KZG library","kzg",t)}}}function wF(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=_w(e).substring(4),"0x"+n}function Iw(t){return t==="0x"?null:un(t)}function _I(t,e){try{return Um(t)}catch(n){Q(!1,n.message,e,t)}}function $xe(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const s=t[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);n.push({address:Iw(s[1]),nonce:Tn(s[2],"nonce"),chainId:Tn(s[0],"chainId"),signature:Eo.from({yParity:Fm(s[3],"yParity"),r:Qu(s[4],32),s:Qu(s[5],32)})})}return n}catch(n){Q(!1,n.message,e,t)}}function Fm(t,e){return t==="0x"?0:At(t,e)}function Tn(t,e){if(t==="0x")return ys;const n=He(t,e);return Q(n<=Fxe,"value exceeds uint size",e,n),n}function $t(t,e){const n=He(t,"value"),r=cs(n);return Q(r.length<=32,"value too large",`tx.${e}`,n),r}function II(t){return Um(t).map(e=>[e.address,e.storageKeys])}function zxe(t){return t.map(e=>[$t(e.chainId,"chainId"),e.address,$t(e.nonce,"nonce"),$t(e.signature.yParity,"yParity"),cs(e.signature.r),cs(e.signature.s)])}function Wxe(t,e){Q(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)Q(Mn(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function Hxe(t){const e=aA(t);Q(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:Fm(e[0],"nonce"),gasPrice:Tn(e[1],"gasPrice"),gasLimit:Tn(e[2],"gasLimit"),to:Iw(e[3]),value:Tn(e[4],"value"),data:Pe(e[5]),chainId:ys};if(e.length===6)return n;const r=Tn(e[6],"v"),s=Tn(e[7],"r"),i=Tn(e[8],"s");if(s===ys&&i===ys)n.chainId=r;else{let o=(r-Uxe)/Dxe;o<ys&&(o=ys),n.chainId=o,Q(o!==ys||r===Bxe||r===Lxe,"non-canonical legacy v","v",e[6]),n.signature=Eo.from({r:Qu(e[7],32),s:Qu(e[8],32),v:r})}return n}function Vxe(t,e){const n=[$t(t.nonce,"nonce"),$t(t.gasPrice||0,"gasPrice"),$t(t.gasLimit,"gasLimit"),t.to||"0x",$t(t.value,"value"),t.data];let r=ys;if(t.chainId!=ys)r=He(t.chainId,"tx.chainId"),Q(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==ys&&(n.push(cs(r)),n.push("0x"),n.push("0x")),Kh(n);let s=BigInt(27+e.yParity);return r!==ys?s=Eo.getChainIdV(r,e.v):BigInt(e.v)!==s&&Q(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(cs(s)),n.push(cs(e.r)),n.push(cs(e.s)),Kh(n)}function NI(t,e){let n;try{if(n=Fm(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{Q(!1,"invalid yParity","yParity",e[0])}const r=Qu(e[1],32),s=Qu(e[2],32),i=Eo.from({r,s,yParity:n});t.signature=i}function Kxe(t){const e=aA(Tt(t).slice(1));Q(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Pe(t));const n={type:2,chainId:Tn(e[0],"chainId"),nonce:Fm(e[1],"nonce"),maxPriorityFeePerGas:Tn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Tn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Tn(e[4],"gasLimit"),to:Iw(e[5]),value:Tn(e[6],"value"),data:Pe(e[7]),accessList:_I(e[8],"accessList")};return e.length===9||NI(n,e.slice(9)),n}function qxe(t,e){const n=[$t(t.chainId,"chainId"),$t(t.nonce,"nonce"),$t(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),$t(t.maxFeePerGas||0,"maxFeePerGas"),$t(t.gasLimit,"gasLimit"),t.to||"0x",$t(t.value,"value"),t.data,II(t.accessList||[])];return e&&(n.push($t(e.yParity,"yParity")),n.push(cs(e.r)),n.push(cs(e.s))),yr(["0x02",Kh(n)])}function Gxe(t){const e=aA(Tt(t).slice(1));Q(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Pe(t));const n={type:1,chainId:Tn(e[0],"chainId"),nonce:Fm(e[1],"nonce"),gasPrice:Tn(e[2],"gasPrice"),gasLimit:Tn(e[3],"gasLimit"),to:Iw(e[4]),value:Tn(e[5],"value"),data:Pe(e[6]),accessList:_I(e[7],"accessList")};return e.length===8||NI(n,e.slice(8)),n}function Yxe(t,e){const n=[$t(t.chainId,"chainId"),$t(t.nonce,"nonce"),$t(t.gasPrice||0,"gasPrice"),$t(t.gasLimit,"gasLimit"),t.to||"0x",$t(t.value,"value"),t.data,II(t.accessList||[])];return e&&(n.push($t(e.yParity,"recoveryParam")),n.push(cs(e.r)),n.push(cs(e.s))),yr(["0x01",Kh(n)])}function Zxe(t){let e=aA(Tt(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const i=e[1],o=e[2],a=e[3];Q(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),Q(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),Q(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),Q(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),Q(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}Q(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",Pe(t));const s={type:3,chainId:Tn(e[0],"chainId"),nonce:Fm(e[1],"nonce"),maxPriorityFeePerGas:Tn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Tn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Tn(e[4],"gasLimit"),to:Iw(e[5]),value:Tn(e[6],"value"),data:Pe(e[7]),accessList:_I(e[8],"accessList"),maxFeePerBlobGas:Tn(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),Q(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),Q(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)Q(Mn(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||NI(s,e.slice(11)),s}function Qxe(t,e,n){const r=[$t(t.chainId,"chainId"),$t(t.nonce,"nonce"),$t(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),$t(t.maxFeePerGas||0,"maxFeePerGas"),$t(t.gasLimit,"gasLimit"),t.to||Dv,$t(t.value,"value"),t.data,II(t.accessList||[]),$t(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Wxe(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push($t(e.yParity,"yParity")),r.push(cs(e.r)),r.push(cs(e.s)),n)?yr(["0x03",Kh([r,n.map(s=>s.data),n.map(s=>s.commitment),n.map(s=>s.proof)])]):yr(["0x03",Kh(r)])}function Jxe(t){const e=aA(Tt(t).slice(1));Q(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Pe(t));const n={type:4,chainId:Tn(e[0],"chainId"),nonce:Fm(e[1],"nonce"),maxPriorityFeePerGas:Tn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Tn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Tn(e[4],"gasLimit"),to:Iw(e[5]),value:Tn(e[6],"value"),data:Pe(e[7]),accessList:_I(e[8],"accessList"),authorizationList:$xe(e[9],"authorizationList")};return e.length===10||NI(n,e.slice(10)),n}function Xxe(t,e){const n=[$t(t.chainId,"chainId"),$t(t.nonce,"nonce"),$t(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),$t(t.maxFeePerGas||0,"maxFeePerGas"),$t(t.gasLimit,"gasLimit"),t.to||"0x",$t(t.value,"value"),t.data,II(t.accessList||[]),zxe(t.authorizationList||[])];return e&&(n.push($t(e.yParity,"yParity")),n.push(cs(e.r)),n.push(cs(e.s))),yr(["0x04",Kh(n)])}var ac,G0,Y0,Z0,Q0,J0,X0,ey,ty,ny,ry,sy,Pp,th,Zc,nh,iy,oy,zS;const Vc=class Vc{constructor(){se(this,oy);se(this,ac,void 0);se(this,G0,void 0);se(this,Y0,void 0);se(this,Z0,void 0);se(this,Q0,void 0);se(this,J0,void 0);se(this,X0,void 0);se(this,ey,void 0);se(this,ty,void 0);se(this,ny,void 0);se(this,ry,void 0);se(this,sy,void 0);se(this,Pp,void 0);se(this,th,void 0);se(this,Zc,void 0);se(this,nh,void 0);se(this,iy,void 0);G(this,ac,null),G(this,G0,null),G(this,Z0,0),G(this,Q0,ys),G(this,J0,null),G(this,X0,null),G(this,ey,null),G(this,Y0,"0x"),G(this,ty,ys),G(this,ny,ys),G(this,ry,null),G(this,sy,null),G(this,Pp,null),G(this,th,null),G(this,Zc,null),G(this,nh,null),G(this,iy,null)}get type(){return D(this,ac)}set type(e){switch(e){case null:G(this,ac,null);break;case 0:case"legacy":G(this,ac,0);break;case 1:case"berlin":case"eip-2930":G(this,ac,1);break;case 2:case"london":case"eip-1559":G(this,ac,2);break;case 3:case"cancun":case"eip-4844":G(this,ac,3);break;case 4:case"pectra":case"eip-7702":G(this,ac,4);break;default:Q(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=D(this,G0);return e==null&&this.type===3?Dv:e}set to(e){G(this,G0,e==null?null:un(e))}get nonce(){return D(this,Z0)}set nonce(e){G(this,Z0,At(e,"value"))}get gasLimit(){return D(this,Q0)}set gasLimit(e){G(this,Q0,He(e))}get gasPrice(){const e=D(this,J0);return e==null&&(this.type===0||this.type===1)?ys:e}set gasPrice(e){G(this,J0,e==null?null:He(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=D(this,X0);return e??(this.type===2||this.type===3?ys:null)}set maxPriorityFeePerGas(e){G(this,X0,e==null?null:He(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=D(this,ey);return e??(this.type===2||this.type===3?ys:null)}set maxFeePerGas(e){G(this,ey,e==null?null:He(e,"maxFeePerGas"))}get data(){return D(this,Y0)}set data(e){G(this,Y0,Pe(e))}get value(){return D(this,ty)}set value(e){G(this,ty,He(e,"value"))}get chainId(){return D(this,ny)}set chainId(e){G(this,ny,He(e))}get signature(){return D(this,ry)||null}set signature(e){G(this,ry,e==null?null:Eo.from(e))}get accessList(){const e=D(this,sy)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){G(this,sy,e==null?null:Um(e))}get authorizationList(){const e=D(this,iy)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){G(this,iy,e==null?null:e.map(n=>TY(n)))}get maxFeePerBlobGas(){const e=D(this,Pp);return e==null&&this.type===3?ys:e}set maxFeePerBlobGas(e){G(this,Pp,e==null?null:He(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=D(this,th);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){Q(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)Q(Mn(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}G(this,th,e)}get blobs(){return D(this,nh)==null?null:D(this,nh).map(e=>Object.assign({},e))}set blobs(e){if(e==null){G(this,nh,null);return}const n=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(HD(i)){ue(D(this,Zc),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Tt(i);if(Q(o.length<=ak,"blob is too large",`blobs[${s}]`,i),o.length!==ak){const l=new Uint8Array(ak);l.set(o),o=l}const a=D(this,Zc).blobToKzgCommitment(o),c=Pe(D(this,Zc).computeBlobKzgProof(o,a));n.push({data:Pe(o),commitment:Pe(a),proof:c}),r.push(wF(1,a))}else{const o=Pe(i.commitment);n.push({data:Pe(i.data),commitment:o,proof:Pe(i.proof)}),r.push(wF(1,o))}}G(this,nh,n),G(this,th,r)}get kzg(){return D(this,Zc)}set kzg(e){e==null?G(this,Zc,null):G(this,Zc,jxe(e))}get hash(){return this.signature==null?null:Zr(ye(this,oy,zS).call(this,!0,!1))}get unsignedHash(){return Zr(this.unsignedSerialized)}get from(){return this.signature==null?null:Mxe(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:Bv.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return ye(this,oy,zS).call(this,!0,!0)}get unsignedSerialized(){return ye(this,oy,zS).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=D(this,Pp)!=null||D(this,th);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&ue(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),ue(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),ue(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Vc.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new Vc;if(typeof e=="string"){const r=Tt(e);if(r[0]>=127)return Vc.from(Hxe(r));switch(r[0]){case 1:return Vc.from(Gxe(r));case 2:return Vc.from(Kxe(r));case 3:return Vc.from(Zxe(r));case 4:return Vc.from(Jxe(r))}ue(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new Vc;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=Eo.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(Q(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),Q(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(Q(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),Q(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};ac=new WeakMap,G0=new WeakMap,Y0=new WeakMap,Z0=new WeakMap,Q0=new WeakMap,J0=new WeakMap,X0=new WeakMap,ey=new WeakMap,ty=new WeakMap,ny=new WeakMap,ry=new WeakMap,sy=new WeakMap,Pp=new WeakMap,th=new WeakMap,Zc=new WeakMap,nh=new WeakMap,iy=new WeakMap,oy=new WeakSet,zS=function(e,n){ue(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return Vxe(this,r);case 1:return Yxe(this,r);case 2:return qxe(this,r);case 3:return Qxe(this,r,n?this.blobs:null);case 4:return Xxe(this,r)}ue(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let v_=Vc;function um(t){return Zr(_l(t))}var eSe="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const bF=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),vF=4;function tSe(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,i=[0,1];for(let _=1;_<r;_++)i.push(s+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const d=31,h=2**d,f=h>>>1,p=f>>1,m=h-1;let E=0;for(let _=0;_<d;_++)E=E<<1|u();let b=[],x=0,w=h;for(;;){let _=Math.floor(((E-x+1)*s-1)/w),L=0,U=r;for(;U-L>1;){let W=L+U>>>1;_<i[W]?U=W:L=W}if(L==0)break;b.push(L);let F=x+Math.floor(w*i[L]/s),M=x+Math.floor(w*i[L+1]/s)-1;for(;!((F^M)&f);)E=E<<1&m|u(),F=F<<1&m,M=M<<1&m|1;for(;F&~M&p;)E=E&f|E<<1&m>>>1|u(),F=F<<1^f,M=(M^f)<<1|f|1;x=F,w=1+M-F}let N=r-4;return b.map(_=>{switch(_-N){case 3:return N+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return N+256+(t[a++]<<8|t[a++]);case 1:return N+t[a++];default:return _-1}})}function nSe(t){let e=0;return()=>t[e++]}function kY(t){return nSe(tSe(rSe(t)))}function rSe(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let n=t.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,o=0,a=0;s<n;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(r[i++]=a>>(o-=8));return r}function sSe(t){return t&1?~t>>1:t>>1}function iSe(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=sSe(e());return n}function Lv(t,e=0){let n=[];for(;;){let r=t(),s=t();if(!s)break;e+=r;for(let i=0;i<s;i++)n.push(e+i);e+=s+1}return n}function PY(t){return Uv(()=>{let e=Lv(t);if(e.length)return e})}function RY(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(oSe(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(aSe(n,t))}return e.flat()}function Uv(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function OY(t,e,n){let r=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)iSe(t,n).forEach((i,o)=>r[o].push(i));return r}function oSe(t,e){let n=1+e(),r=e(),s=Uv(e);return OY(s.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,d)=>{let h=d*r;return[c+d*n,l.map(f=>f+h)]})})}function aSe(t,e){let n=1+e();return OY(n,1+t,e).map(s=>[s[0],s.slice(1)])}function cSe(t){let e=[],n=Lv(t);return s(r([]),[]),e;function r(i){let o=t(),a=Uv(()=>{let c=Lv(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function lSe(t){return t.toString(16).toUpperCase().padStart(2,"0")}function MY(t){return`{${lSe(t)}}`}function uSe(t){let e=[];for(let n=0,r=t.length;n<r;){let s=t.codePointAt(n);n+=s<65536?1:2,e.push(s)}return e}function iw(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let s=0;s<n;)r.push(String.fromCodePoint(...t.slice(s,s+=4096)));return r.join("")}function dSe(t,e){let n=t.length,r=n-e.length;for(let s=0;r==0&&s<n;s++)r=t[s]-e[s];return r}var hSe="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const Fv=44032,E_=4352,A_=4449,x_=4519,DY=19,BY=21,ow=28,S_=BY*ow,fSe=DY*S_,pSe=Fv+fSe,mSe=E_+DY,gSe=A_+BY,ySe=x_+ow;function Mb(t){return t>>24&255}function LY(t){return t&16777215}let G3,EF,Y3,WS;function wSe(){let t=kY(hSe);G3=new Map(PY(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),EF=new Set(Lv(t)),Y3=new Map,WS=new Map;for(let[e,n]of RY(t)){if(!EF.has(e)&&n.length==2){let[r,s]=n,i=WS.get(r);i||(i=new Map,WS.set(r,i)),i.set(s,e)}Y3.set(e,n.reverse())}}function UY(t){return t>=Fv&&t<pSe}function bSe(t,e){if(t>=E_&&t<mSe&&e>=A_&&e<gSe)return Fv+(t-E_)*S_+(e-A_)*ow;if(UY(t)&&e>x_&&e<ySe&&(t-Fv)%ow==0)return t+(e-x_);{let n=WS.get(t);return n&&(n=n.get(e),n)?n:-1}}function FY(t){G3||wSe();let e=[],n=[],r=!1;function s(i){let o=G3.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(UY(i)){let o=i-Fv,a=o/S_|0,c=o%S_/ow|0,l=o%ow;s(E_+a),s(A_+c),l>0&&s(x_+l)}else{let o=Y3.get(i);o?n.push(...o):s(i)}if(!n.length)break;i=n.pop()}if(r&&e.length>1){let i=Mb(e[0]);for(let o=1;o<e.length;o++){let a=Mb(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=Mb(e[--c]),i<=a))break}i=Mb(e[o])}}return e}function vSe(t){let e=[],n=[],r=-1,s=0;for(let i of t){let o=Mb(i),a=LY(i);if(r==-1)o==0?r=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),s=o;else{let c=bSe(r,a);c>=0?r=c:s==0&&o==0?(e.push(r),r=a):(n.push(a),s=o)}}return r>=0&&e.push(r,...n),e}function jY(t){return FY(t).map(LY)}function ESe(t){return vSe(FY(t))}const AF=45,$Y=".",zY=65039,WY=1,C_=t=>Array.from(t);function jv(t,e){return t.P.has(e)||t.Q.has(e)}class ASe extends Array{get is_emoji(){return!0}}let Z3,HY,fp,Q3,VY,P0,ck,Mg,Pf,xF,J3;function e5(){if(Z3)return;let t=kY(eSe);const e=()=>Lv(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(h=>u.add(h));Z3=new Map(RY(t)),HY=n(),fp=e(),Q3=new Set(e().map(u=>fp[u])),fp=new Set(fp),VY=n(),n();let s=PY(t),i=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,s[d])),r(u,e()),u};P0=Uv(u=>{let d=Uv(t).map(h=>h+96);if(d.length){let h=u>=i;d[0]-=32,d=iw(d),h&&(d=`Restricted[${d}]`);let f=o(),p=o(),m=!t();return{N:d,P:f,Q:p,M:m,R:h}}}),ck=n(),Mg=new Map;let a=e().concat(C_(ck)).sort((u,d)=>u-d);a.forEach((u,d)=>{let h=t(),f=a[d]=h?a[d-h]:{V:[],M:new Map};f.V.push(u),ck.has(u)||Mg.set(u,f)});for(let{V:u,M:d}of new Set(Mg.values())){let h=[];for(let p of u){let m=P0.filter(b=>jv(b,p)),E=h.find(({G:b})=>m.some(x=>b.has(x)));E||(E={G:new Set,V:[]},h.push(E)),E.V.push(p),r(E.G,m)}let f=h.flatMap(p=>C_(p.G));for(let{G:p,V:m}of h){let E=new Set(f.filter(b=>!p.has(b)));for(let b of m)d.set(b,E)}}Pf=new Set;let c=new Set;const l=u=>Pf.has(u)?c.add(u):Pf.add(u);for(let u of P0){for(let d of u.P)l(d);for(let d of u.Q)l(d)}for(let u of Pf)!Mg.has(u)&&!c.has(u)&&Mg.set(u,WY);r(Pf,jY(Pf)),xF=cSe(t).map(u=>ASe.from(u)).sort(dSe),J3=new Map;for(let u of xF){let d=[J3];for(let h of u){let f=d.map(p=>{let m=p.get(h);return m||(m=new Map,p.set(h,m)),m});h===zY?d.push(...f):d=f}for(let h of d)h.V=u}}function t5(t){return(KY(t)?"":`${n5(TI([t]))} `)+MY(t)}function n5(t){return`"${t}"‎`}function xSe(t){if(t.length>=4&&t[2]==AF&&t[3]==AF)throw new Error(`invalid label extension: "${iw(t.slice(0,4))}"`)}function SSe(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function CSe(t){let e=t[0],n=bF.get(e);if(n)throw d1(`leading ${n}`);let r=t.length,s=-1;for(let i=1;i<r;i++){e=t[i];let o=bF.get(e);if(o){if(s==i)throw d1(`${n} + ${o}`);s=i+1,n=o}}if(s==r)throw d1(`trailing ${n}`)}function TI(t,e=1/0,n=MY){let r=[];_Se(t[0])&&r.push("◌"),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];KY(a)&&(r.push(iw(t.slice(s,o))),r.push(n(a)),s=o+1)}return r.push(iw(t.slice(s,i))),r.join("")}function _Se(t){return e5(),fp.has(t)}function KY(t){return e5(),VY.has(t)}function ISe(t){return PSe(NSe(t,ESe,MSe))}function NSe(t,e,n){if(!t)return[];e5();let r=0;return t.split($Y).map(s=>{let i=uSe(s),o={input:i,offset:r};r+=i.length+1;try{let a=o.tokens=OSe(i,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(SSe(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))xSe(u),l="ASCII";else{let h=a.flatMap(f=>f.is_emoji?[]:f);if(!h.length)l="Emoji";else{if(fp.has(u[0]))throw d1("leading combining mark");for(let m=1;m<c;m++){let E=a[m];if(!E.is_emoji&&fp.has(E[0]))throw d1(`emoji + combining mark: "${iw(a[m-1])} + ${TI([E[0]])}"`)}CSe(u);let f=C_(new Set(h)),[p]=kSe(f);RSe(p,h),TSe(p,f),l=p.N}}o.type=l}catch(a){o.error=a}return o})}function TSe(t,e){let n,r=[];for(let s of e){let i=Mg.get(s);if(i===WY)return;if(i){let o=i.M.get(s);if(n=n?n.filter(a=>o.has(a)):C_(o),!n.length)return}else r.push(s)}if(n){for(let s of n)if(r.every(i=>jv(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function kSe(t){let e=P0;for(let n of t){let r=e.filter(s=>jv(s,n));if(!r.length)throw P0.some(s=>jv(s,n))?GY(e[0],n):qY(n);if(e=r,r.length==1)break}return e}function PSe(t){return t.map(({input:e,error:n,output:r})=>{if(n){let s=n.message;throw new Error(t.length==1?s:`Invalid label ${n5(TI(e,63))}: ${s}`)}return iw(r)}).join($Y)}function qY(t){return new Error(`disallowed character: ${t5(t)}`)}function GY(t,e){let n=t5(e),r=P0.find(s=>s.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function d1(t){return new Error(`illegal placement: ${t}`)}function RSe(t,e){for(let n of e)if(!jv(t,n))throw GY(t,n);if(t.M){let n=jY(e);for(let r=1,s=n.length;r<s;r++)if(Q3.has(n[r])){let i=r+1;for(let o;i<s&&Q3.has(o=n[i]);i++)for(let a=r;a<i;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${t5(o)}`);if(i-r>vF)throw new Error(`excessive non-spacing marks: ${n5(TI(n.slice(r-1,i)))} (${i-r}/${vF})`);r=i}}}function OSe(t,e,n){let r=[],s=[];for(t=t.slice().reverse();t.length;){let i=DSe(t);if(i)s.length&&(r.push(e(s)),s=[]),r.push(n(i));else{let o=t.pop();if(Pf.has(o))s.push(o);else{let a=Z3.get(o);if(a)s.push(...a);else if(!HY.has(o))throw qY(o)}}}return s.length&&r.push(e(s)),r}function MSe(t){return t.filter(e=>e!=zY)}function DSe(t,e){let n=J3,r,s=t.length;for(;s&&(n=n.get(t[--s]),!!n);){let{V:i}=n;i&&(r=i,e&&e.push(...t.slice(s).reverse()),t.length=s)}return r}const YY=new Uint8Array(32);YY.fill(0);function SF(t){return Q(t.length!==0,"invalid ENS name; empty component","comp",t),t}function ZY(t){const e=_l(BSe(t)),n=[];if(t.length===0)return n;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(n.push(SF(e.slice(r,s))),r=s+1);return Q(r<e.length,"invalid ENS name; empty component","name",t),n.push(SF(e.slice(r))),n}function BSe(t){try{if(t.length===0)throw new Error("empty label");return ISe(t)}catch(e){Q(!1,`invalid ENS name (${e.message})`,"name",t)}}function X3(t){Q(typeof t=="string","invalid ENS name; not a string","name",t),Q(t.length,"invalid ENS name (empty label)","name",t);let e=YY;const n=ZY(t);for(;n.length;)e=Zr(yr([e,Zr(n.pop())]));return Pe(e)}function LSe(t,e){const n=e??63;return Q(n<=255,"DNS encoded label cannot exceed 255","length",n),Pe(yr(ZY(t).map(r=>{Q(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const QY=new Uint8Array(32);QY.fill(0);const USe=BigInt(-1),JY=BigInt(0),XY=BigInt(1),FSe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function jSe(t){const e=Tt(t),n=e.length%32;return n?yr([e,QY.slice(n)]):Pe(e)}const $Se=Vh(XY,32),zSe=Vh(JY,32),CF={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},lk=["name","version","chainId","verifyingContract","salt"];function _F(t){return function(e){return Q(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const WSe={name:_F("name"),version:_F("version"),chainId:function(t){const e=He(t,"domain.chainId");return Q(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):fc(e)},verifyingContract:function(t){try{return un(t).toLowerCase()}catch{}Q(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=Tt(t,"domain.salt");return Q(e.length===32,'invalid domain value "salt"',"domain.salt",t),Pe(e)}};function uk(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);Q(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const s=dp(FSe,n?r-1:r),i=n?(s+XY)*USe:JY;return function(o){const a=He(o,"value");return Q(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),Vh(n?LG(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return Q(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const s=Tt(r);return Q(s.length===n,`invalid length for ${t}`,"value",r),jSe(r)}}}switch(t){case"address":return function(e){return Qu(un(e),32)};case"bool":return function(e){return e?$Se:zSe};case"bytes":return function(e){return Zr(e)};case"string":return function(e){return um(e)}}return null}function IF(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function px(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var yE,mu,ay,r2,eZ;const ya=class ya{constructor(e){se(this,r2);te(this,"primaryType");se(this,yE,void 0);se(this,mu,void 0);se(this,ay,void 0);G(this,mu,new Map),G(this,ay,new Map);const n=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:l,type:u})=>{let{base:d,index:h}=px(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:l,type:d+(h||"")}}),n.set(c,new Set),r.set(c,[]),s.set(c,new Set)}),G(this,yE,JSON.stringify(i));for(const c in i){const l=new Set;for(const u of i[c]){Q(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const d=px(u.type).base;Q(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!uk(d)&&(Q(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(c),n.get(c).add(d))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);Q(o.length!==0,"missing primary type","types",e),Q(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),at(this,{primaryType:o[0]});function a(c,l){Q(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const d of l)s.get(d).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),D(this,mu).set(c,IF(c,i[c])+u.map(d=>IF(d,i[d])).join(""))}}get types(){return JSON.parse(D(this,yE))}getEncoder(e){let n=D(this,ay).get(e);return n||(n=ye(this,r2,eZ).call(this,e),D(this,ay).set(e,n)),n}encodeType(e){const n=D(this,mu).get(e);return Q(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Zr(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(uk(e))return r(e,n);const s=px(e).array;if(s)return Q(s.count===-1||s.count===n.length,`array length mismatch; expected length ${s.count}`,"value",n),n.map(o=>this._visit(s.prefix,o,r));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,n[a],r),o),{});Q(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new ya(e)}static getPrimaryType(e){return ya.from(e).primaryType}static hashStruct(e,n,r){return ya.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const s=CF[r];Q(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:s})}return n.sort((r,s)=>lk.indexOf(r.name)-lk.indexOf(s.name)),ya.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return yr(["0x1901",ya.hashDomain(e),ya.from(n).hash(r)])}static hash(e,n,r){return Zr(ya.encode(e,n,r))}static async resolveNames(e,n,r,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!Mn(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=ya.from(n);o.visit(r,(a,c)=>(a==="address"&&!Mn(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:r}}static getPayload(e,n,r){ya.hashDomain(e);const s={},i=[];lk.forEach(c=>{const l=e[c];l!=null&&(s[c]=WSe[c](l),i.push({name:c,type:CF[c]}))});const o=ya.from(n);n=o.types;const a=Object.assign({},n);return Q(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(r),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return Pe(Tt(l));if(c.match(/^u?int/))return He(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return Q(typeof l=="string","invalid string","value",l),l}Q(!1,"unsupported type","type",c)})}}};yE=new WeakMap,mu=new WeakMap,ay=new WeakMap,r2=new WeakSet,eZ=function(e){{const s=uk(e);if(s)return s}const n=px(e).array;if(n){const s=n.prefix,i=this.getEncoder(s);return o=>{Q(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return D(this,mu).has(s)&&(a=a.map(Zr)),Zr(yr(a))}}const r=this.types[e];if(r){const s=um(D(this,mu).get(e));return i=>{const o=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return D(this,mu).has(c)?Zr(l):l});return o.unshift(s),yr(o)}}Q(!1,`unknown type: ${e}`,"type",e)};let __=ya;function Fi(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const HSe="external public payable override",VSe=Fi(HSe.split(" ")),tZ="constant external internal payable private public pure view override",KSe=Fi(tZ.split(" ")),nZ="constructor error event fallback function receive struct",rZ=Fi(nZ.split(" ")),sZ="calldata memory storage payable indexed",qSe=Fi(sZ.split(" ")),GSe="tuple returns",YSe=[nZ,sZ,GSe,tZ].join(" "),ZSe=Fi(YSe.split(" ")),QSe={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},JSe=new RegExp("^(\\s*)"),XSe=new RegExp("^([0-9]+)"),eCe=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),iZ=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),oZ=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Rs,cc,wE,eO;const s2=class s2{constructor(e){se(this,wE);se(this,Rs,void 0);se(this,cc,void 0);G(this,Rs,0),G(this,cc,e.slice())}get offset(){return D(this,Rs)}get length(){return D(this,cc).length-D(this,Rs)}clone(){return new s2(D(this,cc))}reset(){G(this,Rs,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=ye(this,wE,eO).call(this,D(this,Rs)+1,e.match+1);return G(this,Rs,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;D(this,Rs)<e.match-1;){const r=this.peek().linkNext;n.push(ye(this,wE,eO).call(this,D(this,Rs)+1,r)),G(this,Rs,r)}return G(this,Rs,e.match+1),n}peek(){if(D(this,Rs)>=D(this,cc).length)throw new Error("out-of-bounds");return D(this,cc)[D(this,Rs)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return Dw(this,Rs)._++,e}toString(){const e=[];for(let n=D(this,Rs);n<D(this,cc).length;n++){const r=D(this,cc)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};Rs=new WeakMap,cc=new WeakMap,wE=new WeakSet,eO=function(e=0,n=0){return new s2(D(this,cc).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Tc=s2;function af(t){const e=[],n=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(JSe);a&&(i+=a[1].length,o=t.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=QSe[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;u=d+u,e[e.length-1].value=At(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(eCe),a){if(c.text=a[1],i+=c.text.length,ZSe.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(oZ)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(XSe),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Tc(e.map(o=>Object.freeze(o)))}function NF(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function kI(t,e){if(e.peekKeyword(rZ)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function Xu(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function aZ(t){let e=Xu(t,KSe);return NF(e,Fi("constant payable nonpayable".split(" "))),NF(e,Fi("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Uu(t,e){return t.popParams().map(n=>Ws.from(n,e))}function cZ(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return He(t.pop().text);throw new Error("invalid gas")}return null}function dm(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const tCe=new RegExp(/^(.*)\[([0-9]*)\]$/);function TF(t){const e=t.match(oZ);if(Q(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);Q(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);Q(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const rr={},Co=Symbol.for("_ethers_internal"),kF="_ParamTypeInternal",PF="_ErrorInternal",RF="_EventInternal",OF="_ConstructorInternal",MF="_FallbackInternal",DF="_FunctionInternal",BF="_StructInternal";var cy,HS;const wa=class wa{constructor(e,n,r,s,i,o,a,c){se(this,cy);te(this,"name");te(this,"type");te(this,"baseType");te(this,"indexed");te(this,"components");te(this,"arrayLength");te(this,"arrayChildren");if(oA(e,rr,"ParamType"),Object.defineProperty(this,Co,{value:kF}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");at(this,{name:n,type:r,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],s=[e];return ye(this,cy,HS).call(this,r,e,n,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,n){if(wa.isParamType(e))return e;if(typeof e=="string")try{return wa.from(af(e),n)}catch{Q(!1,"invalid param type","obj",e)}else if(e instanceof Tc){let a="",c="",l=null;Xu(e,Fi(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(m=>wa.from(m)),a=`tuple(${l.map(m=>m.format()).join(",")})`):(a=TF(e.popType("TYPE")),c=a);let u=null,d=null;for(;e.length&&e.peekType("BRACKET");){const m=e.pop();u=new wa(rr,"",a,c,null,l,d,u),d=m.value,a+=m.text,c="array",l=null}let h=null;if(Xu(e,qSe).has("indexed")){if(!n)throw new Error("");h=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new wa(rr,p,a,c,h,l,d,u)}const r=e.name;Q(!r||typeof r=="string"&&r.match(iZ),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(Q(n,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(tCe);if(o){const a=parseInt(o[2]||"-1"),c=wa.from({type:o[1],components:e.components});return new wa(rr,r||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(l=>wa.from(l)):null;return new wa(rr,r||"",i,"tuple",s,a,null,null)}return i=TF(e.type),new wa(rr,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[Co]===kF}};cy=new WeakSet,HS=function(e,n,r,s){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{var u;ye(u=o,cy,HS).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var u;ye(u=o[l],cy,HS).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}const i=r(this.type,n);i.then?e.push(async function(){s(await i)}()):s(i)};let Ws=wa;class hm{constructor(e,n,r){te(this,"type");te(this,"inputs");oA(e,rr,"Fragment"),r=Object.freeze(r.slice()),at(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{hm.from(JSON.parse(e))}catch{}return hm.from(af(e))}if(e instanceof Tc)switch(e.peekKeyword(rZ)){case"constructor":return Ou.from(e);case"error":return fo.from(e);case"event":return hl.from(e);case"fallback":case"receive":return cu.from(e);case"function":return fl.from(e);case"struct":return Gp.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Ou.from(e);case"error":return fo.from(e);case"event":return hl.from(e);case"fallback":case"receive":return cu.from(e);case"function":return fl.from(e);case"struct":return Gp.from(e)}ue(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}Q(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Ou.isFragment(e)}static isError(e){return fo.isFragment(e)}static isEvent(e){return hl.isFragment(e)}static isFunction(e){return fl.isFragment(e)}static isStruct(e){return Gp.isFragment(e)}}class PI extends hm{constructor(n,r,s,i){super(n,r,i);te(this,"name");Q(typeof s=="string"&&s.match(iZ),"invalid identifier","name",s),i=Object.freeze(i.slice()),at(this,{name:s})}}function $v(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class fo extends PI{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,Co,{value:PF})}get selector(){return um(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+$v(e,this.inputs)),n.join(" ")}static from(e){if(fo.isFragment(e))return e;if(typeof e=="string")return fo.from(af(e));if(e instanceof Tc){const n=kI("error",e),r=Uu(e);return dm(e),new fo(rr,n,r)}return new fo(rr,e.name,e.inputs?e.inputs.map(Ws.from):[])}static isFragment(e){return e&&e[Co]===PF}}class hl extends PI{constructor(n,r,s,i){super(n,"event",r,s);te(this,"anonymous");Object.defineProperty(this,Co,{value:RF}),at(this,{anonymous:i})}get topicHash(){return um(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+$v(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(i=>Ws.from(i)),new hl(rr,n,r,!1).topicHash}static from(n){if(hl.isFragment(n))return n;if(typeof n=="string")try{return hl.from(af(n))}catch{Q(!1,"invalid event fragment","obj",n)}else if(n instanceof Tc){const r=kI("event",n),s=Uu(n,!0),i=!!Xu(n,Fi(["anonymous"])).has("anonymous");return dm(n),new hl(rr,r,s,i)}return new hl(rr,n.name,n.inputs?n.inputs.map(r=>Ws.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[Co]===RF}}class Ou extends hm{constructor(n,r,s,i,o){super(n,r,s);te(this,"payable");te(this,"gas");Object.defineProperty(this,Co,{value:OF}),at(this,{payable:i,gas:o})}format(n){if(ue(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[`constructor${$v(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(Ou.isFragment(n))return n;if(typeof n=="string")try{return Ou.from(af(n))}catch{Q(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof Tc){Xu(n,Fi(["constructor"]));const r=Uu(n),s=!!Xu(n,VSe).has("payable"),i=cZ(n);return dm(n),new Ou(rr,"constructor",r,s,i)}return new Ou(rr,"constructor",n.inputs?n.inputs.map(Ws.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[Co]===OF}}class cu extends hm{constructor(n,r,s){super(n,"fallback",r);te(this,"payable");Object.defineProperty(this,Co,{value:MF}),at(this,{payable:s})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(n){if(cu.isFragment(n))return n;if(typeof n=="string")try{return cu.from(af(n))}catch{Q(!1,"invalid fallback fragment","obj",n)}else if(n instanceof Tc){const r=n.toString(),s=n.peekKeyword(Fi(["fallback","receive"]));if(Q(s,"type must be fallback or receive","obj",r),n.popKeyword(Fi(["fallback","receive"]))==="receive"){const c=Uu(n);return Q(c.length===0,"receive cannot have arguments","obj.inputs",c),Xu(n,Fi(["payable"])),dm(n),new cu(rr,[],!0)}let o=Uu(n);o.length?Q(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[Ws.from("bytes")];const a=aZ(n);if(Q(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),Xu(n,Fi(["returns"])).has("returns")){const c=Uu(n);Q(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return dm(n),new cu(rr,o,a==="payable")}if(n.type==="receive")return new cu(rr,[],!0);if(n.type==="fallback"){const r=[Ws.from("bytes")],s=n.stateMutability==="payable";return new cu(rr,r,s)}Q(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[Co]===MF}}class fl extends PI{constructor(n,r,s,i,o,a){super(n,"function",r,i);te(this,"constant");te(this,"outputs");te(this,"stateMutability");te(this,"payable");te(this,"gas");Object.defineProperty(this,Co,{value:DF}),o=Object.freeze(o.slice()),at(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return um(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n))),outputs:this.outputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+$v(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push($v(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(i=>Ws.from(i)),new fl(rr,n,"view",r,[],null).selector}static from(n){if(fl.isFragment(n))return n;if(typeof n=="string")try{return fl.from(af(n))}catch{Q(!1,"invalid function fragment","obj",n)}else if(n instanceof Tc){const s=kI("function",n),i=Uu(n),o=aZ(n);let a=[];Xu(n,Fi(["returns"])).has("returns")&&(a=Uu(n));const c=cZ(n);return dm(n),new fl(rr,s,o,i,a,c)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new fl(rr,n.name,r,n.inputs?n.inputs.map(Ws.from):[],n.outputs?n.outputs.map(Ws.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[Co]===DF}}class Gp extends PI{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,Co,{value:BF})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return Gp.from(af(e))}catch{Q(!1,"invalid struct fragment","obj",e)}else if(e instanceof Tc){const n=kI("struct",e),r=Uu(e);return dm(e),new Gp(rr,n,r)}return new Gp(rr,e.name,e.inputs?e.inputs.map(Ws.from):[])}static isFragment(e){return e&&e[Co]===BF}}const Rc=new Map;Rc.set(0,"GENERIC_PANIC");Rc.set(1,"ASSERT_FALSE");Rc.set(17,"OVERFLOW");Rc.set(18,"DIVIDE_BY_ZERO");Rc.set(33,"ENUM_RANGE_ERROR");Rc.set(34,"BAD_STORAGE_DATA");Rc.set(49,"STACK_UNDERFLOW");Rc.set(50,"ARRAY_RANGE_ERROR");Rc.set(65,"OUT_OF_MEMORY");Rc.set(81,"UNINITIALIZED_FUNCTION_CALL");const nCe=new RegExp(/^bytes([0-9]*)$/),rCe=new RegExp(/^(u?int)([0-9]*)$/);let dk=null,LF=1024;function sCe(t,e,n,r){let s="missing revert data",i=null;const o=null;let a=null;if(n){s="execution reverted";const l=Tt(n);if(n=Pe(n),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(Pe(l.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(Pe(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${Rc.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?un(e.to):null,data:e.data||"0x"};return e.from&&(c.from=un(e.from)),Zn(s,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:c,invocation:o,revert:a})}var rh,Dg;const i2=class i2{constructor(){se(this,rh)}getDefaultValue(e){const n=e.map(s=>ye(this,rh,Dg).call(this,Ws.from(s)));return new fx(n,"_").defaultValue()}encode(e,n){MG(n.length,e.length,"types/values length mismatch");const r=e.map(o=>ye(this,rh,Dg).call(this,Ws.from(o))),s=new fx(r,"_"),i=new j3;return s.encode(i,n),i.data}decode(e,n,r){const s=e.map(o=>ye(this,rh,Dg).call(this,Ws.from(o)));return new fx(s,"_").decode(new $3(n,r,LF))}static _setDefaultMaxInflation(e){Q(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),LF=e}static defaultAbiCoder(){return dk==null&&(dk=new i2),dk}static getBuiltinCallException(e,n,r){return sCe(e,n,r,i2.defaultAbiCoder())}};rh=new WeakSet,Dg=function(e){if(e.isArray())return new Axe(ye(this,rh,Dg).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new fx(e.components.map(r=>ye(this,rh,Dg).call(this,r)),e.name);switch(e.baseType){case"address":return new vxe(e.name);case"bool":return new xxe(e.name);case"string":return new Rxe(e.name);case"bytes":return new Sxe(e.name);case"":return new Ixe(e.name)}let n=e.type.match(rCe);if(n){let r=parseInt(n[2]||"256");return Q(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new Pxe(r/8,n[1]==="int",e.name)}if(n=e.type.match(nCe),n){let r=parseInt(n[1]);return Q(r!==0&&r<=32,"invalid bytes length","param",e),new Cxe(r,e.name)}Q(!1,"invalid type","type",e.type)};let zv=i2;class iCe{constructor(e,n,r){te(this,"fragment");te(this,"name");te(this,"signature");te(this,"topic");te(this,"args");const s=e.name,i=e.format();at(this,{fragment:e,name:s,signature:i,topic:n,args:r})}}class oCe{constructor(e,n,r,s){te(this,"fragment");te(this,"name");te(this,"args");te(this,"signature");te(this,"selector");te(this,"value");const i=e.name,o=e.format();at(this,{fragment:e,name:i,args:r,signature:o,selector:n,value:s})}}class aCe{constructor(e,n,r){te(this,"fragment");te(this,"name");te(this,"args");te(this,"signature");te(this,"selector");const s=e.name,i=e.format();at(this,{fragment:e,name:s,args:r,signature:i,selector:n})}}class UF{constructor(e){te(this,"hash");te(this,"_isIndexed");at(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const FF={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},jF={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&FF[t.toString()]&&(e=FF[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var Qc,Jc,Xc,fi,ly,VS,uy,KS;const Kf=class Kf{constructor(e){se(this,ly);se(this,uy);te(this,"fragments");te(this,"deploy");te(this,"fallback");te(this,"receive");se(this,Qc,void 0);se(this,Jc,void 0);se(this,Xc,void 0);se(this,fi,void 0);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,G(this,Xc,new Map),G(this,Qc,new Map),G(this,Jc,new Map);const r=[];for(const o of n)try{r.push(hm.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}at(this,{fragments:Object.freeze(r)});let s=null,i=!1;G(this,fi,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}at(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(Q(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=D(this,Xc);break;case"event":c=D(this,Jc);break;case"error":c=D(this,Qc);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||at(this,{deploy:Ou.from("constructor()")}),at(this,{fallback:s,receive:i})}format(e){const n=e?"minimal":"full";return this.fragments.map(s=>s.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return zv.defaultAbiCoder()}getFunctionName(e){const n=ye(this,ly,VS).call(this,e,null,!1);return Q(n,"no matching function","key",e),n.name}hasFunction(e){return!!ye(this,ly,VS).call(this,e,null,!1)}getFunction(e,n){return ye(this,ly,VS).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(D(this,Xc).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(D(this,Xc).get(s),r)}}getEventName(e){const n=ye(this,uy,KS).call(this,e,null,!1);return Q(n,"no matching event","key",e),n.name}hasEvent(e){return!!ye(this,uy,KS).call(this,e,null,!1)}getEvent(e,n){return ye(this,uy,KS).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(D(this,Jc).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(D(this,Jc).get(s),r)}}getError(e,n){if(Mn(e)){const s=e.toLowerCase();if(jF[s])return fo.from(jF[s].signature);for(const i of D(this,Qc).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of D(this,Qc))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?fo.from("error Error(string)"):e==="Panic"?fo.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");Q(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=fo.from(e).format(),e==="Error(string)")return fo.from("error Error(string)");if(e==="Panic(uint256)")return fo.from("error Panic(uint256)");const r=D(this,Qc).get(e);return r||null}forEachError(e){const n=Array.from(D(this,Qc).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(D(this,Qc).get(s),r)}}_decodeParams(e,n){return D(this,fi).decode(e,n)}_encodeParams(e,n){return D(this,fi).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);Q(r,"unknown error","fragment",e),e=r}return Q(fr(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,fr(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);Q(r,"unknown error","fragment",e),e=r}return yr([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Q(fr(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,fr(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return yr([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const i=this.getFunction(e);Q(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=Di(n);if(s.length%32===0)try{return D(this,fi).decode(e.outputs,s)}catch{r="could not decode result data"}ue(!1,r,"BAD_DATA",{value:Pe(s),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=Tt(e,"data"),s=zv.getBuiltinCallException("call",n,r),i="execution reverted (unknown custom error)";if(s.message.startsWith(i)){const a=Pe(r.slice(0,4)),c=this.getError(a);if(c)try{const l=D(this,fi).decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Pe(D(this,fi).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const i=this.getEvent(e);Q(i,"unknown event","eventFragment",e),e=i}ue(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,o)=>i.type==="string"?um(o):i.type==="bytes"?Zr(Pe(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=Vh(o):i.type.match(/^bytes/)?o=SEe(o,32):i.type==="address"&&D(this,fi).encode(["address"],[o]),Qu(Pe(o),32));for(n.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){Q(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?Q(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?r.push(i.map(c=>s(a,c))):r.push(s(a,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);Q(o,"unknown event","eventFragment",e),e=o}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),Q(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const c=n[a];if(o.indexed)if(o.type==="string")r.push(um(c));else if(o.type==="bytes")r.push(Zr(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(D(this,fi).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:D(this,fi).encode(s,i),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const f=this.getEvent(e);Q(f,"unknown event","eventFragment",e),e=f}if(r!=null&&!e.anonymous){const f=e.topicHash;Q(Mn(r[0],32)&&r[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(Ws.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=r!=null?D(this,fi).decode(s,yr(r)):null,c=D(this,fi).decode(i,n,!0),l=[],u=[];let d=0,h=0;return e.inputs.forEach((f,p)=>{let m=null;if(f.indexed)if(a==null)m=new UF(null);else if(o[p])m=new UF(a[h++]);else try{m=a[h++]}catch(E){m=E}else try{m=c[d++]}catch(E){m=E}l.push(m),u.push(f.name||null)}),ew.fromItems(l,u)}parseTransaction(e){const n=Tt(e.data,"tx.data"),r=He(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(Pe(n.slice(0,4)));if(!s)return null;const i=D(this,fi).decode(s.inputs,n.slice(4));return new oCe(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new iCe(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=Pe(e),r=this.getError(fr(n,0,4));if(!r)return null;const s=D(this,fi).decode(r.inputs,fr(n,4));return new aCe(r,r.selector,s)}static from(e){return e instanceof Kf?e:typeof e=="string"?new Kf(JSON.parse(e)):typeof e.formatJson=="function"?new Kf(e.formatJson()):typeof e.format=="function"?new Kf(e.format("json")):new Kf(e)}};Qc=new WeakMap,Jc=new WeakMap,Xc=new WeakMap,fi=new WeakMap,ly=new WeakSet,VS=function(e,n,r){if(Mn(e)){const i=e.toLowerCase();for(const o of D(this,Xc).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of D(this,Xc))o.split("(")[0]===e&&i.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;Ei.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==a&&(!c||u!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let d=0;d<n.length;d++)if(Ei.isTyped(n[d])){if(d>=u.length){if(n[d].type==="overrides")continue;i.splice(l,1);break}if(n[d].type!==u[d].baseType){i.splice(l,1);break}}}}if(i.length===1&&n&&n.length!==i[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");Q(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=D(this,Xc).get(fl.from(e).format());return s||null},uy=new WeakSet,KS=function(e,n,r){if(Mn(e)){const i=e.toLowerCase();for(const o of D(this,Jc).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of D(this,Jc))o.split("(")[0]===e&&i.push(a);if(n){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<n.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<n.length;c++)if(Ei.isTyped(n[c])&&n[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");Q(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=D(this,Jc).get(hl.from(e).format());return s||null};let tO=Kf;const lZ=BigInt(0);function R0(t){return t??null}function vr(t){return t==null?null:t.toString()}class $F{constructor(e,n,r){te(this,"gasPrice");te(this,"maxFeePerGas");te(this,"maxPriorityFeePerGas");at(this,{gasPrice:R0(e),maxFeePerGas:R0(n),maxPriorityFeePerGas:R0(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:vr(e),maxFeePerGas:vr(n),maxPriorityFeePerGas:vr(r)}}}function I_(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=Pe(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=He(t[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=At(t[s],`request.${s}`));return t.accessList&&(e.accessList=Um(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>HD(s)?Pe(s):Object.assign({},s))),e}var gu;class cCe{constructor(e,n){te(this,"provider");te(this,"number");te(this,"hash");te(this,"timestamp");te(this,"parentHash");te(this,"parentBeaconBlockRoot");te(this,"nonce");te(this,"difficulty");te(this,"gasLimit");te(this,"gasUsed");te(this,"stateRoot");te(this,"receiptsRoot");te(this,"blobGasUsed");te(this,"excessBlobGas");te(this,"miner");te(this,"prevRandao");te(this,"extraData");te(this,"baseFeePerGas");se(this,gu,void 0);G(this,gu,e.transactions.map(r=>typeof r!="string"?new Wv(r,n):r)),at(this,{provider:n,hash:R0(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:R0(e.prevRandao),extraData:e.extraData,baseFeePerGas:R0(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return D(this,gu).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=D(this,gu).slice();return e.length===0?[]:(ue(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,timestamp:m,transactions:E}=this;return{_type:"Block",baseFeePerGas:vr(e),difficulty:vr(n),extraData:r,gasLimit:vr(s),gasUsed:vr(i),blobGasUsed:vr(this.blobGasUsed),excessBlobGas:vr(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,timestamp:m,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,transactions:E}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return D(this,gu).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=D(this,gu)[e];else{const r=e.toLowerCase();for(const s of D(this,gu))if(typeof s=="string"){if(s!==r)continue;n=s;break}else{if(s.hash!==r)continue;n=s;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;Q(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return lCe(this)}}gu=new WeakMap;class lA{constructor(e,n){te(this,"provider");te(this,"transactionHash");te(this,"blockHash");te(this,"blockNumber");te(this,"removed");te(this,"address");te(this,"data");te(this,"topics");te(this,"index");te(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());at(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return ue(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return ue(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return ue(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return uCe(this)}}var bE;class uZ{constructor(e,n){te(this,"provider");te(this,"to");te(this,"from");te(this,"contractAddress");te(this,"hash");te(this,"index");te(this,"blockHash");te(this,"blockNumber");te(this,"logsBloom");te(this,"gasUsed");te(this,"blobGasUsed");te(this,"cumulativeGasUsed");te(this,"gasPrice");te(this,"blobGasPrice");te(this,"type");te(this,"status");te(this,"root");se(this,bE,void 0);G(this,bE,Object.freeze(e.logs.map(s=>new lA(s,n))));let r=lZ;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),at(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return D(this,bE)}toJSON(){const{to:e,from:n,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:vr(this.cumulativeGasUsed),from:n,gasPrice:vr(this.gasPrice),blobGasUsed:vr(this.blobGasUsed),blobGasPrice:vr(this.blobGasPrice),gasUsed:vr(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return hZ(this)}reorderedEvent(e){return ue(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),dZ(this,e)}}bE=new WeakMap;var sh;const $5=class $5{constructor(e,n){te(this,"provider");te(this,"blockNumber");te(this,"blockHash");te(this,"index");te(this,"hash");te(this,"type");te(this,"to");te(this,"from");te(this,"nonce");te(this,"gasLimit");te(this,"gasPrice");te(this,"maxPriorityFeePerGas");te(this,"maxFeePerGas");te(this,"maxFeePerBlobGas");te(this,"data");te(this,"value");te(this,"chainId");te(this,"signature");te(this,"accessList");te(this,"blobVersionedHashes");te(this,"authorizationList");se(this,sh,void 0);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,G(this,sh,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:u,accessList:d,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:n,blobVersionedHashes:h,chainId:vr(this.chainId),data:l,from:a,gasLimit:vr(this.gasLimit),gasPrice:vr(this.gasPrice),hash:s,maxFeePerGas:vr(this.maxFeePerGas),maxPriorityFeePerGas:vr(this.maxPriorityFeePerGas),maxFeePerBlobGas:vr(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:r,type:i,value:vr(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await Mi({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,s=n??0;let i=D(this,sh),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:h,nonce:f}=await Mi({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=h;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<D(this,sh)&&(o=D(this,sh)));o<=h;){if(a)return null;const m=await this.provider.getBlock(o,!0);if(m==null)return;for(const E of m)if(E===this.hash)return;for(let E=0;E<m.length;E++){const b=await m.getTransaction(E);if(b.from===this.from&&b.nonce===this.nonce){if(a)return null;const x=await this.provider.getTransactionReceipt(b.hash);if(x==null||h-x.blockNumber+1<r)return;let w="replaced";b.data===this.data&&b.to===this.to&&b.value===this.value?w="repriced":b.data==="0x"&&b.from===b.to&&b.value===lZ&&(w="cancelled"),ue(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:w==="replaced"||w==="cancelled",reason:w,replacement:b.replaceableTransaction(i),hash:b.hash,receipt:x})}}o++}},l=h=>{if(h==null||h.status!==0)return h;ue(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((h,f)=>{const p=[],m=()=>{p.forEach(b=>b())};if(p.push(()=>{a=!0}),s>0){const b=setTimeout(()=>{m(),f(Zn("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(b)})}const E=async b=>{if(await b.confirmations()>=r){m();try{h(l(b))}catch(x){f(x)}}};if(p.push(()=>{this.provider.off(this.hash,E)}),this.provider.on(this.hash,E),i>=0){const b=async()=>{try{await c()}catch(x){if(Fs(x,"TRANSACTION_REPLACED")){m(),f(x);return}}a||this.provider.once("block",b)};p.push(()=>{this.provider.off("block",b)}),this.provider.once("block",b)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return ue(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),hZ(this)}reorderedEvent(e){return ue(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ue(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),dZ(this,e)}replaceableTransaction(e){Q(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new $5(this,this.provider);return G(n,sh,e),n}};sh=new WeakMap;let Wv=$5;function lCe(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function dZ(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function hZ(t){return{orphan:"drop-transaction",tx:t}}function uCe(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class r5 extends lA{constructor(n,r,s){super(n,n.provider);te(this,"interface");te(this,"fragment");te(this,"args");const i=r.decodeEventLog(s,n.data,n.topics);at(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class fZ extends lA{constructor(n,r){super(n,n.provider);te(this,"error");at(this,{error:r})}}var dy;class dCe extends uZ{constructor(n,r,s){super(s,r);se(this,dy,void 0);G(this,dy,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?D(this,dy).getEvent(n.topics[0]):null;if(r)try{return new r5(n,D(this,dy),r)}catch(s){return new fZ(n,s)}return n})}}dy=new WeakMap;var vE;class s5 extends Wv{constructor(n,r,s){super(s,r);se(this,vE,void 0);G(this,vE,n)}async wait(n,r){const s=await super.wait(n,r);return s==null?null:new dCe(D(this,vE),this.provider,s)}}vE=new WeakMap;class pZ extends UG{constructor(n,r,s,i){super(n,r,s);te(this,"log");at(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class hCe extends pZ{constructor(e,n,r,s,i){super(e,n,r,new r5(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);at(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const zF=BigInt(0);function mZ(t){return t&&typeof t.call=="function"}function gZ(t){return t&&typeof t.estimateGas=="function"}function RI(t){return t&&typeof t.resolveName=="function"}function yZ(t){return t&&typeof t.sendTransaction=="function"}function wZ(t){if(t!=null){if(RI(t))return t;if(t.provider)return t.provider}}var EE;class fCe{constructor(e,n,r){se(this,EE,void 0);te(this,"fragment");if(at(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const s=fm(e.runner,"resolveName"),i=RI(s)?s:null;G(this,EE,async function(){const o=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,d)=>u==="address"?Array.isArray(d)?Promise.all(d.map(h=>Ui(h,i))):Ui(d,i):d)));return e.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return D(this,EE)}}EE=new WeakMap;function fm(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function pp(t){return t==null?null:t.provider||null}async function bZ(t,e){const n=Ei.dereference(t,"overrides");Q(typeof n=="object","invalid overrides parameter","overrides",t);const r=I_(n);return Q(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),Q(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function pCe(t,e,n){const r=fm(t,"resolveName"),s=RI(r)?r:null;return await Promise.all(e.map((i,o)=>i.walkAsync(n[o],(a,c)=>(c=Ei.dereference(c,a),a==="address"?Ui(c,s):c))))}function mCe(t){const e=async function(o){const a=await bZ(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await Ui(a.from,wZ(t.runner)));const c=t.interface,l=He(a.value||zF,"overrides.value")===zF,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&Q(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),Q(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const d=c.receive||c.fallback&&c.fallback.payable;return Q(d||l,"cannot send value to non-payable fallback","overrides.value",a.value),Q(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=fm(t.runner,"call");ue(mZ(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw WD(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(o){const a=t.runner;ue(yZ(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=pp(t.runner);return new s5(t.interface,l,c)},s=async function(o){const a=fm(t.runner,"estimateGas");return ue(gZ(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await r(o);return at(i,{_contract:t,estimateGas:s,populateTransaction:e,send:r,staticCall:n}),i}function gCe(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return ue(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let d={};if(u.inputs.length+1===l.length&&(d=await bZ(l.pop()),d.from&&(d.from=await Ui(d.from,wZ(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const h=await pCe(t.runner,u.inputs,l);return Object.assign({},d,await Mi({to:t.getAddress(),data:t.interface.encodeFunctionData(u,h)}))},s=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},i=async function(...l){const u=t.runner;ue(yZ(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await u.sendTransaction(await r(...l)),h=pp(t.runner);return new s5(t.interface,h,d)},o=async function(...l){const u=fm(t.runner,"estimateGas");return ue(gZ(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=fm(t.runner,"call");ue(mZ(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...l);let h="0x";try{h=await u.call(d)}catch(p){throw WD(p)&&p.data?t.interface.makeError(p.data,d):p}const f=n(...l);return t.interface.decodeFunctionResult(f,h)},c=async(...l)=>n(...l).constant?await s(...l):await i(...l);return at(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return ue(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function yCe(t,e){const n=function(...s){const i=t.interface.getEvent(e,s);return ue(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new fCe(t,n(...s),s)};return at(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return ue(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const N_=Symbol.for("_ethersInternal_contract"),vZ=new WeakMap;function wCe(t,e){vZ.set(t[N_],e)}function Mo(t){return vZ.get(t[N_])}function bCe(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function i5(t,e){let n,r=null;if(Array.isArray(e)){const i=function(o){if(Mn(o,32))return o;const a=t.interface.getEvent(o);return Q(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?n=[null]:typeof e=="string"?Mn(e,32)?n=[e]:(r=t.interface.getEvent(e),Q(r,"unknown fragment","event",e),n=[r.topicHash]):bCe(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):Q(!1,"unknown event name","event",e);n=n.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=n.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:n}}async function Db(t,e){const{subs:n}=Mo(t);return n.get((await i5(t,e)).tag)||null}async function WF(t,e,n){const r=pp(t.runner);ue(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await i5(t,n),{addr:a,subs:c}=Mo(t);let l=c.get(i);if(!l){const d={address:a||t,topics:o},h=E=>{let b=s;if(b==null)try{b=t.interface.getEvent(E.topics[0])}catch{}if(b){const x=b,w=s?t.interface.decodeEventLog(s,E.data,E.topics):[];rO(t,n,w,N=>new hCe(t,N,n,x,E))}else rO(t,n,[],x=>new pZ(t,x,n,E))};let f=[];l={tag:i,listeners:[],start:()=>{f.length||f.push(r.on(d,h))},stop:async()=>{if(f.length==0)return;let E=f;f=[],await Promise.all(E),r.off(d,h)}},c.set(i,l)}return l}let nO=Promise.resolve();async function vCe(t,e,n,r){await nO;const s=await Db(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),Mo(t).subs.delete(s.tag)),i>0}async function rO(t,e,n,r){try{await nO}catch{}const s=vCe(t,e,n,r);return nO=s,await s}const mx=["then"];var oLe;const S1=class S1{constructor(e,n,r,s){te(this,"target");te(this,"interface");te(this,"runner");te(this,"filters");te(this,oLe);te(this,"fallback");Q(typeof e=="string"||CY(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=tO.from(n);at(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,N_,{value:{}});let o,a=null,c=null;if(s){const d=pp(r);c=new s5(this.interface,d,s)}let l=new Map;if(typeof e=="string")if(Mn(e))a=e,o=Promise.resolve(e);else{const d=fm(r,"resolveName");if(!RI(d))throw Zn("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(h=>{if(h==null)throw Zn("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Mo(this).addr=h,h})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return Mo(this).addr=d,d});wCe(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(d,h,f)=>{if(typeof h=="symbol"||mx.indexOf(h)>=0)return Reflect.get(d,h,f);try{return this.getEvent(h)}catch(p){if(!Fs(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>mx.indexOf(h)>=0?Reflect.has(d,h):Reflect.has(d,h)||this.interface.hasEvent(String(h))});return at(this,{filters:u}),at(this,{fallback:i.receive||i.fallback?mCe(this):null}),new Proxy(this,{get:(d,h,f)=>{if(typeof h=="symbol"||h in d||mx.indexOf(h)>=0)return Reflect.get(d,h,f);try{return d.getFunction(h)}catch(p){if(!Fs(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>typeof h=="symbol"||h in d||mx.indexOf(h)>=0?Reflect.has(d,h):d.interface.hasFunction(h)})}connect(e){return new S1(this.target,this.interface,e)}attach(e){return new S1(e,this.interface,this.runner)}async getAddress(){return await Mo(this).addrPromise}async getDeployedCode(){const e=pp(this.runner);ue(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=pp(this.runner);return ue(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return Mo(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),gCe(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),yCe(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=Mo(this),o=s||await i,{fragment:a,topics:c}=await i5(this,e),l={address:o,topics:c,fromBlock:n,toBlock:r},u=pp(this.runner);return ue(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(d=>{let h=a;if(h==null)try{h=this.interface.getEvent(d.topics[0])}catch{}if(h)try{return new r5(d,this.interface,h)}catch(f){return new fZ(d,f)}return new lA(d,u)})}async on(e,n){const r=await WF(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await WF(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await rO(this,e,n,null)}async listenerCount(e){if(e){const s=await Db(this,e);return s?s.listeners.length:0}const{subs:n}=Mo(this);let r=0;for(const{listeners:s}of n.values())r+=s.length;return r}async listeners(e){if(e){const s=await Db(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:n}=Mo(this);let r=[];for(const{listeners:s}of n.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,n){const r=await Db(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Mo(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await Db(this,e);if(!n)return this;n.stop(),Mo(this).subs.delete(n.tag)}else{const{subs:n}=Mo(this);for(const{tag:r,stop:s}of n.values())s(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends S1{constructor(s,i=null){super(s,e,i)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};oLe=N_;let sO=S1;function ECe(){return sO}class Fu extends ECe(){}function hk(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):Q(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class ACe{constructor(e){te(this,"name");at(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const EZ=new RegExp("^(ipfs)://(.*)$","i"),HF=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),EZ,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var ih,Rp,oh,Bg,o2,AZ;const f0=class f0{constructor(e,n,r){se(this,oh);te(this,"provider");te(this,"address");te(this,"name");se(this,ih,void 0);se(this,Rp,void 0);at(this,{provider:e,address:n,name:r}),G(this,ih,null),G(this,Rp,new Fu(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return D(this,ih)==null&&G(this,ih,(async()=>{try{return await D(this,Rp).supportsInterface("0x9061b923")}catch(e){if(Fs(e,"CALL_EXCEPTION"))return!1;throw G(this,ih,null),e}})()),await D(this,ih)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await ye(this,oh,Bg).call(this,"addr(bytes32)");return i==null||i===Dv?null:i}catch(i){if(Fs(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await ye(this,oh,Bg).call(this,"addr(bytes32,uint)",[i]);if(Mn(o,20))return un(o)}let n=null;for(const i of this.provider.plugins)if(i instanceof ACe&&i.supportsCoinType(e)){n=i;break}if(n==null)return null;const r=await ye(this,oh,Bg).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await n.decodeAddress(e,r);if(s!=null)return s;ue(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await ye(this,oh,Bg).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await ye(this,oh,Bg).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=n[1]==="e3010170"?"ipfs":"ipns",i=parseInt(n[4],16);if(n[5].length===i*2)return`${s}://${_Ee("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;ue(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<HF.length;r++){const s=n.match(HF[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=hk(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const l=c[1],u=new Fu(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const m=await u.ownerOf(l);if(a!==m)return e.push({type:"!owner",value:m}),{url:null,linkage:e};e.push({type:"owner",value:m})}else if(i==="erc1155"){const m=await u.balanceOf(a,l);if(!m)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:m.toString()})}let d=await u[o](l);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),i==="erc1155"&&(d=d.replace("{id}",Vh(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=hk(d)),e.push({type:"metadata-url",value:d});let h={};const f=await new Ju(d).send();f.assertOk();try{h=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const b=f.body;return b&&e.push({type:"!metadata",value:Pe(b)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let p=h.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(EZ)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=hk(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return ue(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var s;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await ye(s=f0,o2,AZ).call(s,e,r);if(i!=null){const o=new f0(e,i,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};ih=new WeakMap,Rp=new WeakMap,oh=new WeakSet,Bg=async function(e,n){n=(n||[]).slice();const r=D(this,Rp).interface;n.unshift(X3(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),ue(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[LSe(this.name,255),r.encodeFunctionData(s,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const i=await D(this,Rp)[e](...n);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!Fs(i,"CALL_EXCEPTION"))throw i}return null},o2=new WeakSet,AZ=async function(e,n){const r=await f0.getEnsAddress(e);try{const i=await new Fu(r,["function resolver(bytes32) view returns (address)"],e).resolver(X3(n),{enableCcipRead:!0});return i===Dv?null:i}catch(s){throw s}return null},se(f0,o2);let T_=f0;const VF=BigInt(0);function Ut(t,e){return function(n){return n==null?e:t(n)}}function Hv(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function uA(t,e){return n=>{const r={};for(const s in t){let i=s;if(e&&s in e&&!(i in n)){for(const o of e[s])if(o in n){i=o;break}}try{const o=t[s](n[i]);o!==void 0&&(r[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";ue(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:n})}}return r}}function xCe(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}Q(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function aw(t){return Q(Mn(t,!0),"invalid data","value",t),t}function Us(t){return Q(Mn(t,32),"invalid hash","value",t),t}const SCe=uA({address:un,blockHash:Us,blockNumber:At,data:aw,index:At,removed:Ut(xCe,!1),topics:Hv(Us),transactionHash:Us,transactionIndex:At},{index:["logIndex"]});function CCe(t){return SCe(t)}const _Ce=uA({hash:Ut(Us),parentHash:Us,parentBeaconBlockRoot:Ut(Us,null),number:At,timestamp:At,nonce:Ut(aw),difficulty:He,gasLimit:He,gasUsed:He,stateRoot:Ut(Us,null),receiptsRoot:Ut(Us,null),blobGasUsed:Ut(He,null),excessBlobGas:Ut(He,null),miner:Ut(un),prevRandao:Ut(Us,null),extraData:aw,baseFeePerGas:Ut(He)},{prevRandao:["mixHash"]});function ICe(t){const e=_Ce(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:xZ(n)),e}const NCe=uA({transactionIndex:At,blockNumber:At,transactionHash:Us,address:un,topics:Hv(Us),data:aw,index:At,blockHash:Us},{index:["logIndex"]});function TCe(t){return NCe(t)}const kCe=uA({to:Ut(un,null),from:Ut(un,null),contractAddress:Ut(un,null),index:At,root:Ut(Pe),gasUsed:He,blobGasUsed:Ut(He,null),logsBloom:Ut(aw),blockHash:Us,hash:Us,logs:Hv(TCe),blockNumber:At,cumulativeGasUsed:He,effectiveGasPrice:Ut(He),blobGasPrice:Ut(He,null),status:Ut(At),type:Ut(At,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function PCe(t){return kCe(t)}function xZ(t){t.to&&He(t.to)===VF&&(t.to="0x0000000000000000000000000000000000000000");const e=uA({hash:Us,index:Ut(At,void 0),type:n=>n==="0x"||n==null?0:At(n),accessList:Ut(Um,null),blobVersionedHashes:Ut(Hv(Us,!0),null),authorizationList:Ut(Hv(n=>{let r;if(n.signature)r=n.signature;else{let s=n.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},n,{yParity:s})}return{address:un(n.address),chainId:He(n.chainId),nonce:He(n.nonce),signature:Eo.from(r)}},!1),null),blockHash:Ut(Us,null),blockNumber:Ut(At,null),transactionIndex:Ut(At,null),from:un,gasPrice:Ut(He),maxPriorityFeePerGas:Ut(He),maxFeePerGas:Ut(He),maxFeePerBlobGas:Ut(He,null),gasLimit:He,to:Ut(un,null),value:He,nonce:At,data:aw,creates:Ut(un,null),chainId:Ut(He,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=bxe(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=Eo.from(t.signature):e.signature=Eo.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&He(e.blockHash)===VF&&(e.blockHash=null),e}const RCe="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class dA{constructor(e){te(this,"name");at(this,{name:e})}clone(){return new dA(this.name)}}class OI extends dA{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);te(this,"effectiveBlock");te(this,"txBase");te(this,"txCreate");te(this,"txDataZero");te(this,"txDataNonzero");te(this,"txAccessListStorageKey");te(this,"txAccessListAddress");const s={effectiveBlock:n};function i(o,a){let c=(r||{})[o];c==null&&(c=a),Q(typeof c=="number",`invalud value for ${o}`,"costs",r),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),at(this,s)}clone(){return new OI(this.effectiveBlock,this)}}class MI extends dA{constructor(n,r){super("org.ethers.plugins.network.Ens");te(this,"address");te(this,"targetNetwork");at(this,{address:n||RCe,targetNetwork:r??1})}clone(){return new MI(this.address,this.targetNetwork)}}var AE,xE;class OCe extends dA{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");se(this,AE,void 0);se(this,xE,void 0);G(this,AE,n),G(this,xE,r)}get url(){return D(this,AE)}get processFunc(){return D(this,xE)}clone(){return this}}AE=new WeakMap,xE=new WeakMap;const fk=new Map;var hy,fy,ah;const p0=class p0{constructor(e,n){se(this,hy,void 0);se(this,fy,void 0);se(this,ah,void 0);G(this,hy,e),G(this,fy,He(n)),G(this,ah,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return D(this,hy)}set name(e){G(this,hy,e)}get chainId(){return D(this,fy)}set chainId(e){G(this,fy,He(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===He(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===He(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===He(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(D(this,ah).values())}attachPlugin(e){if(D(this,ah).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return D(this,ah).set(e.name,e.clone()),this}getPlugin(e){return D(this,ah).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new p0(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new OI;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const s=Um(e.accessList);for(const i in s)r+=n.txAccessListAddress+n.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(MCe(),e==null)return p0.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=fk.get(e);if(n)return n();if(typeof e=="bigint")return new p0("unknown",e);Q(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){Q(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new p0(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new MI(e.ensAddress,e.ensNetwork)),n}Q(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=fk.get(e);r&&Q(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),fk.set(e,n)}};hy=new WeakMap,fy=new WeakMap,ah=new WeakMap;let gl=p0;function KF(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function qF(t){return new OCe(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:KF(a.maxFee,9),maxPriorityFeePerGas:KF(a.maxPriorityFee,9)}}catch(i){ue(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let GF=!1;function MCe(){if(GF)return;GF=!0;function t(e,n,r){const s=function(){const i=new gl(e,n);return r.ensNetwork!=null&&i.attachPlugin(new MI(null,r.ensNetwork)),i.attachPlugin(new OI),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};gl.register(e,s),gl.register(n,s),r.altNames&&r.altNames.forEach(i=>{gl.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[qF("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[qF("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function iO(t){return JSON.parse(JSON.stringify(t))}var yu,va,ch,el,py,qS;class DCe{constructor(e){se(this,py);se(this,yu,void 0);se(this,va,void 0);se(this,ch,void 0);se(this,el,void 0);G(this,yu,e),G(this,va,null),G(this,ch,4e3),G(this,el,-2)}get pollingInterval(){return D(this,ch)}set pollingInterval(e){G(this,ch,e)}start(){D(this,va)||(G(this,va,D(this,yu)._setTimeout(ye(this,py,qS).bind(this),D(this,ch))),ye(this,py,qS).call(this))}stop(){D(this,va)&&(D(this,yu)._clearTimeout(D(this,va)),G(this,va,null))}pause(e){this.stop(),e&&G(this,el,-2)}resume(){this.start()}}yu=new WeakMap,va=new WeakMap,ch=new WeakMap,el=new WeakMap,py=new WeakSet,qS=async function(){try{const e=await D(this,yu).getBlockNumber();if(D(this,el)===-2){G(this,el,e);return}if(e!==D(this,el)){for(let n=D(this,el)+1;n<=e;n++){if(D(this,va)==null)return;await D(this,yu).emit("block",n)}G(this,el,e)}}catch{}D(this,va)!=null&&G(this,va,D(this,yu)._setTimeout(ye(this,py,qS).bind(this),D(this,ch)))};var Op,Mp,lh;class o5{constructor(e){se(this,Op,void 0);se(this,Mp,void 0);se(this,lh,void 0);G(this,Op,e),G(this,lh,!1),G(this,Mp,n=>{this._poll(n,D(this,Op))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){D(this,lh)||(G(this,lh,!0),D(this,Mp).call(this,-2),D(this,Op).on("block",D(this,Mp)))}stop(){D(this,lh)&&(G(this,lh,!1),D(this,Op).off("block",D(this,Mp)))}pause(e){this.stop()}resume(){this.start()}}Op=new WeakMap,Mp=new WeakMap,lh=new WeakMap;var my,wu;class BCe extends o5{constructor(n,r){super(n);se(this,my,void 0);se(this,wu,void 0);G(this,my,r),G(this,wu,-2)}pause(n){n&&G(this,wu,-2),super.pause(n)}async _poll(n,r){const s=await r.getBlock(D(this,my));s!=null&&(D(this,wu)===-2?G(this,wu,s.number):s.number>D(this,wu)&&(r.emit(D(this,my),s.number),G(this,wu,s.number)))}}my=new WeakMap,wu=new WeakMap;var a2;class LCe extends o5{constructor(n,r){super(n);se(this,a2,void 0);G(this,a2,iO(r))}async _poll(n,r){throw new Error("@TODO")}}a2=new WeakMap;var gy;class UCe extends o5{constructor(n,r){super(n);se(this,gy,void 0);G(this,gy,r)}async _poll(n,r){const s=await r.getTransactionReceipt(D(this,gy));s&&r.emit(D(this,gy),s)}}gy=new WeakMap;var bu,yy,wy,uh,Ea,c2,SZ;class a5{constructor(e,n){se(this,c2);se(this,bu,void 0);se(this,yy,void 0);se(this,wy,void 0);se(this,uh,void 0);se(this,Ea,void 0);G(this,bu,e),G(this,yy,iO(n)),G(this,wy,ye(this,c2,SZ).bind(this)),G(this,uh,!1),G(this,Ea,-2)}start(){D(this,uh)||(G(this,uh,!0),D(this,Ea)===-2&&D(this,bu).getBlockNumber().then(e=>{G(this,Ea,e)}),D(this,bu).on("block",D(this,wy)))}stop(){D(this,uh)&&(G(this,uh,!1),D(this,bu).off("block",D(this,wy)))}pause(e){this.stop(),e&&G(this,Ea,-2)}resume(){this.start()}}bu=new WeakMap,yy=new WeakMap,wy=new WeakMap,uh=new WeakMap,Ea=new WeakMap,c2=new WeakSet,SZ=async function(e){if(D(this,Ea)===-2)return;const n=iO(D(this,yy));n.fromBlock=D(this,Ea)+1,n.toBlock=e;const r=await D(this,bu).getLogs(n);if(r.length===0){D(this,Ea)<e-60&&G(this,Ea,e-60);return}for(const s of r)D(this,bu).emit(D(this,yy),s),G(this,Ea,s.blockNumber)};const FCe=BigInt(2),jCe=10;function gx(t){return t&&typeof t.then=="function"}function GS(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class CZ{constructor(e){te(this,"name");at(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function $Ce(t){return JSON.parse(JSON.stringify(t))}function oO(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function pk(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(Mn(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:GS("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:GS("orphan",n),filter:$Ce(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(s=>s==null?null:Array.isArray(s)?oO(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(n.address){const s=[],i=[],o=a=>{Mn(a)?s.push(a):i.push((async()=>{s.push(await Ui(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),i.length&&await Promise.all(i),r.address=oO(s.map(a=>a.toLowerCase()))}return{filter:r,tag:GS("event",r),type:"event"}}Q(!1,"unknown ProviderEvent","event",t)}function mk(){return new Date().getTime()}const zCe={cacheTimeout:250,pollingInterval:4e3};var pi,dh,mi,by,Uo,Dp,hh,vu,SE,Aa,vy,Ey,ki,Po,CE,aO,_E,cO,Bp,Bb,IE,lO,Lp,Lb,Ay,YS;class WCe{constructor(e,n){se(this,ki);se(this,CE);se(this,_E);se(this,Bp);se(this,IE);se(this,Lp);se(this,Ay);se(this,pi,void 0);se(this,dh,void 0);se(this,mi,void 0);se(this,by,void 0);se(this,Uo,void 0);se(this,Dp,void 0);se(this,hh,void 0);se(this,vu,void 0);se(this,SE,void 0);se(this,Aa,void 0);se(this,vy,void 0);se(this,Ey,void 0);if(G(this,Ey,Object.assign({},zCe,n||{})),e==="any")G(this,Dp,!0),G(this,Uo,null);else if(e){const r=gl.from(e);G(this,Dp,!1),G(this,Uo,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else G(this,Dp,!1),G(this,Uo,null);G(this,vu,-1),G(this,hh,new Map),G(this,pi,new Map),G(this,dh,new Map),G(this,mi,null),G(this,by,!1),G(this,SE,1),G(this,Aa,new Map),G(this,vy,!1)}get pollingInterval(){return D(this,Ey).pollingInterval}get provider(){return this}get plugins(){return Array.from(D(this,dh).values())}attachPlugin(e){if(D(this,dh).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return D(this,dh).set(e.name,e.connect(this)),this}getPlugin(e){return D(this,dh).get(e)||null}get disableCcipRead(){return D(this,vy)}set disableCcipRead(e){G(this,vy,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",s).replace("{data}",i),u=new Ju(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let d="unknown error",h;try{h=await u.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:f}});continue}try{const f=h.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:f}),f.data;f.message&&(d=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:f})}catch{}ue(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:d}}),o.push(d)}ue(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new cCe(ICe(e),this)}_wrapLog(e,n){return new lA(CCe(e),this)}_wrapTransactionReceipt(e,n){return new uZ(PCe(e),this)}_wrapTransactionResponse(e,n){return new Wv(xZ(e),this)}_detectNetwork(){ue(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){ue(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=At(await ye(this,ki,Po).call(this,{method:"getBlockNumber"}),"%response");return D(this,vu)>=0&&G(this,vu,e),e}_getAddress(e){return Ui(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(Mn(e))return Mn(e,32)?e:fc(e);if(typeof e=="bigint"&&(e=At(e,"blockTag")),typeof e=="number")return e>=0?fc(e):D(this,vu)>=0?fc(D(this,vu)+e):this.getBlockNumber().then(n=>fc(n+e));Q(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?oO(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let d;switch(c.length){case 0:break;case 1:d=c[0];break;default:c.sort(),d=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const h={};return d&&(h.address=d),n.length&&(h.topics=n),l&&(h.fromBlock=l),u&&(h.toBlock=u),r&&(h.blockHash=r),h};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const n=I_(e),r=[];if(["to","from"].forEach(s=>{if(n[s]==null)return;const i=Ui(n[s],this);gx(i)?r.push(async function(){n[s]=await i}()):n[s]=i}),n.blockTag!=null){const s=this._getBlockTag(n.blockTag);gx(s)?r.push(async function(){n.blockTag=await s}()):n.blockTag=s}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(D(this,Uo)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw D(this,Uo)===s&&G(this,Uo,null),i}})();return G(this,Uo,s),(await s).clone()}const e=D(this,Uo),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(D(this,Dp)?(this.emit("network",r,n),D(this,Uo)===e&&G(this,Uo,Promise.resolve(r))):ue(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await Mi({_block:ye(this,IE,lO).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await ye(this,ki,Po).call(this,{method:"getGasPrice"});return He(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await ye(this,ki,Po).call(this,{method:"getPriorityFee"});return He(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*FCe+c),new $F(i,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new Ju(r.url),i=await r.processFunc(n,this,s);return new $F(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return gx(n)&&(n=await n),He(await ye(this,ki,Po).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await Mi({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await ye(this,_E,cO).call(this,ye(this,CE,aO).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return He(await ye(this,Bp,Bb).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return At(await ye(this,Bp,Bb).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return Pe(await ye(this,Bp,Bb).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const s=He(n,"position");return Pe(await ye(this,Bp,Bb).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:s}=await Mi({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=v_.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:s}=await Mi({network:this.getNetwork(),params:ye(this,IE,lO).call(this,e,!!n)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:n,params:r}=await Mi({network:this.getNetwork(),params:ye(this,ki,Po).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await Mi({network:this.getNetwork(),params:ye(this,ki,Po).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await ye(this,ki,Po).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await Mi({network:this.getNetwork(),result:ye(this,ki,Po).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:Pe(n)}async getLogs(e){let n=this._getFilter(e);gx(n)&&(n=await n);const{network:r,params:s}=await Mi({network:this.getNetwork(),params:ye(this,ki,Po).call(this,{method:"getLogs",filter:n})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){ue(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await T_.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=un(e);const n=X3(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await T_.getEnsAddress(this),i=await new Fu(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(i==null||i===Dv)return null;const a=await new Fu(i,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(Fs(r,"BAD_DATA")&&r.value==="0x"||Fs(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const s=n??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){i(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(Zn("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){ue(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=D(this,Aa).get(e);n&&(n.timer&&clearTimeout(n.timer),D(this,Aa).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=Dw(this,SE)._++,s=()=>{D(this,Aa).delete(r),e()};if(this.paused)D(this,Aa).set(r,{timer:null,func:s,time:n});else{const i=setTimeout(s,n);D(this,Aa).set(r,{timer:i,func:s,time:mk()})}return r}_forEachSubscriber(e){for(const n of D(this,pi).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new CZ(e.type);case"block":{const n=new DCe(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new BCe(this,e.type);case"event":return new a5(this,e.filter);case"transaction":return new UCe(this,e.hash);case"orphan":return new LCe(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of D(this,pi).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),D(this,mi)!=null&&n.pause(D(this,mi));break}}async on(e,n){const r=await ye(this,Ay,YS).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,D(this,mi)!=null&&r.subscriber.pause(D(this,mi))),this}async once(e,n){const r=await ye(this,Ay,YS).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,D(this,mi)!=null&&r.subscriber.pause(D(this,mi))),this}async emit(e,...n){const r=await ye(this,Lp,Lb).call(this,e,n);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const a=new UG(this,o?null:i,e);try{i.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),D(this,pi).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await ye(this,Lp,Lb).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of D(this,pi).values())n+=r.length;return n}async listeners(e){if(e){const r=await ye(this,Lp,Lb).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let n=[];for(const{listeners:r}of D(this,pi).values())n=n.concat(r.map(({listener:s})=>s));return n}async off(e,n){const r=await ye(this,Lp,Lb).call(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),D(this,pi).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:s}=await ye(this,Ay,YS).call(this,e);r&&s.stop(),D(this,pi).delete(n)}else for(const[n,{started:r,subscriber:s}]of D(this,pi))r&&s.stop(),D(this,pi).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return D(this,by)}destroy(){this.removeAllListeners();for(const e of D(this,Aa).keys())this._clearTimeout(e);G(this,by,!0)}get paused(){return D(this,mi)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(G(this,vu,-1),D(this,mi)!=null){if(D(this,mi)==!!e)return;ue(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),G(this,mi,!!e);for(const n of D(this,Aa).values())n.timer&&clearTimeout(n.timer),n.time=mk()-n.time}resume(){if(D(this,mi)!=null){this._forEachSubscriber(e=>e.resume()),G(this,mi,null);for(const e of D(this,Aa).values()){let n=e.time;n<0&&(n=0),e.time=mk(),setTimeout(e.func,n)}}}}pi=new WeakMap,dh=new WeakMap,mi=new WeakMap,by=new WeakMap,Uo=new WeakMap,Dp=new WeakMap,hh=new WeakMap,vu=new WeakMap,SE=new WeakMap,Aa=new WeakMap,vy=new WeakMap,Ey=new WeakMap,ki=new WeakSet,Po=async function(e){const n=D(this,Ey).cacheTimeout;if(n<0)return await this._perform(e);const r=GS(e.method,e);let s=D(this,hh).get(r);return s||(s=this._perform(e),D(this,hh).set(r,s),setTimeout(()=>{D(this,hh).get(r)===s&&D(this,hh).delete(r)},n)),await s},CE=new WeakSet,aO=async function(e,n,r){ue(r<jCe,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const s=I_(e);try{return Pe(await this._perform({method:"call",transaction:s,blockTag:n}))}catch(i){if(!this.disableCcipRead&&WD(i)&&i.data&&r>=0&&n==="latest"&&s.to!=null&&fr(i.data,0,4)==="0x556f1830"){const o=i.data,a=await Ui(s.to,this);let c;try{c=GCe(fr(i.data,4))}catch(d){ue(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}ue(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);ue(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:a,data:yr([c.selector,qCe([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const d=await ye(this,CE,aO).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:d}),d}}throw i}},_E=new WeakSet,cO=async function(e){const{value:n}=await Mi({network:this.getNetwork(),value:e});return n},Bp=new WeakSet,Bb=async function(e,n,r){let s=this._getAddress(n),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await ye(this,_E,cO).call(this,ye(this,ki,Po).call(this,Object.assign(e,{address:s,blockTag:i})))},IE=new WeakSet,lO=async function(e,n){if(Mn(e,32))return await ye(this,ki,Po).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await ye(this,ki,Po).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},Lp=new WeakSet,Lb=async function(e,n){let r=await pk(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await pk({orphan:"drop-log",log:n[0]},this)),D(this,pi).get(r.tag)||null},Ay=new WeakSet,YS=async function(e){const n=await pk(e,this),r=n.tag;let s=D(this,pi).get(r);return s||(s={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},D(this,pi).set(r,s)),s};function HCe(t,e){try{const n=uO(t,e);if(n)return y_(n)}catch{}return null}function uO(t,e){if(t==="0x")return null;try{const n=At(fr(t,e,e+32)),r=At(fr(t,n,n+32));return fr(t,n+32,n+32+r)}catch{}return null}function YF(t){const e=cs(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function VCe(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const KCe=new Uint8Array([]);function qCe(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(KCe),n+=32;for(let r=0;r<t.length;r++){const s=Tt(t[r]);e[r]=YF(n),e.push(YF(s.length)),e.push(VCe(s)),n+=32+Math.ceil(s.length/32)*32}return yr(e)}const ZF="0x0000000000000000000000000000000000000000000000000000000000000000";function GCe(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};ue(T0(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=fr(t,0,32);ue(fr(n,0,12)===fr(ZF,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=fr(n,12);try{const r=[],s=At(fr(t,32,64)),i=At(fr(t,s,s+32)),o=fr(t,s+32);for(let a=0;a<i;a++){const c=HCe(o,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{ue(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=uO(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{ue(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}ue(fr(t,100,128)===fr(ZF,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=fr(t,96,100);try{const r=uO(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{ue(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function pf(t,e){if(t.provider)return t.provider;ue(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function QF(t,e){let n=I_(e);if(n.to!=null&&(n.to=Ui(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),Ui(r,t)]).then(([s,i])=>(Q(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else n.from=t.getAddress();return await Mi(n)}class YCe{constructor(e){te(this,"provider");at(this,{provider:e||null})}async getNonce(e){return pf(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await QF(this,e)}async populateTransaction(e){const n=pf(this,"populateTransaction"),r=await QF(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=He(r.chainId);Q(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?Q(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&Q(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();ue(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(ue(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):ue(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await Mi(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await pf(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return pf(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return pf(this,"call").call(await this.populateCall(e))}async resolveName(e){return await pf(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=pf(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=v_.from(r);return await n.broadcastTransaction(await this.signTransaction(s))}authorize(e){ue(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function ZCe(t){return JSON.parse(JSON.stringify(t))}var Pi,tl,Up,fh,Fp,xy,NE,dO,TE,hO;class _Z{constructor(e){se(this,NE);se(this,TE);se(this,Pi,void 0);se(this,tl,void 0);se(this,Up,void 0);se(this,fh,void 0);se(this,Fp,void 0);se(this,xy,void 0);G(this,Pi,e),G(this,tl,null),G(this,Up,ye(this,NE,dO).bind(this)),G(this,fh,!1),G(this,Fp,null),G(this,xy,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){D(this,fh)||(G(this,fh,!0),ye(this,NE,dO).call(this,-2))}stop(){D(this,fh)&&(G(this,fh,!1),G(this,xy,!0),ye(this,TE,hO).call(this),D(this,Pi).off("block",D(this,Up)))}pause(e){e&&ye(this,TE,hO).call(this),D(this,Pi).off("block",D(this,Up))}resume(){this.start()}}Pi=new WeakMap,tl=new WeakMap,Up=new WeakMap,fh=new WeakMap,Fp=new WeakMap,xy=new WeakMap,NE=new WeakSet,dO=async function(e){try{D(this,tl)==null&&G(this,tl,this._subscribe(D(this,Pi)));let n=null;try{n=await D(this,tl)}catch(i){if(!Fs(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(n==null){G(this,tl,null),D(this,Pi)._recoverSubscriber(this,this._recover(D(this,Pi)));return}const r=await D(this,Pi).getNetwork();if(D(this,Fp)||G(this,Fp,r),D(this,Fp).chainId!==r.chainId)throw new Error("chaid changed");if(D(this,xy))return;const s=await D(this,Pi).send("eth_getFilterChanges",[n]);await this._emitResults(D(this,Pi),s)}catch(n){console.log("@TODO",n)}D(this,Pi).once("block",D(this,Up))},TE=new WeakSet,hO=function(){const e=D(this,tl);e&&(G(this,tl,null),e.then(n=>{D(this,Pi).destroyed||D(this,Pi).send("eth_uninstallFilter",[n])}))};var jp;class QCe extends _Z{constructor(n,r){super(n);se(this,jp,void 0);G(this,jp,ZCe(r))}_recover(n){return new a5(n,D(this,jp))}async _subscribe(n){return await n.send("eth_newFilter",[D(this,jp)])}async _emitResults(n,r){for(const s of r)n.emit(D(this,jp),n._wrapLog(s,n._network))}}jp=new WeakMap;class JCe extends _Z{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const XCe="bigint,boolean,function,number,string,symbol".split(/,/g);function ZS(t){if(t==null||XCe.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(ZS);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function e_e(t){return new Promise(e=>{setTimeout(e,t)})}function tg(t){return t&&t.toLowerCase()}function JF(t){return t&&typeof t.pollingInterval=="number"}const IZ={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class O0 extends YCe{constructor(n,r){super(n);te(this,"address");r=un(r),at(this,{address:r})}connect(n){ue(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=ZS(n),s=[];if(r.from){const o=r.from;s.push((async()=>{const a=await Ui(o,this.provider);Q(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await Ui(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(n);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(s);if(u!=null){i(u.replaceableTransaction(r));return}}catch(u){if(Fs(u,"CANCELLED")||Fs(u,"BAD_DATA")||Fs(u,"NETWORK_ERROR")||Fs(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=s,o(u);return}if(Fs(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=s,c>10)){o(u);return}this.provider.emit("error",Zn("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},a.pop()||4e3)};l()})}async signTransaction(n){const r=ZS(n);if(r.from){const i=await Ui(r.from,this.provider);Q(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(n){const r=typeof n=="string"?_l(n):n;return await this.provider.send("personal_sign",[Pe(r),this.address.toLowerCase()])}async signTypedData(n,r,s){const i=ZS(s),o=await __.resolveNames(n,r,i,async a=>{const c=await Ui(a);return Q(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(__.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?_l(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Pe(r)])}}var $p,Sy,Eu,nl,lc,xa,no,kE,fO;class t_e extends WCe{constructor(n,r){super(n,r);se(this,kE);se(this,$p,void 0);se(this,Sy,void 0);se(this,Eu,void 0);se(this,nl,void 0);se(this,lc,void 0);se(this,xa,void 0);se(this,no,void 0);G(this,Sy,1),G(this,$p,Object.assign({},IZ,r||{})),G(this,Eu,[]),G(this,nl,null),G(this,xa,null),G(this,no,null);{let i=null;const o=new Promise(a=>{i=a});G(this,lc,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(Q(!s||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&n!=null&&G(this,xa,gl.from(n))):s&&(Q(n==null||s.matches(n),"staticNetwork MUST match network object","options",r),G(this,xa,s))}_getOption(n){return D(this,$p)[n]}get _network(){return ue(D(this,xa),"network is not available yet","NETWORK_ERROR"),D(this,xa)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let s=n.transaction;if(s&&s.type!=null&&He(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(D(this,xa))return D(this,xa)}else return n;return D(this,no)?await D(this,no):this.ready?(G(this,no,(async()=>{try{const r=gl.from(He(await this.send("eth_chainId",[])));return G(this,no,null),r}catch(r){throw G(this,no,null),r}})()),await D(this,no)):(G(this,no,(async()=>{const r={id:Dw(this,Sy)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],G(this,no,null)}catch(i){throw G(this,no,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return gl.from(He(s.result));throw this.getRpcError(r,s)})()),await D(this,no))}_start(){D(this,lc)==null||D(this,lc).resolve==null||(D(this,lc).resolve(),G(this,lc,null),(async()=>{for(;D(this,xa)==null&&!this.destroyed;)try{G(this,xa,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Zn("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await e_e(1e3)}ye(this,kE,fO).call(this)})())}async _waitUntilReady(){if(D(this,lc)!=null)return await D(this,lc).promise}_getSubscriber(n){return n.type==="pending"?new JCe(this):n.type==="event"?this._getOption("polling")?new a5(this,n.filter):new QCe(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new CZ("orphan"):super._getSubscriber(n)}get ready(){return D(this,lc)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(n[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=fc(He(n[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{n[s]!=null&&(r[s]=Pe(n[s]))}),n.accessList&&(r.accessList=Um(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(s=>s.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(s=>{const i=TY(s);return{address:i.address,nonce:fc(i.nonce),chainId:fc(i.chainId),yParity:fc(i.signature.yParity),r:fc(i.signature.r),s:fc(i.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[tg(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[tg(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[tg(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[tg(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(tg):n.filter.address=tg(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:s}=n,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return Zn("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return Zn("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=pO(i),l=zv.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",n.params[0],c?c.data:null);return l.info={error:i,payload:n},l}const o=JSON.stringify(n_e(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return Zn("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:n,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return Zn("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return Zn("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return Zn("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return Zn("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?Zn("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:i,payload:n}}):Zn("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(Zn("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const s=Dw(this,Sy)._++,i=new Promise((o,a)=>{D(this,Eu).push({resolve:o,reject:a,payload:{method:n,params:r,id:s,jsonrpc:"2.0"}})});return ye(this,kE,fO).call(this),i}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const i=await r;if(n>=i.length)throw new Error("no such account");return new O0(this,i[n])}const{accounts:s}=await Mi({network:this.getNetwork(),accounts:r});n=un(n);for(const i of s)if(un(i)===n)return new O0(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new O0(this,r))}destroy(){D(this,nl)&&(clearTimeout(D(this,nl)),G(this,nl,null));for(const{payload:n,reject:r}of D(this,Eu))r(Zn("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));G(this,Eu,[]),super.destroy()}}$p=new WeakMap,Sy=new WeakMap,Eu=new WeakMap,nl=new WeakMap,lc=new WeakMap,xa=new WeakMap,no=new WeakMap,kE=new WeakSet,fO=function(){if(D(this,nl))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");G(this,nl,setTimeout(()=>{G(this,nl,null);const r=D(this,Eu);for(G(this,Eu,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==D(this,$p).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>D(this,$p).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of s){if(this.destroyed){c(Zn("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=o.filter(d=>d.id===l.id)[0];if(u==null){const d=Zn("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",d),c(d);continue}if("error"in u){c(this.getRpcError(l,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},n))};var ph;class NZ extends t_e{constructor(n,r){super(n,r);se(this,ph,void 0);let s=this._getOption("pollingInterval");s==null&&(s=IZ.pollingInterval),G(this,ph,s)}_getSubscriber(n){const r=super._getSubscriber(n);return JF(r)&&(r.pollingInterval=D(this,ph)),r}get pollingInterval(){return D(this,ph)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");G(this,ph,n),this._forEachSubscriber(r=>{JF(r)&&(r.pollingInterval=D(this,ph))})}}ph=new WeakMap;var Cy;class c5 extends NZ{constructor(n,r,s){n==null&&(n="http://localhost:8545");super(r,s);se(this,Cy,void 0);typeof n=="string"?G(this,Cy,new Ju(n)):G(this,Cy,n.clone())}_getConnection(){return D(this,Cy).clone()}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){const r=this._getConnection();r.body=JSON.stringify(n),r.setHeader("content-type","application/json");const s=await r.send();s.assertOk();let i=s.bodyJson;return Array.isArray(i)||(i=[i]),i}}Cy=new WeakMap;function pO(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&Mn(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=pO(t[e]);if(n)return n}return null}if(typeof t=="string")try{return pO(JSON.parse(t))}catch{}return null}function mO(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)mO(t[n],e);if(typeof t=="string")try{return mO(JSON.parse(t),e)}catch{}}}function n_e(t){const e=[];return mO(t,e),e}var _y,Iy;const qf=class qf extends NZ{constructor(n,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});Q(n&&n.request,"invalid EIP-1193 provider","ethereum",n);super(r,i);se(this,_y,void 0);se(this,Iy,void 0);G(this,Iy,null),s&&s.providerInfo&&G(this,Iy,s.providerInfo),G(this,_y,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const l=await n.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const u=new Error(l.message);throw u.code=l.code,u.data=l.data,u.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return D(this,Iy)}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){Q(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const r=await D(this,_y).call(this,n.method,n.params||[]);return[{id:n.id,result:r}]}catch(r){return[{id:n.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(n,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(n,r)}async hasSigner(n){n==null&&(n=0);const r=await this.send("eth_accounts",[]);return typeof n=="number"?r.length>n:(n=n.toLowerCase(),r.filter(s=>s.toLowerCase()===n).length!==0)}async getSigner(n){if(n==null&&(n=0),!await this.hasSigner(n))try{await D(this,_y).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(n)}static async discover(n){if(n==null&&(n={}),n.provider)return new qf(n.provider);const r=n.window?n.window:typeof window<"u"?window:null;if(r==null)return null;const s=n.anyProvider;if(s&&r.ethereum)return new qf(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=n.timeout?n.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const l=h=>{c.push(h.detail),s&&u()},u=()=>{if(clearTimeout(d),c.length)if(n&&n.filter){const h=n.filter(c.map(f=>Object.assign({},f.info)));if(h==null)o(null);else if(h instanceof qf)o(h);else{let f=null;if(h.uuid&&(f=c.filter(m=>h.uuid===m.info.uuid)[0]),f){const{provider:p,info:m}=f;o(new qf(p,void 0,{providerInfo:m}))}else a(Zn("filter returned unknown info","UNSUPPORTED_OPERATION",{value:h}))}}else{const{provider:h,info:f}=c[0];o(new qf(h,void 0,{providerInfo:f}))}else o(null);r.removeEventListener("eip6963:announceProvider",l)},d=setTimeout(()=>{u()},i);r.addEventListener("eip6963:announceProvider",l),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};_y=new WeakMap,Iy=new WeakMap;let M0=qf;function Ci(t,e,n,r){let s=t[e];return Vs(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)},r)}const{proxyStateMap:r_e,snapCache:s_e}=M0e(),yx=t=>r_e.has(t);function i_e(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=s_e.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r;if(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError(`proxyMap:
	initial state must be iterable
		tip: structure should be [[key, value]]`);for(const[l,u]of t)r.set(l,n),e[n++]=u}const a={data:e,index:n,epoch:0,get size(){return yx(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!yx(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!yx(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!yx(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=zn(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}const ie={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos",sui:"Sui",stacks:"Stacks"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],SOLANA_SPL_TOKEN_ADDRESSES:{SOL:"So11111111111111111111111111111111111111112"},HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof sn<"u"&&typeof sn.env<"u"?sn.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}},IS_DEVELOPMENT:typeof sn<"u"&&sn.env.NODE_ENV==="development"},TZ={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=ie.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},kZ=["eip155","solana","polkadot","bip122","cosmos","sui","stacks"],o_e={bigNumber(t){return t?new fd(t):new fd(0)},multiply(t,e){if(t===void 0||e===void 0)return new fd(0);const n=new fd(t),r=new fd(e);return n.times(r)},toFixed(t,e=2){return t===void 0||t===""?new fd(0).toFixed(e):new fd(t).toFixed(e)},formatNumberToLocalString(t,e=2){return t===void 0||t===""?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"})},parseLocalStringToNumber(t){if(t===void 0||t==="")return 0;const e=t.replace(/,/gu,"");return new fd(e).toNumber()}},a_e=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],c_e=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],l_e=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],u_e={getERC20Abi:t=>ie.USDT_CONTRACT_ADDRESSES.includes(t)?l_e:a_e,getSwapAbi:()=>c_e},bs={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Xe={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids",HISTORY_TRANSACTIONS_CACHE:"@appkit/history_transactions_cache",TOKEN_PRICE_CACHE:"@appkit/token_price_cache",RECENT_EMAILS:"@appkit/recent_emails",LATEST_APPKIT_VERSION:"@appkit/latest_version"};function gk(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Je={setItem(t,e){Ub()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Ub())return localStorage.getItem(t)||void 0},removeItem(t){Ub()&&localStorage.removeItem(t)},clear(){Ub()&&localStorage.clear()}};function Ub(){return typeof window<"u"&&typeof localStorage<"u"}function Vv(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#202020"}}const yk=(typeof sn<"u"&&typeof sn.env<"u"?sn.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",PZ=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],d_e="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",Ft={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:yk,SECURE_SITE_DASHBOARD:`${yk}/dashboard`,SECURE_SITE_FAVICON:`${yk}/images/favicon.png`,SOLANA_NATIVE_TOKEN_ADDRESS:"So11111111111111111111111111111111111111111",RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:[ie.CHAIN.EVM,ie.CHAIN.SOLANA],SEND_PARAMS_SUPPORTED_CHAINS:[ie.CHAIN.EVM],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[ie.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[ie.CHAIN.EVM,ie.CHAIN.SOLANA],PAY_WITH_EXCHANGE_SUPPORTED_CHAIN_NAMESPACES:[ie.CHAIN.EVM,ie.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[ie.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x",sui:"0x",stacks:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[ie.CHAIN.EVM,ie.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1,emailCapture:!1,payWithExchange:!1,payments:!1,reownAuthentication:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1,emailCapture:!1,reownAuthentication:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1,reownAuthentication:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},he={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5,transactionsHistory:15e3,tokenPrice:15e3,latestAppKitVersion:6048e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=he.getActiveNamespace(),e=he.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Je.setItem(Xe.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Je.getItem(Xe.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Je.removeItem(Xe.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Je.setItem(Xe.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Je.setItem(Xe.ACTIVE_CAIP_NETWORK_ID,t),he.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Je.getItem(Xe.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Je.removeItem(Xe.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=gk(t);Je.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=he.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Je.setItem(Xe.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Je.getItem(Xe.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=gk(t);Je.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Je.getItem(Xe.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=gk(t);return Je.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{Je.setItem(Xe.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Je.getItem(Xe.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Je.removeItem(Xe.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Je.getItem(Xe.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Je.getItem(Xe.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Je.setItem(Xe.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Je.getItem(Xe.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Je.getItem(Xe.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Je.setItem(Xe.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=he.getConnectedNamespaces();e.includes(t)||(e.push(t),he.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=he.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),he.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Je.getItem(Xe.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Je.setItem(Xe.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Je.removeItem(Xe.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Je.getItem(Xe.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=he.getBalanceCache();Je.setItem(Xe.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=he.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;he.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=he.getBalanceCache();e[t.caipAddress]=t,Je.setItem(Xe.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Je.getItem(Xe.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=he.getBalanceCache();Je.setItem(Xe.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=he.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),he.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=he.getNativeBalanceCache();e[t.caipAddress]=t,Je.setItem(Xe.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Je.getItem(Xe.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=he.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;he.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=he.getEnsCache();e[t.address]=t,Je.setItem(Xe.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=he.getEnsCache();Je.setItem(Xe.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Je.getItem(Xe.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=he.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;he.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=he.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Je.setItem(Xe.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=he.getIdentityCache();Je.setItem(Xe.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Je.removeItem(Xe.PORTFOLIO_CACHE),Je.removeItem(Xe.NATIVE_BALANCE_CACHE),Je.removeItem(Xe.ENS_CACHE),Je.removeItem(Xe.IDENTITY_CACHE),Je.removeItem(Xe.HISTORY_TRANSACTIONS_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Je.setItem(Xe.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Je.getItem(Xe.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=he.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===ie.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};Je.setItem(Xe.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Je.getItem(Xe.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=he.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),Je.setItem(Xe.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=Je.getItem(Xe.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=he.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),Je.setItem(Xe.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=he.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),Je.setItem(Xe.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(he.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1},getTransactionsCache(){try{const t=Je.getItem(Xe.HISTORY_TRANSACTIONS_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get transactions cache")}return{}},getTransactionsCacheForAddress({address:t,chainId:e=""}){var n;try{const s=(n=he.getTransactionsCache()[t])==null?void 0:n[e];if(s&&!this.isCacheExpired(s.timestamp,this.cacheExpiry.transactionsHistory))return s.transactions;he.removeTransactionsCache({address:t,chainId:e})}catch{console.info("Unable to get transactions cache")}},updateTransactionsCache({address:t,chainId:e="",timestamp:n,transactions:r}){try{const s=he.getTransactionsCache();s[t]={...s[t],[e]:{timestamp:n,transactions:r}},Je.setItem(Xe.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(s))}catch{console.info("Unable to update transactions cache",{address:t,chainId:e,timestamp:n,transactions:r})}},removeTransactionsCache({address:t,chainId:e}){try{const n=he.getTransactionsCache(),r=(n==null?void 0:n[t])||{},{[e]:s,...i}=r;Je.setItem(Xe.HISTORY_TRANSACTIONS_CACHE,JSON.stringify({...n,[t]:i}))}catch{console.info("Unable to remove transactions cache",{address:t,chainId:e})}},getTokenPriceCache(){try{const t=Je.getItem(Xe.TOKEN_PRICE_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get token price cache")}return{}},getTokenPriceCacheForAddresses(t){try{const n=he.getTokenPriceCache()[t.join(",")];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.tokenPrice))return n.tokenPrice;he.removeTokenPriceCache(t)}catch{console.info("Unable to get token price cache for addresses",t)}},updateTokenPriceCache(t){try{const e=he.getTokenPriceCache();e[t.addresses.join(",")]={timestamp:t.timestamp,tokenPrice:t.tokenPrice},Je.setItem(Xe.TOKEN_PRICE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update token price cache",t)}},removeTokenPriceCache(t){try{const e=he.getTokenPriceCache();Je.setItem(Xe.TOKEN_PRICE_CACHE,JSON.stringify({...e,[t.join(",")]:void 0}))}catch{console.info("Unable to remove token price cache",t)}},getLatestAppKitVersion(){try{const t=this.getLatestAppKitVersionCache(),e=t==null?void 0:t.version;return e&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.latestAppKitVersion)?e:void 0}catch{console.info("Unable to get latest AppKit version")}},getLatestAppKitVersionCache(){try{const t=Je.getItem(Xe.LATEST_APPKIT_VERSION);return t?JSON.parse(t):{}}catch{console.info("Unable to get latest AppKit version cache")}return{}},updateLatestAppKitVersion(t){try{const e=he.getLatestAppKitVersionCache();e.timestamp=t.timestamp,e.version=t.version,Je.setItem(Xe.LATEST_APPKIT_VERSION,JSON.stringify(e))}catch{console.info("Unable to update latest AppKit version on local storage",t)}}},Be={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return Be.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Ft.TEN_SEC_MS:!0},isAllowedRetry(t,e=Ft.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(Be.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Ft.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(Be.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!Be.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?he.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,Be.wait(2e3)])},parseBalance(t,e){let n="0.000";if(typeof t=="string"){const c=Number(t);if(!isNaN(c)){const l=(Math.floor(c*1e3)/1e3).toFixed(3);l&&(n=l)}}const[r,s]=n.split("."),i=r||"0",o=s||"000";return{formattedText:`${i}.${o}${e?` ${e}`:""}`,value:i,decimals:o,symbol:e}},getApiUrl(){return ie.W3M_API_URL},getBlockchainApiUrl(){return ie.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return ie.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?Ft.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in ie.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function nb(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class hA{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await nb(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await nb(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await nb(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await nb(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await nb(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}sendBeacon({body:e,...n}){const r=this.createUrl(n);return navigator.sendBeacon(r.toString(),e?JSON.stringify(e):void 0)}}const h_e={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?Ft.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Be.isTelegram()){if(Be.isIos())return t.filter(e=>e!=="google");if(Be.isMac())return t.filter(e=>e!=="x");if(Be.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},Ze=zn({features:Ft.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Ft.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),le={state:Ze,subscribeKey(t,e){return Ci(Ze,t,e)},setOptions(t){Object.assign(Ze,t)},setRemoteFeatures(t){var n,r;if(!t)return;const e={...Ze.remoteFeatures,...t};Ze.remoteFeatures=e,(n=Ze.remoteFeatures)!=null&&n.socials&&(Ze.remoteFeatures.socials=h_e.filterSocialsByPlatform(Ze.remoteFeatures.socials)),(r=Ze.features)!=null&&r.pay&&(Ze.remoteFeatures.email=!1,Ze.remoteFeatures.socials=!1)},setFeatures(t){var n;if(!t)return;Ze.features||(Ze.features=Ft.DEFAULT_FEATURES);const e={...Ze.features,...t};Ze.features=e,(n=Ze.features)!=null&&n.pay&&Ze.remoteFeatures&&(Ze.remoteFeatures.email=!1,Ze.remoteFeatures.socials=!1)},setProjectId(t){Ze.projectId=t},setCustomRpcUrls(t){Ze.customRpcUrls=t},setAllWallets(t){Ze.allWallets=t},setIncludeWalletIds(t){Ze.includeWalletIds=t},setExcludeWalletIds(t){Ze.excludeWalletIds=t},setFeaturedWalletIds(t){Ze.featuredWalletIds=t},setTokens(t){Ze.tokens=t},setTermsConditionsUrl(t){Ze.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Ze.privacyPolicyUrl=t},setCustomWallets(t){Ze.customWallets=t},setIsSiweEnabled(t){Ze.isSiweEnabled=t},setIsUniversalProvider(t){Ze.isUniversalProvider=t},setSdkVersion(t){Ze.sdkVersion=t},setMetadata(t){Ze.metadata=t},setDisableAppend(t){Ze.disableAppend=t},setEIP6963Enabled(t){Ze.enableEIP6963=t},setDebug(t){Ze.debug=t},setEnableWalletConnect(t){Ze.enableWalletConnect=t},setEnableWalletGuide(t){Ze.enableWalletGuide=t},setEnableAuthLogger(t){Ze.enableAuthLogger=t},setEnableWallets(t){Ze.enableWallets=t},setPreferUniversalLinks(t){Ze.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(Ft.SIWX_DEFAULTS))t[e]??(t[e]=n);Ze.siwx=t},setConnectMethodsOrder(t){Ze.features={...Ze.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Ze.features={...Ze.features,walletFeaturesOrder:t}},setSocialsOrder(t){Ze.remoteFeatures={...Ze.remoteFeatures,socials:t}},setCollapseWallets(t){Ze.features={...Ze.features,collapseWallets:t}},setEnableEmbedded(t){Ze.enableEmbedded=t},setAllowUnsupportedChain(t){Ze.allowUnsupportedChain=t},setManualWCControl(t){Ze.manualWCControl=t},setEnableNetworkSwitch(t){Ze.enableNetworkSwitch=t},setEnableReconnect(t){Ze.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(Ze.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){Ze.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Ze.universalProviderConfigOverride},getSnapshot(){return ov(Ze)}},f_e=Object.freeze({enabled:!0,events:[]}),p_e=new hA({baseUrl:Be.getAnalyticsUrl(),clientId:null}),m_e=5,g_e=60*1e3,wd=zn({...f_e}),y_e={state:wd,subscribeKey(t,e){return Ci(wd,t,e)},async sendError(t,e){if(!wd.enabled)return;const n=Date.now();if(wd.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<g_e}).length>=m_e)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};wd.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=le.state;await p_e.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:Be.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){wd.enabled=!0},disable(){wd.enabled=!1},clearEvents(){wd.events=[]}};class cw extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,cw.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,cw):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function XF(t,e){let n="";try{t instanceof Error?n=t.message:typeof t=="string"?n=t:typeof t=="object"&&t!==null?n=(t==null?void 0:t.message)||JSON.stringify(t):n=String(t)}catch(s){n="Unknown error",console.error("Error parsing error message",s)}const r=t instanceof cw?t:new cw(n,e,t);throw y_e.sendError(r,r.category),r}function oa(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return XF(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return XF(a,e)}},n[r]=i}else n[r]=s}),n}const w_e="https://secure.walletconnect.org/sdk",b_e=(typeof sn<"u"&&typeof sn.env<"u"?sn.env.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||w_e,v_e=(typeof sn<"u"&&typeof sn.env<"u"?sn.env.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",E_e=(typeof sn<"u"&&typeof sn.env<"u"?sn.env.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ve={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Qr={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},ma={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"},BINANCE:{id:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25",appId:"yFK5FCqYprrXDiVFbhyRx7",deeplink:"bnc://app.binance.com/mp/app",url:"https://app.binance.com/en/download"}},A_e={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===ma.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${ma.PHANTOM.url}/ul/browse/${r}?ref=${o}`}if(t===ma.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${ma.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===ie.CHAIN.SOLANA&&t===ma.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${ma.COINBASE.url}/dapp?cb_url=${r}`),e===ie.CHAIN.BITCOIN&&t===ma.BINANCE.id&&!("binancew3w"in window)){const s=q.state.activeCaipNetwork,i=window.btoa("/pages/browser/index"),o=window.btoa(`url=${r}&defaultChainId=${(s==null?void 0:s.id)??1}`),a=new URL(ma.BINANCE.deeplink);a.searchParams.set("appId",ma.BINANCE.appId),a.searchParams.set("startPagePath",i),a.searchParams.set("startPageQuery",o);const c=new URL(ma.BINANCE.url);c.searchParams.set("_dp",window.btoa(a.toString())),window.location.href=c.toString()}}},To=zn({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),x_e={state:To,subscribeNetworkImages(t){return Vs(To.networkImages,()=>t(To.networkImages))},subscribeKey(t,e){return Ci(To,t,e)},subscribe(t){return Vs(To,()=>t(To))},setWalletImage(t,e){To.walletImages[t]=e},setNetworkImage(t,e){To.networkImages[t]=e},setChainImage(t,e){To.chainImages[t]=e},setConnectorImage(t,e){To.connectorImages={...To.connectorImages,[t]:e}},setTokenImage(t,e){To.tokenImages[t]=e},setCurrencyImage(t,e){To.currencyImages[t]=e}},Na=oa(x_e),S_e={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:"",sui:"",stacks:""},wk=zn({networkImagePromises:{}}),RZ={async fetchWalletImage(t){if(t)return await et._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(wk.networkImagePromises[t]||(wk.networkImagePromises[t]=et._fetchNetworkImage(t)),await wk.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Na.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Na.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Na.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Na.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return Na.state.connectorImages[t.imageId]},getChainImage(t){return Na.state.networkImages[S_e[t]]},getTokenImage(t){if(t)return Na.state.tokenImages[t]}},C_e=Be.getAnalyticsUrl(),__e=new hA({baseUrl:C_e,clientId:null}),I_e=["MODAL_CREATED"],N_e=45,Ii=zn({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"},pendingEvents:[],subscribedToVisibilityChange:!1}),Dt={state:Ii,subscribe(t){return Vs(Ii,()=>t(Ii))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=le.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},_setPendingEvent(t){var e;try{let n=Fe.state.address;if("address"in t.data&&t.data.address&&(n=t.data.address),I_e.includes(t.data.event)||typeof window>"u")return;const r=(e=q.getActiveCaipNetwork())==null?void 0:e.caipNetworkId;this.state.pendingEvents.push({eventId:Be.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:n,properties:{..."properties"in t.data?t.data.properties:{},caipNetworkId:r}}}),Ii.reportedErrors.FORBIDDEN=!1,JSON.stringify(Ii.pendingEvents).length/1024>N_e&&Dt._submitPendingEvents()}catch(n){console.warn("_setPendingEvent",n)}},sendEvent(t){var n;Ii.timestamp=Date.now(),Ii.data=t;const e=["INITIALIZE","CONNECT_SUCCESS","SOCIAL_LOGIN_SUCCESS"];((n=le.state.features)!=null&&n.analytics||e.includes(t.event))&&Dt._setPendingEvent(Ii),this._subscribeToVisibilityChange()},_submitPendingEvents(){if(Ii.pendingEvents.length!==0)try{__e.sendBeacon({path:"/batch",params:Dt.getSdkProperties(),body:Ii.pendingEvents}),Ii.reportedErrors.FORBIDDEN=!1,Ii.pendingEvents=[]}catch{Ii.reportedErrors.FORBIDDEN=!0}},_subscribeToVisibilityChange(){var t;Ii.subscribedToVisibilityChange||typeof document>"u"||(Ii.subscribedToVisibilityChange=!0,(t=document==null?void 0:document.addEventListener)==null||t.call(document,"visibilitychange",()=>{document.visibilityState==="hidden"&&Dt._submitPendingEvents()}))}},T_e=Be.getApiUrl(),Gi=new hA({baseUrl:T_e,clientId:null}),k_e=40,ej=4,P_e=20,mt=zn({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),et={state:mt,subscribeKey(t,e){return Ci(mt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=le.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return le.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Gi.baseUrl}/getWalletImage/${t}`,n=await Gi.getBlob({path:e,params:et._getSdkProperties()});Na.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Gi.baseUrl}/public/getAssetImage/${t}`,n=await Gi.getBlob({path:e,params:et._getSdkProperties()});Na.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Gi.baseUrl}/public/getAssetImage/${t}`,n=await Gi.getBlob({path:e,params:et._getSdkProperties()});Na.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Gi.baseUrl}/public/getCurrencyImage/${t}`,n=await Gi.getBlob({path:e,params:et._getSdkProperties()});Na.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Gi.baseUrl}/public/getTokenImage/${t}`,n=await Gi.getBlob({path:e,params:et._getSdkProperties()});Na.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){const e=t.length,n=Be.isMobile()?t==null?void 0:t.filter(s=>s.mobile_link||s.webapp_link?!0:Object.values(ma).map(o=>o.id).includes(s.id)):t,r=e-n.length;return{filteredWallets:n,mobileFilteredOutWalletsLength:r}},async fetchProjectConfig(){return(await Gi.get({path:"/appkit/v1/config",params:et._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Gi.get({path:"/projects/v1/origins",params:et._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===ie.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=ie.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=q.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!RZ.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>et._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Se.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>et._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>et._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>et._fetchTokenImage(e)))},async fetchWallets(t){var o;const e=t.exclude??[];et._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(ma).map(a=>a.id));const r=await Gi.get({path:"/getWallets",params:{...et._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(o=t.include)==null?void 0:o.join(","),exclude:e.join(",")}}),{filteredWallets:s,mobileFilteredOutWalletsLength:i}=et._filterWalletsByPlatform(r==null?void 0:r.data);return{data:s||[],count:r==null?void 0:r.count,mobileFilteredOutWalletsLength:i}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=le.state;if(t!=null&&t.length){const e={...et._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??ej,include:t},{data:n}=await et.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>et._fetchWalletImage(i))),mt.featured=r,mt.allFeatured=r}},async fetchRecommendedWallets(){try{mt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=le.state,r=[...e??[],...n??[]].filter(Boolean),s=q.getRequestedCaipNetworkIds().join(","),i={page:1,entries:ej,include:t,exclude:r,chains:s},{data:o,count:a}=await et.fetchWallets(i),c=he.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>et._fetchWalletImage(d))),mt.recommended=o,mt.allRecommended=o,mt.count=a??0}catch{}finally{mt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=le.state,s=q.getRequestedCaipNetworkIds().join(","),i=[...mt.recommended.map(({id:d})=>d),...n??[],...r??[]].filter(Boolean),o={page:t,entries:k_e,include:e,exclude:i,chains:s},{data:a,count:c,mobileFilteredOutWalletsLength:l}=await et.fetchWallets(o);mt.mobileFilteredOutWalletsLength=l+(mt.mobileFilteredOutWalletsLength??0);const u=a.slice(0,P_e).map(d=>d.image_id).filter(Boolean);await Promise.allSettled(u.map(d=>et._fetchWalletImage(d))),mt.wallets=Be.uniqueBy([...mt.wallets,...et._filterOutExtensions(a)],"id").filter(d=>{var h;return(h=d.chains)==null?void 0:h.some(f=>s.includes(f))}),mt.count=c>mt.count?c:mt.count,mt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await et.fetchWallets(e);n&&n.forEach(r=>{mt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=le.state,s=q.getRequestedCaipNetworkIds().join(",");mt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await et.fetchWallets(i);Dt.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>et._fetchWalletImage(c)),Be.wait(300)]),mt.search=et._filterOutExtensions(o)},initPromise(t,e){const n=mt.promises[t];return n||(mt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&et.initPromise("connectorImages",et.fetchConnectorImages),e&&et.initPromise("featuredWallets",et.fetchFeaturedWallets),n&&et.initPromise("recommendedWallets",et.fetchRecommendedWallets),r&&et.initPromise("networkImages",et.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=le.state.features)!=null&&t.analytics&&et.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Gi.get({path:"/getAnalyticsConfig",params:et._getSdkProperties()});le.setFeatures({analytics:t})}catch{le.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){mt.featured=mt.allFeatured,mt.recommended=mt.allRecommended;return}const e=q.getRequestedCaipNetworkIds().join(",");mt.featured=mt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),mt.recommended=mt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),mt.filteredWallets=mt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){mt.filteredWallets=[]},setFilterByNamespace(t){if(!t){mt.featured=mt.allFeatured,mt.recommended=mt.allRecommended;return}const e=q.getRequestedCaipNetworkIds().join(",");mt.featured=mt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),mt.recommended=mt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),mt.filteredWallets=mt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},_n=zn({view:"Connect",history:["Connect"],transactionStack:[]}),R_e={state:_n,subscribeKey(t,e){return Ci(_n,t,e)},pushTransactionStack(t){_n.transactionStack.push(t)},popTransactionStack(t){const e=_n.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),ct.goBack();break;case"cancel":s==null||s(),ct.goBack();break}},push(t,e){t!==_n.view&&(_n.view=t,_n.history.push(t),_n.data=e)},reset(t,e){_n.view=t,_n.history=[t],_n.data=e},replace(t,e){_n.history.at(-1)===t||(_n.view=t,_n.history[_n.history.length-1]=t,_n.data=e)},goBack(){var r;const t=q.state.activeCaipAddress,e=ct.state.view==="ConnectingFarcaster",n=!t&&e;if(_n.history.length>1){_n.history.pop();const[s]=_n.history.slice(-1);s&&(t&&s==="Connect"?_n.view="Account":_n.view=s)}else Ot.close();(r=_n.data)!=null&&r.wallet&&(_n.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Fe.setFarcasterUrl(void 0,q.state.activeChain);const a=Se.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=ov(le.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(_n.history.length>1){_n.history=_n.history.slice(0,t+1);const[e]=_n.history.slice(-1);e&&(_n.view=e)}},goBackOrCloseModal(){ct.state.history.length>1?ct.goBack():Ot.close()}},ct=oa(R_e),Kl=zn({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),gO={state:Kl,subscribe(t){return Vs(Kl,()=>t(Kl))},setThemeMode(t){Kl.themeMode=t;try{const e=Se.getAuthConnector();if(e){const n=gO.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Vv(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Kl.themeVariables={...Kl.themeVariables,...t};try{const e=Se.getAuthConnector();if(e){const n=gO.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Vv(Kl.themeVariables,Kl.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return ov(Kl)}},ro=oa(gO),OZ=Object.fromEntries(kZ.map(t=>[t,void 0])),O_e=Object.fromEntries(kZ.map(t=>[t,!0])),Yt=zn({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:OZ,filterByNamespaceMap:O_e}),M_e={state:Yt,subscribe(t){return Vs(Yt,()=>{t(Yt)})},subscribeKey(t,e){return Ci(Yt,t,e)},initialize(t){t.forEach(e=>{const n=he.getConnectedConnectorId(e);n&&Se.setConnectorId(n,e)})},setActiveConnector(t){t&&(Yt.activeConnector=cm(t))},setConnectors(t){t.filter(s=>!Yt.allConnectors.some(i=>i.id===s.id&&Se.getConnectorName(i.name)===Se.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&Yt.allConnectors.push(cm(s))});const n=Se.getEnabledNamespaces(),r=Se.getEnabledConnectors(n);Yt.connectors=Se.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(Yt.filterByNamespaceMap).forEach(e=>{Yt.filterByNamespaceMap[e]=!1}),t.forEach(e=>{Yt.filterByNamespaceMap[e]=!0}),Se.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){Yt.filterByNamespaceMap[t]=e,Se.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Se.getEnabledNamespaces(),e=Se.getEnabledConnectors(t),n=Se.areAllNamespacesEnabled();Yt.connectors=Se.mergeMultiChainConnectors(e),n?et.clearFilterByNamespaces():et.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(Yt.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return Yt.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(Yt.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Se.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===ie.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Se.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===ie.CONNECTOR_ID.AUTH){const s=t,i=ov(le.state),o=ro.getSnapshot().themeMode,a=ro.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Vv(a,o)}),Se.setConnectors([t])}else Se.setConnectors([t])},getAuthConnector(t){var r;const e=t||q.state.activeChain,n=Yt.connectors.find(s=>s.id===ie.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return Yt.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return Yt.allConnectors.find(e=>e.id===t)},getConnector({id:t,rdns:e,namespace:n}){const r=n||q.state.activeChain;return Yt.allConnectors.filter(i=>i.chain===r).find(i=>{var o;return i.explorerId===t||((o=i.info)==null?void 0:o.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=ov(le.state),r=ro.getSnapshot().themeMode,s=ro.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Vv(s,r)})},getConnectorsByNamespace(t){const e=Yt.allConnectors.filter(n=>n.chain===t);return Se.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return q.checkIfSmartAccountEnabled()&&Ao(t)===Qr.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=Se.getConnector({id:t.id,rdns:t.rdns});A_e.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,q.state.activeChain),e?ct.push("ConnectingExternal",{connector:e,wallet:t}):ct.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Se.getConnectorsByNamespace(t):Se.mergeMultiChainConnectors(Yt.allConnectors)},setFilterByNamespace(t){Yt.filterByNamespace=t,Yt.connectors=Se.getConnectors(t),et.setFilterByNamespace(t)},setConnectorId(t,e){t&&(Yt.activeConnectorIds={...Yt.activeConnectorIds,[e]:t},he.setConnectedConnectorId(e,t))},removeConnectorId(t){Yt.activeConnectorIds={...Yt.activeConnectorIds,[t]:void 0},he.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return Yt.activeConnectorIds[t]},isConnected(t){return t?!!Yt.activeConnectorIds[t]:Object.values(Yt.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){Yt.activeConnectorIds={...OZ}}},Se=oa(M_e),D_e=1e3,rb={checkNamespaceConnectorId(t,e){return Se.getConnectorId(t)===e},isSocialProvider(t){return Ft.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&Se.setActiveConnector(e),s==null||s(Be.isMobile()&&t),r){const l=Ot.subscribeKey("open",u=>{u||(ct.state.view!==r&&ct.replace(r),l(),a(new Error("Modal closed")))})}const c=q.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&Ot.close(),c(),o(bs.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=q.subscribeKey("activeCaipAddress",s=>{s&&(Ot.close(),r(),e(bs.parseCaipAddress(s)))});Ne.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,namespace:e,closeModalOnConnect:n=!0,onOpenFarcaster:r,onConnect:s}){let i=Fe.state.socialWindow,o=Fe.state.socialProvider,a=!1,c=null;const l=e||q.state.activeChain,u=q.subscribeKey("activeCaipAddress",d=>{d&&(n&&Ot.close(),u())});return new Promise((d,h)=>{async function f(m){var E;if((E=m.data)!=null&&E.resultUri)if(m.origin===ie.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",f,!1);try{const b=Se.getAuthConnector(l);if(b&&!a){i&&(i.close(),Fe.setSocialWindow(void 0,l),i=Fe.state.socialWindow),a=!0;const x=m.data.resultUri;if(o&&Dt.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:o}}),o){he.setConnectedSocialProvider(o),await Ne.connectExternal({id:b.id,type:b.type,socialUri:x},b.chain);const w=q.state.activeCaipAddress;if(!w){h(new Error("Failed to connect"));return}d(bs.parseCaipAddress(w)),Dt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:o}})}}}catch{o&&Dt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:o}}),h(new Error("Failed to connect"))}}else o&&Dt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:o}})}async function p(){if(t&&(Fe.setSocialProvider(t,l),o=Fe.state.socialProvider,Dt.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:o}})),o==="farcaster"){r==null||r();const m=Ot.subscribeKey("open",b=>{!b&&t==="farcaster"&&(h(new Error("Popup closed")),s==null||s(),m())}),E=Se.getAuthConnector();if(E&&!Fe.state.farcasterUrl)try{const{url:b}=await E.provider.getFarcasterUri();Fe.setFarcasterUrl(b,l)}catch{h(new Error("Failed to connect to farcaster"))}}else{const m=Se.getAuthConnector();c=Be.returnOpenHref(`${ie.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(m&&o){const{uri:E}=await m.provider.getSocialRedirectUri({provider:o});if(c&&E){Fe.setSocialWindow(c,l),i=Fe.state.socialWindow,c.location.href=E;const b=setInterval(()=>{i!=null&&i.closed&&!a&&(h(new Error("Popup closed")),clearInterval(b))},1e3);window.addEventListener("message",f,!1)}else c==null||c.close(),h(new Error("Failed to initiate social connection"))}}catch{h(new Error("Failed to initiate social connection")),c==null||c.close()}}}p()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=Ot.subscribeKey("open",c=>{c||(ct.state.view!==e&&ct.replace(e),a(),i(new Error("Modal closed")))})}const o=q.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&Ot.close(),o(),s(bs.parseCaipAddress(a)))})})},async updateEmail(){const t=he.getConnectedConnectorId(q.state.activeChain),e=Se.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==ie.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return await Ot.open({view:"UpdateEmailWallet",data:{email:n,redirectView:void 0}}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(Ot.close(),clearInterval(i),o(),r({email:a}))},D_e),o=Ot.subscribeKey("open",a=>{a||(ct.state.view!=="Connect"&&ct.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return q.checkIfSmartAccountEnabled()&&Ao(t)===Qr.ACCOUNT_TYPES.EOA}};function MZ(){var r,s;const t=((r=q.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=q.state.activeCaipNetwork)==null?void 0:s.id)||1,n=Ft.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function Ao(t){var n;return(n=q.getAccountData(t))==null?void 0:n.preferredAccountType}function Fb(t){var e,n;return t?(n=(e=q.state.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:q.state.activeCaipNetwork}const k_={getConnectionStatus(t,e){const n=Se.state.activeConnectorIds[e],r=Ne.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=le.state.remoteFeatures)!=null&&a.multiWallet),n=Se.state.activeConnectorIds[t],r=Ne.getConnections(t),i=(Ne.state.recentConnections.get(t)??[]).filter(c=>Se.getConnectorById(c.connectorId)),o=k_.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},Rf=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Jr=zn({...Rf}),B_e={state:Jr,subscribeKey(t,e){return Ci(Jr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Be.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Jr.message=Rf.message,Jr.variant=Rf.variant,Jr.svg=Rf.svg,Jr.open=Rf.open,Jr.autoClose=Rf.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Rf.autoClose}){Jr.open?(Jr.open=!1,setTimeout(()=>{Jr.message=t,Jr.variant=n,Jr.svg=e,Jr.open=!0,Jr.autoClose=r},150)):(Jr.message=t,Jr.variant=n,Jr.svg=e,Jr.open=!0,Jr.autoClose=r)}},yl=B_e,Yn=zn({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),L_e={state:Yn,subscribe(t){return Vs(Yn,()=>t(Yn))},setLastNetworkInView(t){Yn.lastNetworkInView=t},async fetchTransactions(t){var e;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Yn.loading=!0;try{const n=await it.fetchTransactions({account:t,cursor:Yn.next,chainId:(e=q.state.activeCaipNetwork)==null?void 0:e.caipNetworkId}),r=QS.filterSpamTransactions(n.data),s=QS.filterByConnectedChain(r),i=[...Yn.transactions,...s];Yn.loading=!1,Yn.transactions=i,Yn.transactionsByYear=QS.groupTransactionsByYearAndMonth(Yn.transactionsByYear,s),Yn.empty=i.length===0,Yn.next=n.next?n.next:void 0}catch{const r=q.state.activeChain;Dt.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:le.state.projectId,cursor:Yn.next,isSmartAccount:Ao(r)===Qr.ACCOUNT_TYPES.SMART_ACCOUNT}}),yl.showError("Failed to fetch transactions"),Yn.loading=!1,Yn.empty=!0,Yn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=q.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Yn.next=void 0},resetTransactions(){Yn.transactions=[],Yn.transactionsByYear={},Yn.lastNetworkInView=void 0,Yn.loading=!1,Yn.empty=!1,Yn.next=void 0}},QS=oa(L_e,"API_ERROR"),zt=zn({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let mf;const U_e={state:zt,subscribe(t){return Vs(zt,()=>t(zt))},subscribeKey(t,e){return Ci(zt,t,e)},_getClient(){return zt._client},setClient(t){zt._client=cm(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);Ne.syncStorageConnections(e)},syncStorageConnections(t){const e=he.getConnections(),n=t??Array.from(q.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(zt.recentConnections);i.set(r,s),zt.recentConnections=i}},getConnections(t){return t?zt.connections.get(t)??[]:[]},hasAnyConnection(t){const e=Ne.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect({cache:t="auto"}={}){var n,r,s,i;const e=Be.isTelegram()||Be.isSafari()&&Be.isIos();if(t==="always"||t==="auto"&&e){if(mf){await mf,mf=void 0;return}if(!Be.isPairingExpired(zt==null?void 0:zt.wcPairingExpiry)){const o=zt.wcUri;zt.wcUri=o;return}mf=(r=(n=Ne._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n).catch(()=>{}),Ne.state.status="connecting",await mf,mf=void 0,zt.wcPairingExpiry=void 0,Ne.state.status="connected"}else await((i=(s=Ne._getClient())==null?void 0:s.connectWalletConnect)==null?void 0:i.call(s))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=Ne._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&q.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=Ne._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||q.state.activeChain;e&&Se.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;Ot.setLoading(!0,q.state.activeChain);const n=Se.getAuthConnector();n&&(Fe.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),he.setPreferredAccountTypes(Object.entries(q.state.chains).reduce((s,[i,o])=>{const a=i,c=Ao(a);return c!==void 0&&(s[a]=c),s},{})),await Ne.reconnectExternal(n),Ot.setLoading(!1,q.state.activeChain),Dt.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=q.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=Ne._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=Ne._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=Ne._getClient())==null?void 0:n.formatUnits(t,e)},updateBalance(t){var e;return(e=Ne._getClient())==null?void 0:e.updateBalance(t)},async sendTransaction(t){var e;return(e=Ne._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=Ne._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=Ne._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=Ne._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=Ne._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=Ne._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=Ne._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=Ne._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=Ne._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){zt.wcUri=void 0,zt.wcPairingExpiry=void 0,zt.wcLinking=void 0,zt.recentWallet=void 0,zt.status="disconnected",QS.resetTransactions(),he.deleteWalletConnectDeepLink()},resetUri(){zt.wcUri=void 0,zt.wcPairingExpiry=void 0,mf=void 0},finalizeWcConnection(t){var r,s;const{wcLinking:e,recentWallet:n}=Ne.state;e&&he.setWalletConnectDeepLink(e),n&&he.setAppKitRecent(n),t&&Dt.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:t,properties:{method:e?"mobile":"qrcode",name:((s=(r=ct.state.data)==null?void 0:r.wallet)==null?void 0:s.name)||"Unknown"}})},setWcBasic(t){zt.wcBasic=t},setUri(t){zt.wcUri=t,zt.wcPairingExpiry=Be.getPairingExpiry()},setWcLinking(t){zt.wcLinking=t},setWcError(t){zt.wcError=t,zt.buffering=!1},setRecentWallet(t){zt.recentWallet=t},setBuffering(t){zt.buffering=t},setStatus(t){zt.status=t},setIsSwitchingConnection(t){zt.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=Ne._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new cw("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(zt.connections);n.set(e,t),zt.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=Fe.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&rb.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await Ne.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=Se.getConnectorById(t.connectorId),s=t.connectorId===ie.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await Ne.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await Ne.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=Se.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===ie.CONNECTOR_ID.AUTH,a=t.connectorId===ie.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&rb.isSocialProvider(i)){const{address:d}=await rb.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){Ot.open({view:"ConnectingFarcaster"})},onConnect(){ct.replace("ProfileWallets")}});c=d}else{const{address:d}=await rb.connectEmail({closeModalOnConnect:r,onOpen(){Ot.open({view:"EmailLogin"})},onConnect(){ct.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await rb.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){const f=h?"AllWallets":"ConnectingWalletConnect";Ot.state.open?ct.push(f):Ot.open({view:f})},onConnect(){ct.replace("ProfileWallets")}});c=d}else{const d=await Ne.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await Ne.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=Fe.getCaipAddress(n);if(o){const{address:c}=bs.parseCaipAddress(o);i=c}const a=k_.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await Ne.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await Ne.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},Ne=oa(U_e),ng=zn({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),yc={state:ng,subscribe(t){return Vs(ng,()=>t(ng))},subscribeOpen(t){return Ci(ng,"open",t)},set(t){Object.assign(ng,{...ng,...t})}},F_e={async getTokenList(t){var r;const e=await it.fetchSwapTokens({chainId:t});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=q.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(Ne==null?void 0:Ne.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await it.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await it.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=Ne.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await l5.getMyTokensWithBalance(t);return Fe.setTokenBalance(e,q.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:MZ(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Zt=zn({tokenBalances:[],loading:!1}),j_e={state:Zt,subscribe(t){return Vs(Zt,()=>t(Zt))},subscribeKey(t,e){return Ci(Zt,t,e)},setToken(t){t&&(Zt.token=cm(t))},setTokenAmount(t){Zt.sendTokenAmount=t},setReceiverAddress(t){Zt.receiverAddress=t},setReceiverProfileImageUrl(t){Zt.receiverProfileImageUrl=t},setReceiverProfileName(t){Zt.receiverProfileName=t},setNetworkBalanceInUsd(t){Zt.networkBalanceInUSD=t},setLoading(t){Zt.loading=t},async sendToken(){var t;try{switch(kt.setLoading(!0),(t=q.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await kt.sendEvmToken();return;case"solana":await kt.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{kt.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=q.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=Ao(t);if(!kt.state.sendTokenAmount||!kt.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!kt.state.token)throw new Error("A token is required");if((n=kt.state.token)!=null&&n.address){Dt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Qr.ACCOUNT_TYPES.SMART_ACCOUNT,token:kt.state.token.address,amount:kt.state.sendTokenAmount,network:((r=q.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}});const{hash:i}=await kt.sendERC20Token({receiverAddress:kt.state.receiverAddress,tokenAddress:kt.state.token.address,sendTokenAmount:kt.state.sendTokenAmount,decimals:kt.state.token.quantity.decimals});i&&(Zt.hash=i)}else{Dt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Qr.ACCOUNT_TYPES.SMART_ACCOUNT,token:kt.state.token.symbol||"",amount:kt.state.sendTokenAmount,network:((s=q.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}});const{hash:i}=await kt.sendNativeToken({receiverAddress:kt.state.receiverAddress,sendTokenAmount:kt.state.sendTokenAmount,decimals:kt.state.token.quantity.decimals});i&&(Zt.hash=i)}},async fetchTokenBalance(t){var o,a;Zt.loading=!0;const e=q.state.activeChain,n=(o=q.state.activeCaipNetwork)==null?void 0:o.caipNetworkId,r=(a=q.state.activeCaipNetwork)==null?void 0:a.chainNamespace,s=Fe.getCaipAddress(e)??q.state.activeCaipAddress,i=s?Be.getPlainAddress(s):void 0;if(Zt.lastRetry&&!Be.isAllowedRetry(Zt.lastRetry,30*Ft.ONE_SEC_MS))return Zt.loading=!1,[];try{if(i&&n&&r){const c=await l5.getMyTokensWithBalance();return Zt.tokenBalances=c,Zt.lastRetry=void 0,c}}catch(c){Zt.lastRetry=Date.now(),t==null||t(c),yl.showError("Token Balance Unavailable")}finally{Zt.loading=!1}return[]},fetchNetworkBalance(){if(Zt.tokenBalances.length===0)return;const t=F_e.mapBalancesToSwapTokens(Zt.tokenBalances);if(!t)return;const e=t.find(n=>n.address===MZ());e&&(Zt.networkBalanceInUSD=e?o_e.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var o,a,c;ct.pushTransactionStack({});const e=t.receiverAddress,n=Fe.state.address,r=Ne.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals)),s="0x",i=await Ne.sendTransaction({chainNamespace:ie.CHAIN.EVM,to:e,address:n,data:s,value:r??BigInt(0)});return Dt.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Ao("eip155")===Qr.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=kt.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=q.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||"",hash:i||""}}),(c=Ne._getClient())==null||c.updateBalance("eip155"),kt.resetSend(),{hash:i}},async sendERC20Token(t){var n,r;ct.pushTransactionStack({onSuccess(){ct.replace("Account")}});const e=Ne.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Fe.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const s=Be.getPlainAddress(t.tokenAddress);if(!s)throw new Error("SendController:sendERC20Token - tokenAddress is required");const i=await Ne.writeContract({fromAddress:Fe.state.address,tokenAddress:s,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:u_e.getERC20Abi(s),chainNamespace:ie.CHAIN.EVM});return Dt.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Ao("eip155")===Qr.ACCOUNT_TYPES.SMART_ACCOUNT,token:((n=kt.state.token)==null?void 0:n.symbol)||"",amount:t.sendTokenAmount,network:((r=q.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||"",hash:i||""}}),kt.resetSend(),{hash:i}}return{hash:void 0}},async sendSolanaToken(){var n;if(!kt.state.sendTokenAmount||!kt.state.receiverAddress)throw new Error("An amount and receiver address are required");ct.pushTransactionStack({onSuccess(){ct.replace("Account")}});let t;kt.state.token&&kt.state.token.address!==Ft.SOLANA_NATIVE_TOKEN_ADDRESS&&(Be.isCaipAddress(kt.state.token.address)?t=Be.getPlainAddress(kt.state.token.address):t=kt.state.token.address);const e=await Ne.sendTransaction({chainNamespace:"solana",tokenMint:t,to:kt.state.receiverAddress,value:kt.state.sendTokenAmount});e&&(Zt.hash=e),(n=Ne._getClient())==null||n.updateBalance("solana"),kt.resetSend()},resetSend(){Zt.token=void 0,Zt.sendTokenAmount=void 0,Zt.receiverAddress=void 0,Zt.receiverProfileImageUrl=void 0,Zt.receiverProfileName=void 0,Zt.loading=!1,Zt.tokenBalances=[]}},kt=oa(j_e),bk={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},wx={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Oe=zn({chains:i_e(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),DZ={state:Oe,subscribe(t){return Vs(Oe,()=>{t(Oe)})},subscribeKey(t,e){return Ci(Oe,t,e)},subscribeChainProp(t,e,n){let r;return Vs(Oe.chains,()=>{var i;const s=n||Oe.activeChain;if(s){const o=(i=Oe.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=he.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=le.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Oe.noAdapters=!0),Oe.noAdapters||(Oe.activeChain=a==null?void 0:a.namespace,Oe.activeCaipNetwork=i,q.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Oe.activeChain&&yc.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=he.getPreferredAccountTypes()||{},f={...le.state.defaultAccountTypes,...h};q.state.chains.set(u,{namespace:u,networkState:zn({...wx,caipNetwork:d==null?void 0:d[0]}),accountState:zn({...bk,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),q.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Oe.activeChain===t){const r=Array.from(Oe.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&q.setActiveCaipNetwork(s)}}Oe.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Oe.chains.set(t.namespace,{namespace:t.namespace,networkState:{...wx,caipNetwork:r[0]},accountState:bk,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),q.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Oe.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Oe.chains.set(t.chainNamespace,{...e,caipNetworks:r}),q.setRequestedCaipNetworks(r,t.chainNamespace),Se.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Oe.chains.get(t);if(n){const o=((r=Oe.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&q.setActiveCaipNetwork(n.caipNetworks[0]),Oe.chains.set(t,{...n,caipNetworks:a}),q.setRequestedCaipNetworks(a||[],t),a.length===0&&Se.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Oe.chains.get(t);n&&(n.networkState={...n.networkState||wx,...e},Oe.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Oe.chains.get(t);if(r){const s={...r.accountState||bk,...e};Oe.chains.set(t,{...r,accountState:s}),(Oe.chains.size===1||Oe.activeChain===t)&&(e.caipAddress&&(Oe.activeCaipAddress=e.caipAddress),Fe.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Oe.chains.get(t);if(n){const r={...n.networkState||wx,...e};Oe.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){q.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;Oe.activeChain=t;const e=t?Oe.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Oe.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Oe.activeCaipNetwork=n,q.setChainNetworkData(t,{caipNetwork:n}),he.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),yc.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Oe.activeChain!==t.chainNamespace&&q.setIsSwitchingNamespace(!0);const e=Oe.chains.get(t.chainNamespace);Oe.activeChain=t.chainNamespace,Oe.activeCaipNetwork=t,q.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Oe.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Oe.activeCaipAddress=void 0,q.setAccountProp("caipAddress",Oe.activeCaipAddress,t.chainNamespace),e&&Fe.replaceState(e.accountState),kt.resetSend(),yc.set({activeChain:Oe.activeChain,selectedNetworkId:(i=Oe.activeCaipNetwork)==null?void 0:i.caipNetworkId}),he.setActiveCaipNetworkId(t.caipNetworkId),!q.checkIfSupportedNetwork(t.chainNamespace)&&le.state.enableNetworkSwitch&&!le.state.allowUnsupportedChain&&!Ne.state.wcBasic&&q.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Oe.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==q.state.activeChain,n=(s=q.getNetworkData(t))==null?void 0:s.caipNetwork,r=q.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await q.switchActiveNetwork(r)},async switchActiveNetwork(t,{throwOnFailure:e=!1}={}){var o;const n=q.state.activeChain;if(!n)throw new Error("ChainController:switchActiveNetwork - namespace is required");const r=q.state.chains.get(n),s=!((o=r==null?void 0:r.caipNetworks)!=null&&o.some(a=>{var c;return a.id===((c=Oe.activeCaipNetwork)==null?void 0:c.id)})),i=q.getNetworkControllerClient(t.chainNamespace);if(i){try{await i.switchCaipNetwork(t),s&&Ot.close()}catch(a){if(e)throw a;ct.goBack()}Dt.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Oe.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=Oe.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Oe.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Oe.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getNetworkProp(t,e){var r;const n=(r=Oe.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Oe.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return Be.sortRequestedNetworks(n,r).filter(o=>o==null?void 0:o.id)},getAllRequestedCaipNetworks(){const t=[];return Oe.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=q.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){q.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=q.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Se.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Oe.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=q.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=Oe.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:Oe.activeCaipNetwork},getActiveCaipAddress(){return Oe.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Oe.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=q.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());q.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){var s;const n=e||((s=Oe.activeCaipNetwork)==null?void 0:s.caipNetworkId),r=q.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(i=>i.caipNetworkId===n):!0},checkIfSupportedChainId(t){if(!Oe.activeChain)return!0;const e=q.getRequestedCaipNetworks(Oe.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){q.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=TZ.caipNetworkIdToNumber((r=Oe.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Oe.activeChain;if(!e||!t)return!1;const n=q.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){Ot.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Oe.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Ft.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){q.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){var s,i;const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=(i=(s=q.state.chains.get(e))==null?void 0:s.accountState)==null?void 0:i.preferredAccountType,r=le.state.defaultAccountTypes[e];Oe.activeCaipAddress=void 0,q.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:r||n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),Se.removeConnectorId(e)},setIsSwitchingNamespace(t){Oe.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Oe.chains.forEach(s=>{ie.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Oe.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var n;const e=t||Oe.activeChain;if(e)return(n=q.state.chains.get(e))==null?void 0:n.accountState},getNetworkData(t){var n;const e=t||Oe.activeChain;if(e)return(n=q.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=q.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Se.state.filterByNamespace;return(t?[Oe.chains.get(t)]:Array.from(Oe.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?q.getRequestedCaipNetworks(t):q.getAllRequestedCaipNetworks()},getCaipNetworkById(t,e){return DZ.getCaipNetworks(e).find(n=>n.id.toString()===t.toString()||n.caipNetworkId.toString()===t.toString())},setLastConnectedSIWECaipNetwork(t){Oe.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Oe.lastConnectedSIWECaipNetwork}},q=oa(DZ),$_e={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},BZ=Be.getBlockchainApiUrl(),Yi=zn({clientId:null,api:new hA({baseUrl:BZ,clientId:null}),supportedChains:{http:[],ws:[]}}),it={state:Yi,async get(t){const{st:e,sv:n}=it.getSdkProperties(),r=le.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Yi.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=le.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Yi.supportedChains.http.length||await it.getSupportedNetworks()}catch{return!1}return Yi.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await it.get({path:"v1/supported-chains"});return Yi.supportedChains=t,t}catch{return Yi.supportedChains}},async fetchIdentity({address:t}){const e=he.getIdentityFromCacheForAddress(t);if(e)return e;const n=await it.get({path:`/v1/identity/${t}`,params:{sender:q.state.activeCaipAddress?Be.getPlainAddress(q.state.activeCaipAddress):void 0}});return he.updateIdentityCache({address:t,identity:n,timestamp:Date.now()}),n},async fetchTransactions({account:t,cursor:e,signal:n,cache:r,chainId:s}){var c;if(!await it.isNetworkSupported((c=q.state.activeCaipNetwork)==null?void 0:c.caipNetworkId))return{data:[],next:void 0};const o=he.getTransactionsCacheForAddress({address:t,chainId:s});if(o)return o;const a=await it.get({path:`/v1/account/${t}/history`,params:{cursor:e,chainId:s},signal:n,cache:r});return he.updateTransactionsCache({address:t,chainId:s,timestamp:Date.now(),transactions:a}),a},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await it.isNetworkSupported((o=q.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?it.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await it.isNetworkSupported((n=q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?it.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var s;if(!await it.isNetworkSupported((s=q.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))return{fungibles:[]};const n=he.getTokenPriceCacheForAddresses(t);if(n)return n;const r=await Yi.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:le.state.projectId},headers:{"Content-Type":"application/json"}});return he.updateTokenPriceCache({addresses:t,timestamp:Date.now(),tokenPrice:r}),r},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await it.isNetworkSupported((r=q.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?it.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=it.getSdkProperties();if(!await it.isNetworkSupported((s=q.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return it.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await it.isNetworkSupported((o=q.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Yi.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Ft.CONVERT_SLIPPAGE_TOLERANCE},projectId:le.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=it.getSdkProperties();if(!await it.isNetworkSupported((o=q.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return it.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=it.getSdkProperties();if(!await it.isNetworkSupported((l=q.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return yl.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=he.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await it.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return he.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await it.isNetworkSupported((n=q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?it.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await it.isNetworkSupported((n=q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?it.get({path:`/v1/profile/reverse/${t}`,params:{sender:Fe.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await it.isNetworkSupported((n=q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?it.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await it.isNetworkSupported((i=q.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Yi.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await it.isNetworkSupported((a=q.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Yi.api.post({path:"/v1/generators/onrampurl",params:{projectId:le.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await it.isNetworkSupported((e=q.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await it.get({path:"/v1/onramp/options"})}catch{return $_e}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await it.isNetworkSupported((s=q.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Yi.api.post({path:"/v1/onramp/quote",params:{projectId:le.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await it.isNetworkSupported((n=q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?it.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await it.isNetworkSupported((s=q.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Yi.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:le.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Yi.clientId=t,Yi.api=new hA({baseUrl:BZ,clientId:t})}},vk={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return mD(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}};let Ek;async function tj(){if(!Ek){const{createPublicClient:t,http:e,defineChain:n}=await ur(()=>import("./index-e22eeda1.js"),[]);Ek={createPublicClient:t,http:e,defineChain:n}}return Ek}const yO={getBlockchainApiRpcUrl(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()},async getViemChain(t){const{defineChain:e}=await tj(),{chainId:n}=bs.parseCaipNetworkId(t.caipNetworkId);return e({...t,id:Number(n)})},async createViemPublicClient(t){const{createPublicClient:e,http:n}=await tj(),r=le.state.projectId,s=await yO.getViemChain(t);if(!s)throw new Error(`Chain ${t.caipNetworkId} not found in viem/chains`);return e({chain:s,transport:n(yO.getBlockchainApiRpcUrl(t.caipNetworkId,r))})}},l5={async getMyTokensWithBalance(t){const e=Fe.state.address,n=q.state.activeCaipNetwork,r=Se.getConnectorId("eip155")===ie.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=he.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===ie.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await it.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=vk.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await Ne.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await Ne.walletGetAssets({account:t,chainFilter:[s]});if(!vk.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>vk.createBalance(l,e.caipNetworkId));return he.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},async fetchERC20Balance({caipAddress:t,assetAddress:e,caipNetwork:n}){const r=await yO.createViemPublicClient(n),{address:s}=bs.parseCaipAddress(t),[{result:i},{result:o},{result:a},{result:c}]=await r.multicall({contracts:[{address:e,functionName:"name",args:[],abi:XA},{address:e,functionName:"symbol",args:[],abi:XA},{address:e,functionName:"balanceOf",args:[s],abi:XA},{address:e,functionName:"decimals",args:[],abi:XA}]});return{name:i,symbol:o,decimals:c,balance:a&&c?mD(a,c):"0"}}},Lc=zn({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),z_e={state:Lc,replaceState(t){t&&Object.assign(Lc,cm(t))},subscribe(t){return q.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return q.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){q.setAccountProp("status",t,e)},getCaipAddress(t){var e,n;if(t)return(n=(e=q.state.chains.get(t))==null?void 0:e.accountState)==null?void 0:n.caipAddress},setCaipAddress(t,e){const n=t?Be.getPlainAddress(t):void 0;e===q.state.activeChain&&(q.state.activeCaipAddress=t),q.setAccountProp("caipAddress",t,e),q.setAccountProp("address",n,e)},setBalance(t,e,n){q.setAccountProp("balance",t,n),q.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){q.setAccountProp("profileName",t,e)},setProfileImage(t,e){q.setAccountProp("profileImage",t,e)},setUser(t,e){q.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){q.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){q.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){q.setAccountProp("currentTab",t,q.state.activeChain)},setTokenBalance(t,e){t&&q.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){q.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){var s,i;if(!n)return;const r=((i=(s=q.state.chains.get(n))==null?void 0:s.accountState)==null?void 0:i.addressLabels)||new Map;r.set(t,e),q.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){var r,s;if(!e)return;const n=((s=(r=q.state.chains.get(e))==null?void 0:r.accountState)==null?void 0:s.addressLabels)||new Map;n.delete(t),q.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){q.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){q.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&q.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){q.setAccountProp("socialWindow",t?cm(t):void 0,e)},setFarcasterUrl(t,e){q.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Lc.balanceLoading=!0;const e=(i=q.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=q.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=q.state.activeCaipAddress,s=r?Be.getPlainAddress(r):void 0;if(Lc.lastRetry&&!Be.isAllowedRetry(Lc.lastRetry,30*Ft.ONE_SEC_MS))return Lc.balanceLoading=!1,[];try{if(s&&e&&n){const a=await l5.getMyTokensWithBalance();return Fe.setTokenBalance(a,n),Lc.lastRetry=void 0,Lc.balanceLoading=!1,a}}catch(a){Lc.lastRetry=Date.now(),t==null||t(a),yl.showError("Token Balance Unavailable")}finally{Lc.balanceLoading=!1}return[]},resetAccount(t){q.resetAccount(t)}},Fe=oa(z_e),W_e={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=q.state.activeCaipNetwork,r=ct.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Fe.getCaipAddress(q.state.activeChain),o=t.chainNamespace!==q.state.activeChain,a=Fe.getCaipAddress(t.chainNamespace),l=Se.getConnectorId(q.state.activeChain)===ie.CONNECTOR_ID.AUTH,u=ie.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?ct.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?ct.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):ct.push("SwitchNetwork",{...r,network:t})}},Zi=zn({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),H_e={state:Zi,subscribe(t){return Vs(Zi,()=>t(Zi))},subscribeKey(t,e){return Ci(Zi,t,e)},async open(t){var o,a;const e=t==null?void 0:t.namespace,n=q.state.activeChain,r=e&&e!==n,s=(o=q.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress,i=q.state.noAdapters;if(Ne.state.wcBasic?et.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await et.prefetch(),Se.setFilterByNamespace(t==null?void 0:t.namespace),Ot.setLoading(!0,e),e&&r){const c=((a=q.getNetworkData(e))==null?void 0:a.caipNetwork)||q.getRequestedCaipNetworks(e)[0];c&&(i?(await q.switchActiveNetwork(c),ct.push("ConnectingWalletConnectBasic")):W_e.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0}))}else le.state.manualWCControl||i&&!s?Be.isMobile()?ct.reset("AllWallets"):ct.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?ct.reset(t.view,t.data):s?ct.reset("Account"):ct.reset("Connect");Zi.open=!0,yc.set({open:!0}),Dt.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=le.state.enableEmbedded,e=!!q.state.activeCaipAddress;Zi.open&&Dt.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Zi.open=!1,ct.reset("Connect"),Ot.clearLoading(),t?e?ct.replace("Account"):ct.push("Connect"):yc.set({open:!1}),Ne.resetUri()},setLoading(t,e){e&&Zi.loadingNamespaceMap.set(e,t),Zi.loading=t,yc.set({loading:t})},clearLoading(){Zi.loadingNamespaceMap.clear(),Zi.loading=!1,yc.set({loading:!1})},shake(){Zi.shake||(Zi.shake=!0,setTimeout(()=>{Zi.shake=!1},500))}},Ot=oa(H_e),P_={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0,sui:void 0,stacks:void 0},Qi=zn({providers:{...P_},providerIds:{...P_}}),Wt={state:Qi,subscribeKey(t,e){return Ci(Qi,t,e)},subscribe(t){return Vs(Qi,()=>{t(Qi)})},subscribeProviders(t){return Vs(Qi.providers,()=>t(Qi.providers))},setProvider(t,e){t&&e&&(Qi.providers[t]=cm(e))},getProvider(t){if(t)return Qi.providers[t]},setProviderId(t,e){e&&(Qi.providerIds[t]=e)},getProviderId(t){if(t)return Qi.providerIds[t]},reset(){Qi.providers={...P_},Qi.providerIds={...P_}},resetChain(t){Qi.providers[t]=void 0,Qi.providerIds[t]=void 0}},h1={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},wO={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},V_e={providers:PZ,selectedProvider:null,error:null,purchaseCurrency:h1,paymentCurrency:wO,purchaseCurrencies:[h1],paymentCurrencies:[],quotesLoading:!1},Kt=zn(V_e),K_e={state:Kt,subscribe(t){return Vs(Kt,()=>t(Kt))},subscribeKey(t,e){return Ci(Kt,t,e)},setSelectedProvider(t){var e,n;if(t&&t.name==="meld"){const r=q.state.activeChain,s=r===ie.CHAIN.SOLANA?"SOL":"USDC",i=r?((n=(e=q.state.chains.get(r))==null?void 0:e.accountState)==null?void 0:n.address)??"":"",o=new URL(t.url);o.searchParams.append("publicKey",d_e),o.searchParams.append("destinationCurrencyCode",s),o.searchParams.append("walletAddress",i),o.searchParams.append("externalCustomerId",le.state.projectId),Kt.selectedProvider={...t,url:o.toString()}}else Kt.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=PZ.filter(r=>e.includes(r.name));Kt.providers=n}else Kt.providers=[]},setPurchaseCurrency(t){Kt.purchaseCurrency=t},setPaymentCurrency(t){Kt.paymentCurrency=t},setPurchaseAmount(t){bO.state.purchaseAmount=t},setPaymentAmount(t){bO.state.paymentAmount=t},async getAvailableCurrencies(){const t=await it.getOnrampOptions();Kt.purchaseCurrencies=t.purchaseCurrencies,Kt.paymentCurrencies=t.paymentCurrencies,Kt.paymentCurrency=t.paymentCurrencies[0]||wO,Kt.purchaseCurrency=t.purchaseCurrencies[0]||h1,await et.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await et.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;Kt.quotesLoading=!0;try{const n=await it.getOnrampQuote({purchaseCurrency:Kt.purchaseCurrency,paymentCurrency:Kt.paymentCurrency,amount:((t=Kt.paymentAmount)==null?void 0:t.toString())||"0",network:(e=Kt.purchaseCurrency)==null?void 0:e.symbol});return Kt.quotesLoading=!1,Kt.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return Kt.error=n.message,Kt.quotesLoading=!1,null}finally{Kt.quotesLoading=!1}},resetState(){Kt.selectedProvider=null,Kt.error=null,Kt.purchaseCurrency=h1,Kt.paymentCurrency=wO,Kt.purchaseCurrencies=[h1],Kt.paymentCurrencies=[],Kt.paymentAmount=void 0,Kt.purchaseAmount=void 0,Kt.quotesLoading=!1}},bO=oa(K_e),Va=zn({message:"",variant:"info",open:!1}),q_e={state:Va,subscribeKey(t,e){return Ci(Va,t,e)},open(t,e){const{debug:n}=le.state,{code:r,displayMessage:s,debugMessage:i}=t;s&&n&&(Va.message=s,Va.variant=e,Va.open=!0),i&&console.error(typeof i=="function"?i():i,r?{code:r}:void 0)},warn(t,e,n){Va.open=!0,Va.message=t,Va.variant="warning",e&&console.warn(e,n)},close(){Va.open=!1,Va.message="",Va.variant="info"}},gi=oa(q_e),nj=2147483648,G_e={convertEVMChainIdToCoinType(t){if(t>=nj)throw new Error("Invalid chainId");return(nj|t)>>>0}},ua=zn({suggestions:[],loading:!1}),Y_e={state:ua,subscribe(t){return Vs(ua,()=>t(ua))},subscribeKey(t,e){return Ci(ua,t,e)},async resolveName(t){var e,n;try{return await it.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await it.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{ua.loading=!0,ua.suggestions=[];const e=await it.getEnsNameSuggestions(t);return ua.suggestions=e.suggestions||[],ua.suggestions}catch(e){const n=f1.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{ua.loading=!1}},async getNamesForAddress(t){try{if(!q.state.activeCaipNetwork)return[];const n=he.getEnsFromCacheForAddress(t);if(n)return n;const r=await it.reverseLookupEnsName({address:t});return he.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=f1.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=q.state.activeCaipNetwork,n=Fe.state.address,r=Se.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");ua.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});ct.pushTransactionStack({onCancel(){ct.replace("RegisterAccountName")}});const i=await Ne.signMessage(s);ua.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=G_e.convertEVMChainIdToCoinType(Number(o));await it.registerEnsName({coinType:a,address:n,signature:i,message:s}),Fe.setProfileName(t,e.chainNamespace),he.updateEnsCache({address:n,ens:[{name:t,registered_at:new Date().toISOString(),updated_at:void 0,addresses:{},attributes:[]}],timestamp:Date.now()}),ct.replace("RegisterAccountNameSuccess")}catch(s){const i=f1.parseEnsApiError(s,`Error registering name ${t}`);throw ct.replace("RegisterAccountName"),new Error(i)}finally{ua.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},f1=oa(Y_e),Z_e={eip155:{native:{assetNamespace:"slip44",assetReference:"60"},defaultTokenNamespace:"erc20"},solana:{native:{assetNamespace:"slip44",assetReference:"501"},defaultTokenNamespace:"token"}};class Q_e extends Error{}function J_e(){const{sdkType:t,sdkVersion:e,projectId:n}=le.getSnapshot(),r=new URL("https://rpc.walletconnect.org/v1/json-rpc");return r.searchParams.set("projectId",n),r.searchParams.set("st",t),r.searchParams.set("sv",e),r.searchParams.set("source","fund-wallet"),r.toString()}async function u5(t,e){const n=J_e(),{projectId:r}=le.getSnapshot(),s={jsonrpc:"2.0",id:1,method:t,params:{...e||{},projectId:r}},o=await(await fetch(n,{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}})).json();if(o.error)throw new Q_e(o.error.message);return o}async function PUe(t){return(await u5("reown_getExchanges",t)).result}async function RUe(t){return(await u5("reown_getExchangePayUrl",t)).result}async function OUe(t){return(await u5("reown_getExchangeBuyStatus",t)).result}function MUe(t,e){const{chainNamespace:n,chainId:r}=bs.parseCaipNetworkId(t),s=Z_e[n];if(!s)throw new Error(`Unsupported chain namespace for CAIP-19 formatting: ${n}`);let i=s.native.assetNamespace,o=s.native.assetReference;return e!=="native"&&(i=s.defaultTokenNamespace,o=e),`${`${n}:${r}`}/${i}:${o}`}const X_e={network:"eip155:1",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},e2e={network:"eip155:8453",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},LZ={network:"eip155:8453",asset:"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},t2e={network:"eip155:84532",asset:"0x036CbD53842c5426634e7929541eC2318f3dCF7e",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},n2e={network:"eip155:84532",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},r2e={network:"eip155:1",asset:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},s2e={network:"eip155:42161",asset:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},i2e={network:"eip155:137",asset:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},o2e={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},a2e={network:"eip155:1",asset:"0xdAC17F958D2ee523a2206206994597C13D831ec7",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},c2e={network:"eip155:10",asset:"0x94b008aA00579c1307B0EF2c499aD98a8ce58e58",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},l2e={network:"eip155:42161",asset:"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},u2e={network:"eip155:137",asset:"0xc2132d05d31c914a87c6611c10748aeb04b58e8f",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},d2e={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},h2e={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"native",metadata:{name:"Solana",symbol:"SOL",decimals:9}},f2e={ethereumETH:X_e,baseETH:e2e,baseUSDC:LZ,baseSepoliaETH:n2e,ethereumUSDC:r2e,arbitrumUSDC:s2e,polygonUSDC:i2e,solanaUSDC:o2e,ethereumUSDT:a2e,optimismUSDT:c2e,arbitrumUSDT:l2e,polygonUSDT:u2e,solanaUSDT:d2e,solanaSOL:h2e};function DUe(t){return Object.values(f2e).filter(e=>e.network===t)}function p2e(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function ds(t,...e){try{return p2e(t(...e))}catch(n){return Promise.reject(n)}}function m2e(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function g2e(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function JS(t){if(m2e(t))return String(t);if(g2e(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return JS(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const vO="base64:";function y2e(t){return typeof t=="string"?t:vO+v2e(t)}function w2e(t){return typeof t!="string"||!t.startsWith(vO)?t:b2e(t.slice(vO.length))}function b2e(t){return globalThis.Buffer?Ge.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function v2e(t){return globalThis.Buffer?Ge.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Xi(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function E2e(...t){return Xi(t.join(":"))}function bx(t){return t=Xi(t),t?t+":":""}function A2e(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function x2e(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const S2e="memory",C2e=()=>{const t=new Map;return{name:S2e,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function _2e(t={}){const e={mounts:{"":t.driver||C2e()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Xi(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await rj(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let m=h.get(p.base);return m||(m={driver:p.driver,base:p.base,items:[]},h.set(p.base,m)),m};for(const p of l){const m=typeof p=="string",E=Xi(m?p:p.key),b=m?void 0:p.value,x=m||!p.options?u:{...u,...p.options},w=n(E);f(w).items.push({key:E,value:b,relativeKey:w.relativeKey,options:x})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Xi(l);const{relativeKey:d,driver:h}=n(l);return ds(h.hasItem,d,u)},getItem(l,u={}){l=Xi(l);const{relativeKey:d,driver:h}=n(l);return ds(h.getItem,d,u).then(f=>GA(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?ds(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:E2e(d.base,f.key),value:GA(f.value)}))):Promise.all(d.items.map(h=>ds(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:GA(f)})))))},getItemRaw(l,u={}){l=Xi(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?ds(h.getItemRaw,d,u):ds(h.getItem,d,u).then(f=>w2e(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Xi(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await ds(f.setItem,h,JS(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return ds(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:JS(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>ds(d.driver.setItem,h.relativeKey,JS(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Xi(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await ds(f.setItemRaw,h,u,d);else if(f.setItem)await ds(f.setItem,h,y2e(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Xi(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await ds(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await ds(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Xi(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await ds(h.getMeta,d,u)),!u.nativeOnly){const p=await ds(h.getItem,d+"$",u).then(m=>GA(m));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var E;l=bx(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const b of d){(E=b.driver.flags)!=null&&E.maxDepth||(p=!1);const x=await ds(b.driver.getKeys,b.relativeBase,u);for(const w of x){const N=b.mountpoint+Xi(w);h.some(_=>N.startsWith(_))||f.push(N)}h=[b.mountpoint,...h.filter(w=>!w.startsWith(b.mountpoint))]}const m=u.maxDepth!==void 0&&!p;return f.filter(b=>(!m||A2e(b,u.maxDepth))&&x2e(b,l))},async clear(l,u={}){l=bx(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return ds(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>sj(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=bx(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(rj(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=bx(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await sj(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Xi(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Xi(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function rj(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function sj(t){typeof t.dispose=="function"&&await ds(t.dispose)}const I2e="idb-keyval";var N2e=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=qV(t.dbName,t.storeName)),{name:I2e,options:t,async hasItem(s){return!(typeof await vB(n(s),r)>"u")},async getItem(s){return await vB(n(s),r)??null},setItem(s,i){return Sde(n(s),i,r)},removeItem(s){return Cde(n(s),r)},getKeys(){return Nde(r)},clear(){return _de(r)}}};const T2e="WALLET_CONNECT_V2_INDEXED_DB",k2e="keyvaluestorage";class P2e{constructor(){this.indexedDb=_2e({driver:N2e({dbName:T2e,storeName:k2e})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Yu(n))}async removeItem(e){await this.indexedDb.removeItem(e)}}var Ak=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},XS={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Ak<"u"&&Ak.localStorage?XS.exports=Ak.localStorage:typeof window<"u"&&window.localStorage?XS.exports=window.localStorage:XS.exports=new e})();function R2e(t){var e;return[t[0],im((e=t[1])!=null?e:"")]}let O2e=class{constructor(){this.localStorage=XS.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(R2e)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return im(n)}async setItem(e,n){this.localStorage.setItem(e,Yu(n))}async removeItem(e){this.localStorage.removeItem(e)}};const M2e="wc_storage_version",ij=1,D2e=async(t,e,n)=>{const r=M2e,s=await e.getItem(r);if(s&&s>=ij){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,ij),n(e),B2e(t,o)},B2e=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let L2e=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new O2e;this.storage=e;try{const n=new P2e;D2e(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var U2e=Object.defineProperty,F2e=(t,e,n)=>e in t?U2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oj=(t,e,n)=>F2e(t,typeof e!="symbol"?e+"":e,n);let j2e=class extends Nm{constructor(e){super(),this.opts=e,oj(this,"protocol","wc"),oj(this,"version",2)}};var $2e=Object.defineProperty,z2e=(t,e,n)=>e in t?$2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,W2e=(t,e,n)=>z2e(t,typeof e!="symbol"?e+"":e,n);let H2e=class extends Nm{constructor(e,n){super(),this.core=e,this.logger=n,W2e(this,"records",new Map)}},V2e=class{constructor(e,n){this.logger=e,this.core=n}},K2e=class extends Nm{constructor(e,n){super(),this.relayer=e,this.logger=n}},q2e=class extends Nm{constructor(e){super()}},G2e=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},Y2e=class extends Nm{constructor(e,n){super(),this.relayer=e,this.logger=n}},Z2e=class extends Nm{constructor(e,n){super(),this.core=e,this.logger=n}},Q2e=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},J2e=class{constructor(e,n){this.projectId=e,this.logger=n}},X2e=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var eIe=Object.defineProperty,tIe=(t,e,n)=>e in t?eIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,aj=(t,e,n)=>tIe(t,typeof e!="symbol"?e+"":e,n);let nIe=class{constructor(e){this.opts=e,aj(this,"protocol","wc"),aj(this,"version",2)}},rIe=class{constructor(e){this.client=e}};function Kv(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function EO(t){return Kv(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const UZ="2.31.0";let sb={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${UZ}`};class pm extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof pm?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=(()=>n.cause instanceof pm&&n.cause.docsPath||n.docsPath)(),i=(a=sb.getDocsUrl)==null?void 0:a.call(sb,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...sb.version?[`Version: ${sb.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=UZ}walk(e){return FZ(this,e)}}function FZ(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?FZ(t.cause,e):e?null:t}class jZ extends pm{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function Nw(t,{dir:e,size:n=32}={}){return typeof t=="string"?sIe(t,{dir:e,size:n}):iIe(t,{dir:e,size:n})}function sIe(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new jZ({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function iIe(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new jZ({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class oIe extends pm{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class aIe extends pm{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Tw(t,{size:e}){if(EO(t)>e)throw new aIe({givenSize:EO(t),maxSize:e})}function AO(t,e={}){const{signed:n}=e;e.size&&Tw(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function cIe(t,e={}){return Number(AO(t,e))}const lIe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function xO(t,e={}){return typeof t=="number"||typeof t=="bigint"?zZ(t,e):typeof t=="string"?hIe(t,e):typeof t=="boolean"?uIe(t,e):$Z(t,e)}function uIe(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Tw(n,{size:e.size}),Nw(n,{size:e.size})):n}function $Z(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=lIe[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Tw(r,{size:e.size}),Nw(r,{dir:"right",size:e.size})):r}function zZ(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new oIe({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Nw(a,{size:r}):a}const dIe=new TextEncoder;function hIe(t,e={}){const n=dIe.encode(t);return $Z(n,e)}const fIe=new TextEncoder;function pIe(t,e={}){return typeof t=="number"||typeof t=="bigint"?gIe(t,e):typeof t=="boolean"?mIe(t,e):Kv(t)?WZ(t,e):HZ(t,e)}function mIe(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Tw(n,{size:e.size}),Nw(n,{size:e.size})):n}const ql={zero:48,nine:57,A:65,F:70,a:97,f:102};function cj(t){if(t>=ql.zero&&t<=ql.nine)return t-ql.zero;if(t>=ql.A&&t<=ql.F)return t-(ql.A-10);if(t>=ql.a&&t<=ql.f)return t-(ql.a-10)}function WZ(t,e={}){let n=t;e.size&&(Tw(n,{size:e.size}),n=Nw(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=cj(r.charCodeAt(a++)),l=cj(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new pm(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function gIe(t,e){const n=zZ(t,e);return WZ(n)}function HZ(t,e={}){const n=fIe.encode(t);return typeof e.size=="number"?(Tw(n,{size:e.size}),Nw(n,{dir:"right",size:e.size})):n}function VZ(t,e){const n=e||"hex",r=jC(Kv(t,{strict:!1})?pIe(t):t);return n==="bytes"?r:xO(r)}class yIe extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const xk=new yIe(8192);function wIe(t,e){if(xk.has(`${t}.${e}`))return xk.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=VZ(HZ(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return xk.set(`${t}.${e}`,i),i}function bIe(t){const e=VZ(`0x${t.substring(4)}`).substring(26);return wIe(`0x${e}`)}async function vIe({hash:t,signature:e}){const n=Kv(t)?t:xO(t),{secp256k1:r}=await ur(()=>import("./secp256k1-84bdb858.js"),[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=lj(f);return new r.Signature(AO(l),AO(u)).addRecoveryBit(p)}const o=Kv(e)?e:xO(e);if(EO(o)!==65)throw new Error("invalid signature length");const a=cIe(`0x${o.slice(130)}`),c=lj(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function lj(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function EIe({hash:t,signature:e}){return bIe(await vIe({hash:t,signature:e}))}function AIe(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if(s&4294967168)if(!(s&4294965248))n+=2;else{if(s>=55296&&s<=56319&&r<e){const i=t.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}s&4294901760?n+=4:n+=3}else{n++;continue}}return n}function xIe(t,e,n){const r=t.length;let s=n,i=0;for(;i<r;){let o=t.charCodeAt(i++);if(o&4294967168)if(!(o&4294965248))e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128):(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128)}else{e[s++]=o;continue}e[s++]=o&63|128}}const SIe=new TextEncoder,CIe=50;function _Ie(t,e,n){SIe.encodeInto(t,e.subarray(n))}function IIe(t,e,n){t.length>CIe?_Ie(t,e,n):xIe(t,e,n)}const NIe=4096;function KZ(t,e,n){let r=e;const s=r+n,i=[];let o="";for(;r<s;){const a=t[r++];if(!(a&128))i.push(a);else if((a&224)===192){const c=t[r++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[r++]&63,l=t[r++]&63;i.push((a&31)<<12|c<<6|l)}else if((a&248)===240){const c=t[r++]&63,l=t[r++]&63,u=t[r++]&63;let d=(a&7)<<18|c<<12|l<<6|u;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=NIe&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const TIe=new TextDecoder,kIe=200;function PIe(t,e,n){const r=t.subarray(e,e+n);return TIe.decode(r)}function RIe(t,e,n){return n>kIe?PIe(t,e,n):KZ(t,e,n)}class vx{constructor(e,n){this.type=e,this.data=n}}class $o extends Error{constructor(e){super(e);const n=Object.create($o.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:$o.name})}}const ib=4294967295;function OIe(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function qZ(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function GZ(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function MIe(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const DIe=-1,BIe=4294967296-1,LIe=17179869184-1;function UIe({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=LIe)if(e===0&&t<=BIe){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),qZ(r,4,t),n}}function FIe(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function jIe(t){if(t instanceof Date){const e=FIe(t);return UIe(e)}else return null}function $Ie(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=GZ(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new $o(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function zIe(t){const e=$Ie(t);return new Date(e.sec*1e3+e.nsec/1e6)}const WIe={type:DIe,encode:jIe,decode:zIe};class R_{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(WIe)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=-1-r;return new vx(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=r;return new vx(o,i)}}}return e instanceof vx?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new vx(n,e)}}R_.defaultCodec=new R_;function HIe(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function SO(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):HIe(t)?new Uint8Array(t):Uint8Array.from(t)}const VIe=100,KIe=2048;class d5{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??R_.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??VIe,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??KIe,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new d5({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=AIe(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),IIe(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=SO(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),OIe(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),qZ(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}}function qIe(t,e){return new d5(e).encodeSharedRef(t)}function Sk(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const GIe=16,YIe=16;class ZIe{constructor(e=GIe,n=YIe){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<r;a++)if(o[a]!==e[n+a])continue e;return i.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=KZ(e,n,r),o=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(o,i),i}}const CO="array",p1="map_key",YZ="map_value",QIe=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new $o("The type of key must be string or number but "+typeof t)};class JIe{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=CO,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=p1,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===CO){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===p1||e.type===YZ){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const ob=-1,h5=new DataView(new ArrayBuffer(0)),XIe=new Uint8Array(h5.buffer);try{h5.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const uj=new RangeError("Insufficient data"),eNe=new ZIe;class f5{constructor(e){this.totalPos=0,this.pos=0,this.view=h5,this.bytes=XIe,this.headByte=ob,this.stack=new JIe,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??R_.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??ib,this.maxBinLength=(e==null?void 0:e.maxBinLength)??ib,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??ib,this.maxMapLength=(e==null?void 0:e.maxMapLength)??ib,this.maxExtLength=(e==null?void 0:e.maxExtLength)??ib,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:eNe,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??QIe}clone(){return new f5({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=ob,this.stack.reset()}setBuffer(e){const n=SO(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===ob&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=SO(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const a of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${Sk(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new $o(`Unrecognized type byte: ${Sk(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===CO)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===p1){if(n==="__proto__")throw new $o("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=YZ;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=p1;continue e}}return n}}readHeadByte(){return this.headByte===ob&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=ob}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new $o(`Unrecognized array type byte: ${Sk(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new $o(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new $o(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){var i;if(e>this.maxStrLength)throw new $o(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw uj;const r=this.pos+n;let s;return this.stateIsMapKey()&&((i=this.keyDecoder)!=null&&i.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,r,e):s=RIe(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===p1:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new $o(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw uj;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new $o(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=MIe(this.view,this.pos);return this.pos+=8,e}readI64(){const e=GZ(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}}function tNe(t,e){return new f5(e).decode(t)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function nNe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ZZ(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function O_(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function p5(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function _O(t){if(!Array.isArray(t))throw new Error("array expected")}function M_(t,e){if(!ZZ(!0,e))throw new Error(`${t}: array of strings expected`)}function rNe(t,e){if(!ZZ(!1,e))throw new Error(`${t}: array of numbers expected`)}function sNe(...t){const e=i=>i,n=(i,o)=>a=>i(o(a)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function iNe(t){const e=typeof t=="string"?t.split(""):t,n=e.length;M_("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(_O(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(_O(s),s.map(i=>{O_("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function oNe(t=""){return O_("join",t),{encode:e=>(M_("join.decode",e),e.join(t)),decode:e=>(O_("join.decode",e),e.split(t))}}function aNe(t,e="="){return p5(t),O_("padding",e),{encode(n){for(M_("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){M_("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const QZ=(t,e)=>e===0?t:QZ(e,t%e),D_=(t,e)=>t+(e-QZ(t,e)),Ck=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function dj(t,e,n,r){if(_O(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(D_(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${D_(e,n)}`);let s=0,i=0;const o=Ck[e],a=Ck[n]-1,c=[];for(const l of t){if(p5(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(s=s<<e|l,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)c.push((s>>i-n&a)>>>0);const u=Ck[i];if(u===void 0)throw new Error("invalid carry");s&=u-1}if(s=s<<n-i&a,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&c.push(s>>>0),c}function cNe(t,e=!1){if(p5(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(D_(8,t)>32||D_(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!nNe(n))throw new Error("radix2.encode input should be Uint8Array");return dj(Array.from(n),8,t,!e)},decode:n=>(rNe("radix2.decode",n),Uint8Array.from(dj(n,t,8,e)))}}const lNe=sNe(cNe(5),iNe("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),aNe(5),oNe(""));function m5(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function JZ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?m5(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function m1(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=JZ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return m5(n)}function XZ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const hj=XZ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),_k=XZ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=JZ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),eQ={utf8:hj,"utf-8":hj,hex:YB.base16,latin1:_k,ascii:_k,binary:_k,...YB};function Oa(t,e="utf8"){const n=eQ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?m5(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function xo(t,e="utf8"){const n=eQ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const uNe="Input must be an string, Buffer or Uint8Array";function dNe(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(uNe);return e}function hNe(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function Ex(t){return(4294967296+t).toString(16).substring(1)}function fNe(t,e,n){let r=`
`+t+" = ";for(let s=0;s<e.length;s+=2){if(n===32)r+=Ex(e[s]).toUpperCase(),r+=" ",r+=Ex(e[s+1]).toUpperCase();else if(n===64)r+=Ex(e[s+1]).toUpperCase(),r+=Ex(e[s]).toUpperCase();else throw new Error("Invalid size "+n);s%6===4?r+=`
`+new Array(t.length+4).join(" "):s<e.length-2&&(r+=" ")}console.log(r)}function pNe(t,e,n){let r=new Date().getTime();const s=new Uint8Array(e);for(let o=0;o<e;o++)s[o]=o%256;const i=new Date().getTime();console.log("Generated random input in "+(i-r)+"ms"),r=i;for(let o=0;o<n;o++){const a=t(s),c=new Date().getTime(),l=c-r;r=c,console.log("Hashed in "+l+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(l/1e3)*100)/100+" MB PER SECOND")}}var tQ={normalizeInput:dNe,toHex:hNe,debugPrint:fNe,testSpeed:pNe};const eC=tQ;function Ax(t,e,n){const r=t[e]+t[n];let s=t[e+1]+t[n+1];r>=4294967296&&s++,t[e]=r,t[e+1]=s}function fj(t,e,n,r){let s=t[e]+n;n<0&&(s+=4294967296);let i=t[e+1]+r;s>=4294967296&&i++,t[e]=s,t[e+1]=i}function nQ(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function bd(t,e,n,r,s,i){const o=jb[s],a=jb[s+1],c=jb[i],l=jb[i+1];Ax(wt,t,e),fj(wt,t,o,a);let u=wt[r]^wt[t],d=wt[r+1]^wt[t+1];wt[r]=d,wt[r+1]=u,Ax(wt,n,r),u=wt[e]^wt[n],d=wt[e+1]^wt[n+1],wt[e]=u>>>24^d<<8,wt[e+1]=d>>>24^u<<8,Ax(wt,t,e),fj(wt,t,c,l),u=wt[r]^wt[t],d=wt[r+1]^wt[t+1],wt[r]=u>>>16^d<<16,wt[r+1]=d>>>16^u<<16,Ax(wt,n,r),u=wt[e]^wt[n],d=wt[e+1]^wt[n+1],wt[e]=d>>>31^u<<1,wt[e+1]=u>>>31^d<<1}const rQ=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),mNe=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],ri=new Uint8Array(mNe.map(function(t){return t*2})),wt=new Uint32Array(32),jb=new Uint32Array(32);function sQ(t,e){let n=0;for(n=0;n<16;n++)wt[n]=t.h[n],wt[n+16]=rQ[n];for(wt[24]=wt[24]^t.t,wt[25]=wt[25]^t.t/4294967296,e&&(wt[28]=~wt[28],wt[29]=~wt[29]),n=0;n<32;n++)jb[n]=nQ(t.b,4*n);for(n=0;n<12;n++)bd(0,8,16,24,ri[n*16+0],ri[n*16+1]),bd(2,10,18,26,ri[n*16+2],ri[n*16+3]),bd(4,12,20,28,ri[n*16+4],ri[n*16+5]),bd(6,14,22,30,ri[n*16+6],ri[n*16+7]),bd(0,10,20,30,ri[n*16+8],ri[n*16+9]),bd(2,12,22,24,ri[n*16+10],ri[n*16+11]),bd(4,14,16,26,ri[n*16+12],ri[n*16+13]),bd(6,8,18,28,ri[n*16+14],ri[n*16+15]);for(n=0;n<16;n++)t.h[n]=t.h[n]^wt[n]^wt[n+16]}const vd=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function iQ(t,e,n,r){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const s={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};vd.fill(0),vd[0]=t,e&&(vd[1]=e.length),vd[2]=1,vd[3]=1,n&&vd.set(n,32),r&&vd.set(r,48);for(let i=0;i<16;i++)s.h[i]=rQ[i]^nQ(vd,i*4);return e&&(g5(s,e),s.c=128),s}function g5(t,e){for(let n=0;n<e.length;n++)t.c===128&&(t.t+=t.c,sQ(t,!1),t.c=0),t.b[t.c++]=e[n]}function oQ(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;sQ(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3);return e}function aQ(t,e,n,r,s){n=n||64,t=eC.normalizeInput(t),r&&(r=eC.normalizeInput(r)),s&&(s=eC.normalizeInput(s));const i=iQ(n,e,r,s);return g5(i,t),oQ(i)}function gNe(t,e,n,r,s){const i=aQ(t,e,n,r,s);return eC.toHex(i)}var yNe={blake2b:aQ,blake2bHex:gNe,blake2bInit:iQ,blake2bUpdate:g5,blake2bFinal:oQ};const cQ=tQ;function wNe(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Ed(t,e,n,r,s,i){Xt[t]=Xt[t]+Xt[e]+s,Xt[r]=xx(Xt[r]^Xt[t],16),Xt[n]=Xt[n]+Xt[r],Xt[e]=xx(Xt[e]^Xt[n],12),Xt[t]=Xt[t]+Xt[e]+i,Xt[r]=xx(Xt[r]^Xt[t],8),Xt[n]=Xt[n]+Xt[r],Xt[e]=xx(Xt[e]^Xt[n],7)}function xx(t,e){return t>>>e^t<<32-e}const lQ=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),si=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),Xt=new Uint32Array(16),Ss=new Uint32Array(16);function uQ(t,e){let n=0;for(n=0;n<8;n++)Xt[n]=t.h[n],Xt[n+8]=lQ[n];for(Xt[12]^=t.t,Xt[13]^=t.t/4294967296,e&&(Xt[14]=~Xt[14]),n=0;n<16;n++)Ss[n]=wNe(t.b,4*n);for(n=0;n<10;n++)Ed(0,4,8,12,Ss[si[n*16+0]],Ss[si[n*16+1]]),Ed(1,5,9,13,Ss[si[n*16+2]],Ss[si[n*16+3]]),Ed(2,6,10,14,Ss[si[n*16+4]],Ss[si[n*16+5]]),Ed(3,7,11,15,Ss[si[n*16+6]],Ss[si[n*16+7]]),Ed(0,5,10,15,Ss[si[n*16+8]],Ss[si[n*16+9]]),Ed(1,6,11,12,Ss[si[n*16+10]],Ss[si[n*16+11]]),Ed(2,7,8,13,Ss[si[n*16+12]],Ss[si[n*16+13]]),Ed(3,4,9,14,Ss[si[n*16+14]],Ss[si[n*16+15]]);for(n=0;n<8;n++)t.h[n]^=Xt[n]^Xt[n+8]}function dQ(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=e?e.length:0;if(e&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(lQ),b:new Uint8Array(64),c:0,t:0,outlen:t};return r.h[0]^=16842752^n<<8^t,n>0&&(y5(r,e),r.c=64),r}function y5(t,e){for(let n=0;n<e.length;n++)t.c===64&&(t.t+=t.c,uQ(t,!1),t.c=0),t.b[t.c++]=e[n]}function hQ(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;uQ(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3)&255;return e}function fQ(t,e,n){n=n||32,t=cQ.normalizeInput(t);const r=dQ(n,e);return y5(r,t),hQ(r)}function bNe(t,e,n){const r=fQ(t,e,n);return cQ.toHex(r)}var vNe={blake2s:fQ,blake2sHex:bNe,blake2sInit:dQ,blake2sUpdate:y5,blake2sFinal:hQ};const ab=yNe,cb=vNe;var ENe={blake2b:ab.blake2b,blake2bHex:ab.blake2bHex,blake2bInit:ab.blake2bInit,blake2bUpdate:ab.blake2bUpdate,blake2bFinal:ab.blake2bFinal,blake2s:cb.blake2s,blake2sHex:cb.blake2sHex,blake2sInit:cb.blake2sInit,blake2sUpdate:cb.blake2sUpdate,blake2sFinal:cb.blake2sFinal};const ANe=":";function Yp(t){const[e,n]=t.split(ANe);return{namespace:e,reference:n}}function pQ(t,e){return t.includes(":")?[t]:e.chains||[]}var xNe=Object.defineProperty,SNe=Object.defineProperties,CNe=Object.getOwnPropertyDescriptors,pj=Object.getOwnPropertySymbols,_Ne=Object.prototype.hasOwnProperty,INe=Object.prototype.propertyIsEnumerable,IO=(t,e,n)=>e in t?xNe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mj=(t,e)=>{for(var n in e||(e={}))_Ne.call(e,n)&&IO(t,n,e[n]);if(pj)for(var n of pj(e))INe.call(e,n)&&IO(t,n,e[n]);return t},NNe=(t,e)=>SNe(t,CNe(e)),gj=(t,e,n)=>IO(t,typeof e!="symbol"?e+"":e,n);const TNe="ReactNative",Go={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},kNe="js";function B_(){return typeof sn<"u"&&typeof sn.versions<"u"&&typeof sn.versions.node<"u"}function cf(){return!om()&&!!uD()&&navigator.product===TNe}function PNe(){return cf()&&typeof globalThis<"u"&&typeof(globalThis==null?void 0:globalThis.Platform)<"u"&&(globalThis==null?void 0:globalThis.Platform.OS)==="android"}function RNe(){return cf()&&typeof globalThis<"u"&&typeof(globalThis==null?void 0:globalThis.Platform)<"u"&&(globalThis==null?void 0:globalThis.Platform.OS)==="ios"}function kw(){return!B_()&&!!uD()&&!!om()}function fA(){return cf()?Go.reactNative:B_()?Go.node:kw()?Go.browser:Go.unknown}function yj(){var t;try{return cf()&&typeof globalThis<"u"&&typeof(globalThis==null?void 0:globalThis.Application)<"u"?(t=globalThis.Application)==null?void 0:t.applicationId:void 0}catch{return}}function ONe(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function MNe(t){var e,n;const r=mQ();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),NNe(mj(mj({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function mQ(){return PK()||{name:"",description:"",url:"",icons:[""]}}function DNe(){if(fA()===Go.reactNative&&typeof globalThis<"u"&&typeof(globalThis==null?void 0:globalThis.Platform)<"u"){const{OS:n,Version:r}=globalThis.Platform;return[n,r].join("-")}const t=ame();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function BNe(){var t;const e=fA();return e===Go.browser?[e,((t=kK())==null?void 0:t.host)||"unknown"].join(":"):e}function gQ(t,e,n){const r=DNe(),s=BNe();return[[t,e].join("-"),[kNe,n].join("-"),r,s].join("/")}function LNe({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=gQ(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o||void 0,packageName:c||void 0,bundleId:a||void 0},h=ONe(l[1]||"",d);return l[0]+"?"+h}function mp(t,e){return t.filter(n=>e.includes(n)).length===t.length}function NO(t){return Object.fromEntries(t.entries())}function TO(t){return new Map(Object.entries(t))}function Of(t=Ce.FIVE_MINUTES,e){const n=Ce.toMiliseconds(t||Ce.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function wl(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function yQ(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function UNe(t){return yQ("topic",t)}function FNe(t){return yQ("id",t)}function wQ(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function es(t,e){return Ce.fromMiliseconds((e||Date.now())+Ce.toMiliseconds(t))}function Fd(t){return Date.now()>=Ce.toMiliseconds(t)}function fn(t,e){return`${t}${e?`:${e}`:""}`}function Il(t=[],e=[]){return[...new Set([...t,...e])]}async function jNe({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=$Ne(i,t,e),a=fA();if(a===Go.browser){if(!((r=om())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}zNe(o)}else a===Go.reactNative&&typeof(globalThis==null?void 0:globalThis.Linking)<"u"&&await globalThis.Linking.openURL(o)}catch(s){console.error(s)}}function $Ne(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${KNe(r,!0)}`}else s=`${s}/wc?${r}`;return s}function zNe(t){let e="_self";VNe()?e="_top":(HNe()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function WNe(t,e){let n="";try{if(kw()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function wj(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function bj(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function w5(){return typeof sn<"u"&&{}.IS_VITEST==="true"}function HNe(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function VNe(){try{return window.self!==window.top}catch{return!1}}function KNe(t,e=!1){const n=Ge.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function bQ(t){return Ge.from(t,"base64").toString("utf-8")}function qNe(t){return new Promise(e=>setTimeout(e,t))}let GNe=class{constructor({limit:e}){gj(this,"limit"),gj(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(e)}}has(e){return this.set.has(e)}};const Sx=BigInt(2**32-1),vj=BigInt(32);function vQ(t,e=!1){return e?{h:Number(t&Sx),l:Number(t>>vj&Sx)}:{h:Number(t>>vj&Sx)|0,l:Number(t&Sx)|0}}function EQ(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=vQ(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const Ej=(t,e,n)=>t>>>n,Aj=(t,e,n)=>t<<32-n|e>>>n,jd=(t,e,n)=>t>>>n|e<<32-n,$d=(t,e,n)=>t<<32-n|e>>>n,$b=(t,e,n)=>t<<64-n|e>>>n-32,zb=(t,e,n)=>t>>>n-32|e<<64-n,YNe=(t,e)=>e,ZNe=(t,e)=>t,QNe=(t,e,n)=>t<<n|e>>>32-n,JNe=(t,e,n)=>e<<n|t>>>32-n,XNe=(t,e,n)=>e<<n-32|t>>>64-n,eTe=(t,e,n)=>t<<n-32|e>>>64-n;function Qa(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const b5=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),v5=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,tTe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),nTe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,rTe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),sTe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,rg=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function E5(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ed(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Ua(t,...e){if(!E5(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function A5(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ed(t.outputLen),ed(t.blockLen)}function qh(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function x5(t,e){Ua(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function qv(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Fa(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Ik(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Uc(t,e){return t<<32-e|t>>>e}const AQ=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function xQ(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const Jl=AQ?t=>t:t=>xQ(t);function iTe(t){for(let e=0;e<t.length;e++)t[e]=xQ(t[e]);return t}const zd=AQ?t=>t:iTe,SQ=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",oTe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Gv(t){if(Ua(t),SQ)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=oTe[t[n]];return e}const Gl={_0:48,_9:57,A:65,F:70,a:97,f:102};function xj(t){if(t>=Gl._0&&t<=Gl._9)return t-Gl._0;if(t>=Gl.A&&t<=Gl.F)return t-(Gl.A-10);if(t>=Gl.a&&t<=Gl.f)return t-(Gl.a-10)}function S5(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(SQ)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=xj(t.charCodeAt(i)),a=xj(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function aTe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Ac(t){return typeof t=="string"&&(t=aTe(t)),Ua(t),t}function gp(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Ua(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let DI=class{};function pA(t){const e=r=>t().update(Ac(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function cTe(t){const e=(r,s)=>t(s).update(Ac(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function Pw(t=32){if(rg&&typeof rg.getRandomValues=="function")return rg.getRandomValues(new Uint8Array(t));if(rg&&typeof rg.randomBytes=="function")return Uint8Array.from(rg.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const lTe=BigInt(0),lb=BigInt(1),uTe=BigInt(2),dTe=BigInt(7),hTe=BigInt(256),fTe=BigInt(113),CQ=[],_Q=[],IQ=[];for(let t=0,e=lb,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],CQ.push(2*(5*r+n)),_Q.push((t+1)*(t+2)/2%64);let s=lTe;for(let i=0;i<7;i++)e=(e<<lb^(e>>dTe)*fTe)%hTe,e&uTe&&(s^=lb<<(lb<<BigInt(i))-lb);IQ.push(s)}const NQ=EQ(IQ,!0),pTe=NQ[0],mTe=NQ[1],Sj=(t,e,n)=>n>32?XNe(t,e,n):QNe(t,e,n),Cj=(t,e,n)=>n>32?eTe(t,e,n):JNe(t,e,n);function gTe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=Sj(l,u,1)^n[a],h=Cj(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=_Q[o],c=Sj(s,i,a),l=Cj(s,i,a),u=CQ[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=pTe[r],t[1]^=mTe[r]}Fa(n)}let yTe=class TQ extends DI{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,ed(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=qv(this.state)}clone(){return this._cloneInto()}keccak(){zd(this.state32),gTe(this.state32,this.rounds),zd(this.state32),this.posOut=0,this.pos=0}update(e){qh(this),e=Ac(e),Ua(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){qh(this,!1),Ua(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ed(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(x5(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Fa(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new TQ(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const wTe=(t,e,n)=>pA(()=>new yTe(e,t,n)),bTe=wTe(1,136,256/8);function vTe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function ETe(t,e,n){return t&e^~t&n}function ATe(t,e,n){return t&e^t&n^e&n}let kQ=class extends DI{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Ik(this.buffer)}update(e){qh(this),e=Ac(e),Ua(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Ik(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){qh(this),x5(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Fa(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;vTe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Ik(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Ad=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ii=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),oi=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),xTe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),xd=new Uint32Array(64);let STe=class extends kQ{constructor(e=32){super(64,e,8,!1),this.A=Ad[0]|0,this.B=Ad[1]|0,this.C=Ad[2]|0,this.D=Ad[3]|0,this.E=Ad[4]|0,this.F=Ad[5]|0,this.G=Ad[6]|0,this.H=Ad[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)xd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=xd[d-15],f=xd[d-2],p=Uc(h,7)^Uc(h,18)^h>>>3,m=Uc(f,17)^Uc(f,19)^f>>>10;xd[d]=m+xd[d-7]+p+xd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Uc(a,6)^Uc(a,11)^Uc(a,25),f=u+h+ETe(a,c,l)+xTe[d]+xd[d]|0,p=(Uc(r,2)^Uc(r,13)^Uc(r,22))+ATe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Fa(xd)}destroy(){this.set(0,0,0,0,0,0,0,0),Fa(this.buffer)}};const PQ=EQ(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),CTe=PQ[0],_Te=PQ[1],Sd=new Uint32Array(80),Cd=new Uint32Array(80);let C5=class extends kQ{constructor(e=64){super(128,e,16,!1),this.Ah=oi[0]|0,this.Al=oi[1]|0,this.Bh=oi[2]|0,this.Bl=oi[3]|0,this.Ch=oi[4]|0,this.Cl=oi[5]|0,this.Dh=oi[6]|0,this.Dl=oi[7]|0,this.Eh=oi[8]|0,this.El=oi[9]|0,this.Fh=oi[10]|0,this.Fl=oi[11]|0,this.Gh=oi[12]|0,this.Gl=oi[13]|0,this.Hh=oi[14]|0,this.Hl=oi[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:m,Hl:E}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,m,E]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,m,E){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=m|0,this.Hl=E|0}process(e,n){for(let w=0;w<16;w++,n+=4)Sd[w]=e.getUint32(n),Cd[w]=e.getUint32(n+=4);for(let w=16;w<80;w++){const N=Sd[w-15]|0,_=Cd[w-15]|0,L=jd(N,_,1)^jd(N,_,8)^Ej(N,_,7),U=$d(N,_,1)^$d(N,_,8)^Aj(N,_,7),F=Sd[w-2]|0,M=Cd[w-2]|0,W=jd(F,M,19)^$b(F,M,61)^Ej(F,M,6),H=$d(F,M,19)^zb(F,M,61)^Aj(F,M,6),K=tTe(U,H,Cd[w-7],Cd[w-16]),P=nTe(K,L,W,Sd[w-7],Sd[w-16]);Sd[w]=P|0,Cd[w]=K|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:m,Gl:E,Hh:b,Hl:x}=this;for(let w=0;w<80;w++){const N=jd(d,h,14)^jd(d,h,18)^$b(d,h,41),_=$d(d,h,14)^$d(d,h,18)^zb(d,h,41),L=d&f^~d&m,U=h&p^~h&E,F=rTe(x,_,U,_Te[w],Cd[w]),M=sTe(F,b,N,L,CTe[w],Sd[w]),W=F|0,H=jd(r,s,28)^$b(r,s,34)^$b(r,s,39),K=$d(r,s,28)^zb(r,s,34)^zb(r,s,39),P=r&i^r&a^i&a,y=s&o^s&c^o&c;b=m|0,x=E|0,m=f|0,E=p|0,f=d|0,p=h|0,{h:d,l:h}=Qa(l|0,u|0,M|0,W|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const g=b5(W,K,y);r=v5(g,M,H,P),s=g|0}({h:r,l:s}=Qa(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Qa(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Qa(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Qa(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Qa(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Qa(this.Fh|0,this.Fl|0,f|0,p|0),{h:m,l:E}=Qa(this.Gh|0,this.Gl|0,m|0,E|0),{h:b,l:x}=Qa(this.Hh|0,this.Hl|0,b|0,x|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,m,E,b,x)}roundClean(){Fa(Sd,Cd)}destroy(){Fa(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},ITe=class extends C5{constructor(){super(48),this.Ah=ii[0]|0,this.Al=ii[1]|0,this.Bh=ii[2]|0,this.Bl=ii[3]|0,this.Ch=ii[4]|0,this.Cl=ii[5]|0,this.Dh=ii[6]|0,this.Dl=ii[7]|0,this.Eh=ii[8]|0,this.El=ii[9]|0,this.Fh=ii[10]|0,this.Fl=ii[11]|0,this.Gh=ii[12]|0,this.Gl=ii[13]|0,this.Hh=ii[14]|0,this.Hl=ii[15]|0}};const ai=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class NTe extends C5{constructor(){super(32),this.Ah=ai[0]|0,this.Al=ai[1]|0,this.Bh=ai[2]|0,this.Bl=ai[3]|0,this.Ch=ai[4]|0,this.Cl=ai[5]|0,this.Dh=ai[6]|0,this.Dl=ai[7]|0,this.Eh=ai[8]|0,this.El=ai[9]|0,this.Fh=ai[10]|0,this.Fl=ai[11]|0,this.Gh=ai[12]|0,this.Gl=ai[13]|0,this.Hh=ai[14]|0,this.Hl=ai[15]|0}}const BI=pA(()=>new STe),TTe=pA(()=>new C5),kTe=pA(()=>new ITe),PTe=pA(()=>new NTe),RTe=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Xr=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Me=new Uint32Array(32);function _d(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=Me[2*t],l=Me[2*t+1],u=Me[2*e],d=Me[2*e+1],h=Me[2*n],f=Me[2*n+1],p=Me[2*r],m=Me[2*r+1],E=b5(c,u,o);l=v5(E,l,d,a),c=E|0,{Dh:m,Dl:p}={Dh:m^l,Dl:p^c},{Dh:m,Dl:p}={Dh:YNe(m,p),Dl:ZNe(m)},{h:f,l:h}=Qa(f,h,m,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:jd(d,u,24),Bl:$d(d,u,24)},Me[2*t]=c,Me[2*t+1]=l,Me[2*e]=u,Me[2*e+1]=d,Me[2*n]=h,Me[2*n+1]=f,Me[2*r]=p,Me[2*r+1]=m}function Id(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=Me[2*t],l=Me[2*t+1],u=Me[2*e],d=Me[2*e+1],h=Me[2*n],f=Me[2*n+1],p=Me[2*r],m=Me[2*r+1],E=b5(c,u,o);l=v5(E,l,d,a),c=E|0,{Dh:m,Dl:p}={Dh:m^l,Dl:p^c},{Dh:m,Dl:p}={Dh:jd(m,p,16),Dl:$d(m,p,16)},{h:f,l:h}=Qa(f,h,m,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:$b(d,u,63),Bl:zb(d,u,63)},Me[2*t]=c,Me[2*t+1]=l,Me[2*e]=u,Me[2*e+1]=d,Me[2*n]=h,Me[2*n+1]=f,Me[2*r]=p,Me[2*r+1]=m}function OTe(t,e={},n,r,s){if(ed(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class MTe extends DI{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,ed(e),ed(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=qv(this.buffer)}update(e){qh(this),e=Ac(e),Ua(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===n&&(zd(s),this.compress(s,0,!1),zd(s),this.pos=0);const l=Math.min(n-this.pos,i-c),u=o+c;if(l===n&&!(u%4)&&c+l<i){const d=new Uint32Array(a,u,Math.floor((i-c)/4));zd(d);for(let h=0;c+n<i;h+=s.length,c+=n)this.length+=n,this.compress(d,h,!1);zd(d);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){qh(this),x5(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,Fa(this.buffer.subarray(n)),zd(r),this.compress(r,0,!0),zd(r);const s=qv(e);this.get().forEach((i,o)=>s[o]=Jl(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class DTe extends MTe{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=Xr[0]|0,this.v0h=Xr[1]|0,this.v1l=Xr[2]|0,this.v1h=Xr[3]|0,this.v2l=Xr[4]|0,this.v2h=Xr[5]|0,this.v3l=Xr[6]|0,this.v3h=Xr[7]|0,this.v4l=Xr[8]|0,this.v4h=Xr[9]|0,this.v5l=Xr[10]|0,this.v5h=Xr[11]|0,this.v6l=Xr[12]|0,this.v6h=Xr[13]|0,this.v7l=Xr[14]|0,this.v7h=Xr[15]|0,OTe(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=Ac(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=Ac(i);const a=qv(i);this.v4l^=Jl(a[0]),this.v4h^=Jl(a[1]),this.v5l^=Jl(a[2]),this.v5h^=Jl(a[3])}if(s!==void 0){s=Ac(s);const a=qv(s);this.v6l^=Jl(a[0]),this.v6h^=Jl(a[1]),this.v7l^=Jl(a[2]),this.v7h^=Jl(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:l,v4h:u,v5l:d,v5h:h,v6l:f,v6h:p,v7l:m,v7h:E}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,m,E]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,m,E){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=d|0,this.v5h=h|0,this.v6l=f|0,this.v6h=p|0,this.v7l=m|0,this.v7h=E|0}compress(e,n,r){this.get().forEach((c,l)=>Me[l]=c),Me.set(Xr,16);let{h:s,l:i}=vQ(BigInt(this.length));Me[24]=Xr[8]^i,Me[25]=Xr[9]^s,r&&(Me[28]=~Me[28],Me[29]=~Me[29]);let o=0;const a=RTe;for(let c=0;c<12;c++)_d(0,4,8,12,e,n+2*a[o++]),Id(0,4,8,12,e,n+2*a[o++]),_d(1,5,9,13,e,n+2*a[o++]),Id(1,5,9,13,e,n+2*a[o++]),_d(2,6,10,14,e,n+2*a[o++]),Id(2,6,10,14,e,n+2*a[o++]),_d(3,7,11,15,e,n+2*a[o++]),Id(3,7,11,15,e,n+2*a[o++]),_d(0,5,10,15,e,n+2*a[o++]),Id(0,5,10,15,e,n+2*a[o++]),_d(1,6,11,12,e,n+2*a[o++]),Id(1,6,11,12,e,n+2*a[o++]),_d(2,7,8,13,e,n+2*a[o++]),Id(2,7,8,13,e,n+2*a[o++]),_d(3,4,9,14,e,n+2*a[o++]),Id(3,4,9,14,e,n+2*a[o++]);this.v0l^=Me[0]^Me[16],this.v0h^=Me[1]^Me[17],this.v1l^=Me[2]^Me[18],this.v1h^=Me[3]^Me[19],this.v2l^=Me[4]^Me[20],this.v2h^=Me[5]^Me[21],this.v3l^=Me[6]^Me[22],this.v3h^=Me[7]^Me[23],this.v4l^=Me[8]^Me[24],this.v4h^=Me[9]^Me[25],this.v5l^=Me[10]^Me[26],this.v5h^=Me[11]^Me[27],this.v6l^=Me[12]^Me[28],this.v6h^=Me[13]^Me[29],this.v7l^=Me[14]^Me[30],this.v7h^=Me[15]^Me[31],Fa(Me)}destroy(){this.destroyed=!0,Fa(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const BTe=cTe(t=>new DTe(t)),LTe="https://rpc.walletconnect.org/v1";function RQ(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Ge.from(bTe(n)).toString("hex")}async function UTe(t,e,n,r,s,i){switch(n.t){case"eip191":return await FTe(t,e,n.s);case"eip1271":return await jTe(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function FTe(t,e,n){return(await EIe({hash:RQ(e),signature:n})).toLowerCase()===t.toLowerCase()}async function jTe(t,e,n,r,s,i){const o=Yp(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l=n.substring(2),u=(l.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:RQ(e)).substring(2),h=a+d+c+u+l,f=await fetch(`${i||LTe}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:$Te(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function $Te(){return Date.now()+Math.floor(Math.random()*1e3)}function zTe(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Ge.from(t,"base64").slice(1,65);return Im.encode(i)}function WTe(t){const e=new Uint8Array(Ge.from(t,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=BTe(r,{dkLen:32});return Im.encode(s)}function _j(t){const e=new Uint8Array(BI(HTe(t)));return Im.encode(e)}function HTe(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function Ij(t){const e=Ge.from(t,"base64"),n=tNe(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=qIe(n),s=Ge.from("TX"),i=Ge.concat([s,Ge.from(r)]),o=PTe(i);return lNe.encode(o).replace(/=+$/,"")}function Nk(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Ge.from(e)}function VTe(t){const e=Ge.from(t.signed.bodyBytes,"base64"),n=Ge.from(t.signed.authInfoBytes,"base64"),r=Ge.from(t.signature.signature,"base64"),s=[];s.push(Ge.from([10])),s.push(Nk(e.length)),s.push(e),s.push(Ge.from([18])),s.push(Nk(n.length)),s.push(n),s.push(Ge.from([26])),s.push(Nk(r.length)),s.push(r);const i=Ge.concat(s),o=BI(i);return Ge.from(o).toString("hex").toUpperCase()}var KTe=Object.defineProperty,qTe=Object.defineProperties,GTe=Object.getOwnPropertyDescriptors,Nj=Object.getOwnPropertySymbols,YTe=Object.prototype.hasOwnProperty,ZTe=Object.prototype.propertyIsEnumerable,Tj=(t,e,n)=>e in t?KTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,QTe=(t,e)=>{for(var n in e||(e={}))YTe.call(e,n)&&Tj(t,n,e[n]);if(Nj)for(var n of Nj(e))ZTe.call(e,n)&&Tj(t,n,e[n]);return t},JTe=(t,e)=>qTe(t,GTe(e));const XTe="did:pkh:",_5=t=>t==null?void 0:t.split(":"),eke=t=>{const e=t&&_5(t);if(e)return t.includes(XTe)?e[3]:e[1]},kO=t=>{const e=t&&_5(t);if(e)return e[2]+":"+e[3]},L_=t=>{const e=t&&_5(t);if(e)return e.pop()};async function kj(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=OQ(s,s.iss),o=L_(s.iss);return await UTe(o,i,r,kO(s.iss),n)}const OQ=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=L_(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${eke(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(m=>`
- ${m}`).join("")}`:void 0,p=tC(t.resources);if(p){const m=Yv(p);s=lke(s,m)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(m=>m!=null).join(`
`)};function tke(t){return Ge.from(JSON.stringify(t)).toString("base64")}function nke(t){return JSON.parse(Ge.from(t,"base64").toString("utf-8"))}function mm(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function rke(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:ske(e,n,r)}}}function ske(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function MQ(t){return mm(t),`urn:recap:${tke(t).replace(/=/g,"")}`}function Yv(t){const e=nke(t.replace("urn:recap:",""));return mm(e),e}function ike(t,e,n){const r=rke(t,e,n);return MQ(r)}function oke(t){return t&&t.includes("urn:recap:")}function ake(t,e){const n=Yv(t),r=Yv(e),s=cke(n,r);return MQ(s)}function cke(t,e){mm(t),mm(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=JTe(QTe({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function lke(t="",e){mm(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function Pj(t){var e;const n=Yv(t);mm(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function Rj(t){const e=Yv(t);mm(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function tC(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return oke(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function DQ(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function PO(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function Tk(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function lo(t,...e){if(!DQ(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Oj(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function uke(t,e){lo(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Uh(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function lw(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function dke(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const hke=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function fke(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function RO(t){if(typeof t=="string")t=fke(t);else if(DQ(t))t=OO(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function pke(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function mke(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const gke=(t,e)=>{function n(r,...s){if(lo(r),!hke)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?lo(l):lo(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&lo(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");lo(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,lo(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(lo(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function Mj(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!wke(e))throw new Error("invalid output, must be aligned");return e}function Dj(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function yke(t,e,n){PO(n);const r=new Uint8Array(16),s=dke(r);return Dj(s,0,BigInt(e),n),Dj(s,8,BigInt(t),n),r}function wke(t){return t.byteOffset%4===0}function OO(t){return Uint8Array.from(t)}const BQ=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),bke=BQ("expand 16-byte k"),vke=BQ("expand 32-byte k"),Eke=Uh(bke),Ake=Uh(vke);function Qt(t,e){return t<<e|t>>>32-e}function MO(t){return t.byteOffset%4===0}const Cx=64,xke=16,LQ=2**32-1,Bj=new Uint32Array;function Ske(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(Cx),u=Uh(l),d=MO(s)&&MO(i),h=d?Uh(s):Bj,f=d?Uh(i):Bj;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=LQ)throw new Error("arx: counter overflow");const m=Math.min(Cx,c-p);if(d&&m===Cx){const E=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let b=0,x;b<xke;b++)x=E+b,f[x]=h[x]^u[b];p+=Cx;continue}for(let E=0,b;E<m;E++)b=p+E,i[b]=s[b]^l[E];p+=m}}function Cke(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=pke({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Tk(s),Tk(o),PO(i),PO(n),(a,c,l,u,d=0)=>{lo(a),lo(c),lo(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),lo(u),Tk(d),d<0||d>=LQ)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,m,E;if(p===32)f.push(m=OO(a)),E=Ake;else if(p===16&&n)m=new Uint8Array(32),m.set(a),m.set(a,16),E=Eke,f.push(m);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);MO(c)||f.push(c=OO(c));const b=Uh(m);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(E,b,Uh(c.subarray(0,16)),b),c=c.subarray(16)}const x=16-s;if(x!==c.length)throw new Error(`arx: nonce must be ${x} or 16 bytes`);if(x!==12){const N=new Uint8Array(12);N.set(c,i?0:12-c.length),c=N,f.push(c)}const w=Uh(c);return Ske(t,E,b,w,l,u,d,o),lw(...f),u}}const Cs=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class _ke{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=RO(e),lo(e,32);const n=Cs(e,0),r=Cs(e,2),s=Cs(e,4),i=Cs(e,6),o=Cs(e,8),a=Cs(e,10),c=Cs(e,12),l=Cs(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Cs(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],m=o[8],E=o[9],b=Cs(e,n+0),x=Cs(e,n+2),w=Cs(e,n+4),N=Cs(e,n+6),_=Cs(e,n+8),L=Cs(e,n+10),U=Cs(e,n+12),F=Cs(e,n+14);let M=i[0]+(b&8191),W=i[1]+((b>>>13|x<<3)&8191),H=i[2]+((x>>>10|w<<6)&8191),K=i[3]+((w>>>7|N<<9)&8191),P=i[4]+((N>>>4|_<<12)&8191),y=i[5]+(_>>>1&8191),g=i[6]+((_>>>14|L<<2)&8191),A=i[7]+((L>>>11|U<<5)&8191),I=i[8]+((U>>>8|F<<8)&8191),T=i[9]+(F>>>5|s),R=0,B=R+M*a+W*(5*E)+H*(5*m)+K*(5*p)+P*(5*f);R=B>>>13,B&=8191,B+=y*(5*h)+g*(5*d)+A*(5*u)+I*(5*l)+T*(5*c),R+=B>>>13,B&=8191;let O=R+M*c+W*a+H*(5*E)+K*(5*m)+P*(5*p);R=O>>>13,O&=8191,O+=y*(5*f)+g*(5*h)+A*(5*d)+I*(5*u)+T*(5*l),R+=O>>>13,O&=8191;let S=R+M*l+W*c+H*a+K*(5*E)+P*(5*m);R=S>>>13,S&=8191,S+=y*(5*p)+g*(5*f)+A*(5*h)+I*(5*d)+T*(5*u),R+=S>>>13,S&=8191;let z=R+M*u+W*l+H*c+K*a+P*(5*E);R=z>>>13,z&=8191,z+=y*(5*m)+g*(5*p)+A*(5*f)+I*(5*h)+T*(5*d),R+=z>>>13,z&=8191;let Y=R+M*d+W*u+H*l+K*c+P*a;R=Y>>>13,Y&=8191,Y+=y*(5*E)+g*(5*m)+A*(5*p)+I*(5*f)+T*(5*h),R+=Y>>>13,Y&=8191;let J=R+M*h+W*d+H*u+K*l+P*c;R=J>>>13,J&=8191,J+=y*a+g*(5*E)+A*(5*m)+I*(5*p)+T*(5*f),R+=J>>>13,J&=8191;let ae=R+M*f+W*h+H*d+K*u+P*l;R=ae>>>13,ae&=8191,ae+=y*c+g*a+A*(5*E)+I*(5*m)+T*(5*p),R+=ae>>>13,ae&=8191;let pe=R+M*p+W*f+H*h+K*d+P*u;R=pe>>>13,pe&=8191,pe+=y*l+g*c+A*a+I*(5*E)+T*(5*m),R+=pe>>>13,pe&=8191;let ve=R+M*m+W*p+H*f+K*h+P*d;R=ve>>>13,ve&=8191,ve+=y*u+g*l+A*c+I*a+T*(5*E),R+=ve>>>13,ve&=8191;let de=R+M*E+W*m+H*p+K*f+P*h;R=de>>>13,de&=8191,de+=y*d+g*u+A*l+I*c+T*a,R+=de>>>13,de&=8191,R=(R<<2)+R|0,R=R+B|0,B=R&8191,R=R>>>13,O+=R,i[0]=B,i[1]=O,i[2]=S,i[3]=z,i[4]=Y,i[5]=J,i[6]=ae,i[7]=pe,i[8]=ve,i[9]=de}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;lw(r)}update(e){Oj(this),e=RO(e),lo(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){lw(this.h,this.r,this.buffer,this.pad)}digestInto(e){Oj(this),uke(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function Ike(t){const e=(r,s)=>t(s).update(RO(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const Nke=Ike(t=>new _ke(t));function Tke(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],m=e[5],E=e[6],b=e[7],x=s,w=n[0],N=n[1],_=n[2],L=o,U=a,F=c,M=l,W=u,H=d,K=h,P=f,y=p,g=m,A=E,I=b,T=x,R=w,B=N,O=_;for(let z=0;z<i;z+=2)L=L+W|0,T=Qt(T^L,16),y=y+T|0,W=Qt(W^y,12),L=L+W|0,T=Qt(T^L,8),y=y+T|0,W=Qt(W^y,7),U=U+H|0,R=Qt(R^U,16),g=g+R|0,H=Qt(H^g,12),U=U+H|0,R=Qt(R^U,8),g=g+R|0,H=Qt(H^g,7),F=F+K|0,B=Qt(B^F,16),A=A+B|0,K=Qt(K^A,12),F=F+K|0,B=Qt(B^F,8),A=A+B|0,K=Qt(K^A,7),M=M+P|0,O=Qt(O^M,16),I=I+O|0,P=Qt(P^I,12),M=M+P|0,O=Qt(O^M,8),I=I+O|0,P=Qt(P^I,7),L=L+H|0,O=Qt(O^L,16),A=A+O|0,H=Qt(H^A,12),L=L+H|0,O=Qt(O^L,8),A=A+O|0,H=Qt(H^A,7),U=U+K|0,T=Qt(T^U,16),I=I+T|0,K=Qt(K^I,12),U=U+K|0,T=Qt(T^U,8),I=I+T|0,K=Qt(K^I,7),F=F+P|0,R=Qt(R^F,16),y=y+R|0,P=Qt(P^y,12),F=F+P|0,R=Qt(R^F,8),y=y+R|0,P=Qt(P^y,7),M=M+W|0,B=Qt(B^M,16),g=g+B|0,W=Qt(W^g,12),M=M+W|0,B=Qt(B^M,8),g=g+B|0,W=Qt(W^g,7);let S=0;r[S++]=o+L|0,r[S++]=a+U|0,r[S++]=c+F|0,r[S++]=l+M|0,r[S++]=u+W|0,r[S++]=d+H|0,r[S++]=h+K|0,r[S++]=f+P|0,r[S++]=p+y|0,r[S++]=m+g|0,r[S++]=E+A|0,r[S++]=b+I|0,r[S++]=x+T|0,r[S++]=w+R|0,r[S++]=N+B|0,r[S++]=_+O|0}const kke=Cke(Tke,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Pke=new Uint8Array(16),Lj=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(Pke.subarray(n))},Rke=new Uint8Array(32);function Uj(t,e,n,r,s){const i=t(e,n,Rke),o=Nke.create(i);s&&Lj(o,s),Lj(o,r);const a=yke(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return lw(i,a),c}const Oke=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=Mj(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=Uj(t,e,n,a,r);return i.set(c,o),lw(c),i},decrypt(s,i){i=Mj(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=Uj(t,e,n,o,r);if(!mke(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),lw(c),i}}),UQ=gke({blockSize:64,nonceLength:12,tagLength:16},Oke(kke));let FQ=class extends DI{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,A5(e);const r=Ac(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Fa(i)}update(e){return qh(this),this.iHash.update(e),this}digestInto(e){qh(this),Ua(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const LI=(t,e,n)=>new FQ(t,e).update(n).digest();LI.create=(t,e)=>new FQ(t,e);function Mke(t,e,n){return A5(t),n===void 0&&(n=new Uint8Array(t.outputLen)),LI(t,Ac(n),Ac(e))}const kk=Uint8Array.from([0]),Fj=Uint8Array.of();function Dke(t,e,n,r=32){A5(t),ed(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=Fj);const o=new Uint8Array(i*s),a=LI.create(t,e),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let u=0;u<i;u++)kk[0]=u+1,c.update(u===0?Fj:l).update(n).update(kk).digestInto(l),o.set(l,s*u),a._cloneInto(c);return a.destroy(),c.destroy(),Fa(l,kk),o.slice(0,r)}const Bke=(t,e,n,r,s)=>Dke(t,Mke(t,e,n),r,s),UI=BI,I5=BigInt(0),DO=BigInt(1);function U_(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function _x(t){const e=t.toString(16);return e.length&1?"0"+e:e}function jQ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?I5:BigInt("0x"+t)}function FI(t){return jQ(Gv(t))}function F_(t){return Ua(t),jQ(Gv(Uint8Array.from(t).reverse()))}function N5(t,e){return S5(t.toString(16).padStart(e*2,"0"))}function T5(t,e){return N5(t,e).reverse()}function so(t,e,n){let r;if(typeof e=="string")try{r=S5(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(E5(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const Pk=t=>typeof t=="bigint"&&I5<=t;function Lke(t,e,n){return Pk(t)&&Pk(e)&&Pk(n)&&e<=t&&t<n}function BO(t,e,n,r){if(!Lke(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Uke(t){let e;for(e=0;t>I5;t>>=DO,e+=1);return e}const jI=t=>(DO<<BigInt(t))-DO;function Fke(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=h=>new Uint8Array(h),s=h=>Uint8Array.of(h);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...h)=>n(o,i,...h),u=(h=r(0))=>{o=l(s(0),h),i=l(),h.length!==0&&(o=l(s(1),h),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const f=[];for(;h<e;){i=l();const p=i.slice();f.push(p),h+=i.length}return gp(...f)};return(h,f)=>{c(),u(h);let p;for(;!(p=f(d()));)u();return c(),p}}function $I(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function jj(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const yo=BigInt(0),$i=BigInt(1),yp=BigInt(2),jke=BigInt(3),$Q=BigInt(4),zQ=BigInt(5),WQ=BigInt(8);function Ta(t,e){const n=t%e;return n>=yo?n:e+n}function Ya(t,e,n){let r=t;for(;e-- >yo;)r*=r,r%=n;return r}function $j(t,e){if(t===yo)throw new Error("invert: expected non-zero number");if(e<=yo)throw new Error("invert: expected positive modulus, got "+e);let n=Ta(t,e),r=e,s=yo,i=$i;for(;n!==yo;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==$i)throw new Error("invert: does not exist");return Ta(s,e)}function HQ(t,e){const n=(t.ORDER+$i)/$Q,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function $ke(t,e){const n=(t.ORDER-zQ)/WQ,r=t.mul(e,yp),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,yp),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function zke(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-$i,n=0;for(;e%yp===yo;)e/=yp,n++;let r=yp;const s=Rw(t);for(;zj(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return HQ;let i=s.pow(r,e);const o=(e+$i)/yp;return function(a,c){if(a.is0(c))return c;if(zj(a,c)!==1)throw new Error("Cannot find square root");let l=n,u=a.mul(a.ONE,i),d=a.pow(c,e),h=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let f=1,p=a.sqr(d);for(;!a.eql(p,a.ONE);)if(f++,p=a.sqr(p),f===l)throw new Error("Cannot find square root");const m=$i<<BigInt(l-f-1),E=a.pow(u,m);l=f,u=a.sqr(E),d=a.mul(d,u),h=a.mul(h,E)}return h}}function Wke(t){return t%$Q===jke?HQ:t%WQ===zQ?$ke:zke(t)}const Hke=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Vke(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Hke.reduce((r,s)=>(r[s]="function",r),e);return $I(t,n),t}function Kke(t,e,n){if(n<yo)throw new Error("invalid exponent, negatives unsupported");if(n===yo)return t.ONE;if(n===$i)return e;let r=t.ONE,s=e;for(;n>yo;)n&$i&&(r=t.mul(r,s)),s=t.sqr(s),n>>=$i;return r}function VQ(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function zj(t,e){const n=(t.ORDER-$i)/yp,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function qke(t,e){e!==void 0&&ed(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Rw(t,e,n=!1,r={}){if(t<=yo)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=qke(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:jI(o),ZERO:yo,ONE:$i,create:u=>Ta(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return yo<=u&&u<t},is0:u=>u===yo,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&$i)===$i,neg:u=>Ta(-u,t),eql:(u,d)=>u===d,sqr:u=>Ta(u*u,t),add:(u,d)=>Ta(u+d,t),sub:(u,d)=>Ta(u-d,t),mul:(u,d)=>Ta(u*d,t),pow:(u,d)=>Kke(l,u,d),div:(u,d)=>Ta(u*$j(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>$j(u,t),sqrt:i||(u=>(c||(c=Wke(t)),c(l,u))),toBytes:u=>n?T5(u,a):N5(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?F_(u):FI(u)},invertBatch:u=>VQ(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function KQ(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function qQ(t){const e=KQ(t);return e+Math.ceil(e/2)}function Gke(t,e,n=!1){const r=t.length,s=KQ(e),i=qQ(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?F_(t):FI(t),a=Ta(o,e-$i)+$i;return n?T5(a,s):N5(a,s)}const uw=BigInt(0),wp=BigInt(1);function g1(t,e){const n=e.negate();return t?n:e}function Yke(t,e,n){const r=e==="pz"?i=>i.pz:i=>i.ez,s=VQ(t.Fp,n.map(r));return n.map((i,o)=>i.toAffine(s[o])).map(t.fromAffine)}function GQ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Rk(t,e){GQ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=jI(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function Wj(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=wp);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function Zke(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Qke(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Ok=new WeakMap,YQ=new WeakMap;function Mk(t){return YQ.get(t)||1}function Hj(t){if(t!==uw)throw new Error("invalid wNAF")}function Jke(t,e){return{constTimeNegate:g1,hasPrecomputes(n){return Mk(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>uw;)r&wp&&(s=s.add(i)),i=i.double(),r>>=wp;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Rk(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=Rk(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=Wj(s,c,a);s=l,d?o=o.add(g1(f,r[p])):i=i.add(g1(h,r[u]))}return Hj(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=Rk(n,e);for(let a=0;a<o.windows&&s!==uw;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=Wj(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return Hj(s),i},getPrecomputes(n,r,s){let i=Ok.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),Ok.set(r,i))),i},wNAFCached(n,r,s){const i=Mk(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=Mk(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){GQ(r,e),YQ.set(n,r),Ok.delete(n)}}}function Xke(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>uw||r>uw;)n&wp&&(i=i.add(s)),r&wp&&(o=o.add(s)),s=s.double(),n>>=wp,r>>=wp;return{p1:i,p2:o}}function ePe(t,e,n,r){Zke(n,t),Qke(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=Uke(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=jI(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let m=0;m<i;m++){const E=r[m],b=Number(E>>BigInt(f)&l);u[b]=u[b].add(n[m])}let p=o;for(let m=u.length-1,E=o;m>0;m--)E=E.add(u[m]),p=p.add(E);if(h=h.add(p),f!==0)for(let m=0;m<c;m++)h=h.double()}return h}function Vj(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Vke(e),e}else return Rw(t)}function tPe(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const a=e[o];if(!(typeof a=="bigint"&&a>uw))throw new Error(`CURVE.${o} must be positive bigint`)}const r=Vj(e.p,n.Fp),s=Vj(e.n,n.Fn),i=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const o of i)if(!r.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const ub=BigInt(0),sg=BigInt(1),Ix=BigInt(2);function nPe(t){return $I(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function rPe(t){const e=nPe(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||Pw,l=a?255:448,u=a?32:56,d=BigInt(a?9:5),h=BigInt(a?121665:39081),f=a?Ix**BigInt(254):Ix**BigInt(447),p=a?BigInt(8)*Ix**BigInt(251)-sg:BigInt(4)*Ix**BigInt(445)-sg,m=f+p+sg,E=M=>Ta(M,n),b=x(d);function x(M){return T5(E(M),u)}function w(M){const W=so("u coordinate",M,u);return a&&(W[31]&=127),E(F_(W))}function N(M){return F_(s(so("scalar",M,u)))}function _(M,W){const H=F(w(W),N(M));if(H===ub)throw new Error("invalid private or public key received");return x(H)}function L(M){return _(M,b)}function U(M,W,H){const K=E(M*(W-H));return W=E(W-K),H=E(H+K),{x_2:W,x_3:H}}function F(M,W){BO("u",M,ub,n),BO("scalar",W,f,m);const H=W,K=M;let P=sg,y=ub,g=M,A=sg,I=ub;for(let R=BigInt(l-1);R>=ub;R--){const B=H>>R&sg;I^=B,{x_2:P,x_3:g}=U(I,P,g),{x_2:y,x_3:A}=U(I,y,A),I=B;const O=P+y,S=E(O*O),z=P-y,Y=E(z*z),J=S-Y,ae=g+A,pe=g-A,ve=E(pe*O),de=E(ae*z),$e=ve+de,Te=ve-de;g=E($e*$e),A=E(K*E(Te*Te)),P=E(S*Y),y=E(J*(S+E(h*J)))}({x_2:P,x_3:g}=U(I,P,g)),{x_2:y,x_3:A}=U(I,y,A);const T=i(y);return E(P*T)}return{scalarMult:_,scalarMultBase:L,getSharedSecret:(M,W)=>_(M,W),getPublicKey:M=>L(M),utils:{randomPrivateKey:()=>c(u)},GuBytes:b.slice()}}BigInt(0);const sPe=BigInt(1),Kj=BigInt(2),iPe=BigInt(3),oPe=BigInt(5),aPe=BigInt(8),ZQ={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:aPe,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function cPe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=ZQ.p,o=t*t%i*t%i,a=Ya(o,Kj,i)*o%i,c=Ya(a,sPe,i)*t%i,l=Ya(c,oPe,i)*c%i,u=Ya(l,e,i)*l%i,d=Ya(u,n,i)*u%i,h=Ya(d,r,i)*d%i,f=Ya(h,s,i)*h%i,p=Ya(f,s,i)*h%i,m=Ya(p,e,i)*l%i;return{pow_p_5_8:Ya(m,Kj,i)*t%i,b2:o}}function lPe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const LO=(()=>{const t=ZQ.p;return rPe({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=cPe(e);return Ta(Ya(n,iPe,t)*r,t)},adjustScalarBytes:lPe})})();function qj(t){t.lowS!==void 0&&U_("lowS",t.lowS),t.prehash!==void 0&&U_("prehash",t.prehash)}class uPe extends Error{constructor(e=""){super(e)}}const lu={Err:uPe,_tlv:{encode:(t,e)=>{const{Err:n}=lu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=_x(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?_x(s.length/2|128):"";return _x(t)+i+s+e},decode(t,e){const{Err:n}=lu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=lu;if(t<y1)throw new e("integer: negative integers are not allowed");let n=_x(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=lu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return FI(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=lu,s=so("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=lu,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},y1=BigInt(0),w1=BigInt(1),dPe=BigInt(2),Nx=BigInt(3),hPe=BigInt(4);function fPe(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function QQ(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=so("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function pPe(t,e={}){const{Fp:n,Fn:r}=tPe("weierstrass",t,e),{h:s,n:i}=t;$I(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(F,M,W){const{x:H,y:K}=M.toAffine(),P=n.toBytes(H);if(U_("isCompressed",W),W){a();const y=!n.isOdd(K);return gp(JQ(y),P)}else return gp(Uint8Array.of(4),P,n.toBytes(K))}function l(F){Ua(F);const M=n.BYTES,W=M+1,H=2*M+1,K=F.length,P=F[0],y=F.subarray(1);if(K===W&&(P===2||P===3)){const g=n.fromBytes(y);if(!n.isValid(g))throw new Error("bad point: is not on curve, wrong x");const A=h(g);let I;try{I=n.sqrt(A)}catch(R){const B=R instanceof Error?": "+R.message:"";throw new Error("bad point: is not on curve, sqrt error"+B)}a();const T=n.isOdd(I);return(P&1)===1!==T&&(I=n.neg(I)),{x:g,y:I}}else if(K===H&&P===4){const g=n.fromBytes(y.subarray(M*0,M*1)),A=n.fromBytes(y.subarray(M*1,M*2));if(!f(g,A))throw new Error("bad point: is not on curve");return{x:g,y:A}}else throw new Error(`bad point: got length ${K}, expected compressed=${W} or uncompressed=${H}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=fPe(n,t.a,t.b);function f(F,M){const W=n.sqr(M),H=h(F);return n.eql(W,H)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,Nx),hPe),m=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,m)))throw new Error("bad curve params: a or b");function E(F,M,W=!1){if(!n.isValid(M)||W&&n.is0(M))throw new Error(`bad point coordinate ${F}`);return M}function b(F){if(!(F instanceof _))throw new Error("ProjectivePoint expected")}const x=jj((F,M)=>{const{px:W,py:H,pz:K}=F;if(n.eql(K,n.ONE))return{x:W,y:H};const P=F.is0();M==null&&(M=P?n.ONE:n.inv(K));const y=n.mul(W,M),g=n.mul(H,M),A=n.mul(K,M);if(P)return{x:n.ZERO,y:n.ZERO};if(!n.eql(A,n.ONE))throw new Error("invZ was invalid");return{x:y,y:g}}),w=jj(F=>{if(F.is0()){if(e.allowInfinityPoint&&!n.is0(F.py))return;throw new Error("bad point: ZERO")}const{x:M,y:W}=F.toAffine();if(!n.isValid(M)||!n.isValid(W))throw new Error("bad point: x or y not field elements");if(!f(M,W))throw new Error("bad point: equation left != right");if(!F.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function N(F,M,W,H,K){return W=new _(n.mul(W.px,F),W.py,W.pz),M=g1(H,M),W=g1(K,W),M.add(W)}class _{constructor(M,W,H){this.px=E("x",M),this.py=E("y",W,!0),this.pz=E("z",H),Object.freeze(this)}static fromAffine(M){const{x:W,y:H}=M||{};if(!M||!n.isValid(W)||!n.isValid(H))throw new Error("invalid affine point");if(M instanceof _)throw new Error("projective point not allowed");return n.is0(W)&&n.is0(H)?_.ZERO:new _(W,H,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(M){return Yke(_,"pz",M)}static fromBytes(M){return Ua(M),_.fromHex(M)}static fromHex(M){const W=_.fromAffine(d(so("pointHex",M)));return W.assertValidity(),W}static fromPrivateKey(M){const W=QQ(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return _.BASE.multiply(W(M))}static msm(M,W){return ePe(_,r,M,W)}precompute(M=8,W=!0){return U.setWindowSize(this,M),W||this.multiply(Nx),this}_setWindowSize(M){this.precompute(M)}assertValidity(){w(this)}hasEvenY(){const{y:M}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(M)}equals(M){b(M);const{px:W,py:H,pz:K}=this,{px:P,py:y,pz:g}=M,A=n.eql(n.mul(W,g),n.mul(P,K)),I=n.eql(n.mul(H,g),n.mul(y,K));return A&&I}negate(){return new _(this.px,n.neg(this.py),this.pz)}double(){const{a:M,b:W}=t,H=n.mul(W,Nx),{px:K,py:P,pz:y}=this;let g=n.ZERO,A=n.ZERO,I=n.ZERO,T=n.mul(K,K),R=n.mul(P,P),B=n.mul(y,y),O=n.mul(K,P);return O=n.add(O,O),I=n.mul(K,y),I=n.add(I,I),g=n.mul(M,I),A=n.mul(H,B),A=n.add(g,A),g=n.sub(R,A),A=n.add(R,A),A=n.mul(g,A),g=n.mul(O,g),I=n.mul(H,I),B=n.mul(M,B),O=n.sub(T,B),O=n.mul(M,O),O=n.add(O,I),I=n.add(T,T),T=n.add(I,T),T=n.add(T,B),T=n.mul(T,O),A=n.add(A,T),B=n.mul(P,y),B=n.add(B,B),T=n.mul(B,O),g=n.sub(g,T),I=n.mul(B,R),I=n.add(I,I),I=n.add(I,I),new _(g,A,I)}add(M){b(M);const{px:W,py:H,pz:K}=this,{px:P,py:y,pz:g}=M;let A=n.ZERO,I=n.ZERO,T=n.ZERO;const R=t.a,B=n.mul(t.b,Nx);let O=n.mul(W,P),S=n.mul(H,y),z=n.mul(K,g),Y=n.add(W,H),J=n.add(P,y);Y=n.mul(Y,J),J=n.add(O,S),Y=n.sub(Y,J),J=n.add(W,K);let ae=n.add(P,g);return J=n.mul(J,ae),ae=n.add(O,z),J=n.sub(J,ae),ae=n.add(H,K),A=n.add(y,g),ae=n.mul(ae,A),A=n.add(S,z),ae=n.sub(ae,A),T=n.mul(R,J),A=n.mul(B,z),T=n.add(A,T),A=n.sub(S,T),T=n.add(S,T),I=n.mul(A,T),S=n.add(O,O),S=n.add(S,O),z=n.mul(R,z),J=n.mul(B,J),S=n.add(S,z),z=n.sub(O,z),z=n.mul(R,z),J=n.add(J,z),O=n.mul(S,J),I=n.add(I,O),O=n.mul(ae,J),A=n.mul(Y,A),A=n.sub(A,O),O=n.mul(Y,S),T=n.mul(ae,T),T=n.add(T,O),new _(A,I,T)}subtract(M){return this.add(M.negate())}is0(){return this.equals(_.ZERO)}multiply(M){const{endo:W}=e;if(!r.isValidNot0(M))throw new Error("invalid scalar: out of range");let H,K;const P=y=>U.wNAFCached(this,y,_.normalizeZ);if(W){const{k1neg:y,k1:g,k2neg:A,k2:I}=W.splitScalar(M),{p:T,f:R}=P(g),{p:B,f:O}=P(I);K=R.add(O),H=N(W.beta,T,B,y,A)}else{const{p:y,f:g}=P(M);H=y,K=g}return _.normalizeZ([H,K])[0]}multiplyUnsafe(M){const{endo:W}=e,H=this;if(!r.isValid(M))throw new Error("invalid scalar: out of range");if(M===y1||H.is0())return _.ZERO;if(M===w1)return H;if(U.hasPrecomputes(this))return this.multiply(M);if(W){const{k1neg:K,k1:P,k2neg:y,k2:g}=W.splitScalar(M),{p1:A,p2:I}=Xke(_,H,P,g);return N(W.beta,A,I,K,y)}else return U.wNAFCachedUnsafe(H,M)}multiplyAndAddUnsafe(M,W,H){const K=this.multiplyUnsafe(W).add(M.multiplyUnsafe(H));return K.is0()?void 0:K}toAffine(M){return x(this,M)}isTorsionFree(){const{isTorsionFree:M}=e;return s===w1?!0:M?M(_,this):U.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:M}=e;return s===w1?this:M?M(_,this):this.multiplyUnsafe(s)}toBytes(M=!0){return U_("isCompressed",M),this.assertValidity(),u(_,this,M)}toRawBytes(M=!0){return this.toBytes(M)}toHex(M=!0){return Gv(this.toBytes(M))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}_.BASE=new _(t.Gx,t.Gy,n.ONE),_.ZERO=new _(n.ZERO,n.ONE,n.ZERO),_.Fp=n,_.Fn=r;const L=r.BITS,U=Jke(_,e.endo?Math.ceil(L/2):L);return _}function JQ(t){return Uint8Array.of(t?2:3)}function mPe(t,e,n={}){$I(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||Pw,s=e.hmac||((H,...K)=>LI(e.hash,H,gp(...K))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(H){const K=a>>w1;return H>K}function u(H){return l(H)?o.neg(H):H}function d(H,K){if(!o.isValidNot0(K))throw new Error(`invalid signature ${H}: out of range 1..CURVE.n`)}class h{constructor(K,P,y){d("r",K),d("s",P),this.r=K,this.s=P,y!=null&&(this.recovery=y),Object.freeze(this)}static fromCompact(K){const P=o.BYTES,y=so("compactSignature",K,P*2);return new h(o.fromBytes(y.subarray(0,P)),o.fromBytes(y.subarray(P,P*2)))}static fromDER(K){const{r:P,s:y}=lu.toSig(so("DER",K));return new h(P,y)}assertValidity(){}addRecoveryBit(K){return new h(this.r,this.s,K)}recoverPublicKey(K){const P=i.ORDER,{r:y,s:g,recovery:A}=this;if(A==null||![0,1,2,3].includes(A))throw new Error("recovery id invalid");if(a*dPe<P&&A>1)throw new Error("recovery id is ambiguous for h>1 curve");const I=A===2||A===3?y+a:y;if(!i.isValid(I))throw new Error("recovery id 2 or 3 invalid");const T=i.toBytes(I),R=t.fromHex(gp(JQ((A&1)===0),T)),B=o.inv(I),O=w(so("msgHash",K)),S=o.create(-O*B),z=o.create(g*B),Y=t.BASE.multiplyUnsafe(S).add(R.multiplyUnsafe(z));if(Y.is0())throw new Error("point at infinify");return Y.assertValidity(),Y}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(K){if(K==="compact")return gp(o.toBytes(this.r),o.toBytes(this.s));if(K==="der")return S5(lu.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Gv(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Gv(this.toBytes("compact"))}}const f=QQ(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(H){try{return f(H),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const H=a;return Gke(r(qQ(H)),H)},precompute(H=8,K=t.BASE){return K.precompute(H,!1)}};function m(H,K=!0){return t.fromPrivateKey(H).toBytes(K)}function E(H){if(typeof H=="bigint")return!1;if(H instanceof t)return!0;const K=so("key",H).length,P=i.BYTES,y=P+1,g=2*P+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===y))return K===y||K===g}function b(H,K,P=!0){if(E(H)===!0)throw new Error("first arg must be private key");if(E(K)===!1)throw new Error("second arg must be public key");return t.fromHex(K).multiply(f(H)).toBytes(P)}const x=e.bits2int||function(H){if(H.length>8192)throw new Error("input is too large");const K=FI(H),P=H.length*8-c;return P>0?K>>BigInt(P):K},w=e.bits2int_modN||function(H){return o.create(x(H))},N=jI(c);function _(H){return BO("num < 2^"+c,H,y1,N),o.toBytes(H)}function L(H,K,P=U){if(["recovered","canonical"].some(Y=>Y in P))throw new Error("sign() legacy options not supported");const{hash:y}=e;let{lowS:g,prehash:A,extraEntropy:I}=P;g==null&&(g=!0),H=so("msgHash",H),qj(P),A&&(H=so("prehashed msgHash",y(H)));const T=w(H),R=f(K),B=[_(R),_(T)];if(I!=null&&I!==!1){const Y=I===!0?r(i.BYTES):I;B.push(so("extraEntropy",Y))}const O=gp(...B),S=T;function z(Y){const J=x(Y);if(!o.isValidNot0(J))return;const ae=o.inv(J),pe=t.BASE.multiply(J).toAffine(),ve=o.create(pe.x);if(ve===y1)return;const de=o.create(ae*o.create(S+ve*R));if(de===y1)return;let $e=(pe.x===ve?0:2)|Number(pe.y&w1),Te=de;return g&&l(de)&&(Te=u(de),$e^=1),new h(ve,Te,$e)}return{seed:O,k2sig:z}}const U={lowS:e.lowS,prehash:!1},F={lowS:e.lowS,prehash:!1};function M(H,K,P=U){const{seed:y,k2sig:g}=L(H,K,P);return Fke(e.hash.outputLen,o.BYTES,s)(y,g)}t.BASE.precompute(8);function W(H,K,P,y=F){const g=H;K=so("msgHash",K),P=so("publicKey",P),qj(y);const{lowS:A,prehash:I,format:T}=y;if("strict"in y)throw new Error("options.strict was renamed to lowS");if(T!==void 0&&!["compact","der","js"].includes(T))throw new Error('format must be "compact", "der" or "js"');const R=typeof g=="string"||E5(g),B=!R&&!T&&typeof g=="object"&&g!==null&&typeof g.r=="bigint"&&typeof g.s=="bigint";if(!R&&!B)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let O,S;try{if(B)if(T===void 0||T==="js")O=new h(g.r,g.s);else throw new Error("invalid format");if(R){try{T!=="compact"&&(O=h.fromDER(g))}catch($e){if(!($e instanceof lu.Err))throw $e}!O&&T!=="der"&&(O=h.fromCompact(g))}S=t.fromHex(P)}catch{return!1}if(!O||A&&O.hasHighS())return!1;I&&(K=e.hash(K));const{r:z,s:Y}=O,J=w(K),ae=o.inv(Y),pe=o.create(J*ae),ve=o.create(z*ae),de=t.BASE.multiplyUnsafe(pe).add(S.multiplyUnsafe(ve));return de.is0()?!1:o.create(de.x)===z}return Object.freeze({getPublicKey:m,getSharedSecret:b,sign:M,verify:W,utils:p,Point:t,Signature:h})}function gPe(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=Rw(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function yPe(t){const{CURVE:e,curveOpts:n}=gPe(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function wPe(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function bPe(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=yPe(t),s=pPe(e,n),i=mPe(s,r,n);return wPe(t,i)}function UO(t,e){const n=r=>bPe({...t,hash:r});return{...n(e),create:n}}const XQ={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},eJ={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},tJ={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},vPe=Rw(XQ.p),EPe=Rw(eJ.p),APe=Rw(tJ.p),xPe=UO({...XQ,Fp:vPe,lowS:!1},BI);UO({...eJ,Fp:EPe,lowS:!1},kTe),UO({...tJ,Fp:APe,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},TTe);const SPe=xPe,nJ="base10",zi="base16",uo="base64pad",Zd="base64url",mA="utf8",rJ=0,ju=1,gA=2,CPe=0,Gj=1,b1=12,k5=32;function _Pe(){const t=LO.utils.randomPrivateKey(),e=LO.getPublicKey(t);return{privateKey:xo(t,zi),publicKey:xo(e,zi)}}function FO(){const t=Pw(k5);return xo(t,zi)}function IPe(t,e){const n=LO.getSharedSecret(Oa(t,zi),Oa(e,zi)),r=Bke(UI,n,void 0,void 0,k5);return xo(r,zi)}function nC(t){const e=UI(Oa(t,zi));return xo(e,zi)}function _a(t){const e=UI(Oa(t,mA));return xo(e,zi)}function sJ(t){return Oa(`${t}`,nJ)}function gm(t){return Number(xo(t,nJ))}function iJ(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function oJ(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function NPe(t){const e=sJ(typeof t.type<"u"?t.type:rJ);if(gm(e)===ju&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?Oa(t.senderPublicKey,zi):void 0,r=typeof t.iv<"u"?Oa(t.iv,zi):Pw(b1),s=Oa(t.symKey,zi),i=UQ(s,r).encrypt(Oa(t.message,mA)),o=aJ({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===Zd?iJ(o):o}function TPe(t){const e=Oa(t.symKey,zi),{sealed:n,iv:r}=Zv({encoded:t.encoded,encoding:t.encoding}),s=UQ(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return xo(s,mA)}function kPe(t,e){const n=sJ(gA),r=Pw(b1),s=Oa(t,mA),i=aJ({type:n,sealed:s,iv:r});return e===Zd?iJ(i):i}function PPe(t,e){const{sealed:n}=Zv({encoded:t,encoding:e});return xo(n,mA)}function aJ(t){if(gm(t.type)===gA)return xo(m1([t.type,t.sealed]),uo);if(gm(t.type)===ju){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return xo(m1([t.type,t.senderPublicKey,t.iv,t.sealed]),uo)}return xo(m1([t.type,t.iv,t.sealed]),uo)}function Zv(t){const e=(t.encoding||uo)===Zd?oJ(t.encoded):t.encoded,n=Oa(e,uo),r=n.slice(CPe,Gj),s=Gj;if(gm(r)===ju){const c=s+k5,l=c+b1,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(gm(r)===gA){const c=n.slice(s),l=Pw(b1);return{type:r,sealed:c,iv:l}}const i=s+b1,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function RPe(t,e){const n=Zv({encoded:t,encoding:e==null?void 0:e.encoding});return cJ({type:gm(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?xo(n.senderPublicKey,zi):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function cJ(t){const e=(t==null?void 0:t.type)||rJ;if(e===ju){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function Yj(t){return t.type===ju&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function Zj(t){return t.type===gA}function OPe(t){const e=Ge.from(t.x,"base64"),n=Ge.from(t.y,"base64");return m1([new Uint8Array([4]),e,n])}function MPe(t,e){const[n,r,s]=t.split("."),i=Ge.from(oJ(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=UI(c),u=OPe(e);if(!SPe.verify(m1([o,a]),l,u))throw new Error("Invalid signature");return i3(t).payload}const DPe="irn";function j_(t){return(t==null?void 0:t.relay)||{protocol:DPe}}function l0(t){const e=bge[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function BPe(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function Qj(t){if(!t.includes("wc:")){const l=bQ(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:LPe(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:BPe(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function LPe(t){return t.startsWith("//")?t.substring(2):t}function UPe(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function Jj(t){const e=new URLSearchParams,n=UPe(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function Tx(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var FPe=Object.defineProperty,jPe=Object.defineProperties,$Pe=Object.getOwnPropertyDescriptors,Xj=Object.getOwnPropertySymbols,zPe=Object.prototype.hasOwnProperty,WPe=Object.prototype.propertyIsEnumerable,e$=(t,e,n)=>e in t?FPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,HPe=(t,e)=>{for(var n in e||(e={}))zPe.call(e,n)&&e$(t,n,e[n]);if(Xj)for(var n of Xj(e))WPe.call(e,n)&&e$(t,n,e[n]);return t},VPe=(t,e)=>jPe(t,$Pe(e));function Ow(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function KPe(t){const e=[];return Object.values(t).forEach(n=>{e.push(...Ow(n.accounts))}),e}function qPe(t,e){const n=[];return Object.values(t).forEach(r=>{Ow(r.accounts).includes(e)&&n.push(...r.methods)}),n}function GPe(t,e){const n=[];return Object.values(t).forEach(r=>{Ow(r.accounts).includes(e)&&n.push(...r.events)}),n}function zI(t){return t.includes(":")}function u0(t){return zI(t)?t.split(":")[0]:t}function t$(t){var e,n,r;const s={};if(!Nl(t))return s;for(const[i,o]of Object.entries(t)){const a=zI(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=u0(i);s[u]=VPe(HPe({},s[u]),{chains:Il(a,(e=s[u])==null?void 0:e.chains),methods:Il(c,(n=s[u])==null?void 0:n.methods),events:Il(l,(r=s[u])==null?void 0:r.events)})}return s}function YPe(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function n$(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=YPe(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Il(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function ZPe(t,e){var n,r,s,i,o,a;const c=t$(t),l=t$(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:Il((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Il((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:Il((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const QPe={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},JPe={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function _e(t,e){const{message:n,code:r}=JPe[t];return{message:e?`${n} ${e}`:n,code:r}}function Qn(t,e){const{message:n,code:r}=QPe[t];return{message:e?`${n} ${e}`:n,code:r}}function $u(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function Nl(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function os(t){return typeof t>"u"}function qr(t,e){return e&&os(t)?!0:typeof t=="string"&&!!t.trim().length}function P5(t,e){return e&&os(t)?!0:typeof t=="number"&&!isNaN(t)}function XPe(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return mp(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=Ow(a),d=n[o];(!mp(pQ(o,d),u)||!mp(d.methods,c)||!mp(d.events,l))&&(i=!1)}),i):!1}function $_(t){return qr(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function eRe(t){if(qr(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&$_(n)}}return!1}function tRe(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(qr(t,!1)){if(e(t))return!0;const n=bQ(t);return e(n)}}catch{}return!1}function nRe(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function rRe(t){return t==null?void 0:t.topic}function sRe(t,e){let n=null;return qr(t==null?void 0:t.publicKey,!1)||(n=_e("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function r$(t){let e=!0;return $u(t)?t.length&&(e=t.every(n=>qr(n,!1))):e=!1,e}function iRe(t,e,n){let r=null;return $u(e)&&e.length?e.forEach(s=>{r||$_(s)||(r=Qn("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):$_(t)||(r=Qn("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function oRe(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=iRe(s,pQ(s,i),`${e} ${n}`);o&&(r=o)}),r}function aRe(t,e){let n=null;return $u(t)?t.forEach(r=>{n||eRe(r)||(n=Qn("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Qn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function cRe(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=aRe(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function lRe(t,e){let n=null;return r$(t==null?void 0:t.methods)?r$(t==null?void 0:t.events)||(n=Qn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Qn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function lJ(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=lRe(r,`${e}, namespace`);s&&(n=s)}),n}function uRe(t,e,n){let r=null;if(t&&Nl(t)){const s=lJ(t,e);s&&(r=s);const i=oRe(t,e,n);i&&(r=i)}else r=_e("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function Dk(t,e){let n=null;if(t&&Nl(t)){const r=lJ(t,e);r&&(n=r);const s=cRe(t,e);s&&(n=s)}else n=_e("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function uJ(t){return qr(t.protocol,!0)}function dRe(t,e){let n=!1;return e&&!t?n=!0:t&&$u(t)&&t.length&&t.forEach(r=>{n=uJ(r)}),n}function hRe(t){return typeof t=="number"}function eo(t){return typeof t<"u"&&typeof t!==null}function fRe(t){return!(!t||typeof t!="object"||!t.code||!P5(t.code,!1)||!t.message||!qr(t.message,!1))}function pRe(t){return!(os(t)||!qr(t.method,!1))}function mRe(t){return!(os(t)||os(t.result)&&os(t.error)||!P5(t.id,!1)||!qr(t.jsonrpc,!1))}function gRe(t){return!(os(t)||!qr(t.name,!1))}function s$(t,e){return!(!$_(e)||!KPe(t).includes(e))}function yRe(t,e,n){return qr(n,!1)?qPe(t,e).includes(n):!1}function wRe(t,e,n){return qr(n,!1)?GPe(t,e).includes(n):!1}function i$(t,e,n){let r=null;const s=bRe(t),i=vRe(e),o=Object.keys(s),a=Object.keys(i),c=o$(Object.keys(t)),l=o$(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=_e("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),mp(o,a)||(r=_e("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=Ow(e[d].accounts);h.includes(d)||(r=_e("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(mp(s[d].methods,i[d].methods)?mp(s[d].events,i[d].events)||(r=_e("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=_e("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function bRe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function o$(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function vRe(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=Ow(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function ERe(t,e){return P5(t,!1)&&t<=e.max&&t>=e.min}function a$(){const t=fA();return new Promise(e=>{switch(t){case Go.browser:e(ARe());break;case Go.reactNative:e(xRe());break;case Go.node:e(SRe());break;default:e(!0)}})}function ARe(){return kw()&&(navigator==null?void 0:navigator.onLine)}async function xRe(){if(cf()&&typeof globalThis<"u"&&globalThis!=null&&globalThis.NetInfo){const t=await(globalThis==null?void 0:globalThis.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function SRe(){return!0}function CRe(t){switch(fA()){case Go.browser:_Re(t);break;case Go.reactNative:IRe(t);break}}function _Re(t){!cf()&&kw()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function IRe(t){cf()&&typeof globalThis<"u"&&globalThis!=null&&globalThis.NetInfo&&(globalThis==null||globalThis.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function NRe(){var t;return kw()&&om()?((t=om())==null?void 0:t.visibilityState)==="visible":!0}const Bk={};class db{static get(e){return Bk[e]}static set(e,n){Bk[e]=n}static delete(e){delete Bk[e]}}function TRe(t){const e=Im.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function kRe({publicKey:t,signature:e,payload:n}){var r;const s=jO(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=ORe(n.address),a=n.era==="00"?new Uint8Array([0]):jO(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${RRe(n.tip)}`),d=DRe(u),h=new Uint8Array([0,...t,o,...e,...a,...l,...d,...s]),f=MRe(h.length+1);return new Uint8Array([...f,i,...h])}function PRe(t){const e=jO(t),n=ENe.blake2b(e,void 0,32);return"0x"+Ge.from(n).toString("hex")}function jO(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function RRe(t){return t.startsWith("0x")?t.slice(2):t}function ORe(t){const e=Im.decode(t)[0];return e===42?0:e===60?2:1}function MRe(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function DRe(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function BRe(t){const e=Uint8Array.from(Ge.from(t.signature,"hex")),n=TRe(t.transaction.address),r=kRe({publicKey:n,signature:e,payload:t.transaction}),s=Ge.from(r).toString("hex");return PRe(s)}const dJ="wc",hJ=2,z_="core",kl=`${dJ}@2:${z_}:`,LRe={name:z_,logger:"error"},URe={database:":memory:"},FRe="crypto",c$="client_ed25519_seed",jRe=Ce.ONE_DAY,$Re="keychain",zRe="0.3",WRe="messages",HRe="0.3",VRe=Ce.SIX_HOURS,KRe="publisher",fJ="irn",qRe="error",pJ="wss://relay.walletconnect.org",GRe="relayer",br={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},YRe="_subscription",da={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},ZRe=.1,$O="2.21.7",Vn={link_mode:"link_mode",relay:"relay"},rC={inbound:"inbound",outbound:"outbound"},QRe="0.3",JRe="WALLETCONNECT_CLIENT_ID",l$="WALLETCONNECT_LINK_MODE_APPS",Ro={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},XRe="subscription",e3e="0.3",t3e="pairing",n3e="0.3",hb={wc_pairingDelete:{req:{ttl:Ce.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Ce.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Ce.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Ce.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Ce.ONE_DAY,prompt:!1,tag:0},res:{ttl:Ce.ONE_DAY,prompt:!1,tag:0}}},zf={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Ka={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},r3e="history",s3e="0.3",i3e="expirer",ga={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},o3e="0.3",a3e="verify-api",c3e="https://verify.walletconnect.com",mJ="https://verify.walletconnect.org",v1=mJ,l3e=`${v1}/v3`,u3e=[c3e,mJ],d3e="echo",h3e="https://echo.walletconnect.com",$c={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Xl={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Nd={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},fb={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},gf={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},pb={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},f3e=.1,p3e="event-client",m3e=86400,g3e="https://pulse.walletconnect.org/batch";function y3e(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,E=0,b=0,x=p.length;b!==x&&p[b]===0;)b++,m++;for(var w=(x-b)*u+1>>>0,N=new Uint8Array(w);b!==x;){for(var _=p[b],L=0,U=w-1;(_!==0||L<E)&&U!==-1;U--,L++)_+=256*N[U]>>>0,N[U]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");E=L,b++}for(var F=w-E;F!==w&&N[F]===0;)F++;for(var M=c.repeat(m);F<w;++F)M+=t.charAt(N[F]);return M}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var E=0,b=0;p[m]===c;)E++,m++;for(var x=(p.length-m)*l+1>>>0,w=new Uint8Array(x);p[m];){var N=n[p.charCodeAt(m)];if(N===255)return;for(var _=0,L=x-1;(N!==0||_<b)&&L!==-1;L--,_++)N+=a*w[L]>>>0,w[L]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");b=_,m++}if(p[m]!==" "){for(var U=x-b;U!==x&&w[U]===0;)U++;for(var F=new Uint8Array(E+(x-U)),M=E;U!==x;)F[M++]=w[U++];return F}}}function f(p){var m=h(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var w3e=y3e,b3e=w3e;const gJ=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},v3e=t=>new TextEncoder().encode(t),E3e=t=>new TextDecoder().decode(t);class A3e{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class x3e{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return yJ(this,e)}}class S3e{constructor(e){this.decoders=e}or(e){return yJ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const yJ=(t,e)=>new S3e({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class C3e{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new A3e(e,n,r),this.decoder=new x3e(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const WI=({name:t,prefix:e,encode:n,decode:r})=>new C3e(t,e,n,r),yA=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=b3e(n,e);return WI({prefix:t,name:e,encode:r,decode:i=>gJ(s(i))})},_3e=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},I3e=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Gs=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>WI({prefix:e,name:t,encode(s){return I3e(s,r,n)},decode(s){return _3e(s,r,n,t)}}),N3e=WI({prefix:"\0",name:"identity",encode:t=>E3e(t),decode:t=>v3e(t)});var T3e=Object.freeze({__proto__:null,identity:N3e});const k3e=Gs({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var P3e=Object.freeze({__proto__:null,base2:k3e});const R3e=Gs({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var O3e=Object.freeze({__proto__:null,base8:R3e});const M3e=yA({prefix:"9",name:"base10",alphabet:"0123456789"});var D3e=Object.freeze({__proto__:null,base10:M3e});const B3e=Gs({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),L3e=Gs({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var U3e=Object.freeze({__proto__:null,base16:B3e,base16upper:L3e});const F3e=Gs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),j3e=Gs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),$3e=Gs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),z3e=Gs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),W3e=Gs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),H3e=Gs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),V3e=Gs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),K3e=Gs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),q3e=Gs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var G3e=Object.freeze({__proto__:null,base32:F3e,base32upper:j3e,base32pad:$3e,base32padupper:z3e,base32hex:W3e,base32hexupper:H3e,base32hexpad:V3e,base32hexpadupper:K3e,base32z:q3e});const Y3e=yA({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Z3e=yA({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Q3e=Object.freeze({__proto__:null,base36:Y3e,base36upper:Z3e});const J3e=yA({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),X3e=yA({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var eOe=Object.freeze({__proto__:null,base58btc:J3e,base58flickr:X3e});const tOe=Gs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),nOe=Gs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),rOe=Gs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),sOe=Gs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var iOe=Object.freeze({__proto__:null,base64:tOe,base64pad:nOe,base64url:rOe,base64urlpad:sOe});const wJ=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),oOe=wJ.reduce((t,e,n)=>(t[n]=e,t),[]),aOe=wJ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function cOe(t){return t.reduce((e,n)=>(e+=oOe[n],e),"")}function lOe(t){const e=[];for(const n of t){const r=aOe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const uOe=WI({prefix:"🚀",name:"base256emoji",encode:cOe,decode:lOe});var dOe=Object.freeze({__proto__:null,base256emoji:uOe}),hOe=bJ,u$=128,fOe=127,pOe=~fOe,mOe=Math.pow(2,31);function bJ(t,e,n){e=e||[],n=n||0;for(var r=n;t>=mOe;)e[n++]=t&255|u$,t/=128;for(;t&pOe;)e[n++]=t&255|u$,t>>>=7;return e[n]=t|0,bJ.bytes=n-r+1,e}var gOe=zO,yOe=128,d$=127;function zO(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw zO.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&d$)<<s:(o&d$)*Math.pow(2,s),s+=7}while(o>=yOe);return zO.bytes=i-r,n}var wOe=Math.pow(2,7),bOe=Math.pow(2,14),vOe=Math.pow(2,21),EOe=Math.pow(2,28),AOe=Math.pow(2,35),xOe=Math.pow(2,42),SOe=Math.pow(2,49),COe=Math.pow(2,56),_Oe=Math.pow(2,63),IOe=function(t){return t<wOe?1:t<bOe?2:t<vOe?3:t<EOe?4:t<AOe?5:t<xOe?6:t<SOe?7:t<COe?8:t<_Oe?9:10},NOe={encode:hOe,decode:gOe,encodingLength:IOe},vJ=NOe;const h$=(t,e,n=0)=>(vJ.encode(t,e,n),e),f$=t=>vJ.encodingLength(t),WO=(t,e)=>{const n=e.byteLength,r=f$(t),s=r+f$(n),i=new Uint8Array(s+n);return h$(t,i,0),h$(n,i,r),i.set(e,s),new TOe(t,n,e,i)};class TOe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const EJ=({name:t,code:e,encode:n})=>new kOe(t,e,n);class kOe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?WO(this.code,n):n.then(r=>WO(this.code,r))}else throw Error("Unknown type, must be binary type")}}const AJ=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),POe=EJ({name:"sha2-256",code:18,encode:AJ("SHA-256")}),ROe=EJ({name:"sha2-512",code:19,encode:AJ("SHA-512")});var OOe=Object.freeze({__proto__:null,sha256:POe,sha512:ROe});const xJ=0,MOe="identity",SJ=gJ,DOe=t=>WO(xJ,SJ(t)),BOe={code:xJ,name:MOe,encode:SJ,digest:DOe};var LOe=Object.freeze({__proto__:null,identity:BOe});new TextEncoder,new TextDecoder;const p$={...T3e,...P3e,...O3e,...D3e,...U3e,...G3e,...Q3e,...eOe,...iOe,...dOe};({...OOe,...LOe});function CJ(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function UOe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?CJ(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function _J(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const m$=_J("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Lk=_J("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=UOe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),FOe={utf8:m$,"utf-8":m$,hex:p$.base16,latin1:Lk,ascii:Lk,binary:Lk,...p$};function jOe(t,e="utf8"){const n=FOe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?CJ(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var $Oe=Object.defineProperty,zOe=(t,e,n)=>e in t?$Oe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fc=(t,e,n)=>zOe(t,typeof e!="symbol"?e+"":e,n);class WOe{constructor(e,n){this.core=e,this.logger=n,Fc(this,"keychain",new Map),Fc(this,"name",$Re),Fc(this,"version",zRe),Fc(this,"initialized",!1),Fc(this,"storagePrefix",kl),Fc(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Fc(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Fc(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),Fc(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=_e("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),Fc(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Si(n,this.name)}get context(){return _o(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,NO(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?TO(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var HOe=Object.defineProperty,VOe=(t,e,n)=>e in t?HOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_s=(t,e,n)=>VOe(t,typeof e!="symbol"?e+"":e,n);class KOe{constructor(e,n,r){this.core=e,this.logger=n,_s(this,"name",FRe),_s(this,"keychain"),_s(this,"randomSessionIdentifier",FO()),_s(this,"initialized",!1),_s(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),_s(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),_s(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=WB(s);return CK(i.publicKey)}),_s(this,"generateKeyPair",()=>{this.isInitialized();const s=_Pe();return this.setPrivateKey(s.publicKey,s.privateKey)}),_s(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=WB(i),a=this.randomSessionIdentifier;return await Gpe(a,s,jRe,o)}),_s(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=IPe(a,i);return this.setSymKey(c,o)}),_s(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||nC(s);return await this.keychain.set(o,s),o}),_s(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),_s(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),_s(this,"encode",async(s,i,o)=>{this.isInitialized();const a=cJ(o),c=Yu(i);if(Zj(a))return kPe(c,o==null?void 0:o.encoding);if(Yj(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return NPe({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),_s(this,"decode",async(s,i,o)=>{this.isInitialized();const a=RPe(i,o);if(Zj(a)){const c=PPe(i,o==null?void 0:o.encoding);return im(c)}if(Yj(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=TPe({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return im(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),_s(this,"getPayloadType",(s,i=uo)=>{const o=Zv({encoded:s,encoding:i});return gm(o.type)}),_s(this,"getPayloadSenderPublicKey",(s,i=uo)=>{const o=Zv({encoded:s,encoding:i});return o.senderPublicKey?xo(o.senderPublicKey,zi):void 0}),this.core=e,this.logger=Si(n,this.name),this.keychain=r||new WOe(this.core,this.logger)}get context(){return _o(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(c$)}catch{e=FO(),await this.keychain.set(c$,e)}return jOe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var qOe=Object.defineProperty,GOe=Object.defineProperties,YOe=Object.getOwnPropertyDescriptors,g$=Object.getOwnPropertySymbols,ZOe=Object.prototype.hasOwnProperty,QOe=Object.prototype.propertyIsEnumerable,HO=(t,e,n)=>e in t?qOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,JOe=(t,e)=>{for(var n in e||(e={}))ZOe.call(e,n)&&HO(t,n,e[n]);if(g$)for(var n of g$(e))QOe.call(e,n)&&HO(t,n,e[n]);return t},XOe=(t,e)=>GOe(t,YOe(e)),ko=(t,e,n)=>HO(t,typeof e!="symbol"?e+"":e,n);class e4e extends V2e{constructor(e,n){super(e,n),this.logger=e,this.core=n,ko(this,"messages",new Map),ko(this,"messagesWithoutClientAck",new Map),ko(this,"name",WRe),ko(this,"version",HRe),ko(this,"initialized",!1),ko(this,"storagePrefix",kl),ko(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),ko(this,"set",async(r,s,i)=>{this.isInitialized();const o=_a(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===rC.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,XOe(JOe({},c),{[o]:s}))}return await this.persist(),o}),ko(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),ko(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),ko(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=_a(s);return typeof i[o]<"u"}),ko(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=_a(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),ko(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Si(e,this.name),this.core=n}get context(){return _o(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,NO(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,NO(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?TO(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?TO(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var t4e=Object.defineProperty,n4e=Object.defineProperties,r4e=Object.getOwnPropertyDescriptors,y$=Object.getOwnPropertySymbols,s4e=Object.prototype.hasOwnProperty,i4e=Object.prototype.propertyIsEnumerable,VO=(t,e,n)=>e in t?t4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ig=(t,e)=>{for(var n in e||(e={}))s4e.call(e,n)&&VO(t,n,e[n]);if(y$)for(var n of y$(e))i4e.call(e,n)&&VO(t,n,e[n]);return t},w$=(t,e)=>n4e(t,r4e(e)),ha=(t,e,n)=>VO(t,typeof e!="symbol"?e+"":e,n);class o4e extends K2e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,ha(this,"events",new ja.EventEmitter),ha(this,"name",KRe),ha(this,"queue",new Map),ha(this,"publishTimeout",Ce.toMiliseconds(Ce.ONE_MINUTE)),ha(this,"initialPublishTimeout",Ce.toMiliseconds(Ce.ONE_SECOND*15)),ha(this,"needsTransportRestart",!1),ha(this,"publish",async(r,s,i)=>{var o,a,c,l,u;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const d=(i==null?void 0:i.ttl)||VRe,h=(i==null?void 0:i.prompt)||!1,f=(i==null?void 0:i.tag)||0,p=(i==null?void 0:i.id)||Ah().toString(),m=l0(j_().protocol),E={id:p,method:(i==null?void 0:i.publishMethod)||m.publish,params:ig({topic:r,message:s,ttl:d,prompt:h,tag:f,attestation:i==null?void 0:i.attestation},(i==null?void 0:i.tvf)&&{tvf:i.tvf})},b=`Failed to publish payload, please try again. id:${p} tag:${f}`;try{os((o=E.params)==null?void 0:o.prompt)&&((a=E.params)==null||delete a.prompt),os((c=E.params)==null?void 0:c.tag)&&((l=E.params)==null||delete l.tag);const x=new Promise(async w=>{const N=({id:L})=>{var U;((U=E.id)==null?void 0:U.toString())===L.toString()&&(this.removeRequestFromQueue(L),this.relayer.events.removeListener(br.publish,N),w())};this.relayer.events.on(br.publish,N);const _=wl(new Promise((L,U)=>{this.rpcPublish(E,i).then(L).catch(F=>{this.logger.warn(F,F==null?void 0:F.message),U(F)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${p} tag:${f}`);try{await _,this.events.removeListener(br.publish,N)}catch(L){this.queue.set(p,{request:E,opts:i,attempt:1}),this.logger.warn(L,L==null?void 0:L.message)}});this.logger.trace({type:"method",method:"publish",params:{id:p,topic:r,message:s,opts:i}}),await wl(x,this.publishTimeout,b)}catch(x){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(x),(u=i==null?void 0:i.internal)!=null&&u.throwOnFailedPublish)throw x}finally{this.queue.delete(p)}}),ha(this,"publishCustom",async r=>{var s,i,o,a,c;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:r});const{payload:l,opts:u={}}=r,{attestation:d,tvf:h,publishMethod:f,prompt:p,tag:m,ttl:E=Ce.FIVE_MINUTES}=u,b=u.id||Ah().toString(),x=l0(j_().protocol),w=f||x.publish,N={id:b,method:w,params:ig(w$(ig({},l),{ttl:E,prompt:p,tag:m,attestation:d}),h)},_=`Failed to publish custom payload, please try again. id:${b} tag:${m}`;try{os((s=N.params)==null?void 0:s.prompt)&&((i=N.params)==null||delete i.prompt),os((o=N.params)==null?void 0:o.tag)&&((a=N.params)==null||delete a.tag);const L=new Promise(async U=>{const F=({id:W})=>{var H;((H=N.id)==null?void 0:H.toString())===W.toString()&&(this.removeRequestFromQueue(W),this.relayer.events.removeListener(br.publish,F),U())};this.relayer.events.on(br.publish,F);const M=wl(new Promise((W,H)=>{this.rpcPublish(N,u).then(W).catch(K=>{this.logger.warn(K,K==null?void 0:K.message),H(K)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${w} id:${b} tag:${m}`);try{await M,this.events.removeListener(br.publish,F)}catch(W){this.queue.set(b,{request:N,opts:u,attempt:1}),this.logger.warn(W,W==null?void 0:W.message)}});this.logger.trace({type:"method",method:"publish",params:{id:b,payload:l,opts:u}}),await wl(L,this.publishTimeout,_)}catch(L){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(L),(c=u==null?void 0:u.internal)!=null&&c.throwOnFailedPublish)throw L}finally{this.queue.delete(b)}}),ha(this,"on",(r,s)=>{this.events.on(r,s)}),ha(this,"once",(r,s)=>{this.events.once(r,s)}),ha(this,"off",(r,s)=>{this.events.off(r,s)}),ha(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=Si(n,this.name),this.registerEventListeners()}get context(){return _o(this.logger)}async rpcPublish(e,n){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:e});const r=await this.relayer.request(e);return this.relayer.events.emit(br.publish,ig(ig({},e),n)),this.logger.debug("Successfully Published Payload"),r}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{var r;const s=e.attempt+1;this.queue.set(n,w$(ig({},e),{attempt:s})),this.logger.warn({},`Publisher: queue->publishing: ${e.request.id}, tag: ${(r=e.request.params)==null?void 0:r.tag}, attempt: ${s}`),await this.rpcPublish(e.request,e.opts),this.logger.warn({},`Publisher: queue->published: ${e.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Tm.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(br.connection_stalled);return}this.checkQueue()}),this.relayer.on(br.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var a4e=Object.defineProperty,c4e=(t,e,n)=>e in t?a4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,og=(t,e,n)=>c4e(t,typeof e!="symbol"?e+"":e,n);class l4e{constructor(){og(this,"map",new Map),og(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),og(this,"get",e=>this.map.get(e)||[]),og(this,"exists",(e,n)=>this.get(e).includes(n)),og(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),og(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var u4e=Object.defineProperty,d4e=Object.defineProperties,h4e=Object.getOwnPropertyDescriptors,b$=Object.getOwnPropertySymbols,f4e=Object.prototype.hasOwnProperty,p4e=Object.prototype.propertyIsEnumerable,KO=(t,e,n)=>e in t?u4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mb=(t,e)=>{for(var n in e||(e={}))f4e.call(e,n)&&KO(t,n,e[n]);if(b$)for(var n of b$(e))p4e.call(e,n)&&KO(t,n,e[n]);return t},Uk=(t,e)=>d4e(t,h4e(e)),Rn=(t,e,n)=>KO(t,typeof e!="symbol"?e+"":e,n);class m4e extends Y2e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Rn(this,"subscriptions",new Map),Rn(this,"topicMap",new l4e),Rn(this,"events",new ja.EventEmitter),Rn(this,"name",XRe),Rn(this,"version",e3e),Rn(this,"pending",new Map),Rn(this,"cached",[]),Rn(this,"initialized",!1),Rn(this,"storagePrefix",kl),Rn(this,"subscribeTimeout",Ce.toMiliseconds(Ce.ONE_MINUTE)),Rn(this,"initialSubscribeTimeout",Ce.toMiliseconds(Ce.ONE_SECOND*15)),Rn(this,"clientId"),Rn(this,"batchSubscribeTopicsLimit",500),Rn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Rn(this,"subscribe",async(r,s)=>{var i;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const o=j_(s),a={topic:r,relay:o,transportType:s==null?void 0:s.transportType};(i=s==null?void 0:s.internal)!=null&&i.skipSubscribe||this.pending.set(r,a);const c=await this.rpcSubscribe(r,o,s);return typeof c=="string"&&(this.onSubscribe(c,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),c}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}}),Rn(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Rn(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Rn(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),Rn(this,"on",(r,s)=>{this.events.on(r,s)}),Rn(this,"once",(r,s)=>{this.events.once(r,s)}),Rn(this,"off",(r,s)=>{this.events.off(r,s)}),Rn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Rn(this,"start",async()=>{await this.onConnect()}),Rn(this,"stop",async()=>{await this.onDisconnect()}),Rn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Rn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Rn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Tm.pulse,async()=>{await this.checkPending()}),this.events.on(Ro.created,async r=>{const s=Ro.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Ro.deleted,async r=>{const s=Ro.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=Si(n,this.name),this.clientId=""}get context(){return _o(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=j_(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=Qn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s,i;const o=await this.getSubscriptionId(e);if((s=r==null?void 0:r.internal)!=null&&s.skipSubscribe)return o;(!r||(r==null?void 0:r.transportType)===Vn.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const a={method:l0(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a});const c=(i=r==null?void 0:r.internal)==null?void 0:i.throwOnFailedPublish;try{if((r==null?void 0:r.transportType)===Vn.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(a).catch(d=>this.logger.warn(d))},Ce.toMiliseconds(Ce.ONE_SECOND)),o;const l=new Promise(async d=>{const h=f=>{f.topic===e&&(this.events.removeListener(Ro.created,h),d(f.id))};this.events.on(Ro.created,h);try{const f=await wl(new Promise((p,m)=>{this.relayer.request(a).catch(E=>{this.logger.warn(E,E==null?void 0:E.message),m(E)}).then(p)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Ro.created,h),d(f)}catch{}}),u=await wl(l,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!u&&c)throw new Error(`Subscribing to ${e} failed, please try again`);return u?o:null}catch(l){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(br.connection_stalled),c)throw l}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:l0(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await wl(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(br.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:l0(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await wl(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(br.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:l0(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,Uk(mb({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,mb({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,mb({},n)),this.topicMap.set(n.topic,e),this.events.emit(Ro.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=_e("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Ro.deleted,Uk(mb({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ro.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Ro.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size&&!e.every(n=>{var r;return n.topic===((r=this.subscriptions.get(n.id))==null?void 0:r.topic)})){const{message:n}=_e("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>Uk(mb({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await qNe(Ce.toMiliseconds(Ce.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return _a(e+await this.getClientId())}}var g4e=Object.defineProperty,v$=Object.getOwnPropertySymbols,y4e=Object.prototype.hasOwnProperty,w4e=Object.prototype.propertyIsEnumerable,qO=(t,e,n)=>e in t?g4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,E$=(t,e)=>{for(var n in e||(e={}))y4e.call(e,n)&&qO(t,n,e[n]);if(v$)for(var n of v$(e))w4e.call(e,n)&&qO(t,n,e[n]);return t},Jt=(t,e,n)=>qO(t,typeof e!="symbol"?e+"":e,n);class b4e extends q2e{constructor(e){super(e),Jt(this,"protocol","wc"),Jt(this,"version",2),Jt(this,"core"),Jt(this,"logger"),Jt(this,"events",new ja.EventEmitter),Jt(this,"provider"),Jt(this,"messages"),Jt(this,"subscriber"),Jt(this,"publisher"),Jt(this,"name",GRe),Jt(this,"transportExplicitlyClosed",!1),Jt(this,"initialized",!1),Jt(this,"connectionAttemptInProgress",!1),Jt(this,"relayUrl"),Jt(this,"projectId"),Jt(this,"packageName"),Jt(this,"bundleId"),Jt(this,"hasExperiencedNetworkDisruption",!1),Jt(this,"pingTimeout"),Jt(this,"heartBeatTimeout",Ce.toMiliseconds(Ce.THIRTY_SECONDS+Ce.FIVE_SECONDS)),Jt(this,"reconnectTimeout"),Jt(this,"connectPromise"),Jt(this,"reconnectInProgress",!1),Jt(this,"requestsInFlight",[]),Jt(this,"connectTimeout",Ce.toMiliseconds(Ce.ONE_SECOND*15)),Jt(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||Ah().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),Jt(this,"resetPingTimeout",()=>{B_()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),Jt(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),Jt(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(br.connect)}),Jt(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),Jt(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(br.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Jt(this,"registerProviderListeners",()=>{this.provider.on(da.payload,this.onPayloadHandler),this.provider.on(da.connect,this.onConnectHandler),this.provider.on(da.disconnect,this.onDisconnectHandler),this.provider.on(da.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Si(e.logger,this.name):YE(Aw({level:e.logger||qRe})),this.messages=new e4e(this.logger,e.core),this.subscriber=new m4e(this,this.logger),this.publisher=new o4e(this,this.logger),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||pJ,PNe()?this.packageName=yj():RNe()&&(this.bundleId=yj()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return _o(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Vn.relay},rC.outbound)}async publishCustom(e){this.isInitialized(),await this.publisher.publishCustom(e)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Ro.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Ro.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,E$({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await wl(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await a$())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=es(Ce.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(br.message,e),await this.recordMessageEvent(e,rC.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(da.disconnect,i),await wl(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(da.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(da.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(da.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,Ce.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(B_())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new $a(new a0e(LNe({sdkVersion:$O,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),fD(e)){if(!e.method.endsWith(YRe))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:Vn.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(E$({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else aI(e)&&this.events.emit(br.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,rC.inbound),this.events.emit(br.message,e))}async acknowledgePayload(e){const n=sv(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(da.payload,this.onPayloadHandler),this.provider.off(da.connect,this.onConnectHandler),this.provider.off(da.disconnect,this.onDisconnectHandler),this.provider.off(da.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await a$();CRe(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Tm.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&NRe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(br.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},Ce.toMiliseconds(ZRe)))))}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function v4e(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function A$(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function x$(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const E4e="[object RegExp]",A4e="[object String]",x4e="[object Number]",S4e="[object Boolean]",S$="[object Arguments]",C4e="[object Symbol]",_4e="[object Date]",I4e="[object Map]",N4e="[object Set]",T4e="[object Array]",k4e="[object Function]",P4e="[object ArrayBuffer]",Fk="[object Object]",R4e="[object Error]",O4e="[object DataView]",M4e="[object Uint8Array]",D4e="[object Uint8ClampedArray]",B4e="[object Uint16Array]",L4e="[object Uint32Array]",U4e="[object BigUint64Array]",F4e="[object Int8Array]",j4e="[object Int16Array]",$4e="[object Int32Array]",z4e="[object BigInt64Array]",W4e="[object Float32Array]",H4e="[object Float64Array]";function V4e(){}function C$(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function K4e(t,e,n){return Wb(t,e,void 0,void 0,void 0,void 0,n)}function Wb(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return E1(t,e,i,o)}return E1(t,e,i,o)}function E1(t,e,n,r){if(Object.is(t,e))return!0;let s=x$(t),i=x$(e);if(s===S$&&(s=Fk),i===S$&&(i=Fk),s!==i)return!1;switch(s){case A4e:return t.toString()===e.toString();case x4e:{const c=t.valueOf(),l=e.valueOf();return v4e(c,l)}case S4e:case _4e:case C4e:return Object.is(t.valueOf(),e.valueOf());case E4e:return t.source===e.source&&t.flags===e.flags;case k4e:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case I4e:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!Wb(l,e.get(c),c,t,e,n,r))return!1;return!0}case N4e:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>Wb(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case T4e:case M4e:case D4e:case B4e:case L4e:case U4e:case F4e:case j4e:case $4e:case z4e:case W4e:case H4e:{if(typeof Ge<"u"&&Ge.isBuffer(t)!==Ge.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!Wb(t[c],e[c],c,t,e,n,r))return!1;return!0}case P4e:return t.byteLength!==e.byteLength?!1:E1(new Uint8Array(t),new Uint8Array(e),n,r);case O4e:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:E1(new Uint8Array(t),new Uint8Array(e),n,r);case R4e:return t.name===e.name&&t.message===e.message;case Fk:{if(!(E1(t.constructor,e.constructor,n,r)||C$(t)&&C$(e)))return!1;const c=[...Object.keys(t),...A$(t)],l=[...Object.keys(e),...A$(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!Wb(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function q4e(t,e){return K4e(t,e,V4e)}var G4e=Object.defineProperty,_$=Object.getOwnPropertySymbols,Y4e=Object.prototype.hasOwnProperty,Z4e=Object.prototype.propertyIsEnumerable,GO=(t,e,n)=>e in t?G4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,I$=(t,e)=>{for(var n in e||(e={}))Y4e.call(e,n)&&GO(t,n,e[n]);if(_$)for(var n of _$(e))Z4e.call(e,n)&&GO(t,n,e[n]);return t},Ji=(t,e,n)=>GO(t,typeof e!="symbol"?e+"":e,n);class jm extends G2e{constructor(e,n,r,s=kl,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Ji(this,"map",new Map),Ji(this,"version",QRe),Ji(this,"cached",[]),Ji(this,"initialized",!1),Ji(this,"getKey"),Ji(this,"storagePrefix",kl),Ji(this,"recentlyDeleted",[]),Ji(this,"recentlyDeletedLimit",200),Ji(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!os(o)?this.map.set(this.getKey(o),o):nRe(o)?this.map.set(o.id,o):rRe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Ji(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Ji(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Ji(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>q4e(a[c],o[c]))):this.values)),Ji(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=I$(I$({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Ji(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Si(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return _o(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=_e("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=_e("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=_e("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Q4e=Object.defineProperty,J4e=(t,e,n)=>e in t?Q4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bt=(t,e,n)=>J4e(t,typeof e!="symbol"?e+"":e,n);class X4e{constructor(e,n){this.core=e,this.logger=n,Bt(this,"name",t3e),Bt(this,"version",n3e),Bt(this,"events",new eD),Bt(this,"pairings"),Bt(this,"initialized",!1),Bt(this,"storagePrefix",kl),Bt(this,"ignoredPayloadTypes",[ju]),Bt(this,"registeredMethods",[]),Bt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Bt(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Bt(this,"create",async r=>{this.isInitialized();const s=FO(),i=await this.core.crypto.setSymKey(s),o=es(Ce.FIVE_MINUTES),a={protocol:fJ},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=Jj({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(zf.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType,internal:r==null?void 0:r.internal}),{topic:i,uri:l}}),Bt(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[$c.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=Qj(r.uri);s.props.properties.topic=i,s.addTrace($c.pairing_uri_validation_success),s.addTrace($c.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace($c.existing_pairing),u.active)throw s.setError(Xl.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace($c.pairing_not_expired)}const d=c||es(Ce.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace($c.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(zf.create,h),s.addTrace($c.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace($c.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Xl.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(Xl.subscribe_pairing_topic_failure),f}return s.addTrace($c.subscribe_pairing_topic_success),h}),Bt(this,"activate",async({topic:r})=>{this.isInitialized();const s=es(Ce.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Bt(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Of();this.events.once(fn("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),Bt(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Bt(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Bt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Bt(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Qn("USER_DISCONNECTED")),await this.deletePairing(s))}),Bt(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return Jj({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Bt(this,"sendRequest",async(r,s,i)=>{const o=rl(s,i),a=await this.core.crypto.encode(r,o),c=hb[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Bt(this,"sendResult",async(r,s,i)=>{const o=sv(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=hb[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Bt(this,"sendError",async(r,s,i)=>{const o=oI(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=hb[c]?hb[c].res:hb.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Bt(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Qn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Bt(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Fd(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Bt(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Bt(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Bt(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(zf.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Bt(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Hc(s)?this.events.emit(fn("pairing_ping",i),{}):Sa(s)&&this.events.emit(fn("pairing_ping",i),{error:s.error})},500)}),Bt(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(zf.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Bt(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=Qn("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Bt(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Qn("WC_METHOD_UNSUPPORTED",r))}),Bt(this,"isValidPair",(r,s)=>{var i;if(!eo(r)){const{message:a}=_e("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Xl.malformed_pairing_uri),new Error(a)}if(!tRe(r.uri)){const{message:a}=_e("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Xl.malformed_pairing_uri),new Error(a)}const o=Qj(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=_e("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Xl.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=_e("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Xl.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&Ce.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(Xl.pairing_expired);const{message:a}=_e("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Bt(this,"isValidPing",async r=>{if(!eo(r)){const{message:i}=_e("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Bt(this,"isValidDisconnect",async r=>{if(!eo(r)){const{message:i}=_e("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Bt(this,"isValidPairingTopic",async r=>{if(!qr(r,!1)){const{message:s}=_e("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=_e("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Fd(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=_e("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=Si(n,this.name),this.pairings=new jm(this.core,this.logger,this.name,this.storagePrefix)}get context(){return _o(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(br.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==Vn.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);fD(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):aI(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(ga.expired,async e=>{const{topic:n}=wQ(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(zf.expire,{topic:n}))})}}var eMe=Object.defineProperty,tMe=(t,e,n)=>e in t?eMe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Is=(t,e,n)=>tMe(t,typeof e!="symbol"?e+"":e,n);class nMe extends H2e{constructor(e,n){super(e,n),this.core=e,this.logger=n,Is(this,"records",new Map),Is(this,"events",new ja.EventEmitter),Is(this,"name",r3e),Is(this,"version",s3e),Is(this,"cached",[]),Is(this,"initialized",!1),Is(this,"storagePrefix",kl),Is(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Is(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:es(Ce.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Ka.created,o)}),Is(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Sa(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(Ka.updated,s))}),Is(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),Is(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Ka.deleted,i)}}),this.persist()}),Is(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),Is(this,"on",(r,s)=>{this.events.on(r,s)}),Is(this,"once",(r,s)=>{this.events.once(r,s)}),Is(this,"off",(r,s)=>{this.events.off(r,s)}),Is(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Si(n,this.name)}get context(){return _o(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:rl(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=_e("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Ka.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=_e("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Ka.created,e=>{const n=Ka.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Ka.updated,e=>{const n=Ka.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Ka.deleted,e=>{const n=Ka.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(Tm.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{Ce.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Ka.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var rMe=Object.defineProperty,sMe=(t,e,n)=>e in t?rMe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ci=(t,e,n)=>sMe(t,typeof e!="symbol"?e+"":e,n);class iMe extends Z2e{constructor(e,n){super(e,n),this.core=e,this.logger=n,ci(this,"expirations",new Map),ci(this,"events",new ja.EventEmitter),ci(this,"name",i3e),ci(this,"version",o3e),ci(this,"cached",[]),ci(this,"initialized",!1),ci(this,"storagePrefix",kl),ci(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),ci(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),ci(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(ga.created,{target:i,expiration:o})}),ci(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),ci(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(ga.deleted,{target:s,expiration:i})}}),ci(this,"on",(r,s)=>{this.events.on(r,s)}),ci(this,"once",(r,s)=>{this.events.once(r,s)}),ci(this,"off",(r,s)=>{this.events.off(r,s)}),ci(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Si(n,this.name)}get context(){return _o(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return UNe(e);if(typeof e=="number")return FNe(e);const{message:n}=_e("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(ga.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=_e("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=_e("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;Ce.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(ga.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(Tm.pulse,()=>this.checkExpirations()),this.events.on(ga.created,e=>{const n=ga.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(ga.expired,e=>{const n=ga.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(ga.deleted,e=>{const n=ga.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var oMe=Object.defineProperty,aMe=(t,e,n)=>e in t?oMe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zr=(t,e,n)=>aMe(t,typeof e!="symbol"?e+"":e,n);class cMe extends Q2e{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,zr(this,"name",a3e),zr(this,"abortController"),zr(this,"isDevEnv"),zr(this,"verifyUrlV3",l3e),zr(this,"storagePrefix",kl),zr(this,"version",hJ),zr(this,"publicKey"),zr(this,"fetchPromise"),zr(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Ce.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),zr(this,"register",async s=>{if(!kw()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=om(),u=this.startAbortTimer(Ce.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",E),l.body.removeChild(m),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const m=l.createElement("iframe");m.src=c,m.style.display="none",m.addEventListener("error",p,{signal:this.abortController.signal});const E=b=>{if(b.data&&typeof b.data=="string")try{const x=JSON.parse(b.data);if(x.type==="verify_attestation"){if(i3(x.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(m),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",E),h(x.attestation===null?"":x.attestation)}}catch(x){this.logger.warn(x)}};l.body.appendChild(m),window.addEventListener("message",E,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),zr(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(i3(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),zr(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(Ce.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),zr(this,"getVerifyUrl",s=>{let i=s||v1;return u3e.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${v1}`),i=v1),i}),zr(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(Ce.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),zr(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),zr(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),zr(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),zr(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),zr(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),zr(this,"validateAttestation",(s,i)=>{const o=MPe(s,i.publicKey),a={hasExpired:Ce.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Si(n,this.name),this.abortController=new AbortController,this.isDevEnv=w5(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return _o(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Ce.toMiliseconds(e))}}var lMe=Object.defineProperty,uMe=(t,e,n)=>e in t?lMe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,N$=(t,e,n)=>uMe(t,typeof e!="symbol"?e+"":e,n);class dMe extends J2e{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,N$(this,"context",d3e),N$(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${h3e}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Si(n,this.context)}}var hMe=Object.defineProperty,T$=Object.getOwnPropertySymbols,fMe=Object.prototype.hasOwnProperty,pMe=Object.prototype.propertyIsEnumerable,YO=(t,e,n)=>e in t?hMe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gb=(t,e)=>{for(var n in e||(e={}))fMe.call(e,n)&&YO(t,n,e[n]);if(T$)for(var n of T$(e))pMe.call(e,n)&&YO(t,n,e[n]);return t},us=(t,e,n)=>YO(t,typeof e!="symbol"?e+"":e,n);class mMe extends X2e{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,us(this,"context",p3e),us(this,"storagePrefix",kl),us(this,"storageVersion",f3e),us(this,"events",new Map),us(this,"shouldPersist",!1),us(this,"init",async()=>{if(!w5())try{const s={eventId:bj(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:gQ(this.core.relayer.protocol,this.core.relayer.version,$O)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),us(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=bj(),u=this.core.projectId||"",d=Date.now(),h=gb({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),us(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return gb(gb({},a),this.setMethods(a.eventId))}),us(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),us(this,"setEventListeners",()=>{this.core.heartbeat.on(Tm.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{Ce.fromMiliseconds(Date.now())-Ce.fromMiliseconds(s.timestamp)>m3e&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),us(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),us(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),us(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),us(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),us(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,gb(gb({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),us(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),us(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${g3e}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${$O}${i}`,{method:"POST",body:JSON.stringify(s)})}),us(this,"getAppDomain",()=>mQ().url),this.logger=Si(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var gMe=Object.defineProperty,k$=Object.getOwnPropertySymbols,yMe=Object.prototype.hasOwnProperty,wMe=Object.prototype.propertyIsEnumerable,ZO=(t,e,n)=>e in t?gMe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,P$=(t,e)=>{for(var n in e||(e={}))yMe.call(e,n)&&ZO(t,n,e[n]);if(k$)for(var n of k$(e))wMe.call(e,n)&&ZO(t,n,e[n]);return t},Ln=(t,e,n)=>ZO(t,typeof e!="symbol"?e+"":e,n);let bMe=class IJ extends j2e{constructor(e){var n;super(e),Ln(this,"protocol",dJ),Ln(this,"version",hJ),Ln(this,"name",z_),Ln(this,"relayUrl"),Ln(this,"projectId"),Ln(this,"customStoragePrefix"),Ln(this,"events",new ja.EventEmitter),Ln(this,"logger"),Ln(this,"heartbeat"),Ln(this,"relayer"),Ln(this,"crypto"),Ln(this,"storage"),Ln(this,"history"),Ln(this,"expirer"),Ln(this,"pairing"),Ln(this,"verify"),Ln(this,"echoClient"),Ln(this,"linkModeSupportedApps"),Ln(this,"eventClient"),Ln(this,"initialized",!1),Ln(this,"logChunkController"),Ln(this,"on",(a,c)=>this.events.on(a,c)),Ln(this,"once",(a,c)=>this.events.once(a,c)),Ln(this,"off",(a,c)=>this.events.off(a,c)),Ln(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Ln(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:Vn.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy globalThis core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||pJ,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=Aw({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:LRe.logger,name:z_}),{logger:i,chunkLoggerController:o}=nD({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Si(i,this.name),this.heartbeat=new wde,this.crypto=new KOe(this,this.logger,e==null?void 0:e.keychain),this.history=new nMe(this,this.logger),this.expirer=new iMe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new L2e(P$(P$({},URe),e==null?void 0:e.storageOptions)),this.relayer=new b4e({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new X4e(this,this.logger),this.verify=new cMe(this,this.logger,this.storage),this.echoClient=new dMe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new mMe(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new IJ(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(JRe,r),n}get context(){return _o(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(l$,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(l$)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get globalThis WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set globalThis WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof sn<"u"&&{}.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const vMe=bMe,NJ="wc",TJ=2,kJ="client",R5=`${NJ}@${TJ}:${kJ}:`,jk={name:kJ,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.org"},R$="WALLETCONNECT_DEEPLINK_CHOICE",EMe="proposal",O$="Proposal expired",AMe="session",ag=Ce.SEVEN_DAYS,xMe="engine",Ns={wc_sessionPropose:{req:{ttl:Ce.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Ce.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Ce.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Ce.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Ce.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Ce.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Ce.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Ce.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Ce.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Ce.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Ce.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Ce.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Ce.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Ce.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Ce.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Ce.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Ce.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Ce.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Ce.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Ce.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Ce.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Ce.FIVE_MINUTES,prompt:!1,tag:1119}}},$k={min:Ce.FIVE_MINUTES,max:Ce.SEVEN_DAYS},jc={idle:"IDLE",active:"ACTIVE"},SMe={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},CMe="request",_Me=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],IMe="wc",NMe="auth",TMe="authKeys",kMe="pairingTopics",PMe="requests",HI=`${IMe}@${1.5}:${NMe}:`,sC=`${HI}:PUB_KEY`;var RMe=Object.defineProperty,OMe=Object.defineProperties,MMe=Object.getOwnPropertyDescriptors,M$=Object.getOwnPropertySymbols,DMe=Object.prototype.hasOwnProperty,BMe=Object.prototype.propertyIsEnumerable,QO=(t,e,n)=>e in t?RMe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yn=(t,e)=>{for(var n in e||(e={}))DMe.call(e,n)&&QO(t,n,e[n]);if(M$)for(var n of M$(e))BMe.call(e,n)&&QO(t,n,e[n]);return t},li=(t,e)=>OMe(t,MMe(e)),me=(t,e,n)=>QO(t,typeof e!="symbol"?e+"":e,n);class LMe extends rIe{constructor(e){super(e),me(this,"name",xMe),me(this,"events",new eD),me(this,"initialized",!1),me(this,"requestQueue",{state:jc.idle,queue:[]}),me(this,"sessionRequestQueue",{state:jc.idle,queue:[]}),me(this,"emittedSessionRequests",new GNe({limit:500})),me(this,"requestQueueDelay",Ce.ONE_SECOND),me(this,"expectedPairingMethodMap",new Map),me(this,"recentlyDeletedMap",new Map),me(this,"recentlyDeletedLimit",200),me(this,"relayMessageCache",[]),me(this,"pendingSessions",new Map),me(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Ns)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Ce.toMiliseconds(this.requestQueueDelay)))}),me(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=li(yn({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=ZPe(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const L=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=L.active}}catch(L){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),L}if(!u||!h){const{topic:L,uri:U}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});u=L,d=U}if(!u){const{message:L}=_e("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(L)}const f=await this.client.core.crypto.generateKeyPair(),p=Ns.wc_sessionPropose.req.ttl||Ce.FIVE_MINUTES,m=es(p),E=li(yn(yn({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:fJ}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:m,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Wc()}),b=fn("session_connect",E.id),{reject:x,resolve:w,done:N}=Of(p,O$),_=({id:L})=>{L===E.id&&(this.client.events.off("proposal_expire",_),this.pendingSessions.delete(E.id),this.events.emit(b,{error:{message:O$,code:0}}))};return this.client.events.on("proposal_expire",_),this.events.once(b,({error:L,session:U})=>{this.client.events.off("proposal_expire",_),L?x(L):U&&w(U)}),await this.sendProposeSession({proposal:E,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:E.id}}}),await this.setProposal(E.id,E),{uri:d,approval:N}}),me(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),me(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[Nd.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(M){throw o.setError(fb.no_internet_connection),M}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(M){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(fb.proposal_not_found),M}try{await this.isValidApprove(n)}catch(M){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(fb.session_approve_namespace_validation_failure),M}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:m,requiredNamespaces:E,optionalNamespaces:b}=f;let x=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});x||(x=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Nd.session_approve_started,properties:{topic:p,trace:[Nd.session_approve_started,Nd.session_namespaces_validation_success]}}));const w=await this.client.core.crypto.generateKeyPair(),N=m.publicKey,_=await this.client.core.crypto.generateSharedKey(w,N),L=yn(yn(yn({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:w,metadata:this.client.metadata},expiry:es(ag)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),U=Vn.relay;x.addTrace(Nd.subscribing_session_topic);try{await this.client.core.relayer.subscribe(_,{transportType:U,internal:{skipSubscribe:!0}})}catch(M){throw x.setError(fb.subscribe_session_topic_failure),M}x.addTrace(Nd.subscribe_session_topic_success);const F=li(yn({},L),{topic:_,requiredNamespaces:E,optionalNamespaces:b,pairingTopic:p,acknowledged:!1,self:L.controller,peer:{publicKey:m.publicKey,metadata:m.metadata},controller:w,transportType:Vn.relay});await this.client.session.set(_,F),x.addTrace(Nd.store_session);try{await this.sendApproveSession({sessionTopic:_,proposal:f,pairingProposalResponse:{relay:{protocol:c??"irn"},responderPublicKey:w},sessionSettleRequest:L,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:a}}}),x.addTrace(Nd.session_approve_publish_success)}catch(M){throw this.client.logger.error(M),this.client.session.delete(_,Qn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(_),M}return this.client.core.eventClient.deleteEvent({eventId:x.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:m.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(_,es(ag)),{topic:_,acknowledged:()=>Promise.resolve(this.client.session.get(_))}}),me(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:Ns.wc_sessionPropose.reject}),await this.deleteProposal(r)}),me(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=Of(),c=Wc(),l=Ah().toString(),u=this.client.session.get(r).namespaces;return this.events.once(fn("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),me(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=Wc(),{done:i,resolve:o,reject:a}=Of();return this.events.once(fn("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,es(ag)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),me(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(E){throw this.client.logger.error("request() -> isValidRequest() failed"),E}const{chainId:r,request:s,topic:i,expiry:o=Ns.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Vn.relay&&await this.confirmOnlineStateOrThrow();const c=Wc(),l=Ah().toString(),{done:u,resolve:d,reject:h}=Of(o,"Request expired. Please try again.");this.events.once(fn("session_request",c),({error:E,result:b})=>{E?h(E):d(b)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:li(yn({},s),{expiryTimestamp:es(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(E=>h(E)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const m={request:li(yn({},s),{expiryTimestamp:es(o)}),chainId:r};return await Promise.all([new Promise(async E=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:m,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,m)}).catch(b=>h(b)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),E()}),new Promise(async E=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const x=await WNe(this.client.core.storage,R$);await jNe({id:c,topic:i,wcDeepLink:x})}E()}),u()]).then(E=>E[2])}),me(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===Vn.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Hc(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):Sa(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),me(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Wc(),i=Ah().toString(),{done:o,resolve:a,reject:c}=Of();this.events.once(fn("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),me(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=Ah().toString(),a=Wc();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),me(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Qn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=_e("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),me(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>XPe(r,n)))),me(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),me(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Vn.link_mode:Vn.relay;o===Vn.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:m=[],expiry:E}=n,b=[...n.resources||[]],{topic:x,uri:w}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:x,uri:w}});const N=await this.client.core.crypto.generateKeyPair(),_=nC(N);if(await Promise.all([this.client.auth.authKeys.set(sC,{responseTopic:_,publicKey:N}),this.client.auth.pairingTopics.set(_,{topic:_,pairingTopic:x})]),await this.client.core.relayer.subscribe(_,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${x}`),m.length>0){const{namespace:R}=Yp(a[0]);let B=ike(R,"request",m);tC(b)&&(B=ake(B,b.pop())),b.push(B)}const L=E&&E>Ns.wc_sessionAuthenticate.req.ttl?E:Ns.wc_sessionAuthenticate.req.ttl,U={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:b},requester:{publicKey:N,metadata:this.client.metadata},expiryTimestamp:es(L)},F={eip155:{chains:a,methods:[...new Set(["personal_sign",...m])],events:["chainChanged","accountsChanged"]}},M={requiredNamespaces:{},optionalNamespaces:F,relays:[{protocol:"irn"}],pairingTopic:x,proposer:{publicKey:N,metadata:this.client.metadata},expiryTimestamp:es(Ns.wc_sessionPropose.req.ttl),id:Wc()},{done:W,resolve:H,reject:K}=Of(L,"Request expired"),P=Wc(),y=fn("session_connect",M.id),g=fn("session_request",P),A=async({error:R,session:B})=>{this.events.off(g,I),R?K(R):B&&H({session:B})},I=async R=>{var B,O,S;if(await this.deletePendingAuthRequest(P,{message:"fulfilled",code:0}),R.error){const de=Qn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return R.error.code===de.code?void 0:(this.events.off(y,A),K(R.error.message))}await this.deleteProposal(M.id),this.events.off(y,A);const{cacaos:z,responder:Y}=R.result,J=[],ae=[];for(const de of z){await kj({cacao:de,projectId:this.client.core.projectId})||(this.client.logger.error(de,"Signature verification failed"),K(Qn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:$e}=de,Te=tC($e.resources),dt=[kO($e.iss)],vt=L_($e.iss);if(Te){const rt=Pj(Te),cn=Rj(Te);J.push(...rt),dt.push(...cn)}for(const rt of dt)ae.push(`${rt}:${vt}`)}const pe=await this.client.core.crypto.generateSharedKey(N,Y.publicKey);let ve;J.length>0&&(ve={topic:pe,acknowledged:!0,self:{publicKey:N,metadata:this.client.metadata},peer:Y,controller:Y.publicKey,expiry:es(ag),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:x,namespaces:n$([...new Set(J)],[...new Set(ae)]),transportType:o},await this.client.core.relayer.subscribe(pe,{transportType:o}),await this.client.session.set(pe,ve),x&&await this.client.core.pairing.updateMetadata({topic:x,metadata:Y.metadata}),ve=this.client.session.get(pe)),(B=this.client.metadata.redirect)!=null&&B.linkMode&&(O=Y.metadata.redirect)!=null&&O.linkMode&&(S=Y.metadata.redirect)!=null&&S.universal&&r&&(this.client.core.addLinkModeSupportedApp(Y.metadata.redirect.universal),this.client.session.update(pe,{transportType:Vn.link_mode})),H({auths:z,session:ve})};this.events.once(y,A),this.events.once(g,I);let T;try{if(i){const R=rl("wc_sessionAuthenticate",U,P);this.client.core.history.set(x,R);const B=await this.client.core.crypto.encode("",R,{type:gA,encoding:Zd});T=Tx(r,x,B)}else await Promise.all([this.sendRequest({topic:x,method:"wc_sessionAuthenticate",params:U,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:P}),this.sendRequest({topic:x,method:"wc_sessionPropose",params:M,expiry:Ns.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:M.id})])}catch(R){throw this.events.off(y,A),this.events.off(g,I),R}return await this.setProposal(M.id,M),await this.setAuthRequest(P,{request:li(yn({},U),{verifyContext:{}}),pairingTopic:x,transportType:o}),{uri:T??w,response:W}}),me(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[gf.authenticated_session_approve_started]}});try{this.isInitialized()}catch(E){throw i.setError(pb.no_internet_connection),E}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(pb.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||Vn.relay;a===Vn.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=nC(c),d={type:ju,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const E of s){if(!await kj({cacao:E,projectId:this.client.core.projectId})){i.setError(pb.invalid_cacao);const _=Qn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:_,encodeOpts:d}),new Error(_.message)}i.addTrace(gf.cacaos_verified);const{p:b}=E,x=tC(b.resources),w=[kO(b.iss)],N=L_(b.iss);if(x){const _=Pj(x),L=Rj(x);h.push(..._),w.push(...L)}for(const _ of w)f.push(`${_}:${N}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(gf.create_authenticated_session_topic);let m;if((h==null?void 0:h.length)>0){m={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:es(ag),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:n$([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(gf.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(E){throw i.setError(pb.subscribe_authenticated_session_topic_failure),E}i.addTrace(gf.subscribe_authenticated_session_topic_success),await this.client.session.set(p,m),i.addTrace(gf.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(gf.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(E){throw i.setError(pb.authenticated_session_approve_publish_failure),E}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:m}}),me(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===Vn.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=nC(o),l={type:ju,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:Ns.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),me(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return OQ(r,s)}),me(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),me(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),me(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Qn("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(R$).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,Qn("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=jc.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),me(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(fb.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Qn("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),me(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=jc.idle,this.client.events.emit("session_request_expire",{id:n}))}),me(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),me(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),me(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,es(Ns.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),me(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=Vn.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),me(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||es(Ns.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),me(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d,publishOpts:h={}}=n,f=rl(s,i,c);let p;const m=!!u;try{const x=m?Zd:uo;p=await this.client.core.crypto.encode(r,f,{encoding:x})}catch(x){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),x}let E;if(_Me.includes(s)){const x=_a(JSON.stringify(f)),w=_a(p);E=await this.client.core.verify.register({id:w,decryptedId:x})}const b=yn(yn({},Ns[s].req),h);if(b.attestation=E,o&&(b.ttl=o),a&&(b.id=a),this.client.core.history.set(r,f),m){const x=Tx(u,r,p);await globalThis.Linking.openURL(x,this.client.name)}else b.tvf=li(yn({},d),{correlationId:f.id}),l?(b.internal=li(yn({},b.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,p,b)):this.client.core.relayer.publish(r,p,b).catch(x=>this.client.logger.error(x));return f.id}),me(this,"sendProposeSession",async n=>{const{proposal:r,publishOpts:s}=n,i=rl("wc_sessionPropose",r,r.id);this.client.core.history.set(r.pairingTopic,i);const o=await this.client.core.crypto.encode(r.pairingTopic,i,{encoding:uo}),a=_a(JSON.stringify(i)),c=_a(o),l=await this.client.core.verify.register({id:c,decryptedId:a});await this.client.core.relayer.publishCustom({payload:{pairingTopic:r.pairingTopic,sessionProposal:o},opts:li(yn({},s),{publishMethod:"wc_proposeSession",attestation:l})})}),me(this,"sendApproveSession",async n=>{const{sessionTopic:r,pairingProposalResponse:s,proposal:i,sessionSettleRequest:o,publishOpts:a}=n,c=sv(i.id,s),l=await this.client.core.crypto.encode(i.pairingTopic,c,{encoding:uo}),u=rl("wc_sessionSettle",o,a==null?void 0:a.id),d=await this.client.core.crypto.encode(r,u,{encoding:uo});this.client.core.history.set(r,u),await this.client.core.relayer.publishCustom({payload:{sessionTopic:r,pairingTopic:i.pairingTopic,sessionProposalResponse:l,sessionSettlementRequest:d},opts:li(yn({},a),{publishMethod:"wc_approveSession"})})}),me(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=sv(r,i);let u;const d=c&&typeof(globalThis==null?void 0:globalThis.Linking)<"u";try{const p=d?Zd:uo;u=await this.client.core.crypto.encode(s,l,li(yn({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{f=this.getTVFParams(r,p.params,i)}catch(m){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${m==null?void 0:m.message}`)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=Tx(c,s,u);await globalThis.Linking.openURL(p,this.client.name)}else{const p=h.request.method,m=Ns[p].res;m.tvf=li(yn({},f),{correlationId:r}),o?(m.internal=li(yn({},m.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,m)):this.client.core.relayer.publish(s,u,m).catch(E=>this.client.logger.error(E))}await this.client.core.history.resolve(l)}),me(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=oI(r,i);let u;const d=c&&typeof(globalThis==null?void 0:globalThis.Linking)<"u";try{const f=d?Zd:uo;u=await this.client.core.crypto.encode(s,l,li(yn({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=Tx(c,s,u);await globalThis.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||Ns[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),me(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Fd(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Fd(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),me(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),me(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),me(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===jc.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=jc.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=jc.idle}),me(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),me(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),me(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=_e("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),me(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),me(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Xl.proposal_listener_not_found)),this.isValidConnect(yn({},s.params));const u=a.expiryTimestamp||es(Ns.wc_sessionPropose.req.ttl),d=yn({id:c,pairingTopic:r,expiryTimestamp:u,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:_a(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace($c.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:Ns.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),me(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Hc(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Sa(r)){await this.deleteProposal(i);const o=fn("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),me(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(E=>E.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),m=li(yn(yn(yn({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:Vn.relay});await this.client.session.set(m.topic,m),await this.setExpiry(m.topic,m.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:m.peer.metadata}),this.client.events.emit("session_connect",{session:m}),this.events.emit(fn("session_connect",f.proposalId),{session:m}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(m),await this.sendResult({id:r.id,topic:n,result:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),me(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Hc(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(fn("session_approve",s),{})):Sa(r)&&(await this.client.session.delete(n,Qn("USER_DISCONNECTED")),this.events.emit(fn("session_approve",s),{error:r.error}))}),me(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=db.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:Qn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(yn({topic:n},s));try{db.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0})}catch(c){throw db.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),me(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),me(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=fn("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Hc(r)?this.events.emit(fn("session_update",s),{}):Sa(r)&&this.events.emit(fn("session_update",s),{error:r.error})}),me(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,es(ag)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),me(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=fn("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Hc(r)?this.events.emit(fn("session_extend",s),{}):Sa(r)&&this.events.emit(fn("session_extend",s),{error:r.error})}),me(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),me(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=fn("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Hc(r)?this.events.emit(fn("session_ping",s),{}):Sa(r)&&this.events.emit(fn("session_ping",s),{error:r.error})},500)}),me(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),await Promise.all([new Promise(i=>{this.client.core.relayer.once(br.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Qn("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),me(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(yn({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:_a(JSON.stringify(rl("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),m={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(m),u===Vn.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(m):(this.addSessionRequestToSessionRequestQueue(m),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),me(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=fn("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Hc(r)?this.events.emit(fn("session_request",s),{result:r.result}):Sa(r)&&this.events.emit(fn("session_request",s),{error:r.error})}),me(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=db.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(yn({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),db.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),me(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Hc(r)?this.events.emit(fn("session_request",s),{result:r.result}):Sa(r)&&this.events.emit(fn("session_request",s),{error:r.error})}),me(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:_a(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===Vn.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:ju,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:Ns.wc_sessionAuthenticate.autoReject,appLink:h})}}),me(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),me(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=jc.idle,this.processSessionRequestQueue()},Ce.toMiliseconds(this.requestQueueDelay))}),me(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=fn("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(fn("session_request",i.request.id),{error:r})})}),me(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===jc.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),me(this,"emitSessionRequest",n=>{if(this.emittedSessionRequests.has(n.id)){this.client.logger.warn({id:n.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${n.id}`);return}this.sessionRequestQueue.state=jc.active,this.emittedSessionRequests.add(n.id),this.client.events.emit("session_request",n)}),me(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:rl("wc_sessionPropose",li(yn({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),me(this,"isValidConnect",async n=>{if(!eo(n)){const{message:l}=_e("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(os(r)||await this.isValidPairingTopic(r),!dRe(c,!0)){const{message:l}=_e("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!os(s)&&Nl(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!os(i)&&Nl(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),os(o)||this.validateSessionProps(o,"sessionProperties"),!os(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),me(this,"validateNamespaces",(n,r)=>{const s=uRe(n,"connect()",r);if(s)throw new Error(s.message)}),me(this,"isValidApprove",async n=>{if(!eo(n))throw new Error(_e("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=Dk(s,"approve()");if(l)throw new Error(l.message);const u=i$(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!qr(i,!0)){const{message:d}=_e("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(os(o)||this.validateSessionProps(o,"sessionProperties"),!os(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),me(this,"isValidReject",async n=>{if(!eo(n)){const{message:i}=_e("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!fRe(s)){const{message:i}=_e("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),me(this,"isValidSessionSettleRequest",n=>{if(!eo(n)){const{message:l}=_e("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!uJ(r)){const{message:l}=_e("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=sRe(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=Dk(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Fd(o)){const{message:l}=_e("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),me(this,"isValidUpdate",async n=>{if(!eo(n)){const{message:c}=_e("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=Dk(s,"update()");if(o)throw new Error(o.message);const a=i$(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),me(this,"isValidExtend",async n=>{if(!eo(n)){const{message:s}=_e("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),me(this,"isValidRequest",async n=>{if(!eo(n)){const{message:c}=_e("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!s$(a,i)){const{message:c}=_e("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!pRe(s)){const{message:c}=_e("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!yRe(a,i,s.method)){const{message:c}=_e("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!ERe(o,$k)){const{message:c}=_e("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${$k.min} and ${$k.max}`);throw new Error(c)}}),me(this,"isValidRespond",async n=>{var r;if(!eo(n)){const{message:o}=_e("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!mRe(i)){const{message:o}=_e("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),me(this,"isValidPing",async n=>{if(!eo(n)){const{message:s}=_e("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),me(this,"isValidEmit",async n=>{if(!eo(n)){const{message:a}=_e("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!s$(o,i)){const{message:a}=_e("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!gRe(s)){const{message:a}=_e("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!wRe(o,i,s.name)){const{message:a}=_e("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),me(this,"isValidDisconnect",async n=>{if(!eo(n)){const{message:s}=_e("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),me(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!qr(s,!1))throw new Error("uri is required parameter");if(!qr(i,!1))throw new Error("domain is required parameter");if(!qr(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>Yp(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Yp(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),me(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||v1,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Vn.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),me(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=_e("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),me(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),me(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),me(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=_e("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),me(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==Vn.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(globalThis==null?void 0:globalThis.Linking)<"u"}),me(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),me(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=wj(n,"topic")||"",s=decodeURIComponent(wj(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:Vn.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),me(this,"registerLinkModeListeners",async()=>{var n;if(w5()||cf()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=globalThis==null?void 0:globalThis.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),me(this,"getTVFParams",(n,r,s)=>{var i,o,a;if(!((i=r.request)!=null&&i.method))return{};const c={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const l=this.extractTxHashesFromResult(r.request,s);c.txHashes=l,c.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(l){this.client.logger.warn("Error getting TVF params",l)}return c}),me(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),me(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,o=SMe[i];if(i==="sui_signTransaction")return[WTe(r.transactionBytes)];if(i==="near_signTransaction")return[_j(r)];if(i==="near_signTransactions")return r.map(c=>_j(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[BRe({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return $u(r)?r.map(c=>Ij(c)):[Ij(r)];if(i==="cosmos_signDirect")return[VTe(r)];if(typeof r=="string")return[r];const a=r[o.key];if($u(a))return i==="solana_signAllTransactions"?a.map(c=>zTe(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(br.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(sC)?this.client.auth.authKeys.get(sC):{responseTopic:void 0,publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===Vn.link_mode?Zd:uo});fD(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:_a(r)})):aI(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(ga.expired,async e=>{const{topic:n,id:r}=wQ(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,_e("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,_e("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(zf.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(zf.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!qr(e,!1)){const{message:n}=_e("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=_e("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Fd(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=_e("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!qr(e,!1)){const{message:n}=_e("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=_e("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Fd(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=_e("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=_e("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(qr(e,!1)){const{message:n}=_e("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=_e("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!hRe(e)){const{message:n}=_e("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=_e("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Fd(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=_e("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class UMe extends jm{constructor(e,n){super(e,n,EMe,R5),this.core=e,this.logger=n}}let FMe=class extends jm{constructor(e,n){super(e,n,AMe,R5),this.core=e,this.logger=n}};class jMe extends jm{constructor(e,n){super(e,n,CMe,R5,r=>r.id),this.core=e,this.logger=n}}class $Me extends jm{constructor(e,n){super(e,n,TMe,HI,()=>sC),this.core=e,this.logger=n}}class zMe extends jm{constructor(e,n){super(e,n,kMe,HI),this.core=e,this.logger=n}}class WMe extends jm{constructor(e,n){super(e,n,PMe,HI,r=>r.id),this.core=e,this.logger=n}}var HMe=Object.defineProperty,VMe=(t,e,n)=>e in t?HMe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zk=(t,e,n)=>VMe(t,typeof e!="symbol"?e+"":e,n);class KMe{constructor(e,n){this.core=e,this.logger=n,zk(this,"authKeys"),zk(this,"pairingTopics"),zk(this,"requests"),this.authKeys=new $Me(this.core,this.logger),this.pairingTopics=new zMe(this.core,this.logger),this.requests=new WMe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var qMe=Object.defineProperty,GMe=(t,e,n)=>e in t?qMe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lt=(t,e,n)=>GMe(t,typeof e!="symbol"?e+"":e,n);let YMe=class PJ extends nIe{constructor(e){super(e),Lt(this,"protocol",NJ),Lt(this,"version",TJ),Lt(this,"name",jk.name),Lt(this,"metadata"),Lt(this,"core"),Lt(this,"logger"),Lt(this,"events",new ja.EventEmitter),Lt(this,"engine"),Lt(this,"session"),Lt(this,"proposal"),Lt(this,"pendingRequest"),Lt(this,"auth"),Lt(this,"signConfig"),Lt(this,"on",(r,s)=>this.events.on(r,s)),Lt(this,"once",(r,s)=>this.events.once(r,s)),Lt(this,"off",(r,s)=>this.events.off(r,s)),Lt(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),Lt(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Lt(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),Lt(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),Lt(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),Lt(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),Lt(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),Lt(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),Lt(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),Lt(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),Lt(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),Lt(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),Lt(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),Lt(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),Lt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Lt(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),Lt(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),Lt(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),Lt(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||jk.name,this.metadata=MNe(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:YE(Aw({level:(e==null?void 0:e.logger)||jk.logger}));this.core=(e==null?void 0:e.core)||new vMe(e),this.logger=Si(n,this.name),this.session=new FMe(this.core,this.logger),this.proposal=new UMe(this.core,this.logger),this.pendingRequest=new jMe(this.core,this.logger),this.engine=new LMe(this),this.auth=new KMe(this.core,this.logger)}static async init(e){const n=new PJ(e);return await n.initialize(),n}get context(){return _o(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const D$="error",ZMe="wss://relay.walletconnect.org",QMe="wc",JMe="universal_provider",kx=`${QMe}@2:${JMe}:`,RJ="https://rpc.walletconnect.org/v1/",OJ="generic",XMe=`${RJ}bundler`,za={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function O5(t){return t==null||typeof t!="object"&&typeof t!="function"}function MJ(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function DJ(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const eDe="[object RegExp]",BJ="[object String]",LJ="[object Number]",UJ="[object Boolean]",FJ="[object Arguments]",tDe="[object Symbol]",nDe="[object Date]",rDe="[object Map]",sDe="[object Set]",iDe="[object Array]",oDe="[object ArrayBuffer]",aDe="[object Object]",cDe="[object DataView]",lDe="[object Uint8Array]",uDe="[object Uint8ClampedArray]",dDe="[object Uint16Array]",hDe="[object Uint32Array]",fDe="[object Int8Array]",pDe="[object Int16Array]",mDe="[object Int32Array]",gDe="[object Float32Array]",yDe="[object Float64Array]";function M5(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function wDe(t,e){return d0(t,void 0,t,new Map,e)}function d0(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(O5(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=d0(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,d0(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(d0(a,void 0,n,r,s));return o}if(typeof Ge<"u"&&Ge.isBuffer(t))return t.subarray();if(M5(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=d0(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),Wf(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),Wf(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),Wf(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Wf(o,t,n,r,s),o}if(typeof t=="object"&&bDe(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),Wf(o,t,n,r,s),o}return t}function Wf(t,e,n=t,r,s){const i=[...Object.keys(e),...MJ(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=d0(e[a],a,n,r,s))}}function bDe(t){switch(DJ(t)){case FJ:case iDe:case oDe:case cDe:case UJ:case nDe:case gDe:case yDe:case fDe:case pDe:case mDe:case rDe:case LJ:case aDe:case eDe:case sDe:case BJ:case tDe:case lDe:case uDe:case dDe:case hDe:return!0;default:return!1}}function vDe(t,e){return wDe(t,(n,r,s,i)=>{const o=e==null?void 0:e(n,r,s,i);if(o!=null)return o;if(typeof t=="object")switch(Object.prototype.toString.call(t)){case LJ:case BJ:case UJ:{const a=new t.constructor(t==null?void 0:t.valueOf());return Wf(a,t),a}case FJ:{const a={};return Wf(a,t),a.length=t.length,a[Symbol.iterator]=t[Symbol.iterator],a}default:return}})}function B$(t){return vDe(t)}function L$(t){return t!==null&&typeof t=="object"&&DJ(t)==="[object Arguments]"}function U$(t){return typeof t=="object"&&t!==null}function EDe(){}function ADe(t){return M5(t)}function xDe(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function SDe(t){if(O5(t))return t;if(Array.isArray(t)||M5(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function CDe(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=JO(s,o,r,new Map)}return s}function JO(t,e,n,r){if(O5(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return SDe(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...MJ(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(L$(a)&&(a={...a}),L$(c)&&(c={...c}),typeof Ge<"u"&&Ge.isBuffer(a)&&(a=B$(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||U$(c)&&U$(a)?t[o]=JO(c,a,n,r):c==null&&xDe(a)?t[o]=JO({},a,n,r):c==null&&ADe(a)?t[o]=B$(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function _De(t,...e){return CDe(t,...e,EDe)}var IDe=Object.defineProperty,NDe=Object.defineProperties,TDe=Object.getOwnPropertyDescriptors,F$=Object.getOwnPropertySymbols,kDe=Object.prototype.hasOwnProperty,PDe=Object.prototype.propertyIsEnumerable,j$=(t,e,n)=>e in t?IDe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Px=(t,e)=>{for(var n in e||(e={}))kDe.call(e,n)&&j$(t,n,e[n]);if(F$)for(var n of F$(e))PDe.call(e,n)&&j$(t,n,e[n]);return t},RDe=(t,e)=>NDe(t,TDe(e));function ea(t,e,n){var r;const s=Yp(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${RJ}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function $m(t){return t.includes(":")?t.split(":")[1]:t}function jJ(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function ODe(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function $$(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>{var r,s;return((r=n==null?void 0:n.chains)==null?void 0:r.length)&&((s=n==null?void 0:n.chains)==null?void 0:s.length)>0}))}function Rx(t={},e={}){const n=$$(z$(t)),r=$$(z$(e));return _De(n,r)}function z$(t){var e,n,r,s,i;const o={};if(!Nl(t))return o;for(const[a,c]of Object.entries(t)){const l=zI(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=u0(a);o[f]=RDe(Px(Px({},o[f]),c),{chains:Il(l,(e=o[f])==null?void 0:e.chains),methods:Il(u,(n=o[f])==null?void 0:n.methods),events:Il(d,(r=o[f])==null?void 0:r.events)}),(Nl(h)||Nl(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=Px(Px({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function W$(t){return t.includes(":")?t.split(":")[2]:t}function H$(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=zI(n)?[n]:r.chains?r.chains:jJ(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function Wk(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const $J={},an=t=>$J[t],Hk=(t,e)=>{$J[t]=e};var MDe=Object.defineProperty,V$=Object.getOwnPropertySymbols,DDe=Object.prototype.hasOwnProperty,BDe=Object.prototype.propertyIsEnumerable,K$=(t,e,n)=>e in t?MDe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,q$=(t,e)=>{for(var n in e||(e={}))DDe.call(e,n)&&K$(t,n,e[n]);if(V$)for(var n of V$(e))BDe.call(e,n)&&K$(t,n,e[n]);return t};const G$="eip155",LDe=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],UDe=t=>t&&t.startsWith("0x")?BigInt(t).toString(10):t,Vk=t=>t&&t.startsWith("0x")?t:`0x${BigInt(t).toString(16)}`,Y$=t=>Object.keys(t).filter(e=>LDe.includes(e)).reduce((e,n)=>(e[n]=t[n],e),{}),FDe=(t,e,n)=>{const{sessionProperties:r={},scopedProperties:s={}}=t,i={};if(!Nl(s)&&!Nl(r))return;const o=Y$(r);for(const a of n){const c=UDe(a);if(!c)continue;i[Vk(c)]=o;const l=s==null?void 0:s[`${G$}:${c}`];if(l){const u=l==null?void 0:l[`${G$}:${c}:${e}`];i[Vk(c)]=q$(q$({},i[Vk(c)]),Y$(u||l))}}for(const[a,c]of Object.entries(i))Object.keys(c).length===0&&delete i[a];return Object.keys(i).length>0?i:void 0};var jDe=Object.defineProperty,$De=(t,e,n)=>e in t?jDe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cg=(t,e,n)=>$De(t,typeof e!="symbol"?e+"":e,n);class zDe{constructor(e){cg(this,"name","polkadot"),cg(this,"client"),cg(this,"httpProviders"),cg(this,"events"),cg(this,"namespace"),cg(this,"chainId"),this.namespace=e.namespace,this.events=an("events"),this.client=an("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=$m(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ea(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new $a(new Pc(r,an("disableProviderPing")))}}var WDe=Object.defineProperty,HDe=Object.defineProperties,VDe=Object.getOwnPropertyDescriptors,Z$=Object.getOwnPropertySymbols,KDe=Object.prototype.hasOwnProperty,qDe=Object.prototype.propertyIsEnumerable,XO=(t,e,n)=>e in t?WDe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Q$=(t,e)=>{for(var n in e||(e={}))KDe.call(e,n)&&XO(t,n,e[n]);if(Z$)for(var n of Z$(e))qDe.call(e,n)&&XO(t,n,e[n]);return t},J$=(t,e)=>HDe(t,VDe(e)),lg=(t,e,n)=>XO(t,typeof e!="symbol"?e+"":e,n);class GDe{constructor(e){lg(this,"name","eip155"),lg(this,"client"),lg(this,"chainId"),lg(this,"namespace"),lg(this,"httpProviders"),lg(this,"events"),this.namespace=e.namespace,this.events=an("events"),this.client=an("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||ea(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new $a(new Pc(r,an("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt($m(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const l=this.client.session.get(e.topic),u=((o=l==null?void 0:l.sessionProperties)==null?void 0:o.capabilities)||{},d=`${a}${c.join(",")}`,h=u==null?void 0:u[d];if(h)return h;let f;try{f=FDe(l,a,c)}catch(m){console.warn("Failed to extract capabilities from session",m)}if(f)return f;const p=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:J$(Q$({},l.sessionProperties||{}),{capabilities:J$(Q$({},u||{}),{[d]:p})})})}catch(m){console.warn("Failed to update session with capabilities",m)}return p}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(rl("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${XMe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var YDe=Object.defineProperty,ZDe=(t,e,n)=>e in t?YDe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ug=(t,e,n)=>ZDe(t,typeof e!="symbol"?e+"":e,n);class QDe{constructor(e){ug(this,"name","solana"),ug(this,"client"),ug(this,"httpProviders"),ug(this,"events"),ug(this,"namespace"),ug(this,"chainId"),this.namespace=e.namespace,this.events=an("events"),this.client=an("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=$m(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ea(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new $a(new Pc(r,an("disableProviderPing")))}}var JDe=Object.defineProperty,XDe=(t,e,n)=>e in t?JDe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dg=(t,e,n)=>XDe(t,typeof e!="symbol"?e+"":e,n);class e5e{constructor(e){dg(this,"name","cosmos"),dg(this,"client"),dg(this,"httpProviders"),dg(this,"events"),dg(this,"namespace"),dg(this,"chainId"),this.namespace=e.namespace,this.events=an("events"),this.client=an("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=$m(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ea(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new $a(new Pc(r,an("disableProviderPing")))}}var t5e=Object.defineProperty,n5e=(t,e,n)=>e in t?t5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hg=(t,e,n)=>n5e(t,typeof e!="symbol"?e+"":e,n);class r5e{constructor(e){hg(this,"name","algorand"),hg(this,"client"),hg(this,"httpProviders"),hg(this,"events"),hg(this,"namespace"),hg(this,"chainId"),this.namespace=e.namespace,this.events=an("events"),this.client=an("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||ea(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ea(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new $a(new Pc(r,an("disableProviderPing")))}}var s5e=Object.defineProperty,i5e=(t,e,n)=>e in t?s5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fg=(t,e,n)=>i5e(t,typeof e!="symbol"?e+"":e,n);class o5e{constructor(e){fg(this,"name","cip34"),fg(this,"client"),fg(this,"httpProviders"),fg(this,"events"),fg(this,"namespace"),fg(this,"chainId"),this.namespace=e.namespace,this.events=an("events"),this.client=an("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=$m(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new $a(new Pc(r,an("disableProviderPing")))}}var a5e=Object.defineProperty,c5e=(t,e,n)=>e in t?a5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pg=(t,e,n)=>c5e(t,typeof e!="symbol"?e+"":e,n);class l5e{constructor(e){pg(this,"name","elrond"),pg(this,"client"),pg(this,"httpProviders"),pg(this,"events"),pg(this,"namespace"),pg(this,"chainId"),this.namespace=e.namespace,this.events=an("events"),this.client=an("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=$m(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ea(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new $a(new Pc(r,an("disableProviderPing")))}}var u5e=Object.defineProperty,d5e=(t,e,n)=>e in t?u5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mg=(t,e,n)=>d5e(t,typeof e!="symbol"?e+"":e,n);class h5e{constructor(e){mg(this,"name","multiversx"),mg(this,"client"),mg(this,"httpProviders"),mg(this,"events"),mg(this,"namespace"),mg(this,"chainId"),this.namespace=e.namespace,this.events=an("events"),this.client=an("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=$m(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ea(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new $a(new Pc(r,an("disableProviderPing")))}}var f5e=Object.defineProperty,p5e=(t,e,n)=>e in t?f5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gg=(t,e,n)=>p5e(t,typeof e!="symbol"?e+"":e,n);class m5e{constructor(e){gg(this,"name","near"),gg(this,"client"),gg(this,"httpProviders"),gg(this,"events"),gg(this,"namespace"),gg(this,"chainId"),this.namespace=e.namespace,this.events=an("events"),this.client=an("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||ea(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ea(e,this.namespace);return typeof r>"u"?void 0:new $a(new Pc(r,an("disableProviderPing")))}}var g5e=Object.defineProperty,y5e=(t,e,n)=>e in t?g5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yg=(t,e,n)=>y5e(t,typeof e!="symbol"?e+"":e,n);class w5e{constructor(e){yg(this,"name","tezos"),yg(this,"client"),yg(this,"httpProviders"),yg(this,"events"),yg(this,"namespace"),yg(this,"chainId"),this.namespace=e.namespace,this.events=an("events"),this.client=an("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||ea(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ea(e,this.namespace);return typeof r>"u"?void 0:new $a(new Pc(r))}}var b5e=Object.defineProperty,v5e=(t,e,n)=>e in t?b5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wg=(t,e,n)=>v5e(t,typeof e!="symbol"?e+"":e,n);class E5e{constructor(e){wg(this,"name",OJ),wg(this,"client"),wg(this,"httpProviders"),wg(this,"events"),wg(this,"namespace"),wg(this,"chainId"),this.namespace=e.namespace,this.events=an("events"),this.client=an("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getNamespaceName(){const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return Yp(e).namespace}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=Yp(s);r[i.reference]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ea(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new $a(new Pc(r,an("disableProviderPing")))}}var A5e=Object.defineProperty,x5e=Object.defineProperties,S5e=Object.getOwnPropertyDescriptors,X$=Object.getOwnPropertySymbols,C5e=Object.prototype.hasOwnProperty,_5e=Object.prototype.propertyIsEnumerable,e4=(t,e,n)=>e in t?A5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ox=(t,e)=>{for(var n in e||(e={}))C5e.call(e,n)&&e4(t,n,e[n]);if(X$)for(var n of X$(e))_5e.call(e,n)&&e4(t,n,e[n]);return t},Kk=(t,e)=>x5e(t,S5e(e)),fa=(t,e,n)=>e4(t,typeof e!="symbol"?e+"":e,n);class D5{constructor(e){fa(this,"client"),fa(this,"namespaces"),fa(this,"optionalNamespaces"),fa(this,"sessionProperties"),fa(this,"scopedProperties"),fa(this,"events",new eD),fa(this,"rpcProviders",{}),fa(this,"session"),fa(this,"providerOpts"),fa(this,"logger"),fa(this,"uri"),fa(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:YE(Aw({level:(e==null?void 0:e.logger)||D$})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new D5(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Ox({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,sv(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Qn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=H$(this.session.namespaces);this.namespaces=Rx(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=H$(s.namespaces);return this.namespaces=Rx(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e);this.getProvider(r).setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){try{this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(!$u(n))return;for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}catch(n){this.logger.warn("Failed to cleanup pending pairings",n)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await YMe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||D$,relayUrl:this.providerOpts.relayUrl||ZMe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>u0(n)))];Hk("client",this.client),Hk("events",this.events),Hk("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=ODe(n,this.session);if((r==null?void 0:r.length)===0)return;const s=jJ(r),i=Rx(this.namespaces,this.optionalNamespaces),o=Kk(Ox({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new GDe({namespace:o});break;case"algorand":this.rpcProviders[n]=new r5e({namespace:o});break;case"solana":this.rpcProviders[n]=new QDe({namespace:o});break;case"cosmos":this.rpcProviders[n]=new e5e({namespace:o});break;case"polkadot":this.rpcProviders[n]=new zDe({namespace:o});break;case"cip34":this.rpcProviders[n]=new o5e({namespace:o});break;case"elrond":this.rpcProviders[n]=new l5e({namespace:o});break;case"multiversx":this.rpcProviders[n]=new h5e({namespace:o});break;case"near":this.rpcProviders[n]=new m5e({namespace:o});break;case"tezos":this.rpcProviders[n]=new w5e({namespace:o});break;default:this.rpcProviders[n]=new E5e({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&$u(o)&&this.events.emit("accountsChanged",o.map(W$))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=u0(o),l=Wk(o)!==Wk(a)?`${c}:${Wk(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=Kk(Ox({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Kk(Ox({},Qn("USER_DISCONNECTED")),{data:e.topic})))}),this.on(za.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[OJ]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=Rx(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>u0(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=u0(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s);const i=this.getProvider(r).getDefaultChain();n?(this.events.emit("chainChanged",s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e})):this.getProvider(r).setDefaultChain(s),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(W$);if(!$u(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${kx}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${kx}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${kx}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(kx)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}}let yf=null;const Vo={getSIWX(){return le.state.siwx},async initializeIfEnabled(t=q.getActiveCaipAddress()){var i,o,a;const e=le.state.siwx;if(!(e&&t))return;const[n,r,s]=t.split(":");if(q.checkIfSupportedNetwork(n,`${n}:${r}`))try{if((i=le.state.remoteFeatures)!=null&&i.emailCapture){const l=(o=q.getAccountData(n))==null?void 0:o.user;await Ot.open({view:"DataCapture",data:{email:(l==null?void 0:l.email)??void 0}});return}if(yf&&await yf,(await e.getSessions(`${n}:${r}`,s)).length)return;await Ot.open({view:"SIWXSignMessage"})}catch(c){console.error("SIWXUtil:initializeIfEnabled",c),Dt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((a=Ne._getClient())==null?void 0:a.disconnect().catch(console.error)),ct.reset("Connect"),yl.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=le.state.siwx,e=Be.getPlainAddress(q.getActiveCaipAddress()),n=Fb(),r=Ne._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Se.getConnectorId(n.chainNamespace)===ie.CONNECTOR_ID.AUTH&&ct.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),q.setLastConnectedSIWECaipNetwork(n),Ot.close(),Dt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Ot.state.open||ct.state.view==="ApproveTransaction")&&await Ot.open({view:"SIWXSignMessage"}),yl.showError("Error signing message"),Dt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=q.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,Be.getPlainAddress(q.getActiveCaipAddress())||""));s&&s.length>0?await q.switchActiveNetwork(r):await Ne.disconnect()}else await Ne.disconnect()}else Ot.close();Ot.close(),Dt.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=q.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,Be.getPlainAddress(q.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(t){const e=le.state.siwx;let n=t==null?void 0:t.address;if(!n){const s=q.getActiveCaipAddress();n=Be.getPlainAddress(s)}let r=t==null?void 0:t.caipNetworkId;if(!r){const s=q.getActiveCaipNetwork();r=s==null?void 0:s.caipNetworkId}return e&&n&&r?e.getSessions(r,n):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=ct.state.view==="ApproveTransaction",r=ct.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var d;const i=Vo.getSIWX(),o=Fb();if(!i||!s.includes(ie.CHAIN.EVM)||(d=le.state.remoteFeatures)!=null&&d.emailCapture){const h=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:h.address,chainId:h.chainId,accounts:h.accounts}}const a=`${s}:${e}`,c=await i.createMessage({chainId:a,accountAddress:"<<AccountAddress>>"}),l={accountAddress:c.accountAddress,chainId:c.chainId,domain:c.domain,uri:c.uri,version:c.version,nonce:c.nonce,notBefore:c.notBefore,statement:c.statement,resources:c.resources,requestId:c.requestId,issuedAt:c.issuedAt,expirationTime:c.expirationTime,serializedMessage:c.toString()},u=await t.connect({chainId:e,socialUri:n,siwxMessage:l,preferredAccountType:r});return l.accountAddress=u.address,l.serializedMessage=u.message||"",u.signature&&u.message&&await Vo.addEmbeddedWalletSession(l,u.message,u.signature),q.setLastConnectedSIWECaipNetwork(o),{address:u.address,chainId:u.chainId,accounts:u.accounts}},async addEmbeddedWalletSession(t,e,n){if(yf)return yf;const r=Vo.getSIWX();return r?(yf=r.addSession({data:t,message:e,signature:n}).finally(()=>{yf=null}),yf):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var c,l,u;const r=Vo.getSIWX(),s=Fb(),i=new Set(e.map(d=>d.split(":")[0]));if(!r||i.size!==1||!i.has("eip155"))return!1;const o=await r.createMessage({chainId:((c=Fb())==null?void 0:c.caipNetworkId)||"",accountAddress:""}),a=await t.authenticate({nonce:o.nonce,domain:o.domain,uri:o.uri,exp:o.expirationTime,iat:o.issuedAt,nbf:o.notBefore,requestId:o.requestId,version:o.version,resources:o.resources,statement:o.statement,chainId:o.chainId,methods:n,chains:[o.chainId,...e.filter(d=>d!==o.chainId)]});if(yl.showLoading("Authenticating...",{autoClose:!1}),Fe.setConnectedWalletInfo({...a.session.peer.metadata,name:a.session.peer.metadata.name,icon:(l=a.session.peer.metadata.icons)==null?void 0:l[0],type:"WALLET_CONNECT"},Array.from(i)[0]),(u=a==null?void 0:a.auths)!=null&&u.length){const d=a.auths.map(h=>{const f=t.client.formatAuthMessage({request:h.p,iss:h.p.iss});return{data:{...h.p,accountAddress:h.p.iss.split(":").slice(-1).join(""),chainId:h.p.iss.split(":").slice(2,4).join(":"),uri:h.p.aud,version:h.p.version||o.version,expirationTime:h.p.exp,issuedAt:h.p.iat,notBefore:h.p.nbf},message:f,signature:h.s.s,cacao:h}});try{await r.setSessions(d),s&&q.setLastConnectedSIWECaipNetwork(s),Dt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Vo.getSIWXEventProperties()})}catch(h){throw console.error("SIWX:universalProviderAuth - failed to set sessions",h),Dt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Vo.getSIWXEventProperties()}),await t.disconnect().catch(console.error),h}finally{yl.hide()}}return!0},getSIWXEventProperties(){var e;const t=q.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=q.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:Ao(t)===Qr.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Pt={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",OKX_CONNECTOR_NAME:"OKX Wallet",EIP155:ie.CHAIN.EVM,ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH",getSDKVersionWarningMessage(t,e){return`
     @@@@@@@           @@@@@@@@@@@@@@@@@@      
   @@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@@@@@@   
  @@@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@  
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@  
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@   @@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@   @@@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@  @@@@@@@@@@@@@
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@   @@@@@@@@@@@@@    
 @@@@@@   @@@@@@  @@@@@@@@@@@   @@@@@@@@@@@@@@    
 @@@@@@   @@@@@@  @@@@@@@@@@@  @@@@@@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@   @@@@@@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@  
  @@@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@  
   @@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@@@@@@   
      @@@@@            @@@@@@@@@@@@@@@@@@  
      
AppKit SDK version ${t} is outdated. Latest version is ${e}. Please update to the latest version for bug fixes and new features.
            
Changelog: https://github.com/reown-com/appkit/releases
NPM Registry: https://www.npmjs.com/package/@reown/appkit`}},pl={ConnectorExplorerIds:{[ie.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ie.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ie.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[ie.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[ie.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Pt.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Pt.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Pt.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Pt.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Pt.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Pt.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Pt.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Pt.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Pt.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Pt.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Pt.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13",[Pt.OKX_CONNECTOR_NAME]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200","00000008819873e925422c1ff0f99f7c":"b3406e4a-bbfc-44fb-e3a6-89673c78b700"},ConnectorImageIds:{[ie.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ie.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ie.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[ie.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[ie.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[ie.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[ie.CONNECTOR_ID.INJECTED]:"Browser Wallet",[ie.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[ie.CONNECTOR_ID.COINBASE]:"Coinbase",[ie.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[ie.CONNECTOR_ID.LEDGER]:"Ledger",[ie.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[ie.CONNECTOR_ID.INJECTED]:"INJECTED",[ie.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[ie.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[ie.CONNECTOR_ID.AUTH]:"AUTH",[Pt.CONNECTOR_TYPE_AUTH]:"AUTH"},WalletConnectRpcChainIds:[1,5,11155111,10,420,42161,421613,137,80001,42220,1313161554,1313161555,56,97,43114,43113,100,8453,84531,7777777,999,324,280]},mr={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Pt.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=q.state.activeChain;return ie.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>Se.getConnectorId(e)===ie.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})},userChainIdToChainNamespace(t){if(typeof t=="number")return ie.CHAIN.EVM;const[e]=t.split(":");return e},getOtherAuthNamespaces(t){return t?ie.AUTH_CONNECTOR_SUPPORTED_CHAINS.filter(r=>r!==t):[]},getConnectorStorageInfo(t,e){const r=he.getConnections()[e]??[];return{hasDisconnected:he.isConnectorDisconnected(t,e),hasConnected:r.some(s=>mr.isLowerCaseMatch(s.connectorId,t))}}},I5e={extractVersion(t){var r;if(!t||typeof t!="string")return null;const e=/(?<version>\d+(?:\.\d+){0,2})(?:-[a-zA-Z]+\.\d+)?/u,n=t.match(e);return((r=n==null?void 0:n.groups)==null?void 0:r.version)||null},checkSDKVersion(t){const e=this.extractVersion(t),n=ie.IS_DEVELOPMENT;if(!e||!n)return;const r=he.getLatestAppKitVersion();if(this.isValidVersion(r)&&this.isOlder(e,r)){console.warn(Pt.getSDKVersionWarningMessage(e,r));return}try{fetch("https://registry.npmjs.org/@reown/appkit/latest").then(s=>s.json()).then(s=>{const i=s.version;this.isOlder(e,i)&&(he.updateLatestAppKitVersion({timestamp:Date.now(),version:i}),console.warn(Pt.getSDKVersionWarningMessage(e,i)))})}catch{}},isValidVersion(t){return typeof t=="string"&&/^\d+\.\d+\.\d+$/u.test(t)},isOlder(t,e){const n=this.extractVersion(t),r=this.extractVersion(e);if(!n||!r)return!1;function s(a){const c=a.split(".").map(Number);for(;c.length<3;)c.push(0);return c}const i=s(n),o=s(r);for(let a=0;a<Math.max(i.length,o.length);a+=1){const c=i[a]||0,l=o[a]||0;if(c<l)return!0;if(c>l)return!1}return!1}},N5e=new AbortController,wi={EmbeddedWalletAbortController:N5e,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{code:"APKT001",displayMessage:"Network Not Found",debugMessage:"The specified network is not recognized. Please ensure it is included in the `networks` array of your `createAppKit` configuration."},ORIGIN_NOT_ALLOWED:{code:"APKT002",displayMessage:"Invalid App Configuration",debugMessage:()=>`The origin ${Ub()?window.origin:"unknown"} is not in your allow list. Please update your allowed domains at https://dashboard.reown.com.`},IFRAME_LOAD_FAILED:{code:"APKT003",displayMessage:"Network Error: Wallet Load Failed",debugMessage:()=>"Failed to load the embedded wallet. This may be due to network issues or server downtime. Please check your network connection and try again shortly. Contact support if the issue persists."},IFRAME_REQUEST_TIMEOUT:{code:"APKT004",displayMessage:"Wallet Request Timeout",debugMessage:()=>"The request to the embedded wallet timed out. Please check your network connection and try again shortly. Contact support if the issue persists."},UNVERIFIED_DOMAIN:{code:"APKT005",displayMessage:"Unverified Domain",debugMessage:()=>"Embedded wallet load failed. Ensure your domain is verified in https://dashboard.reown.com."},JWT_TOKEN_NOT_VALID:{code:"APKT006",displayMessage:"Session Expired",debugMessage:"Your session is invalid or expired. Please check your system’s date and time settings, then reconnect."},INVALID_PROJECT_ID:{code:"APKT007",displayMessage:"Invalid Project ID",debugMessage:"The specified project ID is invalid. Please visit https://dashboard.reown.com to obtain a valid project ID."},PROJECT_ID_NOT_CONFIGURED:{code:"APKT008",displayMessage:"Project ID Missing",debugMessage:"No project ID is configured. You can create and configure a project ID at https://dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{code:"APKT009",displayMessage:"Server Error",debugMessage:t=>`Unable to fetch App Configuration. ${t}. Please check your network connection and try again shortly. Contact support if the issue persists.`},RATE_LIMITED_APP_CONFIGURATION:{code:"APKT010",displayMessage:"Rate Limited",debugMessage:"You have been rate limited while retrieving App Configuration. Please wait a few minutes and try again. Contact support if the issue persists."}},ALERT_WARNINGS:{LOCAL_CONFIGURATION_IGNORED:{debugMessage:t=>`[Reown Config Notice] ${t}`},INACTIVE_NAMESPACE_NOT_CONNECTED:{code:"APKTW001",displayMessage:"Inactive Namespace Not Connected",debugMessage:(t,e)=>`An error occurred while connecting an inactive namespace ${t}: "${e}"`},INVALID_EMAIL:{code:"APKTW002",displayMessage:"Invalid Email Address",debugMessage:"Please enter a valid email address"}}},zJ={TOKEN_ADDRESSES_BY_SYMBOL:{USDC:{8453:LZ.asset,84532:t2e.asset}},getTokenSymbolByAddress(t){if(!t)return;const[e]=Object.entries(zJ.TOKEN_ADDRESSES_BY_SYMBOL).find(([n,r])=>Object.values(r).includes(t))??[];return e}},T5e={createLogger(t,e="error"){const n=Aw({level:e}),{logger:r}=nD({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},k5e="rpc.walletconnect.org";function e9(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const qk=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","eip155:80094","eip155:80069","eip155:560048","eip155:31","eip155:2818","eip155:57054","eip155:911867","eip155:534351","eip155:1112","eip155:534352","eip155:1111","eip155:146","eip155:130","eip155:1284","eip155:30","eip155:2810","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Lg={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===k5e}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:ie.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${ie.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return qk.includes(e)?e9(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,m,E,b,x;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(p=(f=(h=t.rpcUrls)==null?void 0:h.default)==null?void 0:f.http)==null?void 0:p[0],a=this.getDefaultRpcUrl(t,i,n),c=((b=(E=(m=t==null?void 0:t.rpcUrls)==null?void 0:m.chainDefault)==null?void 0:E.http)==null?void 0:b[0])||o,l=((x=r==null?void 0:r[i])==null?void 0:x.map(w=>w.url))||[],u=[...l,...a?[a]:[]],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:pl.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Lg.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(rx(a.url,a.config))}),qk.includes(t.caipNetworkId)&&r.push(rx(e9(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(rx(a))}),bL(r)},extendWagmiTransports(t,e,n){if(qk.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return bL([n,rx(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:ie.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=he.getActiveCaipNetworkId(),n=q.getAllRequestedCaipNetworks(),r=Array.from(((c=q.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},t9={address:/^0x(?:[A-Fa-f0-9]{40})$/u,transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},ks={set(t,e){Ko.isClient&&localStorage.setItem(`${Ve.STORAGE_KEY}${t}`,e)},get(t){return Ko.isClient?localStorage.getItem(`${Ve.STORAGE_KEY}${t}`):null},delete(t,e){Ko.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ve.STORAGE_KEY}${t}`))}},Mx=30*1e3,Ko={checkIfAllowedToTriggerEmail(){const t=ks.get(Ve.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Mx){const n=Math.ceil((Mx-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=ks.get(Ve.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Mx)return Math.ceil((Mx-e)/1e3)}return 0},checkIfRequestExists(t){return Qr.NOT_SAFE_RPC_METHODS.includes(t.method)||Qr.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(t9.transactionHash))||(t==null?void 0:t.match(t9.signedMessage)))?Ve.RPC_RESPONSE_TYPE_TX:Ve.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Qr.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var rn;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(rn||(rn={}));var t4;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(t4||(t4={}));const De=rn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Qd=t=>{switch(typeof t){case"undefined":return De.undefined;case"string":return De.string;case"number":return isNaN(t)?De.nan:De.number;case"boolean":return De.boolean;case"function":return De.function;case"bigint":return De.bigint;case"symbol":return De.symbol;case"object":return Array.isArray(t)?De.array:t===null?De.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?De.promise:typeof Map<"u"&&t instanceof Map?De.map:typeof Set<"u"&&t instanceof Set?De.set:typeof Date<"u"&&t instanceof Date?De.date:De.object;default:return De.unknown}},Ae=rn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),P5e=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class xc extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,rn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}xc.create=t=>new xc(t);const Qv=(t,e)=>{let n;switch(t.code){case Ae.invalid_type:t.received===De.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Ae.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,rn.jsonStringifyReplacer)}`;break;case Ae.unrecognized_keys:n=`Unrecognized key(s) in object: ${rn.joinValues(t.keys,", ")}`;break;case Ae.invalid_union:n="Invalid input";break;case Ae.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${rn.joinValues(t.options)}`;break;case Ae.invalid_enum_value:n=`Invalid enum value. Expected ${rn.joinValues(t.options)}, received '${t.received}'`;break;case Ae.invalid_arguments:n="Invalid function arguments";break;case Ae.invalid_return_type:n="Invalid function return type";break;case Ae.invalid_date:n="Invalid date";break;case Ae.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:rn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Ae.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Ae.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Ae.custom:n="Invalid input";break;case Ae.invalid_intersection_types:n="Intersection results could not be merged";break;case Ae.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Ae.not_finite:n="Number must be finite";break;default:n=e.defaultError,rn.assertNever(t)}return{message:n}};let WJ=Qv;function R5e(t){WJ=t}function W_(){return WJ}const H_=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},O5e=[];function je(t,e){const n=H_({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,W_(),Qv].filter(r=>!!r)});t.common.issues.push(n)}class xi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return gt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return xi.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return gt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const gt=Object.freeze({status:"aborted"}),HJ=t=>({status:"dirty",value:t}),Hi=t=>({status:"valid",value:t}),n4=t=>t.status==="aborted",r4=t=>t.status==="dirty",Jv=t=>t.status==="valid",V_=t=>typeof Promise<"u"&&t instanceof Promise;var nt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(nt||(nt={}));class Pl{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const n9=(t,e)=>{if(Jv(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new xc(t.common.issues);return this._error=n,this._error}}};function bt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class It{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Qd(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Qd(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new xi,ctx:{common:e.parent.common,data:e.data,parsedType:Qd(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(V_(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Qd(e)},i=this._parseSync({data:e,path:s.path,parent:s});return n9(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Qd(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(V_(s)?s:Promise.resolve(s));return n9(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Ae.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new kc({schema:this,typeName:ut.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return zu.create(this,this._def)}nullable(){return bm.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Sc.create(this,this._def)}promise(){return hw.create(this,this._def)}or(e){return nE.create([this,e],this._def)}and(e){return rE.create(this,e,this._def)}transform(e){return new kc({...bt(this._def),schema:this,typeName:ut.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new cE({...bt(this._def),innerType:this,defaultValue:n,typeName:ut.ZodDefault})}brand(){return new KJ({typeName:ut.ZodBranded,type:this,...bt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Y_({...bt(this._def),innerType:this,catchValue:n,typeName:ut.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return wA.create(this,e)}readonly(){return Q_.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const M5e=/^c[^\s-]{8,}$/i,D5e=/^[a-z][a-z0-9]*$/,B5e=/^[0-9A-HJKMNP-TV-Z]{26}$/,L5e=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,U5e=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,F5e="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Gk;const j5e=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,$5e=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,z5e=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function W5e(t,e){return!!((e==="v4"||!e)&&j5e.test(t)||(e==="v6"||!e)&&$5e.test(t))}class wc extends It{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==De.string){const i=this._getOrReturnCtx(e);return je(i,{code:Ae.invalid_type,expected:De.string,received:i.parsedType}),gt}const r=new xi;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),je(s,{code:Ae.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),je(s,{code:Ae.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?je(s,{code:Ae.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&je(s,{code:Ae.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")U5e.test(e.data)||(s=this._getOrReturnCtx(e,s),je(s,{validation:"email",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Gk||(Gk=new RegExp(F5e,"u")),Gk.test(e.data)||(s=this._getOrReturnCtx(e,s),je(s,{validation:"emoji",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")L5e.test(e.data)||(s=this._getOrReturnCtx(e,s),je(s,{validation:"uuid",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")M5e.test(e.data)||(s=this._getOrReturnCtx(e,s),je(s,{validation:"cuid",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")D5e.test(e.data)||(s=this._getOrReturnCtx(e,s),je(s,{validation:"cuid2",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")B5e.test(e.data)||(s=this._getOrReturnCtx(e,s),je(s,{validation:"ulid",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),je(s,{validation:"url",code:Ae.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),je(s,{validation:"regex",code:Ae.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),je(s,{code:Ae.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),je(s,{code:Ae.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),je(s,{code:Ae.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?z5e(i).test(e.data)||(s=this._getOrReturnCtx(e,s),je(s,{code:Ae.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?W5e(e.data,i.version)||(s=this._getOrReturnCtx(e,s),je(s,{validation:"ip",code:Ae.invalid_string,message:i.message}),r.dirty()):rn.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Ae.invalid_string,...nt.errToObj(r)})}_addCheck(e){return new wc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...nt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...nt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...nt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...nt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...nt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...nt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...nt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...nt.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...nt.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...nt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...nt.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...nt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...nt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...nt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...nt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...nt.errToObj(n)})}nonempty(e){return this.min(1,nt.errToObj(e))}trim(){return new wc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new wc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new wc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}wc.create=t=>{var e;return new wc({checks:[],typeName:ut.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...bt(t)})};function H5e(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Gh extends It{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==De.number){const i=this._getOrReturnCtx(e);return je(i,{code:Ae.invalid_type,expected:De.number,received:i.parsedType}),gt}let r;const s=new xi;for(const i of this._def.checks)i.kind==="int"?rn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),je(r,{code:Ae.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),je(r,{code:Ae.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),je(r,{code:Ae.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?H5e(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),je(r,{code:Ae.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),je(r,{code:Ae.not_finite,message:i.message}),s.dirty()):rn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,nt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,nt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,nt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,nt.toString(n))}setLimit(e,n,r,s){return new Gh({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:nt.toString(s)}]})}_addCheck(e){return new Gh({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:nt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:nt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:nt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:nt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:nt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:nt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:nt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:nt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:nt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&rn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Gh.create=t=>new Gh({checks:[],typeName:ut.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...bt(t)});class Yh extends It{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==De.bigint){const i=this._getOrReturnCtx(e);return je(i,{code:Ae.invalid_type,expected:De.bigint,received:i.parsedType}),gt}let r;const s=new xi;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),je(r,{code:Ae.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),je(r,{code:Ae.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),je(r,{code:Ae.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):rn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,nt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,nt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,nt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,nt.toString(n))}setLimit(e,n,r,s){return new Yh({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:nt.toString(s)}]})}_addCheck(e){return new Yh({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:nt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:nt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:nt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:nt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:nt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Yh.create=t=>{var e;return new Yh({checks:[],typeName:ut.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...bt(t)})};class Xv extends It{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==De.boolean){const r=this._getOrReturnCtx(e);return je(r,{code:Ae.invalid_type,expected:De.boolean,received:r.parsedType}),gt}return Hi(e.data)}}Xv.create=t=>new Xv({typeName:ut.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...bt(t)});class ym extends It{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==De.date){const i=this._getOrReturnCtx(e);return je(i,{code:Ae.invalid_type,expected:De.date,received:i.parsedType}),gt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return je(i,{code:Ae.invalid_date}),gt}const r=new xi;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),je(s,{code:Ae.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),je(s,{code:Ae.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):rn.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ym({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:nt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:nt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}ym.create=t=>new ym({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ut.ZodDate,...bt(t)});class K_ extends It{_parse(e){if(this._getType(e)!==De.symbol){const r=this._getOrReturnCtx(e);return je(r,{code:Ae.invalid_type,expected:De.symbol,received:r.parsedType}),gt}return Hi(e.data)}}K_.create=t=>new K_({typeName:ut.ZodSymbol,...bt(t)});class eE extends It{_parse(e){if(this._getType(e)!==De.undefined){const r=this._getOrReturnCtx(e);return je(r,{code:Ae.invalid_type,expected:De.undefined,received:r.parsedType}),gt}return Hi(e.data)}}eE.create=t=>new eE({typeName:ut.ZodUndefined,...bt(t)});class tE extends It{_parse(e){if(this._getType(e)!==De.null){const r=this._getOrReturnCtx(e);return je(r,{code:Ae.invalid_type,expected:De.null,received:r.parsedType}),gt}return Hi(e.data)}}tE.create=t=>new tE({typeName:ut.ZodNull,...bt(t)});class dw extends It{constructor(){super(...arguments),this._any=!0}_parse(e){return Hi(e.data)}}dw.create=t=>new dw({typeName:ut.ZodAny,...bt(t)});class Zp extends It{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Hi(e.data)}}Zp.create=t=>new Zp({typeName:ut.ZodUnknown,...bt(t)});class td extends It{_parse(e){const n=this._getOrReturnCtx(e);return je(n,{code:Ae.invalid_type,expected:De.never,received:n.parsedType}),gt}}td.create=t=>new td({typeName:ut.ZodNever,...bt(t)});class q_ extends It{_parse(e){if(this._getType(e)!==De.undefined){const r=this._getOrReturnCtx(e);return je(r,{code:Ae.invalid_type,expected:De.void,received:r.parsedType}),gt}return Hi(e.data)}}q_.create=t=>new q_({typeName:ut.ZodVoid,...bt(t)});class Sc extends It{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==De.array)return je(n,{code:Ae.invalid_type,expected:De.array,received:n.parsedType}),gt;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(je(n,{code:o?Ae.too_big:Ae.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(je(n,{code:Ae.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(je(n,{code:Ae.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Pl(n,o,n.path,a)))).then(o=>xi.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Pl(n,o,n.path,a)));return xi.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Sc({...this._def,minLength:{value:e,message:nt.toString(n)}})}max(e,n){return new Sc({...this._def,maxLength:{value:e,message:nt.toString(n)}})}length(e,n){return new Sc({...this._def,exactLength:{value:e,message:nt.toString(n)}})}nonempty(e){return this.min(1,e)}}Sc.create=(t,e)=>new Sc({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ut.ZodArray,...bt(e)});function Ug(t){if(t instanceof er){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=zu.create(Ug(r))}return new er({...t._def,shape:()=>e})}else return t instanceof Sc?new Sc({...t._def,type:Ug(t.element)}):t instanceof zu?zu.create(Ug(t.unwrap())):t instanceof bm?bm.create(Ug(t.unwrap())):t instanceof Rl?Rl.create(t.items.map(e=>Ug(e))):t}class er extends It{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=rn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==De.object){const l=this._getOrReturnCtx(e);return je(l,{code:Ae.invalid_type,expected:De.object,received:l.parsedType}),gt}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof td&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Pl(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof td){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(je(s,{code:Ae.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Pl(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>xi.mergeObjectSync(r,l)):xi.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return nt.errToObj,new er({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=nt.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new er({...this._def,unknownKeys:"strip"})}passthrough(){return new er({...this._def,unknownKeys:"passthrough"})}extend(e){return new er({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new er({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ut.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new er({...this._def,catchall:e})}pick(e){const n={};return rn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new er({...this._def,shape:()=>n})}omit(e){const n={};return rn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new er({...this._def,shape:()=>n})}deepPartial(){return Ug(this)}partial(e){const n={};return rn.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new er({...this._def,shape:()=>n})}required(e){const n={};return rn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof zu;)i=i._def.innerType;n[r]=i}}),new er({...this._def,shape:()=>n})}keyof(){return VJ(rn.objectKeys(this.shape))}}er.create=(t,e)=>new er({shape:()=>t,unknownKeys:"strip",catchall:td.create(),typeName:ut.ZodObject,...bt(e)});er.strictCreate=(t,e)=>new er({shape:()=>t,unknownKeys:"strict",catchall:td.create(),typeName:ut.ZodObject,...bt(e)});er.lazycreate=(t,e)=>new er({shape:t,unknownKeys:"strip",catchall:td.create(),typeName:ut.ZodObject,...bt(e)});class nE extends It{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new xc(a.ctx.common.issues));return je(n,{code:Ae.invalid_union,unionErrors:o}),gt}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new xc(c));return je(n,{code:Ae.invalid_union,unionErrors:a}),gt}}get options(){return this._def.options}}nE.create=(t,e)=>new nE({options:t,typeName:ut.ZodUnion,...bt(e)});const iC=t=>t instanceof iE?iC(t.schema):t instanceof kc?iC(t.innerType()):t instanceof oE?[t.value]:t instanceof Zh?t.options:t instanceof aE?Object.keys(t.enum):t instanceof cE?iC(t._def.innerType):t instanceof eE?[void 0]:t instanceof tE?[null]:null;class VI extends It{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==De.object)return je(n,{code:Ae.invalid_type,expected:De.object,received:n.parsedType}),gt;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(je(n,{code:Ae.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),gt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=iC(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new VI({typeName:ut.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...bt(r)})}}function s4(t,e){const n=Qd(t),r=Qd(e);if(t===e)return{valid:!0,data:t};if(n===De.object&&r===De.object){const s=rn.objectKeys(e),i=rn.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=s4(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===De.array&&r===De.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=s4(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===De.date&&r===De.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class rE extends It{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(n4(i)||n4(o))return gt;const a=s4(i.value,o.value);return a.valid?((r4(i)||r4(o))&&n.dirty(),{status:n.value,value:a.data}):(je(r,{code:Ae.invalid_intersection_types}),gt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}rE.create=(t,e,n)=>new rE({left:t,right:e,typeName:ut.ZodIntersection,...bt(n)});class Rl extends It{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==De.array)return je(r,{code:Ae.invalid_type,expected:De.array,received:r.parsedType}),gt;if(r.data.length<this._def.items.length)return je(r,{code:Ae.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),gt;!this._def.rest&&r.data.length>this._def.items.length&&(je(r,{code:Ae.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Pl(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>xi.mergeArray(n,o)):xi.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Rl({...this._def,rest:e})}}Rl.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Rl({items:t,typeName:ut.ZodTuple,rest:null,...bt(e)})};class sE extends It{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==De.object)return je(r,{code:Ae.invalid_type,expected:De.object,received:r.parsedType}),gt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Pl(r,a,r.path,a)),value:o._parse(new Pl(r,r.data[a],r.path,a))});return r.common.async?xi.mergeObjectAsync(n,s):xi.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof It?new sE({keyType:e,valueType:n,typeName:ut.ZodRecord,...bt(r)}):new sE({keyType:wc.create(),valueType:e,typeName:ut.ZodRecord,...bt(n)})}}class G_ extends It{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==De.map)return je(r,{code:Ae.invalid_type,expected:De.map,received:r.parsedType}),gt;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new Pl(r,a,r.path,[l,"key"])),value:i._parse(new Pl(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return gt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return gt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}G_.create=(t,e,n)=>new G_({valueType:e,keyType:t,typeName:ut.ZodMap,...bt(n)});class wm extends It{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==De.set)return je(r,{code:Ae.invalid_type,expected:De.set,received:r.parsedType}),gt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(je(r,{code:Ae.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(je(r,{code:Ae.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return gt;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new Pl(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new wm({...this._def,minSize:{value:e,message:nt.toString(n)}})}max(e,n){return new wm({...this._def,maxSize:{value:e,message:nt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}wm.create=(t,e)=>new wm({valueType:t,minSize:null,maxSize:null,typeName:ut.ZodSet,...bt(e)});class D0 extends It{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==De.function)return je(n,{code:Ae.invalid_type,expected:De.function,received:n.parsedType}),gt;function r(a,c){return H_({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,W_(),Qv].filter(l=>!!l),issueData:{code:Ae.invalid_arguments,argumentsError:c}})}function s(a,c){return H_({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,W_(),Qv].filter(l=>!!l),issueData:{code:Ae.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof hw){const a=this;return Hi(async function(...c){const l=new xc([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return Hi(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new xc([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new xc([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new D0({...this._def,args:Rl.create(e).rest(Zp.create())})}returns(e){return new D0({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new D0({args:e||Rl.create([]).rest(Zp.create()),returns:n||Zp.create(),typeName:ut.ZodFunction,...bt(r)})}}class iE extends It{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}iE.create=(t,e)=>new iE({getter:t,typeName:ut.ZodLazy,...bt(e)});class oE extends It{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return je(n,{received:n.data,code:Ae.invalid_literal,expected:this._def.value}),gt}return{status:"valid",value:e.data}}get value(){return this._def.value}}oE.create=(t,e)=>new oE({value:t,typeName:ut.ZodLiteral,...bt(e)});function VJ(t,e){return new Zh({values:t,typeName:ut.ZodEnum,...bt(e)})}class Zh extends It{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return je(n,{expected:rn.joinValues(r),received:n.parsedType,code:Ae.invalid_type}),gt}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return je(n,{received:n.data,code:Ae.invalid_enum_value,options:r}),gt}return Hi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return Zh.create(e)}exclude(e){return Zh.create(this.options.filter(n=>!e.includes(n)))}}Zh.create=VJ;class aE extends It{_parse(e){const n=rn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==De.string&&r.parsedType!==De.number){const s=rn.objectValues(n);return je(r,{expected:rn.joinValues(s),received:r.parsedType,code:Ae.invalid_type}),gt}if(n.indexOf(e.data)===-1){const s=rn.objectValues(n);return je(r,{received:r.data,code:Ae.invalid_enum_value,options:s}),gt}return Hi(e.data)}get enum(){return this._def.values}}aE.create=(t,e)=>new aE({values:t,typeName:ut.ZodNativeEnum,...bt(e)});class hw extends It{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==De.promise&&n.common.async===!1)return je(n,{code:Ae.invalid_type,expected:De.promise,received:n.parsedType}),gt;const r=n.parsedType===De.promise?n.data:Promise.resolve(n.data);return Hi(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}hw.create=(t,e)=>new hw({type:t,typeName:ut.ZodPromise,...bt(e)});class kc extends It{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ut.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{je(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?gt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?gt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Jv(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Jv(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);rn.assertNever(s)}}kc.create=(t,e,n)=>new kc({schema:t,typeName:ut.ZodEffects,effect:e,...bt(n)});kc.createWithPreprocess=(t,e,n)=>new kc({schema:e,effect:{type:"preprocess",transform:t},typeName:ut.ZodEffects,...bt(n)});class zu extends It{_parse(e){return this._getType(e)===De.undefined?Hi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}zu.create=(t,e)=>new zu({innerType:t,typeName:ut.ZodOptional,...bt(e)});class bm extends It{_parse(e){return this._getType(e)===De.null?Hi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}bm.create=(t,e)=>new bm({innerType:t,typeName:ut.ZodNullable,...bt(e)});class cE extends It{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===De.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}cE.create=(t,e)=>new cE({innerType:t,typeName:ut.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...bt(e)});class Y_ extends It{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return V_(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new xc(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new xc(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Y_.create=(t,e)=>new Y_({innerType:t,typeName:ut.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...bt(e)});class Z_ extends It{_parse(e){if(this._getType(e)!==De.nan){const r=this._getOrReturnCtx(e);return je(r,{code:Ae.invalid_type,expected:De.nan,received:r.parsedType}),gt}return{status:"valid",value:e.data}}}Z_.create=t=>new Z_({typeName:ut.ZodNaN,...bt(t)});const V5e=Symbol("zod_brand");class KJ extends It{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class wA extends It{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?gt:i.status==="dirty"?(n.dirty(),HJ(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?gt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new wA({in:e,out:n,typeName:ut.ZodPipeline})}}class Q_ extends It{_parse(e){const n=this._def.innerType._parse(e);return Jv(n)&&(n.value=Object.freeze(n.value)),n}}Q_.create=(t,e)=>new Q_({innerType:t,typeName:ut.ZodReadonly,...bt(e)});const qJ=(t,e={},n)=>t?dw.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):dw.create(),K5e={object:er.lazycreate};var ut;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ut||(ut={}));const q5e=(t,e={message:`Input not instance of ${t.name}`})=>qJ(n=>n instanceof t,e),GJ=wc.create,YJ=Gh.create,G5e=Z_.create,Y5e=Yh.create,ZJ=Xv.create,Z5e=ym.create,Q5e=K_.create,J5e=eE.create,X5e=tE.create,e6e=dw.create,t6e=Zp.create,n6e=td.create,r6e=q_.create,s6e=Sc.create,i6e=er.create,o6e=er.strictCreate,a6e=nE.create,c6e=VI.create,l6e=rE.create,u6e=Rl.create,d6e=sE.create,h6e=G_.create,f6e=wm.create,p6e=D0.create,m6e=iE.create,g6e=oE.create,y6e=Zh.create,w6e=aE.create,b6e=hw.create,r9=kc.create,v6e=zu.create,E6e=bm.create,A6e=kc.createWithPreprocess,x6e=wA.create,S6e=()=>GJ().optional(),C6e=()=>YJ().optional(),_6e=()=>ZJ().optional(),I6e={string:t=>wc.create({...t,coerce:!0}),number:t=>Gh.create({...t,coerce:!0}),boolean:t=>Xv.create({...t,coerce:!0}),bigint:t=>Yh.create({...t,coerce:!0}),date:t=>ym.create({...t,coerce:!0})},N6e=gt;var $=Object.freeze({__proto__:null,defaultErrorMap:Qv,setErrorMap:R5e,getErrorMap:W_,makeIssue:H_,EMPTY_PATH:O5e,addIssueToContext:je,ParseStatus:xi,INVALID:gt,DIRTY:HJ,OK:Hi,isAborted:n4,isDirty:r4,isValid:Jv,isAsync:V_,get util(){return rn},get objectUtil(){return t4},ZodParsedType:De,getParsedType:Qd,ZodType:It,ZodString:wc,ZodNumber:Gh,ZodBigInt:Yh,ZodBoolean:Xv,ZodDate:ym,ZodSymbol:K_,ZodUndefined:eE,ZodNull:tE,ZodAny:dw,ZodUnknown:Zp,ZodNever:td,ZodVoid:q_,ZodArray:Sc,ZodObject:er,ZodUnion:nE,ZodDiscriminatedUnion:VI,ZodIntersection:rE,ZodTuple:Rl,ZodRecord:sE,ZodMap:G_,ZodSet:wm,ZodFunction:D0,ZodLazy:iE,ZodLiteral:oE,ZodEnum:Zh,ZodNativeEnum:aE,ZodPromise:hw,ZodEffects:kc,ZodTransformer:kc,ZodOptional:zu,ZodNullable:bm,ZodDefault:cE,ZodCatch:Y_,ZodNaN:Z_,BRAND:V5e,ZodBranded:KJ,ZodPipeline:wA,ZodReadonly:Q_,custom:qJ,Schema:It,ZodSchema:It,late:K5e,get ZodFirstPartyTypeKind(){return ut},coerce:I6e,any:e6e,array:s6e,bigint:Y5e,boolean:ZJ,date:Z5e,discriminatedUnion:c6e,effect:r9,enum:y6e,function:p6e,instanceof:q5e,intersection:l6e,lazy:m6e,literal:g6e,map:h6e,nan:G5e,nativeEnum:w6e,never:n6e,null:X5e,nullable:E6e,number:YJ,object:i6e,oboolean:_6e,onumber:C6e,optional:v6e,ostring:S6e,pipeline:x6e,preprocess:A6e,promise:b6e,record:d6e,set:f6e,strictObject:o6e,string:GJ,symbol:Q5e,transformer:r9,tuple:u6e,undefined:J5e,union:a6e,unknown:t6e,void:r6e,NEVER:N6e,ZodIssueCode:Ae,quotelessJson:P5e,ZodError:xc});const lr=$.object({message:$.string()});function Le(t){return $.literal(Ve[t])}const KI=$.object({serializedMessage:$.string().optional(),accountAddress:$.string(),chainId:$.string(),notBefore:$.string().optional(),domain:$.string(),uri:$.string(),version:$.string(),nonce:$.string(),statement:$.string().optional(),resources:$.array($.string()).optional(),requestId:$.string().optional(),issuedAt:$.string().optional(),expirationTime:$.string().optional()});$.object({accessList:$.array($.string()),blockHash:$.string().nullable(),blockNumber:$.string().nullable(),chainId:$.string().or($.number()),from:$.string(),gas:$.string(),hash:$.string(),input:$.string().nullable(),maxFeePerGas:$.string(),maxPriorityFeePerGas:$.string(),nonce:$.string(),r:$.string(),s:$.string(),to:$.string(),transactionIndex:$.string().nullable(),type:$.string(),v:$.string(),value:$.string()});const T6e=$.object({chainId:$.string().or($.number()),rpcUrl:$.optional($.string())}),k6e=$.object({email:$.string().email()}),P6e=$.object({otp:$.string()}),R6e=$.object({uri:$.string(),preferredAccountType:$.optional($.string()),chainId:$.optional($.string().or($.number())),siwxMessage:$.optional(KI),rpcUrl:$.optional($.string())}),O6e=$.object({chainId:$.optional($.string().or($.number())),preferredAccountType:$.optional($.string()),socialUri:$.optional($.string()),siwxMessage:$.optional(KI),rpcUrl:$.optional($.string())}),M6e=$.object({provider:$.enum(["google","github","apple","facebook","x","discord"])}),D6e=$.object({email:$.string().email()}),B6e=$.object({otp:$.string()}),L6e=$.object({otp:$.string()}),U6e=$.object({themeMode:$.optional($.enum(["light","dark"])),themeVariables:$.optional($.record($.string(),$.string().or($.number()))),w3mThemeVariables:$.optional($.record($.string(),$.string()))}),F6e=$.object({metadata:$.object({name:$.string(),description:$.string(),url:$.string(),icons:$.array($.string())}).optional(),sdkVersion:$.string().optional(),sdkType:$.string().optional(),projectId:$.string()}),j6e=$.object({type:$.string()}),$6e=$.object({action:$.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),z6e=$.object({url:$.string()}),W6e=$.object({userName:$.string()}),H6e=$.object({email:$.string().optional().nullable(),address:$.string(),chainId:$.string().or($.number()),accounts:$.array($.object({address:$.string(),type:$.enum([Qr.ACCOUNT_TYPES.EOA,Qr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:$.string().optional().nullable(),preferredAccountType:$.optional($.string()),signature:$.string().optional(),message:$.string().optional(),siwxMessage:$.optional(KI)}),V6e=$.object({action:$.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),K6e=$.object({email:$.string().email().optional().nullable(),address:$.string(),chainId:$.string().or($.number()),smartAccountDeployed:$.optional($.boolean()),accounts:$.array($.object({address:$.string(),type:$.enum([Qr.ACCOUNT_TYPES.EOA,Qr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:$.optional($.string()),signature:$.string().optional(),message:$.string().optional(),siwxMessage:$.optional(KI)}),q6e=$.object({uri:$.string()}),G6e=$.object({isConnected:$.boolean()}),Y6e=$.object({chainId:$.string().or($.number())}),Z6e=$.object({chainId:$.string().or($.number())}),Q6e=$.object({newEmail:$.string().email()}),J6e=$.object({smartAccountEnabledNetworks:$.array($.number())});$.object({address:$.string(),isDeployed:$.boolean()});const X6e=$.object({version:$.string().optional()}),e8e=$.object({type:$.string(),address:$.string()}),t8e=$.any(),n8e=$.object({method:$.literal("eth_accounts")}),r8e=$.object({method:$.literal("eth_blockNumber")}),s8e=$.object({method:$.literal("eth_call"),params:$.array($.any())}),i8e=$.object({method:$.literal("eth_chainId")}),o8e=$.object({method:$.literal("eth_estimateGas"),params:$.array($.any())}),a8e=$.object({method:$.literal("eth_feeHistory"),params:$.array($.any())}),c8e=$.object({method:$.literal("eth_gasPrice")}),l8e=$.object({method:$.literal("eth_getAccount"),params:$.array($.any())}),u8e=$.object({method:$.literal("eth_getBalance"),params:$.array($.any())}),d8e=$.object({method:$.literal("eth_getBlockByHash"),params:$.array($.any())}),h8e=$.object({method:$.literal("eth_getBlockByNumber"),params:$.array($.any())}),f8e=$.object({method:$.literal("eth_getBlockReceipts"),params:$.array($.any())}),p8e=$.object({method:$.literal("eth_getBlockTransactionCountByHash"),params:$.array($.any())}),m8e=$.object({method:$.literal("eth_getBlockTransactionCountByNumber"),params:$.array($.any())}),g8e=$.object({method:$.literal("eth_getCode"),params:$.array($.any())}),y8e=$.object({method:$.literal("eth_getFilterChanges"),params:$.array($.any())}),w8e=$.object({method:$.literal("eth_getFilterLogs"),params:$.array($.any())}),b8e=$.object({method:$.literal("eth_getLogs"),params:$.array($.any())}),v8e=$.object({method:$.literal("eth_getProof"),params:$.array($.any())}),E8e=$.object({method:$.literal("eth_getStorageAt"),params:$.array($.any())}),A8e=$.object({method:$.literal("eth_getTransactionByBlockHashAndIndex"),params:$.array($.any())}),x8e=$.object({method:$.literal("eth_getTransactionByBlockNumberAndIndex"),params:$.array($.any())}),S8e=$.object({method:$.literal("eth_getTransactionByHash"),params:$.array($.any())}),C8e=$.object({method:$.literal("eth_getTransactionCount"),params:$.array($.any())}),_8e=$.object({method:$.literal("eth_getTransactionReceipt"),params:$.array($.any())}),I8e=$.object({method:$.literal("eth_getUncleCountByBlockHash"),params:$.array($.any())}),N8e=$.object({method:$.literal("eth_getUncleCountByBlockNumber"),params:$.array($.any())}),T8e=$.object({method:$.literal("eth_maxPriorityFeePerGas")}),k8e=$.object({method:$.literal("eth_newBlockFilter")}),P8e=$.object({method:$.literal("eth_newFilter"),params:$.array($.any())}),R8e=$.object({method:$.literal("eth_newPendingTransactionFilter")}),O8e=$.object({method:$.literal("eth_sendRawTransaction"),params:$.array($.any())}),M8e=$.object({method:$.literal("eth_syncing"),params:$.array($.any())}),D8e=$.object({method:$.literal("eth_uninstallFilter"),params:$.array($.any())}),s9=$.object({method:$.literal("personal_sign"),params:$.array($.any())}),B8e=$.object({method:$.literal("eth_signTypedData_v4"),params:$.array($.any())}),L8e=$.object({method:$.literal("eth_sendTransaction"),params:$.array($.any())}),U8e=$.object({method:$.literal("solana_signMessage"),params:$.object({message:$.string(),pubkey:$.string()})}),F8e=$.object({method:$.literal("solana_signTransaction"),params:$.object({transaction:$.string()})}),j8e=$.object({method:$.literal("solana_signAllTransactions"),params:$.object({transactions:$.array($.string())})}),$8e=$.object({method:$.literal("solana_signAndSendTransaction"),params:$.object({transaction:$.string(),options:$.object({skipPreflight:$.boolean().optional(),preflightCommitment:$.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:$.number().optional(),minContextSlot:$.number().optional()}).optional()})}),z8e=$.object({method:$.literal("wallet_sendCalls"),params:$.array($.object({chainId:$.string().or($.number()).optional(),from:$.string().optional(),version:$.string().optional(),capabilities:$.any().optional(),calls:$.array($.object({to:$.string().startsWith("0x"),data:$.string().startsWith("0x").optional(),value:$.string().optional()}))}))}),W8e=$.object({method:$.literal("wallet_getCallsStatus"),params:$.array($.string())}),H8e=$.object({method:$.literal("wallet_getCapabilities"),params:$.array($.string().or($.number()).optional()).optional()}),V8e=$.object({method:$.literal("wallet_grantPermissions"),params:$.array($.any())}),K8e=$.object({method:$.literal("wallet_revokePermissions"),params:$.any()}),q8e=$.object({method:$.literal("wallet_getAssets"),params:$.any()}),i9=$.object({token:$.string()}),Ue=$.object({id:$.string().optional()}),Yk={appEvent:Ue.extend({type:Le("APP_SWITCH_NETWORK"),payload:T6e}).or(Ue.extend({type:Le("APP_CONNECT_EMAIL"),payload:k6e})).or(Ue.extend({type:Le("APP_CONNECT_DEVICE")})).or(Ue.extend({type:Le("APP_CONNECT_OTP"),payload:P6e})).or(Ue.extend({type:Le("APP_CONNECT_SOCIAL"),payload:R6e})).or(Ue.extend({type:Le("APP_GET_FARCASTER_URI")})).or(Ue.extend({type:Le("APP_CONNECT_FARCASTER")})).or(Ue.extend({type:Le("APP_GET_USER"),payload:$.optional(O6e)})).or(Ue.extend({type:Le("APP_GET_SOCIAL_REDIRECT_URI"),payload:M6e})).or(Ue.extend({type:Le("APP_SIGN_OUT")})).or(Ue.extend({type:Le("APP_IS_CONNECTED"),payload:$.optional(i9)})).or(Ue.extend({type:Le("APP_GET_CHAIN_ID")})).or(Ue.extend({type:Le("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Ue.extend({type:Le("APP_INIT_SMART_ACCOUNT")})).or(Ue.extend({type:Le("APP_SET_PREFERRED_ACCOUNT"),payload:j6e})).or(Ue.extend({type:Le("APP_RPC_REQUEST"),payload:s9.or(q8e).or(n8e).or(r8e).or(s8e).or(i8e).or(o8e).or(a8e).or(c8e).or(l8e).or(u8e).or(d8e).or(h8e).or(f8e).or(p8e).or(m8e).or(g8e).or(y8e).or(w8e).or(b8e).or(v8e).or(E8e).or(A8e).or(x8e).or(S8e).or(C8e).or(_8e).or(I8e).or(N8e).or(T8e).or(k8e).or(P8e).or(R8e).or(O8e).or(M8e).or(D8e).or(s9).or(B8e).or(L8e).or(U8e).or(F8e).or(j8e).or($8e).or(W8e).or(z8e).or(H8e).or(V8e).or(K8e).and($.object({chainId:$.string().or($.number()).optional(),chainNamespace:$.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:$.string().optional()}))})).or(Ue.extend({type:Le("APP_UPDATE_EMAIL"),payload:D6e})).or(Ue.extend({type:Le("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:B6e})).or(Ue.extend({type:Le("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:L6e})).or(Ue.extend({type:Le("APP_SYNC_THEME"),payload:U6e})).or(Ue.extend({type:Le("APP_SYNC_DAPP_DATA"),payload:F6e})).or(Ue.extend({type:Le("APP_RELOAD")})).or(Ue.extend({type:Le("APP_RPC_ABORT")})),frameEvent:Ue.extend({type:Le("FRAME_SWITCH_NETWORK_ERROR"),payload:lr}).or(Ue.extend({type:Le("FRAME_SWITCH_NETWORK_SUCCESS"),payload:Z6e})).or(Ue.extend({type:Le("FRAME_CONNECT_EMAIL_SUCCESS"),payload:$6e})).or(Ue.extend({type:Le("FRAME_CONNECT_EMAIL_ERROR"),payload:lr})).or(Ue.extend({type:Le("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:z6e})).or(Ue.extend({type:Le("FRAME_GET_FARCASTER_URI_ERROR"),payload:lr})).or(Ue.extend({type:Le("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:W6e})).or(Ue.extend({type:Le("FRAME_CONNECT_FARCASTER_ERROR"),payload:lr})).or(Ue.extend({type:Le("FRAME_CONNECT_OTP_ERROR"),payload:lr})).or(Ue.extend({type:Le("FRAME_CONNECT_OTP_SUCCESS")})).or(Ue.extend({type:Le("FRAME_CONNECT_DEVICE_ERROR"),payload:lr})).or(Ue.extend({type:Le("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Ue.extend({type:Le("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:H6e})).or(Ue.extend({type:Le("FRAME_CONNECT_SOCIAL_ERROR"),payload:lr})).or(Ue.extend({type:Le("FRAME_GET_USER_ERROR"),payload:lr})).or(Ue.extend({type:Le("FRAME_GET_USER_SUCCESS"),payload:K6e})).or(Ue.extend({type:Le("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:lr})).or(Ue.extend({type:Le("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:q6e})).or(Ue.extend({type:Le("FRAME_SIGN_OUT_ERROR"),payload:lr})).or(Ue.extend({type:Le("FRAME_SIGN_OUT_SUCCESS")})).or(Ue.extend({type:Le("FRAME_IS_CONNECTED_ERROR"),payload:lr})).or(Ue.extend({type:Le("FRAME_IS_CONNECTED_SUCCESS"),payload:G6e})).or(Ue.extend({type:Le("FRAME_GET_CHAIN_ID_ERROR"),payload:lr})).or(Ue.extend({type:Le("FRAME_GET_CHAIN_ID_SUCCESS"),payload:Y6e})).or(Ue.extend({type:Le("FRAME_RPC_REQUEST_ERROR"),payload:lr})).or(Ue.extend({type:Le("FRAME_RPC_REQUEST_SUCCESS"),payload:t8e})).or(Ue.extend({type:Le("FRAME_SESSION_UPDATE"),payload:i9})).or(Ue.extend({type:Le("FRAME_UPDATE_EMAIL_ERROR"),payload:lr})).or(Ue.extend({type:Le("FRAME_UPDATE_EMAIL_SUCCESS"),payload:V6e})).or(Ue.extend({type:Le("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:lr})).or(Ue.extend({type:Le("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Ue.extend({type:Le("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:lr})).or(Ue.extend({type:Le("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:Q6e})).or(Ue.extend({type:Le("FRAME_SYNC_THEME_ERROR"),payload:lr})).or(Ue.extend({type:Le("FRAME_SYNC_THEME_SUCCESS")})).or(Ue.extend({type:Le("FRAME_SYNC_DAPP_DATA_ERROR"),payload:lr})).or(Ue.extend({type:Le("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Ue.extend({type:Le("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:J6e})).or(Ue.extend({type:Le("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:lr})).or(Ue.extend({type:Le("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:lr})).or(Ue.extend({type:Le("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:e8e})).or(Ue.extend({type:Le("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:lr})).or(Ue.extend({type:Le("FRAME_READY"),payload:X6e})).or(Ue.extend({type:Le("FRAME_RELOAD_ERROR"),payload:lr})).or(Ue.extend({type:Le("FRAME_RELOAD_SUCCESS")}))};function Zk(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function G8e({projectId:t,chainId:e,enableLogger:n,rpcUrl:r=ie.BLOCKCHAIN_API_RPC_URL,enableCloudAuthAccount:s=!1}){const i=new URL(b_e);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",E_e),i.searchParams.set("enableLogger",String(n)),i.searchParams.set("rpcUrl",r),s&&i.searchParams.set("enableCloudAuthAccount","true"),i.toString()}class Y8e{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,enableCloudAuthAccount:i=!1,rpcUrl:o=ie.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const a=document.getElementById("w3m-iframe");this.iframe&&!a&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(a,c,l)=>{function u({data:d}){var f;if(!Zk(Ve.FRAME_EVENT_KEY,d))return;const h=Yk.frameEvent.safeParse(d);if(!h.success){console.warn("W3mFrame: invalid frame event",h.error.message);return}((f=h.data)==null?void 0:f.id)===a&&(c(h.data),window.removeEventListener("message",u))}Ko.isClient&&(window.addEventListener("message",u),l.addEventListener("abort",()=>{window.removeEventListener("message",u)}))},onFrameEvent:a=>{Ko.isClient&&window.addEventListener("message",({data:c})=>{if(!Zk(Ve.FRAME_EVENT_KEY,c))return;const l=Yk.frameEvent.safeParse(c);l.success?a(l.data):console.warn("W3mFrame: invalid frame event",l.error.message)})},onAppEvent:a=>{Ko.isClient&&window.addEventListener("message",({data:c})=>{if(!Zk(Ve.APP_EVENT_KEY,c))return;const l=Yk.appEvent.safeParse(c);l.success||console.warn("W3mFrame: invalid app event",l.error.message),a(c)})},postAppEvent:a=>{var c;if(Ko.isClient){if(!((c=this.iframe)!=null&&c.contentWindow))throw new Error("W3mFrame: iframe is not set");this.iframe.contentWindow.postMessage(a,"*")}},postFrameEvent:a=>{if(Ko.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");parent.postMessage(a,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),this.rpcUrl=o,n&&(this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),Ko.isClient)){const a=document.createElement("iframe");a.id="w3m-iframe",a.src=G8e({projectId:e,chainId:r,enableLogger:s,rpcUrl:this.rpcUrl,enableCloudAuthAccount:i}),a.name="w3m-secure-iframe",a.style.position="fixed",a.style.zIndex="999999",a.style.display="none",a.style.border="none",a.style.animationDelay="0s, 50ms",a.style.borderBottomLeftRadius="clamp(0px, var(--apkt-borderRadius-8), 44px)",a.style.borderBottomRightRadius="clamp(0px, var(--apkt-borderRadius-8), 44px)",this.iframe=a,this.iframe.onerror=()=>{var c;(c=this.frameLoadPromiseResolver)==null||c.reject("Unable to load email login dependency")},this.events.onFrameEvent(c=>{var l;c.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(l=this.frameLoadPromiseResolver)==null||l.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class Z8e{constructor(e){var i;const n=Aw({level:v_e}),{logger:r,chunkLoggerController:s}=nD({opts:n});this.logger=Si(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class Q8e{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:c}){this.openRpcRequests=new Map,this.isInitialized=!1,r&&(this.w3mLogger=new Z8e(e)),this.abortController=i,this.getActiveCaipNetwork=o,this.getCaipNetworks=a;const l=this.getRpcUrl(n);this.w3mFrame=new Y8e({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:l,enableCloudAuthAccount:c}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!ks.get(Ve.EMAIL_LOGIN_USED_KEY)}getEmail(){return ks.get(Ve.EMAIL)}getUsername(){return ks.get(Ve.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ve.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Ko.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ve.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ve.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ve.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ve.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ve.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ve.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ve.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ve.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ve.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ve.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ve.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ve.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ve.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:Ve.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ve.APP_GET_USER,payload:{...e,chainId:r,rpcUrl:this.getRpcUrl(r)}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:Ve.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ve.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ve.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:Ve.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ve.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(Qr.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:Ve.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ve.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ve.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Qr.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(Array.from(this.openRpcRequests.values()).map(async({abortController:n,method:r})=>{Qr.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:Ve.APP_RPC_ABORT})})),this.openRpcRequests.clear()}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ve.APP_SYNC_DAPP_DATA,Ve.APP_SYNC_THEME,Ve.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ve.APP_CONNECT_EMAIL,Ve.APP_CONNECT_DEVICE,Ve.APP_CONNECT_OTP,Ve.APP_CONNECT_SOCIAL,Ve.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,m;const u=Math.random().toString(36).substring(7);(m=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||m.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const E=e;this.openRpcRequests.set(u,{...E.payload,abortController:d})}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});const h=(E,b)=>{var x,w,N;E.id===u&&((w=b==null?void 0:(x=b.logger).info)==null||w.call(x,{framEvent:E,id:u},"Received frame response"),this.openRpcRequests.delete(E.id),E.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in E&&c(E.payload),c(void 0)):E.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in E&&l(new Error(((N=E.payload)==null?void 0:N.message)||"An error occurred")),l(new Error("An error occurred"))))};this.w3mFrame.events.registerFrameEventHandler(u,E=>h(E,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){ks.set(Ve.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){ks.set(Ve.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&ks.set(Ve.EMAIL,e),ks.set(Ve.EMAIL_LOGIN_USED_KEY,"true"),ks.delete(Ve.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){ks.delete(Ve.EMAIL_LOGIN_USED_KEY),ks.delete(Ve.EMAIL),ks.delete(Ve.LAST_USED_CHAIN_KEY),ks.delete(Ve.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&ks.set(Ve.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=ks.get(Ve.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){ks.set(Ve.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var i,o;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(i=bs.parseCaipNetworkId(e))==null?void 0:i.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getCaipNetworks(n),s=e?r.find(a=>String(a.id)===String(e)||a.caipNetworkId===e):r[0];return(o=s==null?void 0:s.rpcUrls.default.http)==null?void 0:o[0]}}class A1{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a}){var c;return A1.instance||(A1.instance=new Q8e({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:!!((c=le.state.remoteFeatures)!=null&&c.emailCapture)})),A1.instance}}const J8e={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof sn<"u"&&typeof sn.env<"u"?sn.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150},VIEWS_WITH_LEGAL_FOOTER:["Connect","ConnectWallets","OnRampTokenSelect","OnRampFiatSelect","OnRampProviders"],VIEWS_WITH_DEFAULT_FOOTER:["Networks"]},i4={filterOutDuplicatesByRDNS(t){const e=le.state.enableEIP6963?Se.state.connectors:[],n=he.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&Be.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=Se.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=he.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Se.state,{featuredWalletIds:n}=le.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=le.state.features)==null?void 0:c.connectMethodsOrder),r=e||Se.state.connectors;if(n)return n;const{injected:s,announced:i}=oC.getConnectorsByType(r,et.state.recommended,et.state.featured),o=s.filter(oC.showConnector),a=i.filter(oC.showConnector);return o.length||a.length?["wallet","email","social"]:J8e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&et.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&et.state.excludedWallets.some(r=>mr.isLowerCaseMatch(r.name,t.name));return e||n},markWalletsWithDisplayIndex(t){return t.map((e,n)=>({...e,display_index:n}))}},oC={getConnectorsByType(t,e,n){const{customWallets:r}=le.state,s=he.getRecentWallets(),i=i4.filterOutDuplicateWallets(e),o=i4.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&et.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&et.state.excludedWallets.some(i=>mr.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!Be.isMobile()||Be.isMobile()&&!e&&!Ne.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(q.state.chains.values()).some(n=>Se.getConnectorId(n.namespace)===ie.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=le.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:le.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(E=>E.isEnabled),f=new Set(h.map(E=>E.type)),p=c.filter(E=>f.has(E)).map(E=>({type:E,isEnabled:!0})),m=h.filter(({type:E})=>!p.some(({type:x})=>x===E));return Array.from(new Set([...p,...m].map(({type:E})=>E)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!Be.isMobile())return{accounts:[],chainId:void 0};if(t.id===ie.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}},X8e={black:"#202020",white:"#FFFFFF",white010:"rgba(255, 255, 255, 0.1)",accent010:"rgba(9, 136, 240, 0.1)",accent020:"rgba(9, 136, 240, 0.2)",accent030:"rgba(9, 136, 240, 0.3)",accent040:"rgba(9, 136, 240, 0.4)",accent050:"rgba(9, 136, 240, 0.5)",accent060:"rgba(9, 136, 240, 0.6)",accent070:"rgba(9, 136, 240, 0.7)",accent080:"rgba(9, 136, 240, 0.8)",accent090:"rgba(9, 136, 240, 0.9)",accent100:"rgba(9, 136, 240, 1.0)",accentSecondary010:"rgba(199, 185, 148, 0.1)",accentSecondary020:"rgba(199, 185, 148, 0.2)",accentSecondary030:"rgba(199, 185, 148, 0.3)",accentSecondary040:"rgba(199, 185, 148, 0.4)",accentSecondary050:"rgba(199, 185, 148, 0.5)",accentSecondary060:"rgba(199, 185, 148, 0.6)",accentSecondary070:"rgba(199, 185, 148, 0.7)",accentSecondary080:"rgba(199, 185, 148, 0.8)",accentSecondary090:"rgba(199, 185, 148, 0.9)",accentSecondary100:"rgba(199, 185, 148, 1.0)",productWalletKit:"#FFB800",productAppKit:"#FF573B",productCloud:"#0988F0",productDocumentation:"#008847",neutrals050:"#F6F6F6",neutrals100:"#F3F3F3",neutrals200:"#E9E9E9",neutrals300:"#D0D0D0",neutrals400:"#BBB",neutrals500:"#9A9A9A",neutrals600:"#6C6C6C",neutrals700:"#4F4F4F",neutrals800:"#363636",neutrals900:"#2A2A2A",neutrals1000:"#252525",semanticSuccess010:"rgba(48, 164, 107, 0.1)",semanticSuccess020:"rgba(48, 164, 107, 0.2)",semanticSuccess030:"rgba(48, 164, 107, 0.3)",semanticSuccess040:"rgba(48, 164, 107, 0.4)",semanticSuccess050:"rgba(48, 164, 107, 0.5)",semanticSuccess060:"rgba(48, 164, 107, 0.6)",semanticSuccess070:"rgba(48, 164, 107, 0.7)",semanticSuccess080:"rgba(48, 164, 107, 0.8)",semanticSuccess090:"rgba(48, 164, 107, 0.9)",semanticSuccess100:"rgba(48, 164, 107, 1.0)",semanticError010:"rgba(223, 74, 52, 0.1)",semanticError020:"rgba(223, 74, 52, 0.2)",semanticError030:"rgba(223, 74, 52, 0.3)",semanticError040:"rgba(223, 74, 52, 0.4)",semanticError050:"rgba(223, 74, 52, 0.5)",semanticError060:"rgba(223, 74, 52, 0.6)",semanticError070:"rgba(223, 74, 52, 0.7)",semanticError080:"rgba(223, 74, 52, 0.8)",semanticError090:"rgba(223, 74, 52, 0.9)",semanticError100:"rgba(223, 74, 52, 1.0)",semanticWarning010:"rgba(243, 161, 63, 0.1)",semanticWarning020:"rgba(243, 161, 63, 0.2)",semanticWarning030:"rgba(243, 161, 63, 0.3)",semanticWarning040:"rgba(243, 161, 63, 0.4)",semanticWarning050:"rgba(243, 161, 63, 0.5)",semanticWarning060:"rgba(243, 161, 63, 0.6)",semanticWarning070:"rgba(243, 161, 63, 0.7)",semanticWarning080:"rgba(243, 161, 63, 0.8)",semanticWarning090:"rgba(243, 161, 63, 0.9)",semanticWarning100:"rgba(243, 161, 63, 1.0)"},J_={core:{backgroundAccentPrimary:"#0988F0",backgroundAccentCertified:"#C7B994",backgroundWalletKit:"#FFB800",backgroundAppKit:"#FF573B",backgroundCloud:"#0988F0",backgroundDocumentation:"#008847",backgroundSuccess:"rgba(48, 164, 107, 0.20)",backgroundError:"rgba(223, 74, 52, 0.20)",backgroundWarning:"rgba(243, 161, 63, 0.20)",textAccentPrimary:"#0988F0",textAccentCertified:"#C7B994",textWalletKit:"#FFB800",textAppKit:"#FF573B",textCloud:"#0988F0",textDocumentation:"#008847",textSuccess:"#30A46B",textError:"#DF4A34",textWarning:"#F3A13F",borderAccentPrimary:"#0988F0",borderSecondary:"#C7B994",borderSuccess:"#30A46B",borderError:"#DF4A34",borderWarning:"#F3A13F",foregroundAccent010:"rgba(9, 136, 240, 0.1)",foregroundAccent020:"rgba(9, 136, 240, 0.2)",foregroundAccent040:"rgba(9, 136, 240, 0.4)",foregroundAccent060:"rgba(9, 136, 240, 0.6)",foregroundSecondary020:"rgba(199, 185, 148, 0.2)",foregroundSecondary040:"rgba(199, 185, 148, 0.4)",foregroundSecondary060:"rgba(199, 185, 148, 0.6)",iconAccentPrimary:"#0988F0",iconAccentCertified:"#C7B994",iconSuccess:"#30A46B",iconError:"#DF4A34",iconWarning:"#F3A13F",glass010:"rgba(255, 255, 255, 0.1)",zIndex:"9999"},dark:{overlay:"rgba(0, 0, 0, 0.50)",backgroundPrimary:"#202020",backgroundInvert:"#FFFFFF",textPrimary:"#FFFFFF",textSecondary:"#9A9A9A",textTertiary:"#BBBBBB",textInvert:"#202020",borderPrimary:"#2A2A2A",borderPrimaryDark:"#363636",borderSecondary:"#4F4F4F",foregroundPrimary:"#252525",foregroundSecondary:"#2A2A2A",foregroundTertiary:"#363636",iconDefault:"#9A9A9A",iconInverse:"#FFFFFF"},light:{overlay:"rgba(230 , 230, 230, 0.5)",backgroundPrimary:"#FFFFFF",borderPrimaryDark:"#E9E9E9",backgroundInvert:"#202020",textPrimary:"#202020",textSecondary:"#9A9A9A",textTertiary:"#6C6C6C",textInvert:"#FFFFFF",borderPrimary:"#E9E9E9",borderSecondary:"#D0D0D0",foregroundPrimary:"#F3F3F3",foregroundSecondary:"#E9E9E9",foregroundTertiary:"#D0D0D0",iconDefault:"#9A9A9A",iconInverse:"#202020"}},eBe={1:"4px",2:"8px",10:"10px",3:"12px",4:"16px",6:"24px",5:"20px",8:"32px",16:"64px",20:"80px",32:"128px",64:"256px",128:"512px",round:"9999px"},tBe={0:"0px","01":"2px",1:"4px",2:"8px",3:"12px",4:"16px",5:"20px",6:"24px",7:"28px",8:"32px",9:"36px",10:"40px",12:"48px",14:"56px",16:"64px",20:"80px",32:"128px",64:"256px"},nBe={regular:"KHTeka",mono:"KHTekaMono"},rBe={regular:"400",medium:"500"},sBe={h1:"50px",h2:"44px",h3:"38px",h4:"32px",h5:"26px",h6:"20px",large:"16px",medium:"14px",small:"12px"},iBe={"h1-regular-mono":{lineHeight:"50px",letterSpacing:"-3px"},"h1-regular":{lineHeight:"50px",letterSpacing:"-1px"},"h1-medium":{lineHeight:"50px",letterSpacing:"-0.84px"},"h2-regular-mono":{lineHeight:"44px",letterSpacing:"-2.64px"},"h2-regular":{lineHeight:"44px",letterSpacing:"-0.88px"},"h2-medium":{lineHeight:"44px",letterSpacing:"-0.88px"},"h3-regular-mono":{lineHeight:"38px",letterSpacing:"-2.28px"},"h3-regular":{lineHeight:"38px",letterSpacing:"-0.76px"},"h3-medium":{lineHeight:"38px",letterSpacing:"-0.76px"},"h4-regular-mono":{lineHeight:"32px",letterSpacing:"-1.92px"},"h4-regular":{lineHeight:"32px",letterSpacing:"-0.32px"},"h4-medium":{lineHeight:"32px",letterSpacing:"-0.32px"},"h5-regular-mono":{lineHeight:"26px",letterSpacing:"-1.56px"},"h5-regular":{lineHeight:"26px",letterSpacing:"-0.26px"},"h5-medium":{lineHeight:"26px",letterSpacing:"-0.26px"},"h6-regular-mono":{lineHeight:"20px",letterSpacing:"-1.2px"},"h6-regular":{lineHeight:"20px",letterSpacing:"-0.6px"},"h6-medium":{lineHeight:"20px",letterSpacing:"-0.6px"},"lg-regular-mono":{lineHeight:"16px",letterSpacing:"-0.96px"},"lg-regular":{lineHeight:"18px",letterSpacing:"-0.16px"},"lg-medium":{lineHeight:"18px",letterSpacing:"-0.16px"},"md-regular-mono":{lineHeight:"14px",letterSpacing:"-0.84px"},"md-regular":{lineHeight:"16px",letterSpacing:"-0.14px"},"md-medium":{lineHeight:"16px",letterSpacing:"-0.14px"},"sm-regular-mono":{lineHeight:"12px",letterSpacing:"-0.72px"},"sm-regular":{lineHeight:"14px",letterSpacing:"-0.12px"},"sm-medium":{lineHeight:"14px",letterSpacing:"-0.12px"}},oBe={"ease-out-power-2":"cubic-bezier(0.23, 0.09, 0.08, 1.13)","ease-out-power-1":"cubic-bezier(0.12, 0.04, 0.2, 1.06)","ease-in-power-2":"cubic-bezier(0.92, -0.13, 0.77, 0.91)","ease-in-power-1":"cubic-bezier(0.88, -0.06, 0.8, 0.96)","ease-inout-power-2":"cubic-bezier(0.77, 0.09, 0.23, 1.13)","ease-inout-power-1":"cubic-bezier(0.88, 0.04, 0.12, 1.06)"},aBe={xl:"400ms",lg:"200ms",md:"125ms",sm:"75ms"},o4={colors:X8e,fontFamily:nBe,fontWeight:rBe,textSize:sBe,typography:iBe,tokens:{core:J_.core,theme:J_.dark},borderRadius:eBe,spacing:tBe,durations:aBe,easings:oBe},o9="--apkt",ru={createCSSVariables(t){const e={},n={};function r(i,o,a=""){for(const[c,l]of Object.entries(i)){const u=a?`${a}-${c}`:c;l&&typeof l=="object"&&Object.keys(l).length?(o[c]={},r(l,o[c],u)):typeof l=="string"&&(o[c]=`${o9}-${u}`)}}function s(i,o){for(const[a,c]of Object.entries(i))c&&typeof c=="object"?(o[a]={},s(c,o[a])):typeof c=="string"&&(o[a]=`var(${c})`)}return r(t,e),s(e,n),{cssVariables:e,cssVariablesVarPrefix:n}},assignCSSVariables(t,e){const n={};function r(s,i,o){for(const[a,c]of Object.entries(s)){const l=o?`${o}-${a}`:a,u=i[a];c&&typeof c=="object"?r(c,u,l):typeof u=="string"&&(n[`${o9}-${l}`]=u)}}return r(t,e),n},createRootStyles(t,e){const n={...o4,tokens:{...o4.tokens,theme:t==="light"?J_.light:J_.dark}},{cssVariables:r}=ru.createCSSVariables(n),s=ru.assignCSSVariables(r,n),i=ru.generateW3MVariables(e),o=ru.generateW3MOverrides(e),a=ru.generateScaledVariables(e),c=ru.generateBaseVariables(s),l={...s,...c,...i,...o,...a},u=ru.applyColorMixToVariables(e,l),d={...l,...u};return`:root {${Object.entries(d).map(([f,p])=>`${f}:${p.replace("/[:;{}</>]/g","")};`).join("")}}`},generateW3MVariables(t){if(!t)return{};const e={};return e["--w3m-font-family"]=t["--w3m-font-family"]||"KHTeka",e["--w3m-accent"]=t["--w3m-accent"]||"#0988F0",e["--w3m-color-mix"]=t["--w3m-color-mix"]||"#000",e["--w3m-color-mix-strength"]=`${t["--w3m-color-mix-strength"]||0}%`,e["--w3m-font-size-master"]=t["--w3m-font-size-master"]||"10px",e["--w3m-border-radius-master"]=t["--w3m-border-radius-master"]||"4px",e},generateW3MOverrides(t){if(!t)return{};const e={};if(t["--w3m-accent"]){const n=t["--w3m-accent"];e["--apkt-tokens-core-iconAccentPrimary"]=n,e["--apkt-tokens-core-borderAccentPrimary"]=n,e["--apkt-tokens-core-textAccentPrimary"]=n,e["--apkt-tokens-core-backgroundAccentPrimary"]=n}return t["--w3m-font-family"]&&(e["--apkt-fontFamily-regular"]=t["--w3m-font-family"]),t["--w3m-z-index"]&&(e["--apkt-tokens-core-zIndex"]=`${t["--w3m-z-index"]}`),e},generateScaledVariables(t){if(!t)return{};const e={};if(t["--w3m-font-size-master"]){const n=parseFloat(t["--w3m-font-size-master"].replace("px",""));e["--apkt-textSize-h1"]=`${Number(n)*5}px`,e["--apkt-textSize-h2"]=`${Number(n)*4.4}px`,e["--apkt-textSize-h3"]=`${Number(n)*3.8}px`,e["--apkt-textSize-h4"]=`${Number(n)*3.2}px`,e["--apkt-textSize-h5"]=`${Number(n)*2.6}px`,e["--apkt-textSize-h6"]=`${Number(n)*2}px`,e["--apkt-textSize-large"]=`${Number(n)*1.6}px`,e["--apkt-textSize-medium"]=`${Number(n)*1.4}px`,e["--apkt-textSize-small"]=`${Number(n)*1.2}px`}if(t["--w3m-border-radius-master"]){const n=parseFloat(t["--w3m-border-radius-master"].replace("px",""));e["--apkt-borderRadius-1"]=`${Number(n)}px`,e["--apkt-borderRadius-2"]=`${Number(n)*2}px`,e["--apkt-borderRadius-3"]=`${Number(n)*3}px`,e["--apkt-borderRadius-4"]=`${Number(n)*4}px`,e["--apkt-borderRadius-5"]=`${Number(n)*5}px`,e["--apkt-borderRadius-6"]=`${Number(n)*6}px`,e["--apkt-borderRadius-8"]=`${Number(n)*8}px`,e["--apkt-borderRadius-16"]=`${Number(n)*16}px`,e["--apkt-borderRadius-20"]=`${Number(n)*20}px`,e["--apkt-borderRadius-32"]=`${Number(n)*32}px`,e["--apkt-borderRadius-64"]=`${Number(n)*64}px`,e["--apkt-borderRadius-128"]=`${Number(n)*128}px`}return e},generateColorMixCSS(t,e){if(!(t!=null&&t["--w3m-color-mix"])||!t["--w3m-color-mix-strength"])return"";const n=t["--w3m-color-mix"],r=t["--w3m-color-mix-strength"];if(!r||r===0)return"";const s=Object.keys(e||{}).filter(o=>{const a=o.includes("-tokens-core-background")||o.includes("-tokens-core-text")||o.includes("-tokens-core-border")||o.includes("-tokens-core-foreground")||o.includes("-tokens-core-icon")||o.includes("-tokens-theme-background")||o.includes("-tokens-theme-text")||o.includes("-tokens-theme-border")||o.includes("-tokens-theme-foreground")||o.includes("-tokens-theme-icon"),c=o.includes("-borderRadius-")||o.includes("-spacing-")||o.includes("-textSize-")||o.includes("-fontFamily-")||o.includes("-fontWeight-")||o.includes("-typography-")||o.includes("-duration-")||o.includes("-ease-")||o.includes("-path-")||o.includes("-width-")||o.includes("-height-")||o.includes("-visual-size-")||o.includes("-modal-width")||o.includes("-cover");return a&&!c});return s.length===0?"":` @supports (background: color-mix(in srgb, white 50%, black)) {
      :root {
        ${s.map(o=>{const a=(e==null?void 0:e[o])||"";return a.includes("color-mix")||a.startsWith("#")||a.startsWith("rgb")?`${o}: color-mix(in srgb, ${n} ${r}%, ${a});`:`${o}: color-mix(in srgb, ${n} ${r}%, var(${o}-base, ${a}));`}).join("")}
      }
    }`},generateBaseVariables(t){const e={},n=t["--apkt-tokens-theme-backgroundPrimary"];n&&(e["--apkt-tokens-theme-backgroundPrimary-base"]=n);const r=t["--apkt-tokens-core-backgroundAccentPrimary"];return r&&(e["--apkt-tokens-core-backgroundAccentPrimary-base"]=r),e},applyColorMixToVariables(t,e){const n={};if(e!=null&&e["--apkt-tokens-theme-backgroundPrimary"]&&(n["--apkt-tokens-theme-backgroundPrimary"]="var(--apkt-tokens-theme-backgroundPrimary-base)"),e!=null&&e["--apkt-tokens-core-backgroundAccentPrimary"]&&(n["--apkt-tokens-core-backgroundAccentPrimary"]="var(--apkt-tokens-core-backgroundAccentPrimary-base)"),!(t!=null&&t["--w3m-color-mix"])||!t["--w3m-color-mix-strength"])return n;const r=t["--w3m-color-mix"],s=t["--w3m-color-mix-strength"];if(!s||s===0)return n;const i=Object.keys(e||{}).filter(o=>{const a=o.includes("-tokens-core-background")||o.includes("-tokens-core-text")||o.includes("-tokens-core-border")||o.includes("-tokens-core-foreground")||o.includes("-tokens-core-icon")||o.includes("-tokens-theme-background")||o.includes("-tokens-theme-text")||o.includes("-tokens-theme-border")||o.includes("-tokens-theme-foreground")||o.includes("-tokens-theme-icon")||o.includes("-tokens-theme-overlay"),c=o.includes("-borderRadius-")||o.includes("-spacing-")||o.includes("-textSize-")||o.includes("-fontFamily-")||o.includes("-fontWeight-")||o.includes("-typography-")||o.includes("-duration-")||o.includes("-ease-")||o.includes("-path-")||o.includes("-width-")||o.includes("-height-")||o.includes("-visual-size-")||o.includes("-modal-width")||o.includes("-cover");return a&&!c});return i.length===0||i.forEach(o=>{const a=(e==null?void 0:e[o])||"";o.endsWith("-base")||(o==="--apkt-tokens-theme-backgroundPrimary"||o==="--apkt-tokens-core-backgroundAccentPrimary"?n[o]=`color-mix(in srgb, ${r} ${s}%, var(${o}-base))`:a.includes("color-mix")||a.startsWith("#")||a.startsWith("rgb")?n[o]=`color-mix(in srgb, ${r} ${s}%, ${a})`:n[o]=`color-mix(in srgb, ${r} ${s}%, var(${o}-base, ${a}))`)}),n}},{cssVariablesVarPrefix:cBe}=ru.createCSSVariables(o4);function iFe(t,...e){return Gd(t,...e.map(n=>tc(typeof n=="function"?n(cBe):n)))}let Hf,bp,bl,Ho,X_;const eu={"KHTeka-500-woff2":"https://fonts.reown.com/KHTeka-Medium.woff2","KHTeka-400-woff2":"https://fonts.reown.com/KHTeka-Regular.woff2","KHTeka-300-woff2":"https://fonts.reown.com/KHTeka-Light.woff2","KHTekaMono-400-woff2":"https://fonts.reown.com/KHTekaMono-Regular.woff2","KHTeka-500-woff":"https://fonts.reown.com/KHTeka-Light.woff","KHTeka-400-woff":"https://fonts.reown.com/KHTeka-Regular.woff","KHTeka-300-woff":"https://fonts.reown.com/KHTeka-Light.woff","KHTekaMono-400-woff":"https://fonts.reown.com/KHTekaMono-Regular.woff"};function e2(t,e="dark"){Hf&&document.head.removeChild(Hf),Hf=document.createElement("style"),Hf.textContent=ru.createRootStyles(e,t),document.head.appendChild(Hf)}function oFe(t,e="dark"){if(X_=t,bp=document.createElement("style"),bl=document.createElement("style"),Ho=document.createElement("style"),bp.textContent=B0(t).core.cssText,bl.textContent=B0(t).dark.cssText,Ho.textContent=B0(t).light.cssText,document.head.appendChild(bp),document.head.appendChild(bl),document.head.appendChild(Ho),e2(t,e),a4(e),!(t!=null&&t["--w3m-font-family"]))for(const[n,r]of Object.entries(eu)){const s=document.createElement("link");s.rel="preload",s.href=r,s.as="font",s.type=n.includes("woff2")?"font/woff2":"font/woff",s.crossOrigin="anonymous",document.head.appendChild(s)}a4(e)}function a4(t="dark"){bl&&Ho&&Hf&&(t==="light"?(e2(X_,t),bl.removeAttribute("media"),Ho.media="enabled"):(e2(X_,t),Ho.removeAttribute("media"),bl.media="enabled"))}function lBe(t){var e,n,r;if(X_=t,bp&&bl&&Ho&&(bp.textContent=B0(t).core.cssText,bl.textContent=B0(t).dark.cssText,Ho.textContent=B0(t).light.cssText,t!=null&&t["--w3m-font-family"])){const s=t["--w3m-font-family"];bp.textContent=(e=bp.textContent)==null?void 0:e.replace("font-family: KHTeka",`font-family: ${s}`),bl.textContent=(n=bl.textContent)==null?void 0:n.replace("font-family: KHTeka",`font-family: ${s}`),Ho.textContent=(r=Ho.textContent)==null?void 0:r.replace("font-family: KHTeka",`font-family: ${s}`)}if(Hf){const s=(Ho==null?void 0:Ho.media)==="enabled"?"light":"dark";e2(t,s)}}function B0(t){const e=!!(t!=null&&t["--w3m-font-family"]);return{core:Gd`
      ${e?Gd``:Gd`
            @font-face {
              font-family: 'KHTeka';
              src:
                url(${tc(eu["KHTeka-400-woff2"])}) format('woff2'),
                url(${tc(eu["KHTeka-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
              font-display: swap;
            }

            @font-face {
              font-family: 'KHTeka';
              src:
                url(${tc(eu["KHTeka-300-woff2"])}) format('woff2'),
                url(${tc(eu["KHTeka-300-woff"])}) format('woff');
              font-weight: 300;
              font-style: normal;
            }

            @font-face {
              font-family: 'KHTekaMono';
              src:
                url(${tc(eu["KHTekaMono-400-woff2"])}) format('woff2'),
                url(${tc(eu["KHTekaMono-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
            }

            @font-face {
              font-family: 'KHTeka';
              src:
                url(${tc(eu["KHTeka-400-woff2"])}) format('woff2'),
                url(${tc(eu["KHTeka-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
            }
          `}

      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --apkt-modal-width: 370px;

        --apkt-visual-size-inherit: inherit;
        --apkt-visual-size-sm: 40px;
        --apkt-visual-size-md: 55px;
        --apkt-visual-size-lg: 80px;

        --apkt-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --apkt-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --apkt-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --apkt-width-network-sm: 36px;
        --apkt-width-network-md: 48px;
        --apkt-width-network-lg: 86px;

        --apkt-duration-dynamic: 0ms;
        --apkt-height-network-sm: 40px;
        --apkt-height-network-md: 54px;
        --apkt-height-network-lg: 96px;
      }
    `,dark:Gd`
      :root {
      }
    `,light:Gd`
      :root {
      }
    `}}const aFe=Gd`
  div,
  span,
  iframe,
  a,
  img,
  form,
  button,
  label,
  *::after,
  *::before {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    backface-visibility: hidden;
  }

  :host {
    font-family: var(--apkt-fontFamily-regular);
  }
`,cFe=Gd`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;

    will-change: background-color, color, border, box-shadow, width, height, transform, opacity;
    outline: none;
    border: none;
    text-decoration: none;
    transition:
      background-color var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      color var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      border var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      box-shadow var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      width var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      height var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      transform var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      opacity var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      scale var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      border-radius var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2);
    will-change:
      background-color, color, border, box-shadow, width, height, transform, opacity, scale,
      border-radius;
  }

  a:active:not([disabled]),
  button:active:not([disabled]) {
    scale: 0.975;
    transform-origin: center;
  }

  button:disabled {
    cursor: default;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,L0={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([L0.getAddresses(t),L0.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:L0.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[pl.NetworkImageIds[e.id]]}]})}},bg={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function Mw(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const a9=Mw({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),c9=Mw({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});Mw({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});Mw({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});Mw({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});Mw({id:"00000008819873e925422c1ff0f99f7c",caipNetworkId:"bip122:00000008819873e925422c1ff0f99f7c",chainNamespace:"bip122",name:"Bitcoin Signet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const uBe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Wu={getMethodsByChainNamespace(t){return uBe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case a9.caipNetworkId:u.chains.push(a9.deprecatedCaipNetworkId);break;case c9.caipNetworkId:u.chains.push(c9.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await f1.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=Wu.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("accountsChanged",a=>{var c,l,u,d,h;try{const f=((u=(l=(c=t.session)==null?void 0:c.namespaces)==null?void 0:l[e])==null?void 0:u.accounts)||[],p=(h=(d=t.rpcProviders)==null?void 0:d[e])==null?void 0:h.getDefaultChain(),m=a.map(E=>{const b=f.find(N=>N.includes(`${e}:${p}:${E}`));if(!b)return;const{chainId:x,chainNamespace:w}=bs.parseCaipAddress(b);return{address:E,chainId:x,chainNamespace:w}}).filter(E=>E!==void 0);m.length>0&&s(m)}catch(f){console.warn("Failed to parse accounts for namespace on accountsChanged event",e,a,f)}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>bs.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class dBe{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case ie.CHAIN.EVM:await this.syncEVMConnections(e);break;case ie.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case ie.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,onConnection:s,onListenProvider:i}){await Promise.all(e.filter(o=>{const{hasDisconnected:a,hasConnected:c}=mr.getConnectorStorageInfo(o.id,this.namespace);return!a&&c}).map(async o=>{if(o.id===ie.CONNECTOR_ID.WALLET_CONNECT){const a=Wu.getWalletConnectAccounts(r,this.namespace),c=n.find(l=>{var u,d;return l.chainNamespace===this.namespace&&l.id.toString()===((d=(u=a[0])==null?void 0:u.chainId)==null?void 0:d.toString())});a.length>0&&s({connectorId:o.id,accounts:a.map(l=>({address:l.address})),caipNetwork:c})}else{const{accounts:a,chainId:c}=await oC.fetchProviderData(o);if(a.length>0&&c){const l=n.find(u=>u.chainNamespace===this.namespace&&u.id.toString()===c.toString());s({connectorId:o.id,accounts:a.map(u=>({address:u})),caipNetwork:l}),o.provider&&o.id!==ie.CONNECTOR_ID.AUTH&&o.id!==ie.CONNECTOR_ID.WALLET_CONNECT&&i(o.id,o.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,onConnection:s,onListenProvider:i}){await Promise.all(e.filter(o=>{const{hasDisconnected:a,hasConnected:c}=mr.getConnectorStorageInfo(o.id,this.namespace);return!a&&c}).map(async o=>{if(o.id===ie.CONNECTOR_ID.WALLET_CONNECT){const a=Wu.getWalletConnectAccounts(r,this.namespace);a.length>0&&s({connectorId:o.id,accounts:a.map(c=>({address:c.address})),caipNetwork:n})}else{const a=await o.connect({chainId:n==null?void 0:n.id});a&&(s({connectorId:o.id,accounts:[{address:a}],caipNetwork:n}),i(o.id,o.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,onConnection:s,onListenProvider:i}){await Promise.all(e.filter(o=>{const{hasDisconnected:a,hasConnected:c}=mr.getConnectorStorageInfo(o.id,this.namespace);return!a&&c}).map(async o=>{var d,h,f,p,m,E;if(o.id===ie.CONNECTOR_ID.WALLET_CONNECT){const b=Wu.getWalletConnectAccounts(r,this.namespace);b.length>0&&s({connectorId:o.id,accounts:b.map(x=>({address:x.address})),caipNetwork:n});return}const a=await o.connect(),c=await o.getAccountAddresses();let l=c==null?void 0:c.map(b=>Be.createAccount(ie.CHAIN.BITCOIN,b.address,b.purpose||"payment",b.publicKey,b.path));if(l&&l.length>1&&(l=[{namespace:ie.CHAIN.BITCOIN,publicKey:((d=l[bg.ACCOUNT_INDEXES.PAYMENT])==null?void 0:d.publicKey)??"",path:((h=l[bg.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.path)??"",address:((f=l[bg.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.address)??"",type:"payment"},{namespace:ie.CHAIN.BITCOIN,publicKey:((p=l[bg.ACCOUNT_INDEXES.ORDINAL])==null?void 0:p.publicKey)??"",path:((m=l[bg.ACCOUNT_INDEXES.ORDINAL])==null?void 0:m.path)??"",address:((E=l[bg.ACCOUNT_INDEXES.ORDINAL])==null?void 0:E.address)??"",type:"ordinal"}]),!(o.chains.find(b=>b.id===(n==null?void 0:n.id))||o.chains[0]))throw new Error("The connector does not support any of the requested chains");a&&(i(o.id,o.provider),s({connectorId:o.id,accounts:l.map(b=>({address:b.address,type:b.type,publicKey:b.publicKey,path:b.path})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>mr.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>mr.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>mr.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>mr.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>mr.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}const Mu={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};class B5{constructor({provider:e,namespace:n}){this.id=ie.CONNECTOR_ID.WALLET_CONNECT,this.name=pl.ConnectorNamesMap[ie.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=pl.ConnectorImageIds[ie.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=q.getCaipNetworks.bind(q),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=le.state.universalProviderConfigOverride,s=Wu.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Vo.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:hBe})}}const hBe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],fBe=[ie.CONNECTOR_ID.AUTH,ie.CONNECTOR_ID.WALLET_CONNECT];class QJ{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>q.getCaipNetworks(n),this.getConnectorId=n=>Se.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new dBe({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:ie.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:ie.CONNECTOR_ID.AUTH,type:"AUTH",name:ie.CONNECTOR_NAMES.AUTH,provider:e,imageId:pl.ConnectorImageIds[ie.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!mr.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){Fe.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=Ao(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof B5);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=Be.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=Be.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=Be.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&mr.isLowerCaseMatch(this.getConnectorId(ie.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=Be.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),mr.isLowerCaseMatch(this.getConnectorId(ie.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?L0.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),mr.isLowerCaseMatch(this.getConnectorId(ie.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(fBe.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}class pBe extends QJ{async setUniversalProvider(e){if(!this.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return this.addConnector(new B5({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>Be.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&Ft.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(Fe.state.balanceLoading&&e.chainId===((c=q.state.activeCaipNetwork)==null?void 0:c.id))return{balance:Fe.state.balance||"0.00",symbol:Fe.state.balanceSymbol||""};const s=(await Fe.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=q.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===ie.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:Im.encode(new TextEncoder().encode(r)),pubkey:s}},(a=q.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=q.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===ie.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:mL(n.id)}]}))}catch(u){if(u.code===Mu.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===Mu.ERROR_INVALID_CHAIN_ID||u.code===Mu.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===Mu.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:mL(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const mBe=["email","socials","swaps","onramp","activity","reownBranding","multiWallet","emailCapture","payWithExchange","payments","reownAuthentication"],Dx={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?Ft.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?Ft.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?Ft.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Ft.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?Ft.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Ft.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?Ft.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Ft.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Ft.DEFAULT_REMOTE_FEATURES.reownBranding:!!t},emailCapture:{apiFeatureName:"email_capture",localFeatureName:"emailCapture",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>t.isEnabled&&(t.config??[]),processFallback:t=>!1},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>Ft.DEFAULT_REMOTE_FEATURES.multiWallet},payWithExchange:{apiFeatureName:"fund_from_exchange",localFeatureName:"payWithExchange",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>Ft.DEFAULT_REMOTE_FEATURES.payWithExchange},payments:{apiFeatureName:"payments",localFeatureName:"payments",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>Ft.DEFAULT_REMOTE_FEATURES.payments},reownAuthentication:{apiFeatureName:"reown_authentication",localFeatureName:"reownAuthentication",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>typeof t>"u"?Ft.DEFAULT_REMOTE_FEATURES.reownAuthentication:!!t}},gBe={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=Dx[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=Dx[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return Dx[t].processApi(e)},processFallbackFeature(t,e){return Dx[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await et.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?Ft.DEFAULT_REMOTE_FEATURES:Ft.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of mBe){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),Ft.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;gi.open({debugMessage:wi.ALERT_WARNINGS.LOCAL_CONFIGURATION_IGNORED.debugMessage(o)},"warning")}return i}};class yBe{constructor(e){this.chainNamespaces=[],this.features={},this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o;if(n){const a=(s=q.getCaipNetworks(n))==null?void 0:s.find(u=>u.id===r);if(a)return a;const c=(i=q.getNetworkData(n))==null?void 0:i.caipNetwork;return c||((o=q.getRequestedCaipNetworks(n).filter(u=>u.chainNamespace===n))==null?void 0:o[0])}return q.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>q.getCaipNetworks(n),this.getActiveChainNamespace=()=>q.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{q.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>q.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>{var r,s;return q.state.activeChain===n||!n?q.state.activeCaipAddress:(s=(r=q.state.chains.get(n))==null?void 0:r.accountState)==null?void 0:s.caipAddress},this.setClientId=n=>{it.setClientId(n)},this.getProvider=n=>Wt.getProvider(n),this.getProviderType=n=>Wt.getProviderId(n),this.getPreferredAccountType=n=>Ao(n),this.setCaipAddress=(n,r)=>{Fe.setCaipAddress(n,r)},this.setBalance=(n,r,s)=>{Fe.setBalance(n,r,s)},this.setProfileName=(n,r)=>{Fe.setProfileName(n,r)},this.setProfileImage=(n,r)=>{Fe.setProfileImage(n,r)},this.setUser=(n,r)=>{Fe.setUser(n,r)},this.resetAccount=n=>{Fe.resetAccount(n)},this.setCaipNetwork=n=>{q.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{q.setChainNetworkData(r,{caipNetwork:n})},this.setStatus=(n,r)=>{Fe.setStatus(n,r),Se.isConnected()?he.setConnectionStatus("connected"):he.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>{var r,s;return(s=(r=q.state.chains.get(n))==null?void 0:r.accountState)==null?void 0:s.address},this.setConnectors=n=>{const r=[...Se.state.allConnectors,...n];Se.setConnectors(r)},this.setConnections=(n,r)=>{he.setConnections(n,r),Ne.setConnections(n,r)},this.fetchIdentity=n=>it.fetchIdentity(n),this.getReownName=n=>f1.getNamesForAddress(n),this.getConnectors=()=>Se.getConnectors(),this.getConnectorImage=n=>RZ.getConnectorImage(n),this.getConnections=n=>this.remoteFeatures.multiWallet?k_.getConnectionsData(n).connections:(gi.open(ie.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=n=>this.remoteFeatures.multiWallet?k_.getConnectionsData(n).recentConnections:(gi.open(ie.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async n=>{if(!this.remoteFeatures.multiWallet){gi.open(ie.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await Ne.switchConnection(n)},this.deleteConnection=n=>{if(!this.remoteFeatures.multiWallet){gi.open(ie.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}he.deleteAddressFromConnection(n),Ne.syncStorageConnections()},this.setConnectedWalletInfo=(n,r)=>{const s=Wt.getProviderId(r),i=n?{...n,type:s}:void 0;Fe.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!q.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{Fe.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{Fe.removeAddressLabel(n,r)},this.getAddress=n=>{var r,s;return q.state.activeChain===n||!n?Fe.state.address:(s=(r=q.state.chains.get(n))==null?void 0:r.accountState)==null?void 0:s.address},this.setApprovedCaipNetworksData=n=>q.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{q.resetNetwork(n)},this.addConnector=n=>{Se.addConnector(n)},this.resetWcConnection=()=>{Ne.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{Fe.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{Fe.setSmartAccountDeployed(n,r)},this.setPreferredAccountType=(n,r)=>{q.setAccountProp("preferredAccountType",n,r)},this.setEIP6963Enabled=n=>{le.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e),I5e.checkSDKVersion(e.sdkVersion)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s,i,o;if(this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),le.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),this.remoteFeatures=await gBe.fetchRemoteFeatures(e),le.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&bO.setOnrampProviders(this.remoteFeatures.onramp),((n=le.state.remoteFeatures)!=null&&n.email||Array.isArray((r=le.state.remoteFeatures)==null?void 0:r.socials)&&((s=le.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins(),(i=le.state.features)!=null&&i.reownAuthentication||(o=le.state.remoteFeatures)!=null&&o.reownAuthentication){const{ReownAuthentication:a}=await ur(()=>import("./features-3244ab20.js"),["assets/features-3244ab20.js","assets/ReownAuthentication-382f2f5b.js"]),c=le.state.siwx;c instanceof a||(c&&console.warn("ReownAuthentication option is enabled, SIWX configuration will be overridden."),le.setSIWX(new a))}}async openSend(e){var i;const n=e.namespace||q.state.activeChain,r=this.getCaipAddress(n),s=(i=this.getCaipNetwork(n))==null?void 0:i.id;if(!r)throw new Error("openSend: caipAddress not found");if((s==null?void 0:s.toString())!==e.chainId.toString()){const o=q.getCaipNetworkById(e.chainId,n);if(!o)throw new Error(`openSend: caipNetwork with chainId ${e.chainId} not found`);await this.switchNetwork(o,{throwOnFailure:!0})}try{const o=zJ.getTokenSymbolByAddress(e.assetAddress);o&&await et.fetchTokenImages([o])}catch{}return await Ot.open({view:"WalletSend",data:{send:e}}),new Promise((o,a)=>{const c=kt.subscribeKey("hash",d=>{d&&(u(),o({hash:d}))}),l=Ot.subscribe(d=>{d.open||(u(),a(new Error("Modal closed")))}),u=this.createCleanupHandler([c,l])})}toModalOptions(){function e(r){return(r==null?void 0:r.view)==="Swap"}function n(r){return(r==null?void 0:r.view)==="WalletSend"}return{isSwap:e,isSend:n}}async checkAllowedOrigins(){try{const e=await et.fetchAllowedOrigins();if(!Be.isClient())return;const n=window.location.origin;Wu.isOriginAllowed(n,e,Mu.DEFAULT_ALLOWED_ANCESTORS)||gi.open(wi.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error))return;switch(e.message){case"RATE_LIMITED":gi.open(wi.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;gi.open({displayMessage:wi.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.displayMessage,debugMessage:wi.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.debugMessage(n.message)},"error");break}}}}createCleanupHandler(e){return()=>{e.forEach(n=>{try{n()}catch{}})}}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,Dt.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&ro.setThemeMode(e.themeMode),e.themeVariables&&ro.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");q.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&q.setActiveCaipNetwork(n)}initializeConnectionController(e){Ne.initialize(e.adapters??[]),Ne.setWcBasic(e.basic??!1)}initializeConnectorController(){Se.initialize(this.chainNamespaces)}initializeProjectSettings(e){le.setProjectId(e.projectId),le.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var s;le.setDebug(e.debug!==!1),le.setEnableWalletConnect(e.enableWalletConnect!==!1),le.setEnableWalletGuide(e.enableWalletGuide!==!1),le.setEnableWallets(e.enableWallets!==!1),le.setEIP6963Enabled(e.enableEIP6963!==!1),le.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),le.setEnableReconnect(e.enableReconnect!==!1),le.setEnableAuthLogger(e.enableAuthLogger!==!1),le.setCustomRpcUrls(e.customRpcUrls),le.setEnableEmbedded(e.enableEmbedded),le.setAllWallets(e.allWallets),le.setIncludeWalletIds(e.includeWalletIds),le.setExcludeWalletIds(e.excludeWalletIds),le.setFeaturedWalletIds(e.featuredWalletIds),le.setTokens(e.tokens),le.setTermsConditionsUrl(e.termsConditionsUrl),le.setPrivacyPolicyUrl(e.privacyPolicyUrl),le.setCustomWallets(e.customWallets),le.setFeatures(e.features),le.setAllowUnsupportedChain(e.allowUnsupportedChain),le.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),le.setPreferUniversalLinks(e.experimental_preferUniversalLinks),le.setDefaultAccountTypes(e.defaultAccountTypes);const n=this.getDefaultMetaData();if(!e.metadata&&n&&(e.metadata=n),le.setMetadata(e.metadata),le.setDisableAppend(e.disableAppend),le.setEnableEmbedded(e.enableEmbedded),le.setSIWX(e.siwx),this.features=le.state.features??{},!e.projectId){gi.open(wi.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((s=e.adapters)==null?void 0:s.find(i=>i.namespace===ie.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");le.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return Be.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=Lg.getUnsupportedNetwork(`${n}:${e}`);q.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Lg.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Lg.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Lg.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?Lg.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e,n){var r,s;try{this.setLoading(!0,e);let i={connections:[]};const o=this.getAdapter(e);return(((s=(r=q.state.chains.get(e))==null?void 0:r.accountState)==null?void 0:s.caipAddress)||!le.state.enableReconnect)&&(o!=null&&o.disconnect)&&(i=await o.disconnect({id:n})),this.setLoading(!1,e),i}catch(i){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${i.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var l;const e=q.state.activeChain,n=this.getAdapter(e),r=(l=this.getCaipNetwork(e))==null?void 0:l.id,s=Ne.getConnections(e),i=this.remoteFeatures.multiWallet,o=s.length>0;if(!n)throw new Error("Adapter not found");const a=await n.connectWalletConnect(r);(!o||!i)&&this.close(),this.setClientId((a==null?void 0:a.clientId)||null),he.setConnectedNamespaces([...q.state.chains.keys()]),await this.syncWalletConnectAccount(),await Vo.initializeIfEnabled()},connectExternal:async e=>{const n=await this.onConnectExternal(e);return await this.connectInactiveNamespaces(e,n),n?{address:n.address}:void 0},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=q.state.activeChain,o=this.getAdapter(i);if(!i)throw new Error("reconnectExternal: namespace not found");if(!o)throw new Error("reconnectExternal: adapter not found");o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),he.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{var l;const{id:n,chainNamespace:r,initialDisconnect:s}=e||{},i=r||q.state.activeChain,o=Se.getConnectorId(i),a=n===ie.CONNECTOR_ID.AUTH||o===ie.CONNECTOR_ID.AUTH,c=n===ie.CONNECTOR_ID.WALLET_CONNECT||o===ie.CONNECTOR_ID.WALLET_CONNECT;try{const u=Array.from(q.state.chains.keys());let d=r?[r]:u;(c||a)&&(d=u);const h=d.map(async m=>{const E=Se.getConnectorId(m),b=await this.disconnectNamespace(m,n||E);b&&(a&&he.deleteConnectedSocialProvider(),b.connections.forEach(x=>{he.addDisconnectedConnectorId(x.connectorId,m)})),s&&this.onDisconnectNamespace({chainNamespace:m,closeModal:!1})}),f=await Promise.allSettled(h);kt.resetSend(),Ne.resetWcConnection(),(l=Vo.getSIWX())!=null&&l.signOutOnDisconnect&&await Vo.clearSessions(),Se.setFilterByNamespace(void 0),Ne.syncStorageConnections();const p=f.filter(m=>m.status==="rejected");if(p.length>0)throw new Error(p.map(m=>m.reason.message).join(", "));Dt.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:r||"all"}})}catch(u){throw new Error(`Failed to disconnect chains: ${u.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=q.state.activeChain,r=this.getAdapter(q.state.activeChain);if(!n)throw new Error("signMessage: namespace not found");if(!r)throw new Error("signMessage: adapter not found");const s=await(r==null?void 0:r.signMessage({message:e,address:Fe.state.address,provider:Wt.getProvider(n)}));return(s==null?void 0:s.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(!n)throw new Error("sendTransaction: namespace not found");if(Ft.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(n);if(!r)throw new Error("sendTransaction: adapter not found");const s=Wt.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{const n=e.chainNamespace;if(n===ie.CHAIN.EVM){const r=this.getAdapter(n);if(!r)throw new Error("estimateGas: adapter is required but got undefined");const s=Wt.getProvider(n),i=this.getCaipNetwork();if(!i)throw new Error("estimateGas: caipNetwork is required but got undefined");const o=await(r==null?void 0:r.estimateGas({...e,provider:s,caipNetwork:i}));return(o==null?void 0:o.gas)||0n}return 0n},getEnsAvatar:async()=>{var n;const e=q.state.activeChain;if(!e)throw new Error("getEnsAvatar: namespace is required but got undefined");return await this.syncIdentity({address:Fe.state.address,chainId:Number((n=this.getCaipNetwork())==null?void 0:n.id),chainNamespace:e}),Fe.state.profileImage||!1},getEnsAddress:async e=>await Wu.resolveReownName(e),writeContract:async e=>{const n=q.state.activeChain,r=this.getAdapter(n);if(!n)throw new Error("writeContract: namespace is required but got undefined");if(!r)throw new Error("writeContract: adapter is required but got undefined");const s=this.getCaipNetwork(),i=this.getCaipAddress(),o=Wt.getProvider(n);if(!s||!i)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");const a=await(r==null?void 0:r.writeContract({...e,caipNetwork:s,provider:o,caipAddress:i}));return a==null?void 0:a.hash},parseUnits:(e,n)=>{const r=this.getAdapter(q.state.activeChain);if(!r)throw new Error("parseUnits: adapter is required but got undefined");return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(q.state.activeChain);if(!r)throw new Error("formatUnits: adapter is required but got undefined");return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(q.state.activeChain);if(!n)throw new Error("getCapabilities: adapter is required but got undefined");return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(q.state.activeChain);if(!n)throw new Error("grantPermissions: adapter is required but got undefined");return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(q.state.activeChain);if(!n)throw new Error("revokePermissions: adapter is required but got undefined");return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(q.state.activeChain);if(!n)throw new Error("walletGetAssets: adapter is required but got undefined");return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Fe.state.address||this.updateNativeBalance(Fe.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},Ne.setClient(this.connectionControllerClient)}async onConnectExternal(e){var l,u,d,h,f,p,m,E;const n=q.state.activeChain,r=e.chain||n,s=this.getAdapter(r);let i=!0;if(e.type===Pt.CONNECTOR_TYPE_AUTH&&ie.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(w=>Se.getConnectorId(w)===ie.CONNECTOR_ID.AUTH)&&e.chain!==n&&(i=!1),e.chain&&e.chain!==n&&!e.caipNetwork){const b=this.getCaipNetworks().find(x=>x.chainNamespace===e.chain);b&&i&&this.setCaipNetwork(b)}if(!r)throw new Error("connectExternal: namespace not found");if(!s)throw new Error("connectExternal: adapter not found");const o=this.getCaipNetwork(r),a=e.caipNetwork||o,c=await s.connect({id:e.id,address:e.address,info:e.info,type:e.type,provider:e.provider,socialUri:e.socialUri,chainId:((l=e.caipNetwork)==null?void 0:l.id)||(o==null?void 0:o.id),rpcUrl:((f=(h=(d=(u=e.caipNetwork)==null?void 0:u.rpcUrls)==null?void 0:d.default)==null?void 0:h.http)==null?void 0:f[0])||((E=(m=(p=o==null?void 0:o.rpcUrls)==null?void 0:p.default)==null?void 0:m.http)==null?void 0:E[0])});if(c)return he.addConnectedNamespace(r),this.syncProvider({...c,chainNamespace:r}),this.setStatus("connected",r),this.syncConnectedWalletInfo(r),he.removeDisconnectedConnectorId(e.id,r),{address:c.address,connectedCaipNetwork:a}}async connectInactiveNamespaces(e,n){var c;const r=e.type===Pt.CONNECTOR_TYPE_AUTH,s=mr.getOtherAuthNamespaces((c=n==null?void 0:n.connectedCaipNetwork)==null?void 0:c.chainNamespace),i=q.state.activeCaipNetwork,o=this.getAdapter(i==null?void 0:i.chainNamespace),a=Wt.getProvider(i==null?void 0:i.chainNamespace);r&&(await Promise.all(s.map(async l=>{var u,d,h;try{const f=Wt.getProvider(l),p=this.getCaipNetwork(l),m=this.getAdapter(l);await(m==null?void 0:m.connect({...e,provider:f,socialUri:void 0,chainId:p==null?void 0:p.id,rpcUrl:(h=(d=(u=p==null?void 0:p.rpcUrls)==null?void 0:u.default)==null?void 0:d.http)==null?void 0:h[0]}))&&(he.addConnectedNamespace(l),he.removeDisconnectedConnectorId(e.id,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l))}catch(f){gi.warn(wi.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.displayMessage,wi.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.debugMessage(l,f instanceof Error?f.message:void 0),wi.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.code)}})),i&&await(o==null?void 0:o.switchNetwork({caipNetwork:i,provider:a,providerType:e.type})))}getApprovedCaipNetworksData(){var n,r,s,i,o;if(Wt.getProviderId(q.state.activeChain)===Pt.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Wt.getProvider(n),i=Wt.getProviderId(n);if(e.chainNamespace===q.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Pt.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=bs.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new pBe({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=he.getConnectionStatus();le.state.enableReconnect===!1?this.setStatus("disconnected",e):r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(he.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{var l,u;const o=this.getCaipNetworks().find(d=>d.id.toString()===i.toString()||d.caipNetworkId.toString()===i.toString()),a=q.state.activeChain===e,c=(u=(l=q.state.chains.get(e))==null?void 0:l.accountState)==null?void 0:u.address;if(o){const d=a&&s?s:c;d&&this.syncAccount({address:d,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",()=>{const s=this.remoteFeatures.multiWallet,i=Array.from(Ne.state.connections.values()).flat();this.onDisconnectNamespace({chainNamespace:e,closeModal:!s||i.length===0})}),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=Fe.state.address,i=q.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i,connector:o})=>{var u,d;const a=q.state.activeChain===e;o!=null&&o.provider&&(this.syncProvider({id:o.id,type:o.type,provider:o.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e));const c=(d=(u=q.getNetworkData(e))==null?void 0:u.caipNetwork)==null?void 0:d.id,l=i||c;a&&l?this.syncAccount({address:s,chainId:l,chainNamespace:e}):!a&&l?(this.syncAccountInfo(s,l,e),this.syncBalance({address:s,chainId:l,chainNamespace:e})):this.syncAccountInfo(s,i,e),he.addConnectedNamespace(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&await((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null?void 0:s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>Ne.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async reconnectWalletConnect(){var n,r,s,i;await this.syncWalletConnectAccount();const e=this.getAddress();Dt.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:e,properties:{method:Be.isMobile()?"mobile":"qrcode",name:((i=(s=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.peer)==null?void 0:s.metadata)==null?void 0:i.name)||"Unknown",reconnect:!0}})}async syncNamespaceConnection(e){try{e===ie.CHAIN.EVM&&Be.isSafeApp()&&Se.setConnectorId(ie.CONNECTOR_ID.SAFE,e);const n=Se.getConnectorId(e);switch(this.setStatus("connecting",e),n){case ie.CONNECTOR_ID.WALLET_CONNECT:await this.reconnectWalletConnect();break;case ie.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:n,closeModal:r}=e||{};q.resetAccount(n),q.resetNetwork(n),he.removeConnectedNamespace(n);const s=Array.from(q.state.chains.keys());(n?[n]:s).forEach(o=>he.addDisconnectedConnectorId(Se.getConnectorId(o)||"",o)),Se.removeConnectorId(n),Wt.resetChain(n),this.setUser(void 0,n),this.setStatus("disconnected",n),this.setConnectedWalletInfo(void 0,n),r!==!1&&Ot.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{const n=this.getAdapter(e),r=this.getCaipAddress(e),s=this.getCaipNetwork(e);return n==null?void 0:n.syncConnections({connectToFirstConnector:!r,caipNetwork:s})}))}async syncAdapterConnection(e){var a,c,l,u;const n=this.getAdapter(e),r=this.getCaipNetwork(e),s=Se.getConnectorId(e),o=Se.getConnectors(e).find(d=>d.id===s);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(r!=null&&r.id))throw new Error("CaipNetwork not found");const d=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:r.id,rpcUrl:(l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));d?(this.syncProvider({...d,chainNamespace:e}),await this.syncAccount({...d,chainNamespace:e}),this.setStatus("connected",e),Dt.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:d.address,properties:{method:"browser",name:((u=o.info)==null?void 0:u.name)||o.name||"Unknown",reconnect:!0}})):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){var r,s;const e=Object.keys(((s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)||{}),n=this.chainNamespaces.map(async i=>{var u,d,h,f,p;const o=this.getAdapter(i);if(!o)return;const a=((f=(h=(d=(u=this.universalProvider)==null?void 0:u.session)==null?void 0:d.namespaces)==null?void 0:h[i])==null?void 0:f.accounts)||[],c=(p=q.state.activeCaipNetwork)==null?void 0:p.id,l=a.find(m=>{const{chainId:E}=bs.parseCaipAddress(m);return E===(c==null?void 0:c.toString())})||a[0];if(l){const m=bs.validateCaipAddress(l),{chainId:E,address:b}=bs.parseCaipAddress(m);if(Wt.setProviderId(i,Pt.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&q.state.activeCaipNetwork&&o.namespace!==ie.CHAIN.EVM){const x=o.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:q.state.activeCaipNetwork});Wt.setProvider(i,x)}else Wt.setProvider(i,this.universalProvider);Se.setConnectorId(ie.CONNECTOR_ID.WALLET_CONNECT,i),he.addConnectedNamespace(i),await this.syncAccount({address:b,chainId:E,chainNamespace:i})}else e.includes(i)&&this.setStatus("disconnected",i);this.syncConnectedWalletInfo(i),await q.setApprovedCaipNetworksData(i)});await Promise.all(n)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){Wt.setProviderId(s,e),Wt.setProvider(s,n),Se.setConnectorId(r,s)}async syncAccount(e){var d,h;const n=e.chainNamespace===q.state.activeChain,r=q.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=he.getActiveNetworkProps(),c=i||a,l=((d=q.state.activeCaipNetwork)==null?void 0:d.name)===ie.UNSUPPORTED_NETWORK_NAME,u=q.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(E=>E.id.toString()===c.toString()),p=this.getCaipNetworks().find(E=>E.chainNamespace===o);if(!u&&!f&&!p){const E=this.getApprovedCaipNetworkIds()||[],b=E.find(w=>{var N;return((N=bs.parseCaipNetworkId(w))==null?void 0:N.chainId)===c.toString()}),x=E.find(w=>{var N;return((N=bs.parseCaipNetworkId(w))==null?void 0:N.chainNamespace)===o});f=this.getCaipNetworks().find(w=>w.caipNetworkId===b),p=this.getCaipNetworks().find(w=>w.caipNetworkId===x||"deprecatedCaipNetworkId"in w&&w.deprecatedCaipNetworkId===x)}const m=f||p;(m==null?void 0:m.chainNamespace)===q.state.activeChain?le.state.enableNetworkSwitch&&!le.state.allowUnsupportedChain&&((h=q.state.activeCaipNetwork)==null?void 0:h.name)===ie.UNSUPPORTED_NETWORK_NAME?q.showUnsupportedChainUI():this.setCaipNetwork(m):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),mr.isLowerCaseMatch(s,Fe.state.address)||this.syncAccountInfo(s,m==null?void 0:m.id,o),n?await this.syncBalance({address:s,chainId:m==null?void 0:m.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o}),this.syncIdentity({address:s,chainId:i,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=Se.getConnectorId(e),r=Wt.getProviderId(e);if(r===Pt.CONNECTOR_TYPE_ANNOUNCED||r===Pt.CONNECTOR_TYPE_INJECTED){if(n){const o=this.getConnectors().find(a=>{var d,h;const c=a.id===n,l=((d=a.info)==null?void 0:d.rdns)===n,u=(h=a.connectors)==null?void 0:h.some(f=>{var p;return f.id===n||((p=f.info)==null?void 0:p.rdns)===n});return c||l||!!u});if(o){const{info:a,name:c,imageUrl:l}=o,u=l||this.getConnectorImage(o);this.setConnectedWalletInfo({name:c,icon:u,...a},e)}}}else if(r===Pt.CONNECTOR_TYPE_WALLET_CONNECT){const i=Wt.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&(n===ie.CONNECTOR_ID.COINBASE_SDK||n===ie.CONNECTOR_ID.COINBASE)){const i=this.getConnectors().find(l=>l.id===n),o=(i==null?void 0:i.name)||"Coinbase Wallet",a=(i==null?void 0:i.imageUrl)||this.getConnectorImage(i),c=i==null?void 0:i.info;this.setConnectedWalletInfo({...c,name:o,icon:a},e)}}async syncBalance(e){!TZ.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=q.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=T5e.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};le.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await D5.init(n),le.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{Wu.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:n=>{Ne.setUri(n)},onConnect:n=>{const{address:r}=Be.getAccount(n[0]);Ne.finalizeWcConnection(r)},onDisconnect:()=>{q.state.noAdapters&&this.resetAccount(e),Ne.resetWcConnection()},onChainChanged:n=>{const r=q.state.activeChain,s=r&&Se.state.activeConnectorIds[r]===ie.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(q.state.noAdapters||s)){const i=this.getCaipNetworks().find(a=>a.id.toString()===n.toString()||a.caipNetworkId.toString()===n.toString()),o=this.getCaipNetwork();if(!i){this.setUnsupportedNetwork(n);return}(o==null?void 0:o.id.toString())!==(i==null?void 0:i.id.toString())&&(o==null?void 0:o.chainNamespace)===(i==null?void 0:i.chainNamespace)&&this.setCaipNetwork(i)}},onAccountsChanged:n=>{const r=q.state.activeChain,s=r&&Se.state.activeConnectorIds[r]===ie.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(q.state.noAdapters||s)){const i=n==null?void 0:n[0];i&&this.syncAccount({address:i.address,chainId:i.chainId,chainNamespace:i.chainNamespace})}}})})}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&Be.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Dt.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(wi.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=wi.ALERT_ERRORS[o];a&&(gi.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){await this.injectModalUi(),e!=null&&e.uri&&Ne.setUri(e.uri);const{isSwap:n,isSend:r}=this.toModalOptions();return n(e)?Ot.open({...e,data:{swap:e.arguments}}):r(e)&&e.arguments?this.openSend(e.arguments):Ot.open(e)}async close(){await this.injectModalUi(),Ot.close()}setLoading(e,n){Ot.setLoading(e,n)}async disconnect(e){await Ne.disconnect({namespace:e})}getSIWX(){return le.state.siwx}getError(){return""}getChainId(){var e;return(e=q.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e,{throwOnFailure:n=!1}={}){const r=this.getCaipNetworks().find(s=>s.id===e.id);if(!r){gi.open(wi.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await q.switchActiveNetwork(r,{throwOnFailure:n})}getWalletProvider(){return q.state.activeChain?Wt.state.providers[q.state.activeChain]:null}getWalletProviderType(){return Wt.getProviderId(q.state.activeChain)}subscribeProviders(e){return Wt.subscribeProviders(e)}getThemeMode(){return ro.state.themeMode}getThemeVariables(){return ro.state.themeVariables}setThemeMode(e){ro.setThemeMode(e),a4(ro.state.themeMode)}setTermsConditionsUrl(e){le.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){le.setPrivacyPolicyUrl(e)}setThemeVariables(e){ro.setThemeVariables(e),lBe(ro.state.themeVariables)}subscribeTheme(e){return ro.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?Ne.subscribe(e):(gi.open(ie.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){var n,r;return e?(r=(n=q.state.chains.get(e))==null?void 0:n.accountState)==null?void 0:r.connectedWalletInfo:Fe.state.connectedWalletInfo}getAccount(e){const n=e||q.state.activeChain,r=Se.getAuthConnector(n),s=q.getAccountData(n),i=he.getConnectedConnectorId(q.state.activeChain),o=Ne.getConnections(n);if(!n)throw new Error("AppKit:getAccount - namespace is required");const a=o.flatMap(c=>c.accounts.map(({address:l,type:u,publicKey:d})=>Be.createAccount(n,l,u||"eoa",d)));if(s)return{allAccounts:a,caipAddress:s.caipAddress,address:Be.getPlainAddress(s.caipAddress),isConnected:!!s.caipAddress,status:s.status,embeddedWalletInfo:r&&i===ie.CONNECTOR_ID.AUTH?{user:s.user?{...s.user,username:he.getConnectedSocialUsername()}:void 0,authProvider:s.socialProvider||"email",accountType:Ao(n),isSmartAccountDeployed:!!s.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?q.subscribeChainProp("accountState",r,n):q.subscribe(r),Se.subscribe(r)}subscribeNetwork(e){return q.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e,n){return n?Fe.subscribeKey("connectedWalletInfo",e,n):Fe.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Fe.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){q.subscribeKey("activeCaipNetwork",e)}getState(){return yc.state}getRemoteFeatures(){return le.state.remoteFeatures}subscribeState(e){return yc.subscribe(e)}subscribeRemoteFeatures(e){return le.subscribeKey("remoteFeatures",e)}showErrorMessage(e){yl.showError(e)}showSuccessMessage(e){yl.showSuccess(e)}getEvent(){return{...Dt.state}}subscribeEvents(e){return Dt.subscribe(e)}replace(e){ct.replace(e)}redirect(e){ct.push(e)}popTransactionStack(e){ct.popTransactionStack(e)}isOpen(){return Ot.state.open}isTransactionStackEmpty(){return ct.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){le.setFeatures(e)}updateRemoteFeatures(e){le.setRemoteFeatures(e)}updateOptions(e){const r={...le.state||{},...e};le.setOptions(r)}setConnectMethodsOrder(e){le.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){le.setWalletFeaturesOrder(e)}setCollapseWallets(e){le.setCollapseWallets(e)}setSocialsOrder(e){le.setSocialsOrder(e)}getConnectMethodsOrder(){return i4.getConnectOrderMethod(le.state.features,Se.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||q.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&q.removeNetwork(e,n)}}let l9=!1;class wBe extends yBe{async onAuthProviderConnected(e){const n=mr.userChainIdToChainNamespace(e==null?void 0:e.chainId);if(e.message&&e.signature&&e.siwxMessage&&await Vo.addEmbeddedWalletSession({chainId:e.siwxMessage.chainId,accountAddress:e.address,notBefore:e.siwxMessage.notBefore,statement:e.siwxMessage.statement,resources:e.siwxMessage.resources,requestId:e.siwxMessage.requestId,issuedAt:e.siwxMessage.issuedAt,domain:e.siwxMessage.domain,uri:e.siwxMessage.uri,version:e.siwxMessage.version,nonce:e.siwxMessage.nonce},e.message,e.signature),!n)throw new Error("AppKit:onAuthProviderConnected - namespace is required");const r=n===ie.CHAIN.EVM?`eip155:${e.chainId}:${e.address}`:`${e.chainId}:${e.address}`,s=le.state.defaultAccountTypes[n],i=Ao(n),o=e.preferredAccountType||i||s;this.setCaipAddress(r,n);const{signature:a,siwxMessage:c,message:l,...u}=e;this.setUser({...Fe.state.user||{},...u},n),this.setSmartAccountDeployed(!!e.smartAccountDeployed,n),this.setPreferredAccountType(o,n),this.setLoading(!1,n)}setupAuthConnectorListeners(e){e.onRpcRequest(n=>{Ko.checkIfRequestExists(n)?Ko.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Qr.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Qr.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=Ko.checkIfRequestIsSafe(r),i=Fe.state.address,o=q.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=q.state.activeChain;if(!n)throw new Error("AppKit:onNotConnected - namespace is required");Se.getConnectorId(n)===ie.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(this.onAuthProviderConnected.bind(this)),e.onSocialConnected(this.onAuthProviderConnected.bind(this)),e.onSetPreferredAccount(({address:n,type:r})=>{const s=q.state.activeChain;if(!s)throw new Error("AppKit:onSetPreferredAccount - namespace is required");n&&this.setPreferredAccountType(r,s)})}async syncAuthConnectorTheme(e){if(!e)return;const n=ro.getSnapshot(),r=le.getSnapshot();await Promise.all([e.syncDappData({metadata:r.metadata,sdkVersion:r.sdkVersion,projectId:r.projectId,sdkType:r.sdkType}),e.syncTheme({themeMode:n.themeMode,themeVariables:n.themeVariables,w3mThemeVariables:Vv(n.themeVariables,n.themeMode)})])}async syncAuthConnector(e,n){var l,u,d,h,f,p,m,E,b;const r=ie.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n),s=n===q.state.activeChain;if(!r)return;this.setLoading(!0,n);const i=e.getLoginEmailUsed();this.setLoading(i,n),i&&this.setStatus("connecting",n);const o=e.getEmail(),a=e.getUsername();this.setUser({...((l=Fe.state)==null?void 0:l.user)||{},username:a,email:o},n),this.setupAuthConnectorListeners(e);const{isConnected:c}=await e.isConnected();if(await this.syncAuthConnectorTheme(e),n&&r&&s){const x=await e.getSmartAccountEnabledNetworks();if(q.setSmartAccountEnabledNetworks((x==null?void 0:x.smartAccountEnabledNetworks)||[],n),c&&((u=this.connectionControllerClient)!=null&&u.connectExternal)){await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:ie.CONNECTOR_ID.AUTH,info:{name:ie.CONNECTOR_ID.AUTH},type:Pt.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=(d=q.getNetworkData(n))==null?void 0:d.caipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n);const w=he.getConnectedSocialProvider();w?Dt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",address:Fe.state.address,properties:{provider:w,reconnect:!0}}):Dt.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:Fe.state.address,properties:{method:"email",name:((b=(E=(m=(p=this.universalProvider)==null?void 0:p.session)==null?void 0:m.peer)==null?void 0:E.metadata)==null?void 0:b.name)||"Unknown",reconnect:!0}})}else Se.getConnectorId(n)===ie.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),he.removeConnectedNamespace(n))}this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!Be.isTelegram())return;const r=he.getTelegramSocialProvider();if(!r||!Be.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;Fe.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=Se.getAuthConnector();r&&o&&(this.setLoading(!0,e),await Ne.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),he.setConnectedSocialProvider(r),he.removeTelegramSocialProvider(),Dt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var l,u,d,h;if(!ie.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(l=this.remoteFeatures)==null?void 0:l.email,s=Array.isArray((u=this.remoteFeatures)==null?void 0:u.socials)&&this.remoteFeatures.socials.length>0,i=r||s,a=mr.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&((d=this.options)!=null&&d.projectId)&&i&&(this.authProvider=A1.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(h=this.getCaipNetwork(a))==null?void 0:h.caipNetworkId,abortController:wi.EmbeddedWalletAbortController,onTimeout:f=>{f==="iframe_load_failed"?gi.open(wi.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):f==="iframe_request_timeout"?gi.open(wi.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):f==="unverified_domain"&&gi.open(wi.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:f=>Fb(f),getCaipNetworks:f=>q.getCaipNetworks(f)}),yc.subscribeOpen(f=>{var p;!f&&this.isTransactionStackEmpty()&&((p=this.authProvider)==null||p.rejectRpcRequests())}));const c=e===q.state.activeChain&&le.state.enableReconnect;le.state.enableReconnect===!1?this.syncAuthConnectorTheme(this.authProvider):this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&et.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=q.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=Wt.getProvider(r),u=Wt.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=Wt.getProviderId(n)===Pt.CONNECTOR_TYPE_AUTH,u=Wt.getProviderId(r),d=u===Pt.CONNECTOR_TYPE_AUTH,h=ie.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if(!r)throw new Error("AppKit:switchCaipNetwork - networkNamespace is required");if((l&&u===void 0||d)&&h)try{if(q.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:ie.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:Pt.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else if(u===Pt.CONNECTOR_TYPE_WALLET_CONNECT){if(!q.state.noAdapters){const f=this.getAdapter(r),p=Wt.getProvider(r),m=Wt.getProviderId(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:p,providerType:m}))}this.setCaipNetwork(e),this.syncWalletConnectAccount()}else this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r})}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),yc.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var a;const s=`${r}:${n}`,i=(a=this.caipNetworks)==null?void 0:a.find(c=>c.caipNetworkId===s);if(i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}const o=Se.getConnectorId(r)===ie.CONNECTOR_ID.AUTH;try{const{name:c,avatar:l}=await this.fetchIdentity({address:e});!c&&o?await this.syncReownName(e,r):(this.setProfileName(c,r),this.setProfileImage(l,r))}catch{n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=Wt.getProviderId(e);if(n===Pt.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=he.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(Be.isClient()&&!l9)try{const e={...Ft.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),Be.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!le.state.disableAppend&&!le.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}l9=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!Be.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(ur(()=>import("./embedded-wallet-c93b51b6.js"),["assets/embedded-wallet-c93b51b6.js","assets/index-cc40385c.js","assets/index-59ea0f96.js","assets/if-defined-a5dd1e7b.js","assets/ref-7f5bf293.js","assets/index-3b96a61f.js","assets/HelpersUtil-8f64c730.js","assets/index-af81c576.js","assets/index-6a4d6a99.js","assets/index-900bd2c1.js","assets/index-a6bbe287.js","assets/index-b60e2128.js","assets/NavigationUtil-a0d0ce87.js"])),n.email&&r.push(ur(()=>import("./email-a9056b15.js"),["assets/email-a9056b15.js","assets/index-cc40385c.js","assets/index-bb8ab6b3.js","assets/index-b60e2128.js","assets/index-3b96a61f.js","assets/index-a6bbe287.js","assets/if-defined-a5dd1e7b.js","assets/ref-7f5bf293.js","assets/index-900bd2c1.js","assets/index-9cea846f.js","assets/index-af81c576.js"])),n.socials&&r.push(ur(()=>import("./socials-b1c124c3.js"),["assets/socials-b1c124c3.js","assets/index-cc40385c.js","assets/if-defined-a5dd1e7b.js","assets/index-a8783436.js","assets/ref-7f5bf293.js","assets/index-c4bc28e4.js","assets/index-a6bbe287.js","assets/index-b95ca847.js","assets/index-900bd2c1.js","assets/index-3b96a61f.js","assets/index-570590e7.js","assets/index-59ea0f96.js","assets/index-ead5ef03.js"])),n.swaps&&n.swaps.length>0&&r.push(ur(()=>import("./swaps-9e89f9a5.js"),["assets/swaps-9e89f9a5.js","assets/index-cc40385c.js","assets/index-900bd2c1.js","assets/index-3b96a61f.js","assets/index-a6bbe287.js","assets/if-defined-a5dd1e7b.js","assets/index-c0e6210b.js","assets/index-90d4d14b.js","assets/SwapController-94077395.js","assets/index-ead5ef03.js","assets/index-910bb369.js","assets/index-59ea0f96.js","assets/index-af81c576.js","assets/ref-7f5bf293.js"])),e.send&&r.push(ur(()=>import("./send-ee65c7e4.js"),["assets/send-ee65c7e4.js","assets/index-cc40385c.js","assets/index-900bd2c1.js","assets/index-3b96a61f.js","assets/index-a6bbe287.js","assets/if-defined-a5dd1e7b.js","assets/ref-7f5bf293.js","assets/ConstantsUtil-1a373c11.js","assets/index-b60e2128.js","assets/index-910bb369.js","assets/index-59ea0f96.js","assets/index-ead5ef03.js","assets/SwapController-94077395.js","assets/index-af81c576.js","assets/index-6bf31942.js","assets/index-1fb8b998.js","assets/index-30a79a78.js"])),e.receive&&r.push(ur(()=>import("./receive-b933130a.js"),["assets/receive-b933130a.js","assets/index-cc40385c.js","assets/if-defined-a5dd1e7b.js","assets/index-59ea0f96.js","assets/index-570590e7.js"])),n.onramp&&n.onramp.length>0&&r.push(ur(()=>import("./onramp-071a0700.js"),["assets/onramp-071a0700.js","assets/index-cc40385c.js","assets/if-defined-a5dd1e7b.js","assets/index-7fc62c94.js","assets/index-3b96a61f.js","assets/index-a8783436.js","assets/ref-7f5bf293.js","assets/index-59ea0f96.js","assets/index-0719b4f4.js","assets/index-37d8cde3.js","assets/index-b60e2128.js","assets/ConstantsUtil-1a373c11.js","assets/index-900bd2c1.js","assets/index-a6bbe287.js","assets/index-b95ca847.js","assets/ExchangeController-3f08c0f1.js","assets/index-af81c576.js"])),n.payWithExchange&&r.push(ur(()=>import("./pay-with-exchange-12a4a5ac.js"),["assets/pay-with-exchange-12a4a5ac.js","assets/index-cc40385c.js","assets/index-900bd2c1.js","assets/index-3b96a61f.js","assets/index-6a4d6a99.js","assets/index-59ea0f96.js","assets/if-defined-a5dd1e7b.js","assets/index-7fc62c94.js","assets/index-ead5ef03.js","assets/ExchangeController-3f08c0f1.js","assets/index-a6bbe287.js","assets/index-af81c576.js","assets/ref-7f5bf293.js","assets/index-b60e2128.js","assets/index-6bf31942.js","assets/index-1fb8b998.js"])),n.activity&&r.push(ur(()=>import("./transactions-cca20cbf.js"),["assets/transactions-cca20cbf.js","assets/index-cc40385c.js","assets/index-96c5593d.js","assets/index-a6bbe287.js","assets/if-defined-a5dd1e7b.js","assets/index-b60e2128.js","assets/index-59ea0f96.js","assets/index-ead5ef03.js"])),(e.pay||n.payments)&&r.push(ur(()=>import("./index-8b3fddff.js"),["assets/index-8b3fddff.js","assets/index-cc40385c.js","assets/if-defined-a5dd1e7b.js","assets/index-900bd2c1.js","assets/index-3b96a61f.js","assets/index-cc21d295.js","assets/index-6a4d6a99.js","assets/index-59ea0f96.js","assets/index-7fc62c94.js","assets/index-e73142af.js","assets/index-a6bbe287.js","assets/index-1fb8b998.js","assets/index-b95ca847.js"])),n.emailCapture&&r.push(ur(()=>import("./data-capture-b424b79e.js"),["assets/data-capture-b424b79e.js","assets/index-cc40385c.js","assets/index-bb8ab6b3.js","assets/index-b60e2128.js","assets/index-3b96a61f.js","assets/ReownAuthentication-382f2f5b.js"])),await Promise.all([...r,ur(()=>import("./index-afe780fd.js"),["assets/index-afe780fd.js","assets/index-cc40385c.js","assets/if-defined-a5dd1e7b.js","assets/index-59ea0f96.js","assets/index-3b96a61f.js","assets/index-30a79a78.js","assets/index-a6bbe287.js","assets/index-c7e501e8.js","assets/index-37d8cde3.js","assets/index-b60e2128.js","assets/ConstantsUtil-1a373c11.js","assets/HelpersUtil-8f64c730.js","assets/index-6a4d6a99.js","assets/index-7fc62c94.js","assets/index-900bd2c1.js","assets/index-96c5593d.js","assets/index-ead5ef03.js","assets/index-6bf31942.js","assets/index-c0e6210b.js","assets/index-90d4d14b.js","assets/index-e73142af.js","assets/index-1fb8b998.js","assets/ref-7f5bf293.js","assets/index-af81c576.js","assets/index-9cea846f.js","assets/index-a8783436.js","assets/index-c4bc28e4.js","assets/index-b95ca847.js","assets/index-570590e7.js","assets/NavigationUtil-a0d0ce87.js","assets/index-0719b4f4.js"]),ur(()=>import("./w3m-modal-3858c6ea.js"),["assets/w3m-modal-3858c6ea.js","assets/index-cc40385c.js","assets/if-defined-a5dd1e7b.js","assets/index-cc21d295.js","assets/index-59ea0f96.js","assets/HelpersUtil-8f64c730.js","assets/index-3b96a61f.js","assets/index-a6bbe287.js","assets/index-90d4d14b.js","assets/index-c7e501e8.js","assets/index-37d8cde3.js","assets/index-b60e2128.js","assets/ConstantsUtil-1a373c11.js","assets/SwapController-94077395.js"])])}}const bBe="1.8.2";function vBe(t){return new wBe({...t,sdkVersion:Be.generateSdkVersion(t.adapters??[],"html",bBe)})}const vg={signMessage:async(t,e,n)=>{if(!e)throw new Error("signMessage - provider is undefined");const r=Mn(t)?t:Pe(_l(t));return await e.request({method:"personal_sign",params:[r,n]})},estimateGas:async(t,e,n,r)=>{if(!e)throw new Error("estimateGas - provider is undefined");if(!n)throw new Error("estimateGas - address is undefined");if(t.chainNamespace&&t.chainNamespace!=="eip155")throw new Error("estimateGas - chainNamespace is not eip155");const s={from:t.address,to:t.to,data:t.data,type:0},i=new M0(e,r);return await new O0(i,n).estimateGas(s)},sendTransaction:async(t,e,n,r)=>{if(!e)throw new Error("sendTransaction - provider is undefined");if(!n)throw new Error("sendTransaction - address is undefined");if(t.chainNamespace&&t.chainNamespace!=="eip155")throw new Error("sendTransaction - chainNamespace is not eip155");const s={to:t.to,value:t.value,gasLimit:t.gas,gasPrice:t.gasPrice,data:t.data,type:0},i=new M0(e,r),c=await(await new O0(i,n).sendTransaction(s)).wait();return(c==null?void 0:c.hash)||null},writeContract:async(t,e,n,r)=>{if(!e)throw new Error("writeContract - provider is undefined");if(!n)throw new Error("writeContract - address is undefined");const s=new M0(e,r),i=new O0(s,n),o=new Fu(t.tokenAddress,t.abi,i);if(!o||!t.method)throw new Error("Contract method is undefined");const a=o[t.method];if(a)return await a(...t.args);throw new Error("Contract method is undefined")},parseWalletCapabilities:t=>{try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}},parseUnits:qG,formatUnits:AI};class EBe extends QJ{constructor(){super({adapterType:ie.ADAPTER_TYPES.ETHERS,namespace:ie.CHAIN.EVM}),this.balancePromises={}}async createEthersConfig(e){if(!e.metadata)return;let n;function r(){if(n)return n;if(!(typeof window>"u")&&window.ethereum)return n=window.ethereum,n}async function s(){const{SafeProvider:a}=await ur(()=>import("./SafeProvider-b84a44cb.js"),[]),{default:c}=await ur(()=>import("@safe-globalThis/safe-apps-sdk"),[]),l=new c,u=await l.safe.getInfo(),d=new a(u,l);return await d.connect().catch(h=>{console.info("Failed to auto-connect to Safe:",h)}),d}async function i(){var a,c,l;try{const{createCoinbaseWalletSDK:u}=await ur(()=>import("./index-1ca5e788.js"),[]);return typeof window>"u"?void 0:u({appName:(a=e==null?void 0:e.metadata)==null?void 0:a.name,appLogoUrl:(c=e==null?void 0:e.metadata)==null?void 0:c.icons[0],appChainIds:((l=e.networks)==null?void 0:l.map(h=>h.id))||[1,84532],preference:{options:e.coinbasePreference??"all"}}).getProvider()}catch(u){console.error("Failed to import Coinbase Wallet SDK:",u);return}}const o={metadata:e.metadata};if(e.enableInjected!==!1&&(o.injected=r()),e.enableCoinbase!==!1){const a=await i();a&&(o.coinbase=a)}if(Be.isSafeApp()){const a=await s();a&&(o.safe=a)}return o.EIP6963=e.enableEIP6963!==!1,o}async signMessage(e){const{message:n,address:r,provider:s}=e;if(!s)throw new Error("Provider is undefined");try{return{signature:await vg.signMessage(n,s,r)}}catch{throw new Error("EthersAdapter:signMessage - Sign message failed")}}async sendTransaction(e){var r;if(!e.provider)throw new Error("Provider is undefined");return{hash:await vg.sendTransaction({value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),to:e.to,data:e.data?e.data:"0x",gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,address:Fe.state.address},e.provider,Fe.state.address,Number((r=e.caipNetwork)==null?void 0:r.id))}}async writeContract(e){var s;if(!e.provider)throw new Error("Provider is undefined");const{address:n}=bs.parseCaipAddress(e.caipAddress);return{hash:await vg.writeContract(e,e.provider,n,Number((s=e.caipNetwork)==null?void 0:s.id))}}async estimateGas(e){const{provider:n,caipNetwork:r,address:s}=e;if(!n)throw new Error("Provider is undefined");try{return{gas:await vg.estimateGas({data:e.data,to:e.to,address:s},n,s,Number(r==null?void 0:r.id))}}catch{throw new Error("EthersAdapter:estimateGas - Estimate gas failed")}}parseUnits(e){return vg.parseUnits(e.value,e.decimals)}formatUnits(e){return vg.formatUnits(e.value,e.decimals)}async syncConnection(e){const{id:n,chainId:r}=e,s=this.connectors.find(c=>c.id===n),i=s==null?void 0:s.provider;if(!i)throw new Error("Provider not found");const o=await i.request({method:"eth_requestAccounts"}),a=await i.request({method:"eth_chainId"});if(this.listenProviderEvents(n,i),!o[0])throw new Error("No accounts found");if(!(s!=null&&s.type))throw new Error("Connector type not found");return{address:this.toChecksummedAddress(o[0]),chainId:Number(a)||Number(r),provider:i,type:s.type,id:n}}async syncConnectors(e){var r;this.ethersConfig=await this.createEthersConfig(e),(r=this.ethersConfig)!=null&&r.EIP6963&&this.listenInjectedConnector(!0),Object.keys(this.ethersConfig||{}).filter(s=>s!=="metadata"&&s!=="EIP6963").forEach(s=>{var a,c;const i=s==="coinbase"?"coinbaseWalletSDK":s,o=s===ie.CONNECTOR_ID.INJECTED;this.namespace&&this.addConnector({id:i,explorerId:pl.ConnectorExplorerIds[i],imageUrl:(a=e==null?void 0:e.connectorImages)==null?void 0:a[i],name:pl.ConnectorNamesMap[i]||"Unknown",imageId:pl.ConnectorImageIds[i],type:pl.ConnectorTypesMap[i]??"EXTERNAL",info:o?void 0:{rdns:i},chain:this.namespace,chains:[],provider:(c=this.ethersConfig)==null?void 0:c[s]})})}async disconnectAll(){return{connections:await Promise.all(this.connections.map(async n=>{const r=this.connectors.find(s=>mr.isLowerCaseMatch(s.id,n.connectorId));if(!r)throw new Error("Connector not found");return await this.disconnect({id:r.id}),n}))}}async syncConnections({connectToFirstConnector:e}){var n;await((n=this.connectionManager)==null?void 0:n.syncConnections({connectors:this.connectors,caipNetworks:this.getCaipNetworks(),universalProvider:this.universalProvider,onConnection:this.addConnection.bind(this),onListenProvider:this.listenProviderEvents.bind(this)})),e&&this.emitFirstAvailableConnection()}async setUniversalProvider(e){this.universalProvider=e;const n=ie.CONNECTOR_ID.WALLET_CONNECT;return Wu.listenWcProvider({universalProvider:e,namespace:ie.CHAIN.EVM,onConnect:r=>this.onConnect(r,n),onDisconnect:()=>this.onDisconnect(n),onAccountsChanged:r=>this.onAccountsChanged(r,n,!1),onChainChanged:r=>this.onChainChanged(r,n)}),this.addConnector(new B5({provider:e,caipNetworks:this.getCaipNetworks(),namespace:ie.CHAIN.EVM})),Promise.resolve()}eip6963EventHandler(e){var n;if(e.detail){const{info:r,provider:s}=e.detail;if(!((n=this.connectors)==null?void 0:n.find(o=>o.name===(r==null?void 0:r.name)))){const o=pl.ConnectorTypesMap[ie.CONNECTOR_ID.EIP6963],a=(r==null?void 0:r.rdns)||(r==null?void 0:r.name)||(r==null?void 0:r.uuid);this.namespace&&a&&this.addConnector({id:a,type:o,imageUrl:r==null?void 0:r.icon,name:(r==null?void 0:r.name)||"Unknown",provider:s,info:r,chain:this.namespace,chains:[]})}}}listenInjectedConnector(e){if(typeof window<"u"&&e){const n=this.eip6963EventHandler.bind(this);window.addEventListener(Pt.EIP6963_ANNOUNCE_EVENT,n),window.dispatchEvent(new Event(Pt.EIP6963_REQUEST_EVENT))}}async connect({id:e,address:n,type:r,chainId:s,socialUri:i}){var d;const o=this.connectors.find(h=>mr.isLowerCaseMatch(h.id,e));if(!o)throw new Error("Connector not found");const a=(d=this.connectionManager)==null?void 0:d.getConnection({address:n,connectorId:e,connections:this.connections,connectors:this.connectors});if(a){const h=a.caipNetwork;if(!h)throw new Error("EthersAdapter:connect - could not find the caipNetwork to connect");if(a.account)return this.emit("accountChanged",{address:this.toChecksummedAddress(a.account.address),chainId:h.id,connector:o}),{address:this.toChecksummedAddress(a.account.address),chainId:h.id,provider:o.provider,type:o.type,id:e}}const c=o==null?void 0:o.provider;if(!c)throw new Error("Provider not found");let l=[],u;if(r===Pt.CONNECTOR_TYPE_AUTH){const{address:h,accounts:f}=await Vo.authConnectorAuthenticate({authConnector:c,chainNamespace:ie.CHAIN.EVM,chainId:s,socialUri:i,preferredAccountType:Ao("eip155")}),p=this.getCaipNetworks().find(m=>m.id.toString()===(s==null?void 0:s.toString()));l=[h],this.addConnection({connectorId:e,accounts:f?f.map(m=>({address:m.address})):l.map(m=>({address:m})),caipNetwork:p,auth:{name:he.getConnectedSocialProvider(),username:he.getConnectedSocialUsername()}}),this.emit("accountChanged",{address:this.toChecksummedAddress(l[0]),chainId:Number(s),connector:o})}else{l=await c.request({method:"eth_requestAccounts"}),u=await c.request({method:"eth_chainId"});const h=this.getCaipNetworks().find(f=>f.id.toString()===(s==null?void 0:s.toString()));if(u!==s){if(!h)throw new Error("EthersAdapter:connect - could not find the caipNetwork to switch");try{await this.switchNetwork({caipNetwork:h,provider:c,providerType:r})}catch{throw new Error("EthersAdapter:connect - Switch network failed")}}this.emit("accountChanged",{address:this.toChecksummedAddress(l[0]),chainId:Number(s),connector:o}),this.addConnection({connectorId:e,accounts:l.map(f=>({address:f})),caipNetwork:h}),o.id!==ie.CONNECTOR_ID.WALLET_CONNECT&&this.listenProviderEvents(e,c)}return{address:this.toChecksummedAddress(l[0]),chainId:Number(s),provider:c,type:r,id:e}}async reconnect(e){const{id:n,chainId:r}=e,s=this.connectors.find(i=>i.id===n);s&&s.type==="AUTH"&&r&&await Vo.authConnectorAuthenticate({authConnector:s.provider,chainNamespace:ie.CHAIN.EVM,chainId:r,preferredAccountType:Ao("eip155")})}async getAccounts(e){var o;const n=this.connectors.find(a=>a.id===e.id),r=n==null?void 0:n.provider;if(!r||!n)throw new Error("Provider not found");const s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:e.id,connections:this.connections,connectors:this.connectors});if(s)return{accounts:s.accounts.map(({address:a})=>Be.createAccount(ie.CHAIN.EVM,a,"eoa"))};if(e.id===ie.CONNECTOR_ID.AUTH){const a=n.provider;if(!a.user)return{accounts:[]};const{accounts:c,address:l}=a.user;return Promise.resolve({accounts:(c||[{address:l,type:"eoa"}]).map(u=>Be.createAccount(ie.CHAIN.EVM,u.address,u.type))})}return{accounts:(await r.request({method:"eth_requestAccounts"})).map(a=>Be.createAccount(ie.CHAIN.EVM,a,"eoa"))}}async disconnect(e){var n,r;if(e.id){const s=this.connectors.find(o=>mr.isLowerCaseMatch(o.id,e.id));if(!s)throw new Error("Connector not found");const i=(n=this.connectionManager)==null?void 0:n.getConnection({connectorId:e.id,connections:this.connections,connectors:this.connectors});switch(s.type){case Pt.CONNECTOR_TYPE_WALLET_CONNECT:s.provider.session&&s.provider.disconnect();break;case Pt.CONNECTOR_TYPE_AUTH:await((r=s.provider)==null?void 0:r.disconnect());break;case Pt.CONNECTOR_TYPE_ANNOUNCED:case Pt.CONNECTOR_TYPE_EXTERNAL:await this.revokeProviderPermissions(s.provider);break;default:throw new Error("Unsupported provider type")}return s.id&&(this.removeProviderListeners(s.id),this.deleteConnection(s.id)),this.connections.length===0?this.emit("disconnect"):this.emitFirstAvailableConnection(),{connections:i?[i]:[]}}return this.disconnectAll()}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>{var i;return s.id.toString()===((i=e.chainId)==null?void 0:i.toString())});if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&r.chainNamespace===ie.CHAIN.EVM){const s=`${r.caipNetworkId}:${n}`,i=this.balancePromises[s];if(i)return i;const o=he.getNativeBalanceCacheForCaipAddress(s);if(o)return{balance:o.balance,symbol:o.symbol};const a=new c5(r.rpcUrls.default.http[0],{chainId:r.id,name:r.name});if(a)try{return this.balancePromises[s]=new Promise(async c=>{try{const l=await a.getBalance(n),u=Ga(l);he.updateNativeBalanceCache({caipAddress:s,balance:u,symbol:r.nativeCurrency.symbol,timestamp:Date.now()}),c({balance:u,symbol:r.nativeCurrency.symbol})}catch{c({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"}}catch{return{balance:"0.00",symbol:"ETH"}}}return{balance:"0.00",symbol:"ETH"}}async switchNetwork(e){var i,o;const{caipNetwork:n,provider:r,providerType:s}=e;if(s==="AUTH"){await super.switchNetwork(e);return}try{await r.request({method:"wallet_switchEthereumChain",params:[{chainId:L0.numberToHexString(n.id)}]})}catch(a){if(a.code===Mu.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||a.code===Mu.ERROR_INVALID_CHAIN_ID||a.code===Mu.ERROR_CODE_DEFAULT||((o=(i=a==null?void 0:a.data)==null?void 0:i.originalError)==null?void 0:o.code)===Mu.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)await L0.addEthereumChain(r,n);else if(s==="ANNOUNCED"||s==="EXTERNAL"||s==="INJECTED")throw new Error("Chain is not supported")}}getWalletConnectProvider(){var e;return(e=this.connectors.find(n=>n.type==="WALLET_CONNECT"))==null?void 0:e.provider}async revokeProviderPermissions(e){try{(await e.request({method:"wallet_getPermissions"})).find(s=>s.parentCapability==="eth_accounts")&&await e.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]})}catch(n){console.info("Could not revoke permissions from wallet. Disconnecting...",n)}}async getCapabilities(e){const n=Wt.getProvider(ie.CHAIN.EVM);if(!n)throw new Error("Provider is undefined");return await n.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){const n=Wt.getProvider(ie.CHAIN.EVM);if(!n)throw new Error("Provider is undefined");return await n.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){const n=Wt.getProvider(ie.CHAIN.EVM);if(!n)throw new Error("Provider is undefined");return await n.request({method:"wallet_revokePermissions",params:[e]})}async walletGetAssets(e){const n=Wt.getProvider(ie.CHAIN.EVM);if(!n)throw new Error("Provider is undefined");return await n.request({method:"wallet_getAssets",params:[e]})}toChecksummedAddress(e){try{return un(e.toLowerCase())}catch{return e}}}const ABe={}.VITE_REOWN_PROJECT_ID||"7b95bde23a23c6cb1bf4df1329c53791",xBe={name:"Ondrix Escrow",description:"Secure Investment Platform with Time-locked Protection",url:"https://ondrix-escrow.com",icons:["https://ondrix-escrow.com/icon.png"]};let Bx=null;const u9=async t=>{try{const e=new M0(t,{name:"BSC Testnet",chainId:97});return e.lookupAddress=async()=>null,e.resolveName=async()=>null,console.log("✅ Created safe BSC provider with ENS disabled"),e}catch(e){return console.error("❌ Error creating safe BSC provider:",e),null}},d9=()=>{if(Bx)return Bx;try{return Bx=vBe({adapters:[new EBe],networks:[$ye],metadata:xBe,projectId:ABe,features:{analytics:!0,email:!1,socials:!1},themeMode:"dark",themeVariables:{"--w3m-color-mix":"#00ff88","--w3m-color-mix-strength":20,"--w3m-accent":"#00ff88","--w3m-border-radius-master":"8px","--w3m-font-family":"Inter, system-ui, sans-serif"}}),console.log("✅ AppKit initialized"),Bx}catch(t){return console.error("❌ Failed to initialize AppKit:",t),null}},c4=()=>{const t=Dm(),[e,n]=Z.useState(!1),[r,s]=Z.useState(!1),[i,o]=Z.useState(!0);Z.useEffect(()=>{const p=d9();if(!p)return;const m=async()=>{var w,N;if(t.chain==="bnb"&&!t.isConnected)try{const _=(w=p.getAccount)==null?void 0:w.call(p);if(_&&_.address){console.log("🔄 Found existing Reown connection, restoring...",_.address);const L=(N=p.getWalletProvider)==null?void 0:N.call(p);if(L){const U=await u9(L);t.setReownConnection(_.address,U)}else t.setReownConnection(_.address,null)}}catch{console.log("ℹ️ No existing Reown connection found (normal)")}};setTimeout(()=>{m(),setTimeout(()=>o(!1),2500)},500),window.__reownDisconnect=async()=>{try{await p.disconnect()}catch(w){console.warn("AppKit disconnect error:",w)}};const E=async w=>{var L;let N,_=!1;if(w!=null&&w.address?(N=w.address,_=w.isConnected!==void 0?w.isConnected:!!w.address):w!=null&&w.caipAddress||w!=null&&w.selectedNetworkId&&(w!=null&&w.caipAddress)?(N=w.caipAddress.split(":")[2],_=!!N):typeof w=="string"&&w.startsWith("0x")?(N=w,_=!!w):(L=w==null?void 0:w.account)!=null&&L.address&&(N=w.account.address,_=!!N),_&&N&&t.chain==="bnb"){const U=p.getWalletProvider();if(U){const F=await u9(U);t.setReownConnection(N,F),console.log("✅ Reown wallet connected:",N.slice(0,6)+"..."+N.slice(-4)),o(!1)}else t.setReownConnection(N,null),o(!1)}else N||(t.setReownConnection(null,null),o(!1))};let b,x;try{p.subscribeState?(b=p.subscribeState(E),console.log("✅ Subscribed to AppKit state changes")):p.subscribeAccount?(b=p.subscribeAccount(w=>{E({address:w,isConnected:!!w})}),console.log("✅ Subscribed to AppKit account changes")):console.warn("No subscription methods available in AppKit")}catch(w){console.warn("Error setting up AppKit subscriptions:",w)}return x=setInterval(()=>{if(p.getAccount&&t.chain==="bnb")try{const w=p.getAccount();w&&E(w)}catch{}},5e3),()=>{if(b)try{b()}catch(w){console.warn("Error unsubscribing from AppKit:",w)}x&&clearInterval(x)}},[t]);const a=async()=>{const p=d9();if(!p)throw new Error("AppKit not initialized");try{await p.open()}catch(m){throw console.error("❌ Failed to open AppKit modal:",m),m}},c=async()=>{try{if(t.chain==="bnb")await a();else{if(t.chain==="solana")return;await t.connect()}}catch(p){console.error("❌ Connection failed:",p)}},l=async()=>{try{t.chain==="bnb"?await t.disconnectReown():await t.disconnect(),n(!1)}catch(p){console.error("❌ Disconnect failed:",p)}},u=async()=>{if(t.address)try{await navigator.clipboard.writeText(t.address),s(!0),setTimeout(()=>s(!1),2e3)}catch(p){console.error("❌ Failed to copy address:",p)}},d=p=>p?`${p.slice(0,4)}...${p.slice(-4)}`:"Loading...",h=()=>t.address?t.chain==="solana"?`https://explorer.solana.com/address/${t.address}?cluster=devnet`:`https://testnet.bscscan.com/address/${t.address}`:"",f=()=>t.chain==="solana"?"Solana Devnet":"BSC Testnet";return i&&!t.isConnected?v.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center space-y-4",children:v.jsxs(Ee.div,{className:"flex items-center space-x-2 text-text-muted",animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0},children:[v.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-accent-green border-t-transparent"}),v.jsx("span",{children:"Checking for existing wallet connections..."})]})}):!t.isConnected||!t.address?v.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center space-y-4",children:[t.chain==="solana"?v.jsxs("div",{className:"wallet-adapter-button-container",children:[v.jsx(Iue,{}),v.jsx("p",{className:"text-text-muted text-xs text-center mt-2",children:"Choose Phantom or Solflare wallet"})]}):v.jsx(Ee.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:c,disabled:t.isConnecting,className:"btn-primary flex items-center justify-center space-x-2 w-full px-6 py-3",children:t.isConnecting?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),v.jsx("span",{children:"Connecting..."})]}):v.jsxs(v.Fragment,{children:[v.jsx(R3,{size:16}),v.jsx("span",{children:"Connect Wallet"})]})}),t.error&&v.jsx(Ee.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-error/20 border border-error/30 text-error px-4 py-2 rounded-lg text-sm text-center max-w-md",children:t.error}),v.jsx("p",{className:"text-text-muted text-sm text-center",children:"Connect your wallet to start investing"})]}):v.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative",children:[v.jsxs(Ee.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(!e),className:"card flex items-center justify-between w-full hover:border-accent-green/50 transition-all duration-200 p-3 sm:p-4",children:[v.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1",children:[v.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-green rounded-full flex items-center justify-center flex-shrink-0",children:v.jsx(R3,{size:16,className:"text-white sm:w-5 sm:h-5"})}),v.jsxs("div",{className:"text-left min-w-0 flex-1",children:[v.jsx("div",{className:"text-text-primary font-medium text-sm sm:text-base truncate",children:d(t.address)}),v.jsx("div",{className:"text-text-muted text-xs sm:text-sm truncate",children:f()})]})]}),v.jsx(pEe,{size:16,className:`text-text-muted transition-transform duration-200 flex-shrink-0 sm:w-5 sm:h-5 ${e?"rotate-180":""}`})]}),v.jsx(Rv,{children:e&&v.jsxs(Ee.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 mt-2 bg-bg-card border border-border-dark rounded-xl shadow-xl z-50 overflow-hidden",children:[v.jsxs("div",{className:"p-4 border-b border-border-dark",children:[v.jsx("div",{className:"text-text-muted text-xs uppercase tracking-wide mb-2",children:"Wallet Address"}),v.jsxs("div",{className:"flex items-center justify-between space-x-2",children:[v.jsx("code",{className:"text-text-primary text-sm font-mono",children:t.address}),v.jsx("button",{onClick:u,className:"p-2 hover:bg-bg-hover rounded-lg transition-colors duration-200",title:"Copy address",children:r?v.jsx(Nf,{size:16,className:"text-success"}):v.jsx(Tf,{size:16,className:"text-text-muted"})})]})]}),v.jsxs("div",{className:"p-2",children:[v.jsxs(Ee.a,{whileHover:{backgroundColor:"rgba(42, 42, 42, 1)"},href:h(),target:"_blank",rel:"noopener noreferrer",className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-text-primary hover:text-accent-green transition-colors duration-200",children:[v.jsx(Ni,{size:16}),v.jsx("span",{children:"View on Explorer"})]}),v.jsxs(Ee.button,{whileHover:{backgroundColor:"rgba(42, 42, 42, 1)"},onClick:l,className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-error hover:text-error transition-colors duration-200",children:[v.jsx(gEe,{size:16}),v.jsx("span",{children:"Disconnect"})]})]})]})}),e&&v.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)})]})},SBe=Object.freeze(Object.defineProperty({__proto__:null,WalletConnection:c4},Symbol.toStringTag,{value:"Module"})),CBe=()=>{const t=[{icon:yEe,title:"Secure Investment",description:"Your investment is protected by smart contract escrow with automatic 50/50 split."},{icon:Ov,title:"Time-Locked Protection",description:"50% of your funds are time-locked, providing maximum security for your investment."},{icon:i0,title:"Immediate Access",description:"Get all your tokens immediately upon investment, with 50% of your funds time-locked."},{icon:Og,title:"Fair Token Price",description:"Fixed token price of $0.10 USD with real-time price feed integration."}],e=[{step:"1",title:"Connect Wallet",description:"Connect your Solana or BNB wallet to get started with investing."},{step:"2",title:"Choose Amount",description:"Select your investment amount (0.001 - 100 tokens minimum)."},{step:"3",title:"Invest Securely",description:"Your funds are split: 50% to project, 50% time-locked for protection."},{step:"4",title:"Get Tokens",description:"Receive all your tokens immediately and track your time-locked funds."}],n={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},r={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return v.jsxs("div",{className:"space-y-16",children:[v.jsxs(Ee.section,{id:"features",variants:n,initial:"hidden",animate:"visible",className:"space-y-8",children:[v.jsxs(Ee.div,{variants:r,className:"text-center",children:[v.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-text-primary mb-4",children:["Why Choose ",v.jsx("span",{className:"gradient-text",children:"Ondrix Escrow"}),"?"]}),v.jsx("p",{className:"text-text-secondary max-w-2xl mx-auto",children:"Our platform provides maximum security for your investments through smart contract escrow with automatic fund splitting and time-lock protection."})]}),v.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((s,i)=>v.jsxs(Ee.div,{variants:r,whileHover:{scale:1.05},className:"card text-center hover:border-accent-green/50 transition-all duration-300",children:[v.jsx("div",{className:"w-16 h-16 bg-gradient-green rounded-full flex items-center justify-center mx-auto mb-4",children:v.jsx(s.icon,{size:28,className:"text-white"})}),v.jsx("h3",{className:"text-text-primary font-semibold mb-2",children:s.title}),v.jsx("p",{className:"text-text-muted text-sm",children:s.description})]},i))})]}),v.jsxs(Ee.section,{id:"how-it-works",variants:n,initial:"hidden",animate:"visible",className:"space-y-8",children:[v.jsxs(Ee.div,{variants:r,className:"text-center",children:[v.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-text-primary mb-4",children:["How It ",v.jsx("span",{className:"gradient-text",children:"Works"})]}),v.jsx("p",{className:"text-text-secondary max-w-2xl mx-auto",children:"Simple 4-step process to securely invest in projects with maximum protection."})]}),v.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((s,i)=>v.jsxs(Ee.div,{variants:r,className:"relative",children:[v.jsx("div",{className:"w-12 h-12 bg-gradient-green rounded-full flex items-center justify-center text-white font-bold text-lg mb-4 mx-auto md:mx-0",children:s.step}),i<e.length-1&&v.jsx("div",{className:"hidden lg:block absolute top-6 left-12 w-full h-0.5 bg-gradient-to-r from-accent-green to-accent-green/20"}),v.jsxs("div",{className:"text-center md:text-left",children:[v.jsx("h3",{className:"text-text-primary font-semibold mb-2",children:s.title}),v.jsx("p",{className:"text-text-muted text-sm",children:s.description})]})]},i))})]}),v.jsxs(Ee.section,{id:"security",variants:n,initial:"hidden",animate:"visible",className:"space-y-8",children:[v.jsxs(Ee.div,{variants:r,className:"text-center",children:[v.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-text-primary mb-4",children:["Maximum ",v.jsx("span",{className:"gradient-text",children:"Security"})]}),v.jsx("p",{className:"text-text-secondary max-w-2xl mx-auto",children:"Your investments are protected by battle-tested smart contracts and industry-standard security practices."})]}),v.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[v.jsxs(Ee.div,{variants:r,className:"card",children:[v.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[v.jsx(s0,{className:"text-success",size:24}),v.jsx("h3",{className:"text-text-primary font-semibold",children:"Smart Contract Escrow"})]}),v.jsxs("ul",{className:"space-y-2 text-text-muted text-sm",children:[v.jsxs("li",{className:"flex items-center space-x-2",children:[v.jsx("div",{className:"w-1.5 h-1.5 bg-accent-green rounded-full"}),v.jsx("span",{children:"Automated fund splitting (50/50)"})]}),v.jsxs("li",{className:"flex items-center space-x-2",children:[v.jsx("div",{className:"w-1.5 h-1.5 bg-accent-green rounded-full"}),v.jsx("span",{children:"Time-lock protection mechanism"})]}),v.jsxs("li",{className:"flex items-center space-x-2",children:[v.jsx("div",{className:"w-1.5 h-1.5 bg-accent-green rounded-full"}),v.jsx("span",{children:"Immutable contract logic"})]})]})]}),v.jsxs(Ee.div,{variants:r,className:"card",children:[v.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[v.jsx(s0,{className:"text-success",size:24}),v.jsx("h3",{className:"text-text-primary font-semibold",children:"Multi-Chain Support"})]}),v.jsxs("ul",{className:"space-y-2 text-text-muted text-sm",children:[v.jsxs("li",{className:"flex items-center space-x-2",children:[v.jsx("div",{className:"w-1.5 h-1.5 bg-accent-green rounded-full"}),v.jsx("span",{children:"Solana Program integration"})]}),v.jsxs("li",{className:"flex items-center space-x-2",children:[v.jsx("div",{className:"w-1.5 h-1.5 bg-accent-green rounded-full"}),v.jsx("span",{children:"BNB Smart Chain compatibility"})]}),v.jsxs("li",{className:"flex items-center space-x-2",children:[v.jsx("div",{className:"w-1.5 h-1.5 bg-accent-green rounded-full"}),v.jsx("span",{children:"Real-time price feed integration"})]})]})]})]})]}),v.jsx(Ee.section,{variants:n,initial:"hidden",animate:"visible",className:"bg-bg-card rounded-xl p-8 border border-border-dark",children:v.jsxs("div",{className:"grid md:grid-cols-4 gap-8 text-center",children:[v.jsxs(Ee.div,{variants:r,children:[v.jsx("div",{className:"text-3xl font-bold gradient-text mb-2",children:"$0.10"}),v.jsx("div",{className:"text-text-muted text-sm",children:"Token Price USD"})]}),v.jsxs(Ee.div,{variants:r,children:[v.jsx("div",{className:"text-3xl font-bold gradient-text mb-2",children:"50/50"}),v.jsx("div",{className:"text-text-muted text-sm",children:"Fund Split Ratio"})]}),v.jsxs(Ee.div,{variants:r,children:[v.jsx("div",{className:"text-3xl font-bold gradient-text mb-2",children:"5min"}),v.jsx("div",{className:"text-text-muted text-sm",children:"Time-lock Period"})]}),v.jsxs(Ee.div,{variants:r,children:[v.jsx("div",{className:"text-3xl font-bold gradient-text mb-2",children:"1000"}),v.jsx("div",{className:"text-text-muted text-sm",children:"Total Token Supply"})]})]})}),v.jsxs(Ee.section,{variants:n,initial:"hidden",animate:"visible",className:"text-center space-y-6",children:[v.jsxs(Ee.div,{variants:r,children:[v.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-text-primary mb-4",children:["Ready to ",v.jsx("span",{className:"gradient-text",children:"Invest Securely"}),"?"]}),v.jsx("p",{className:"text-text-secondary max-w-xl mx-auto mb-8",children:"Connect your wallet above to start investing with maximum security and protection."})]}),v.jsx(Ee.div,{variants:r,className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:v.jsx("div",{className:"text-text-muted text-sm",children:"↑ Choose your network and connect wallet to begin"})})]})]})},qI=new fe("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new fe("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const GI=new fe("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new fe("So11111111111111111111111111111111111111112");new fe("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const L5=t=>{const e=t.decode.bind(t),n=t.encode.bind(t);return{decode:e,encode:n}};var bA={};Object.defineProperty(bA,"__esModule",{value:!0});function _Be(t){{const e=Ge.from(t);e.reverse();const n=e.toString("hex");return n.length===0?BigInt(0):BigInt(`0x${n}`)}}var IBe=bA.toBigIntLE=_Be;function NBe(t){{const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}bA.toBigIntBE=NBe;function TBe(t,e){{const n=t.toString(16),r=Ge.from(n.padStart(e*2,"0").slice(0,e*2),"hex");return r.reverse(),r}}var kBe=bA.toBufferLE=TBe;function PBe(t,e){{const n=t.toString(16);return Ge.from(n.padStart(e*2,"0").slice(0,e*2),"hex")}}bA.toBufferBE=PBe;const RBe=t=>e=>{const n=On(t,e),{encode:r,decode:s}=L5(n),i=n;return i.decode=(o,a)=>{const c=s(o,a);return IBe(Ge.from(c))},i.encode=(o,a,c)=>{const l=kBe(o,t);return r(l,a,c)},i},OBe=RBe(8),MBe=t=>{const e=jt(t),{encode:n,decode:r}=L5(e),s=e;return s.decode=(i,o)=>!!r(i,o),s.encode=(i,o,a)=>{const c=Number(i);return n(c,o,a)},s},h9=t=>{const e=On(32,t),{encode:n,decode:r}=L5(e),s=e;return s.decode=(i,o)=>{const a=r(i,o);return new fe(a)},s.encode=(i,o,a)=>{const c=i.toBuffer();return n(c,o,a)},s};class DBe extends Error{constructor(e){super(e)}}class BBe extends DBe{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}const LBe=qe([Ke("mintAuthorityOption"),h9("mintAuthority"),OBe("supply"),jt("decimals"),MBe("isInitialized"),Ke("freezeAuthorityOption"),h9("freezeAuthority")]);LBe.span;async function l4(t,e,n=!1,r=qI,s=GI){if(!n&&!fe.isOnCurve(e.toBuffer()))throw new BBe;const[i]=await fe.findProgramAddress([e.toBuffer(),r.toBuffer(),t.toBuffer()],s);return i}function UBe(t,e,n,r,s=qI,i=GI){return FBe(t,e,n,r,Ge.alloc(0),s,i)}function FBe(t,e,n,r,s,i=qI,o=GI){const a=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:Yr.programId,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];return new bn({keys:a,programId:o,data:s})}const Wd=new F2(Ld.solana.rpcUrl,"confirmed"),vA=new fe(Os.solana.programId),x1=new fe(Os.solana.globalEscrow),Lx=new fe(Os.solana.tokenMint);class jBe{constructor(e,n){this.instruction=e,this.params=n}serialize(){var n;const e=[];if(e.push(Ge.from([this.instruction])),this.instruction===1&&((n=this.params)!=null&&n.solAmount)){const r=Ge.alloc(8);r.writeBigUInt64LE(this.params.solAmount),e.push(r)}return Ge.concat(e)}}function U5(t,e){return fe.findProgramAddressSync([Ge.from("investor"),t.toBuffer(),e.toBuffer()],vA)}function JJ(t,e){return fe.findProgramAddressSync([Ge.from("sol_vault"),t.toBuffer(),e.toBuffer()],vA)}function $Be(t){return fe.findProgramAddressSync([Ge.from("token_vault"),t.toBuffer()],vA)}const zBe=new fe([241,75,246,90,213,107,210,186,113,94,69,116,44,35,31,39,214,54,33,207,91,119,143,55,193,162,72,149,29,23,86,2]),WBe=new fe([120,245,122,225,25,94,140,73,122,139,224,84,173,82,173,244,200,151,111,132,54,115,35,9,226,42,247,6,119,36,173,150]);async function HBe(t,e,n,r,s){const[i]=U5(t,e),[o]=JJ(t,e),[a]=$Be(e),c=await l4(n,t),l=new jBe(1,{solAmount:s});return new bn({programId:vA,keys:[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:qI,isSigner:!1,isWritable:!1},{pubkey:zBe,isSigner:!1,isWritable:!1},{pubkey:WBe,isSigner:!1,isWritable:!1},{pubkey:Yr.programId,isSigner:!1,isWritable:!1},{pubkey:hc,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:GI,isSigner:!1,isWritable:!1},{pubkey:new fe("SysvarRent111111111111111111111111111111111"),isSigner:!1,isWritable:!1}],data:l.serialize()})}function VBe(t){return BigInt(Math.floor(t*WC))}async function KBe(){try{const e=await fetch("https://api.dexscreener.com/latest/dex/tokens/So11111111111111111111111111111111111111112");if(e.ok){const n=await e.json();if(n.pairs&&n.pairs.length>0){const r=n.pairs.reduce((i,o)=>{var l,u;const a=parseFloat(((l=o.volume)==null?void 0:l.h24)||0),c=parseFloat(((u=i.volume)==null?void 0:u.h24)||0);return a>c?o:i}),s=parseFloat(r.priceUsd);return console.log(`📊 SOL price from DexScreener: $${s.toFixed(2)}`),s}}throw new Error("No price data from DexScreener")}catch(t){throw console.error("❌ DexScreener error:",t),t}}async function Qk(){try{return await KBe()}catch{return console.warn("Failed to fetch SOL price from DexScreener, using fallback"),140}}async function qBe(){try{const t="https://data-seed-prebsc-1-s1.bnbchain.org:8545",e=new c5(t),n=Os.bnb.priceFeed,r=new Fu(n,zye,e),s=await r.latestRoundData(),i=await r.decimals(),o=Number(AI(s.answer,i));return console.log(`📊 BNB price from Chainlink: $${o.toFixed(2)}`),o}catch(t){throw console.error("❌ Error fetching BNB price from Chainlink:",t),t}}async function Jk(){try{return await qBe()}catch{return console.warn("Failed to fetch BNB price from Chainlink, using fallback"),580}}function f9(t,e=140){return t*e/.1}function GBe(t,e=580){return t*e/.1}function YBe(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);let n=0;const r=t[n];n+=1,n+=32,n+=32,n+=32;const s=e.getBigUint64(n,!0);n+=8;const i=e.getBigUint64(n,!0);n+=8;const o=e.getBigUint64(n,!0);n+=8;const a=e.getBigUint64(n,!0);n+=8;const c=e.getBigInt64(n,!0);return n+=8,{isInitialized:r,totalTokensAvailable:s,tokensSold:i,totalSolDeposited:o,totalSolWithdrawn:a,lockDuration:c}}async function XJ(){try{const t=await Wd.getAccountInfo(x1);if(!t||!t.data)throw new Error("Global escrow account not found");const e=YBe(t.data);return{isInitialized:e.isInitialized===1,totalTokensAvailable:Number(e.totalTokensAvailable)/1e9,tokensSold:Number(e.tokensSold)/1e9,totalSolDeposited:Number(e.totalSolDeposited)/WC,totalSolWithdrawn:Number(e.totalSolWithdrawn)/WC,lockDuration:Number(e.lockDuration)}}catch(t){throw console.error("Error fetching escrow status:",t),t}}function ZBe(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);let n=0;const r=t[n];n+=1,n+=32,n+=32;const s=e.getBigUint64(n,!0);n+=8;const i=e.getBigUint64(n,!0);n+=8;const o=e.getBigInt64(n,!0);n+=8,n+=8;const a=t[n];return n+=1,{isInitialized:r,solDeposited:s,tokensReceived:i,depositTimestamp:o,status:a}}async function QBe(t){try{const[e]=U5(t,x1),n=await Wd.getAccountInfo(e);if(!n||!n.data)return null;if(!n.owner.equals(vA))return console.warn("Investor account not owned by program"),null;const r=ZBe(n.data);if(r.isInitialized!==1)return null;const s=await XJ(),i=Math.floor(Date.now()/1e3),o=Number(r.depositTimestamp)+s.lockDuration,a=i>=o;return{isInitialized:!0,solDeposited:Number(r.solDeposited),tokensReceived:Number(r.tokensReceived),depositTimestamp:Number(r.depositTimestamp),status:r.status,lockedSolAmount:Number(r.solDeposited)/2,isUnlocked:a}}catch(e){return console.error("Error fetching investor data:",e),null}}function JBe(){const t=Dm(),[e,n]=Z.useState(null),[r,s]=Z.useState(null),[i,o]=Z.useState(!1),[a,c]=Z.useState(!1),[l,u]=Z.useState(null),[d,h]=Z.useState(!1),[f,p]=Z.useState(140);Z.useEffect(()=>{if(t.isConnected&&t.chain==="solana"&&t.solanaPublicKey){c(!1),m();const x=setInterval(m,1e4);return()=>clearInterval(x)}},[t.isConnected,t.solanaPublicKey,t.chain]),Z.useEffect(()=>{if(t.chain==="solana"){Qk().then(p).catch(console.error);const x=setInterval(()=>{t.chain==="solana"&&Qk().then(p).catch(console.error)},3e4);return()=>clearInterval(x)}},[t.chain]);const m=async()=>{if(t.solanaPublicKey)try{o(!0),u(null);const x=await Qk();p(x);const w=await XJ();n(w);const N=await QBe(t.solanaPublicKey);s(N)}catch(x){console.error("Error fetching Solana data:",x),u(x.message||"Failed to fetch escrow data")}finally{o(!1),c(!0)}},E=async x=>{var w,N,_;if(!t.solanaWallet||!t.solanaPublicKey)throw new Error("Solana wallet not connected");if(x<=0||x<.001||x>10)throw new Error("Investment amount must be between 0.001 and 10 SOL");try{h(!0),u(null);const L=await Wd.getBalance(t.solanaPublicKey),U=VBe(x);if(L<Number(U)+1e7)throw new Error(`Insufficient SOL balance. You need at least ${(Number(U)+1e7)/1e9} SOL (including fees)`);const F=new fe("EJ6bPvsTXfzk1WS9eXKDQ3KL5x9a2wy15XPxL48FdeAc"),M=await l4(Lx,t.solanaPublicKey),W=new ln;if(!await Wd.getAccountInfo(M)){console.log("Creating token account for investor:",M.toString());const T=UBe(t.solanaPublicKey,M,t.solanaPublicKey,Lx);W.add(T)}const K=await HBe(t.solanaPublicKey,x1,Lx,F,U);W.add(K);const{blockhash:P}=await Wd.getLatestBlockhash();W.recentBlockhash=P,W.feePayer=t.solanaPublicKey;const y=await Wd.simulateTransaction(W);if(y.value.err)throw console.error("Transaction simulation failed:",y.value.err),console.error("Logs:",y.value.logs),new Error(`Transaction simulation failed: ${JSON.stringify(y.value.err)}`);const g=await t.solanaWallet.signTransaction(W),A=await Wd.sendRawTransaction(g.serialize());await Wd.confirmTransaction(A,"confirmed");const I=f9(x,f);u(`✅ Investment successful! You received ${I.toFixed(2)} ODX tokens. Transaction: ${A.slice(0,8)}...`),await m()}catch(L){console.error("Investment error:",L);let U="Investment failed: ";throw(w=L.message)!=null&&w.includes("insufficient funds")?U+="Insufficient SOL balance":(N=L.message)!=null&&N.includes("User rejected")?U+="Transaction was rejected by user":(_=L.message)!=null&&_.includes("blockhash")?U+="Transaction expired, please try again":U+=L.message||"Unknown error occurred",new Error(U)}finally{h(!1)}},b=t.solanaPublicKey?{investorPDA:U5(t.solanaPublicKey,x1)[0].toString(),solVaultPDA:JJ(t.solanaPublicKey,x1)[0].toString(),tokenAccount:null}:null;return Z.useEffect(()=>{t.solanaPublicKey&&b&&l4(Lx,t.solanaPublicKey).then(x=>{b.tokenAccount=x.toString()}).catch(console.error)},[t.solanaPublicKey]),{escrowData:e,investorData:r,isLoading:i,hasChecked:a,error:l,isInvesting:d,invest:E,fetchData:m,calculateTokensForSol:x=>f9(x,f),currentSolPrice:f,investorAddresses:b}}const mn=({className:t="",width:e="w-full",height:n="h-4"})=>v.jsx(Ee.div,{className:`bg-gradient-to-r from-bg-hover via-bg-secondary to-bg-hover bg-[length:200%_100%] rounded ${e} ${n} ${t}`,animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}}),YI=({children:t})=>v.jsx("div",{className:"card animate-pulse",children:t}),Ux=()=>v.jsx(YI,{children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx(mn,{width:"w-24",height:"h-3",className:"mb-2"}),v.jsx(mn,{width:"w-16",height:"h-6"})]}),v.jsx(mn,{width:"w-6",height:"h-6",className:"rounded-full"})]})}),XBe=()=>v.jsx(mn,{width:"w-full",height:"h-12",className:"rounded-lg"}),eLe=()=>v.jsxs("div",{className:"space-y-2",children:[v.jsx(mn,{width:"w-32",height:"h-4"}),v.jsx(mn,{width:"w-full",height:"h-10",className:"rounded-lg"}),v.jsx(mn,{width:"w-48",height:"h-3"})]}),p9=()=>v.jsxs(YI,{children:[v.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx(mn,{width:"w-6",height:"h-6",className:"rounded-full"}),v.jsx(mn,{width:"w-48",height:"h-6"})]}),v.jsx(mn,{width:"w-32",height:"h-8",className:"rounded-lg"})]}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[v.jsxs("div",{children:[v.jsx(mn,{width:"w-24",height:"h-4",className:"mb-1"}),v.jsx(mn,{width:"w-full",height:"h-4"})]}),v.jsxs("div",{children:[v.jsx(mn,{width:"w-20",height:"h-4",className:"mb-1"}),v.jsx(mn,{width:"w-32",height:"h-4"})]}),v.jsxs("div",{children:[v.jsx(mn,{width:"w-20",height:"h-4",className:"mb-1"}),v.jsx(mn,{width:"w-24",height:"h-4"})]}),v.jsxs("div",{children:[v.jsx(mn,{width:"w-24",height:"h-4",className:"mb-1"}),v.jsx(mn,{width:"w-20",height:"h-4"})]})]})]}),m9=()=>v.jsxs(YI,{children:[v.jsx(mn,{width:"w-40",height:"h-6",className:"mb-4"}),v.jsxs("div",{className:"space-y-4",children:[v.jsx(eLe,{}),v.jsxs("div",{className:"bg-bg-hover rounded-lg p-3 space-y-2",children:[v.jsxs("div",{className:"flex justify-between",children:[v.jsx(mn,{width:"w-32",height:"h-4"}),v.jsx(mn,{width:"w-16",height:"h-4"})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx(mn,{width:"w-24",height:"h-4"}),v.jsx(mn,{width:"w-20",height:"h-4"})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx(mn,{width:"w-20",height:"h-4"}),v.jsx(mn,{width:"w-18",height:"h-4"})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx(mn,{width:"w-28",height:"h-4"}),v.jsx(mn,{width:"w-18",height:"h-4"})]})]}),v.jsx(XBe,{})]})]}),g9=()=>v.jsxs(YI,{children:[v.jsx(mn,{width:"w-36",height:"h-5",className:"mb-3"}),v.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((t,e)=>v.jsxs("div",{className:"flex justify-between",children:[v.jsx(mn,{width:"w-32",height:"h-4"}),v.jsx(mn,{width:"w-24",height:"h-4"})]},e))})]}),tLe=()=>{const t=Dm(),[e,n]=Z.useState(null),[r,s]=Z.useState(null),[i,o]=Z.useState(!0),[a,c]=Z.useState({}),[l,u]=Z.useState(""),d=async(m,E)=>{try{await navigator.clipboard.writeText(m),c(b=>({...b,[E]:!0})),setTimeout(()=>{c(b=>({...b,[E]:!1}))},2e3)}catch(b){console.error("Failed to copy:",b)}},h=async()=>{if(!(!t.isConnected||!t.address))try{o(!0);const m={totalInvested:t.chain==="bnb"?"0.020000":"0.050000",immediateAmount:t.chain==="bnb"?"0.010000":"0.025000",lockedAmount:t.chain==="bnb"?"0.010000":"0.025000",unlockTime:Math.floor(Date.now()/1e3)+(t.chain==="bnb"?300:180),isUnlocked:!1,timeRemaining:t.chain==="bnb"?300:180},E={totalDeposited:t.chain==="bnb"?"1.250000":"2.500000",totalUnlocked:t.chain==="bnb"?"0.312500":"0.750000",totalLocked:t.chain==="bnb"?"0.312500":"0.500000"};await new Promise(b=>setTimeout(b,800)),n(m),s(E)}catch(m){console.error("Error fetching lock status:",m)}finally{o(!1)}};if(Z.useEffect(()=>{if(!e||e.isUnlocked)return;const m=()=>{if(e.timeRemaining<=0){u("Unlocked");return}const b=Math.floor(e.timeRemaining/(24*60*60)),x=Math.floor(e.timeRemaining%(24*60*60)/(60*60)),w=Math.floor(e.timeRemaining%(60*60)/60),N=e.timeRemaining%60;b>0?u(`${b}d ${x}h ${w}m ${N}s`):x>0?u(`${x}h ${w}m ${N}s`):w>0?u(`${w}m ${N}s`):u(`${N}s`)};m();const E=setInterval(m,1e3);return()=>clearInterval(E)},[e]),Z.useEffect(()=>{if(t.isConnected){h();const m=setInterval(h,3e4);return()=>clearInterval(m)}},[t.isConnected,t.address,t.chain]),!t.isConnected)return null;if(i)return v.jsxs("div",{className:"bg-bg-card rounded-xl border border-border-dark p-6 animate-pulse",children:[v.jsx("div",{className:"h-6 bg-bg-hover rounded mb-4"}),v.jsxs("div",{className:"space-y-3",children:[v.jsx("div",{className:"h-4 bg-bg-hover rounded w-3/4"}),v.jsx("div",{className:"h-4 bg-bg-hover rounded w-1/2"}),v.jsx("div",{className:"h-4 bg-bg-hover rounded w-2/3"})]})]});if(!e&&!r)return null;const f=m=>parseFloat(m).toFixed(6),p=()=>{if(!e||e.isUnlocked)return 100;const m=e.unlockTime-(e.unlockTime-e.timeRemaining),E=m-e.timeRemaining;return Math.max(0,Math.min(100,E/m*100))};return v.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[r&&v.jsxs("div",{className:"bg-bg-card rounded-xl border border-border-dark p-6",children:[v.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[v.jsx(Ov,{className:"mr-2",size:20}),"Global Lock Status"]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[v.jsx("div",{className:"bg-bg-hover rounded-lg p-4",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-text-muted text-sm",children:"Total Deposited"}),v.jsxs("p",{className:"text-xl font-semibold text-text-primary",children:[f(r.totalDeposited)," BNB"]})]}),v.jsx("button",{onClick:()=>d(r.totalDeposited,"totalDeposited"),className:"p-2 hover:bg-bg-secondary rounded-lg transition-colors",title:"Copy value",children:a.totalDeposited?v.jsx(Nf,{size:16,className:"text-accent-green"}):v.jsx(Tf,{size:16,className:"text-text-muted"})})]})}),v.jsx("div",{className:"bg-bg-hover rounded-lg p-4",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-text-muted text-sm",children:"Currently Locked"}),v.jsxs("p",{className:"text-xl font-semibold text-orange-400",children:[f(r.totalLocked)," BNB"]})]}),v.jsx("button",{onClick:()=>d(r.totalLocked,"totalLocked"),className:"p-2 hover:bg-bg-secondary rounded-lg transition-colors",title:"Copy value",children:a.totalLocked?v.jsx(Nf,{size:16,className:"text-accent-green"}):v.jsx(Tf,{size:16,className:"text-text-muted"})})]})}),v.jsx("div",{className:"bg-bg-hover rounded-lg p-4",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-text-muted text-sm",children:"Total Unlocked"}),v.jsxs("p",{className:"text-xl font-semibold text-accent-green",children:[f(r.totalUnlocked)," BNB"]})]}),v.jsx("button",{onClick:()=>d(r.totalUnlocked,"totalUnlocked"),className:"p-2 hover:bg-bg-secondary rounded-lg transition-colors",title:"Copy value",children:a.totalUnlocked?v.jsx(Nf,{size:16,className:"text-accent-green"}):v.jsx(Tf,{size:16,className:"text-text-muted"})})]})})]})]}),e&&parseFloat(e.totalInvested)>0&&v.jsxs("div",{className:"bg-bg-card rounded-xl border border-border-dark p-6",children:[v.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.isUnlocked?v.jsx(BU,{className:"mr-2 text-accent-green",size:20}):v.jsx(Ov,{className:"mr-2 text-orange-400",size:20}),"Your Investment Status"]}),v.jsxs("div",{className:"mb-6",children:[v.jsxs("div",{className:"flex justify-between text-sm text-text-muted mb-2",children:[v.jsx("span",{children:"Lock Progress"}),v.jsxs("span",{children:[Math.round(p()),"%"]})]}),v.jsx("div",{className:"w-full bg-bg-hover rounded-full h-3",children:v.jsx(Ee.div,{className:"bg-gradient-to-r from-orange-400 to-accent-green rounded-full h-3",initial:{width:0},animate:{width:`${p()}%`},transition:{duration:1,ease:"easeOut"}})})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[v.jsxs("div",{className:"space-y-4",children:[v.jsx("div",{className:"bg-accent-green/10 rounded-lg p-4 border border-accent-green/20",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-accent-green text-sm font-medium",children:"Available Now (50%)"}),v.jsxs("p",{className:"text-xl font-semibold text-accent-green",children:[f(e.immediateAmount)," BNB"]})]}),v.jsx("button",{onClick:()=>d(e.immediateAmount,"immediate"),className:"p-2 hover:bg-accent-green/20 rounded-lg transition-colors",title:"Copy value",children:a.immediate?v.jsx(Nf,{size:16,className:"text-accent-green"}):v.jsx(Tf,{size:16,className:"text-accent-green"})})]})}),v.jsx("div",{className:`rounded-lg p-4 border ${e.isUnlocked?"bg-accent-green/10 border-accent-green/20":"bg-orange-400/10 border-orange-400/20"}`,children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:`text-sm font-medium ${e.isUnlocked?"text-accent-green":"text-orange-400"}`,children:e.isUnlocked?"Unlocked (50%)":"Locked (50%)"}),v.jsxs("p",{className:`text-xl font-semibold ${e.isUnlocked?"text-accent-green":"text-orange-400"}`,children:[f(e.lockedAmount)," BNB"]})]}),v.jsx("button",{onClick:()=>d(e.lockedAmount,"locked"),className:`p-2 rounded-lg transition-colors ${e.isUnlocked?"hover:bg-accent-green/20":"hover:bg-orange-400/20"}`,title:"Copy value",children:a.locked?v.jsx(Nf,{size:16,className:e.isUnlocked?"text-accent-green":"text-orange-400"}):v.jsx(Tf,{size:16,className:e.isUnlocked?"text-accent-green":"text-orange-400"})})]})})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsx("div",{className:"bg-bg-hover rounded-lg p-4",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-text-muted text-sm",children:"Total Invested"}),v.jsxs("p",{className:"text-xl font-semibold text-text-primary",children:[f(e.totalInvested)," BNB"]})]}),v.jsx("button",{onClick:()=>d(e.totalInvested,"total"),className:"p-2 hover:bg-bg-secondary rounded-lg transition-colors",title:"Copy value",children:a.total?v.jsx(Nf,{size:16,className:"text-accent-green"}):v.jsx(Tf,{size:16,className:"text-text-muted"})})]})}),!e.isUnlocked&&v.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx(i0,{className:"mr-2 text-blue-400",size:16}),v.jsxs("div",{className:"flex-1",children:[v.jsx("p",{className:"text-blue-300 text-sm font-medium",children:"Time Until Unlock"}),v.jsx("p",{className:"text-lg font-mono text-blue-200",children:l})]})]}),v.jsxs("p",{className:"text-xs text-blue-400 mt-2",children:["Unlocks: ",new Date(e.unlockTime*1e3).toLocaleString()]})]}),e.isUnlocked&&v.jsx("div",{className:"bg-accent-green/10 border border-accent-green/20 rounded-lg p-4",children:v.jsxs("div",{className:"flex items-center",children:[v.jsx(BU,{className:"mr-2 text-accent-green",size:16}),v.jsxs("div",{children:[v.jsx("p",{className:"text-accent-green text-sm font-medium",children:"Fully Unlocked!"}),v.jsx("p",{className:"text-xs text-accent-green/80",children:"Ready for withdrawal"})]})]})})]})]}),v.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:[v.jsx("h4",{className:"text-blue-300 font-medium mb-2",children:"🔍 Transparency Note"}),v.jsx("p",{className:"text-blue-200 text-sm",children:"All values are read directly from the blockchain. Use the copy buttons to verify these amounts independently on BSCScan or through direct contract calls."})]})]})]})},nLe=()=>{const[t,e]=Z.useState(!1),[n,r]=Z.useState(null),s=Dm(),i={whale:{name:"🐋 Whale Investor",address:"0x742d35Cc6bF27F4Ce8B1D4F8E5B5B8B5D8B5D8B5",invested:"50.0 BNB",tokens:"150,000 ODX",status:"Active",unlockDate:"2025-01-25",color:"from-purple-500 to-blue-500"},regular:{name:"👨‍💼 Regular Investor",address:"0x1234567890123456789012345678901234567890",invested:"2.5 BNB",tokens:"7,500 ODX",status:"Locked",unlockDate:"2025-01-20",color:"from-green-500 to-blue-500"},small:{name:"🧑‍🎓 Small Investor",address:"0xabcdefabcdefabcdefabcdefabcdefabcdefabcd",invested:"0.1 BNB",tokens:"300 ODX",status:"Unlocked",unlockDate:"2025-01-15",color:"from-orange-500 to-yellow-500"}},o=c=>{r(c),e(!0),console.log(`Switched to demo investor: ${i[c].name}`)},a=()=>{e(!1),r(null),console.log("Exited read-only mode")};return s.isConnected?v.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-900/20 to-purple-900/20 border border-blue-500/30 rounded-xl p-6 mb-6",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx(wEe,{className:"text-blue-400",size:24}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-blue-300 font-semibold",children:"Demo Mode"}),v.jsx("p",{className:"text-blue-200 text-sm",children:t?"Read-only view active":"Test with different investor profiles"})]})]}),t&&v.jsxs("button",{onClick:a,className:"flex items-center space-x-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm transition-colors",children:[v.jsx(mEe,{size:16}),v.jsx("span",{children:"Exit Demo"})]})]}),t?v.jsxs("div",{className:"space-y-4",children:[n&&v.jsx("div",{className:`bg-gradient-to-r ${i[n].color} p-4 rounded-lg text-white`,children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("h4",{className:"font-semibold text-lg",children:i[n].name}),v.jsxs("p",{className:"text-sm opacity-90",children:["Address: ",i[n].address.slice(0,10),"...",i[n].address.slice(-8)]})]}),v.jsxs("div",{className:"text-right",children:[v.jsx("p",{className:"font-semibold",children:i[n].invested}),v.jsx("p",{className:"text-sm opacity-90",children:i[n].tokens})]})]})}),v.jsx("div",{className:"bg-blue-900/30 border border-blue-500/30 rounded-lg p-4",children:v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(DU,{className:"text-blue-400",size:16}),v.jsx("span",{className:"text-blue-200 text-sm",children:"You're viewing demo data. All values and interactions are simulated."})]})})]}):v.jsxs("div",{className:"space-y-3",children:[v.jsx("p",{className:"text-blue-200 text-sm mb-4",children:"Preview how the dashboard looks for different types of investors:"}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:Object.entries(i).map(([c,l])=>v.jsxs(Ee.button,{onClick:()=>o(c),className:`bg-gradient-to-r ${l.color} p-4 rounded-lg text-white hover:opacity-90 transition-opacity relative overflow-hidden`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[v.jsxs("div",{className:"relative z-10",children:[v.jsx("h4",{className:"font-semibold mb-2",children:l.name}),v.jsxs("div",{className:"text-sm opacity-90 space-y-1",children:[v.jsxs("p",{children:["Invested: ",l.invested]}),v.jsxs("p",{children:["Tokens: ",l.tokens]}),v.jsxs("p",{children:["Status: ",l.status]})]}),v.jsxs("div",{className:"flex items-center justify-center mt-3 space-x-1",children:[v.jsx(DU,{size:16}),v.jsx("span",{className:"text-sm",children:"Preview"})]})]}),v.jsx("div",{className:"absolute inset-0 bg-white opacity-10"})]},c))})]})]}):null},rLe=()=>{var y,g,A,I,T,R,B,O,S,z;const t=Dm(),[e,n]=Z.useState(null),[r,s]=Z.useState(null),[i,o]=Z.useState(!1),[a,c]=Z.useState(null),[l,u]=Z.useState(""),[d,h]=Z.useState(!1),[f,p]=Z.useState(""),[m,E]=Z.useState(580),[b,x]=Z.useState(!1),[w,N]=Z.useState("bnb"),_=JBe(),L=typeof navigator<"u"&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1,U=()=>L?{willChange:"auto",transform:"translate3d(0, 0, 0)",backfaceVisibility:"hidden",isolation:"isolate"}:{willChange:"transform, opacity",transform:"translateZ(0)",backfaceVisibility:"hidden",perspective:"1000px"},F=Y=>L?{delay:Y,duration:.2,ease:"easeOut",type:"tween"}:{delay:Y,duration:.25,ease:"easeOut"};Z.useEffect(()=>{if(t.isConnected&&t.chain==="bnb"){o(!1);const Y=setTimeout(()=>{M();const J=setInterval(()=>{var ae;t.chain==="bnb"&&((ae=t.address)!=null&&ae.startsWith("0x"))&&M()},5e3);return()=>clearInterval(J)},t.chain==="bnb"?1e3:0);return()=>clearTimeout(Y)}},[t.isConnected,t.address,t.chain,t.reownAddress]),Z.useEffect(()=>{if(e&&e.depositTimestamp>0&&!e.isUnlocked){const Y=setInterval(()=>{const J=Date.now()/1e3,pe=e.depositTimestamp+5*60-J;if(pe<=0)p("Unlocked!"),M();else{const ve=Math.floor(pe/60),de=Math.floor(pe%60);p(`${ve}:${de.toString().padStart(2,"0")}`)}},1e3);return()=>clearInterval(Y)}},[e]),Z.useEffect(()=>{if(t.chain==="bnb"){Jk().then(E).catch(console.error);const Y=setInterval(()=>{t.chain==="bnb"&&Jk().then(E).catch(console.error)},3e4);return()=>clearInterval(Y)}},[t.chain]);const M=async()=>{var Y,J,ae;if(!(!t.address||t.chain!=="bnb")){if(t.chain==="bnb"&&(!t.address.startsWith("0x")||t.address.length!==42)){console.log("⏳ Waiting for proper BNB address, current address:",t.address);return}if(t.chain==="bnb"&&!t.reownAddress){console.log("⏳ Waiting for Reown connection to be established");return}try{c(null),console.log("📊 Fetching BNB data for address:",t.address);const pe=await Jk();E(pe);const ve=new c5(Ld.bnb.rpcUrl,{name:"BSC Testnet",chainId:97}),de=new Fu(Os.bnb.escrow,kL,ve),$e=await de.getEscrowStatus();s({isInitialized:$e.isInitialized,totalTokensAvailable:Ga($e.totalTokensAvailable||0),tokensSold:Ga($e.tokensSold||0),totalBnbDeposited:Ga($e.totalBnbDeposited||0),totalBnbWithdrawn:Ga($e.totalBnbWithdrawn||0),lockDuration:Number($e.lockDuration||0)});const Te=await de.getInvestorInfo(t.address),dt=await de.isUnlockTime(t.address);n({isInitialized:Te.isInitialized,bnbDeposited:Ga(Te.bnbDeposited||0),tokensReceived:Ga(Te.tokensReceived||0),depositTimestamp:Number(Te.depositTimestamp||0),bnbUsdPrice:Ga(Te.bnbUsdPrice||Te.firstDepositPrice||0),firstDepositPrice:Ga(Te.firstDepositPrice||0),weightedAveragePrice:Ga(Te.weightedAveragePrice||0),status:Number(Te.status||0),lockedBnbAmount:Ga(Te.lockedBnbAmount||0),isUnlocked:dt})}catch(pe){if(console.error("Error fetching data:",pe),(Y=pe.message)!=null&&Y.includes("network does not support ENS")){console.log("🔄 ENS error during network switch, likely due to provider mismatch. This should resolve shortly.");return}if((J=pe.message)!=null&&J.includes("invalid address")||(ae=pe.message)!=null&&ae.includes("bad address checksum")){console.log("⏳ Address validation error, waiting for proper network address");return}c(pe.message||"Failed to fetch data")}finally{o(!0)}}},W=async()=>{if(!t.address||!l||parseFloat(l)<.001)return;const Y=async(J=1)=>{var ae,pe,ve,de,$e,Te,dt;try{h(!0),c(null),J>1&&console.log(`🔄 Retry attempt ${J}...`);const vt=await t.getSigner();if(!vt)throw new Error("Unable to get signer");const rt=new Fu(Os.bnb.escrow,kL,vt);if(!(await rt.getEscrowStatus()).isInitialized)throw new Error("Escrow contract is not initialized. Contact support.");if(await rt.emergencyStop())throw new Error("Contract is currently paused. Investments are temporarily disabled.");try{console.log("💱 Testing price feed through contract...");const _r=await rt.getChainlinkPrice();console.log("💱 BNB price from contract:",AI(_r.price,8),"USD"),console.log("⏰ Price timestamp:",new Date(Number(_r.timestamp)*1e3).toISOString())}catch(_r){if(console.error("❌ Contract price feed error:",_r),_r.data==="0x6234216d"||((ae=_r.transaction)==null?void 0:ae.data)==="0x6234216d"){if(J<3)return console.log(`⏳ Contract price data stale, retrying in 3 seconds... (attempt ${J+1}/3)`),c(`Price data stale, retrying... (${J+1}/3)`),await new Promise(gn=>setTimeout(gn,3e3)),Y(J+1);throw new Error("Price data is consistently stale. Please try again later.")}else throw new Error("Price feed is not working. Unable to calculate token amount.")}const Vt=ZU(l),Dn=ZU("0.001");if(Vt<Dn)throw new Error("Minimum investment is 0.001 BNB");console.log("💰 Investment details:",{amount:l+" BNB",amountWei:Vt.toString(),investor:t.address,contractAddress:Os.bnb.escrow,networkChainId:await((pe=vt.provider)==null?void 0:pe.getNetwork())}),console.log("💡 Skipping static call due to price staleness issues, attempting direct transaction...");let aa=4e5;try{console.log("⛽ Estimating gas...");const _r=await rt.depositBnb.estimateGas({value:Vt});aa=Math.floor(Number(_r)*1.2),console.log("⛽ Gas estimate:",_r.toString(),"-> using:",aa)}catch(_r){if(console.log("⚠️ Gas estimation failed, using default limit:",aa),(_r.data||((ve=_r.transaction)==null?void 0:ve.data))==="0x6234216d"){if(J<3)return console.log(`⏳ Gas estimation failed due to stale price, retrying in 3 seconds... (attempt ${J+1}/3)`),c(`Price data stale, retrying... (${J+1}/3)`),await new Promise(hn=>setTimeout(hn,3e3)),Y(J+1);throw new Error("Price data is consistently stale. Please try again later.")}}console.log("📤 Sending investment transaction...");const dn=await rt.depositBnb({value:Vt,gasLimit:aa});console.log("✅ Investment transaction sent:",dn.hash),console.log("⏳ Waiting for confirmation...");const Cn=await dn.wait();console.log("🎉 Investment confirmed! Block:",Cn.blockNumber),u(""),M()}catch(vt){console.error("❌ Investment error:",vt);let rt="Investment failed";(de=vt.message)!=null&&de.includes("execution reverted")?vt.data==="0x355e186c"?rt="Investment amount is below minimum (0.001 BNB)":vt.data==="0x6234216d"?rt="Price data is stale. Please try again in a few seconds.":vt.reason?rt=`Contract rejected transaction: ${vt.reason}`:rt="Transaction was rejected by the contract. Please check investment amount and try again.":($e=vt.message)!=null&&$e.includes("insufficient funds")?rt="Insufficient BNB balance for this investment":(Te=vt.message)!=null&&Te.includes("user rejected")?rt="Transaction was rejected by user":(dt=vt.message)!=null&&dt.includes("gas")?rt="Gas estimation failed. Please try a smaller amount.":vt.message&&(rt=vt.message),c(rt)}finally{h(!1)}};try{await Y()}catch{}},H=Y=>{N(Y),x(!0)},K=()=>{t.switchChain(w),x(!1)},P=()=>{x(!1)};return t.chain==="solana"?v.jsx("div",{className:"relative max-w-6xl mx-auto px-4 sm:px-6",children:v.jsxs("div",{className:"space-y-6",children:[v.jsx(Rv,{children:(a||_.error)&&v.jsxs(Ee.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2,ease:"easeOut"},style:U(),className:`px-4 py-3 rounded-lg flex items-center justify-between ${(y=a||_.error)!=null&&y.includes("✅")?"bg-accent-green/20 border border-accent-green/30 text-accent-green":"bg-error/20 border border-error/30 text-error"}`,children:[v.jsx("span",{children:a||_.error}),v.jsx("button",{onClick:()=>{c(null)},className:`hover:opacity-70 ${(g=a||_.error)!=null&&g.includes("✅")?"text-accent-green":"text-error"}`,children:"×"})]})}),_.hasChecked?v.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:[v.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx(p_,{size:36}),v.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-text-primary",children:"Solana Escrow Active"})]}),v.jsxs(Ee.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>H("bnb"),className:"px-3 py-1.5 bg-gradient-to-r from-yellow-500 to-orange-500 text-white text-sm font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center justify-center space-x-1 w-full sm:w-auto",children:[v.jsx(m_,{size:24}),v.jsx("span",{children:"Switch to BNB"})]})]}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-text-muted mb-1",children:"Program ID:"}),v.jsx("p",{className:"text-text-primary font-mono text-xs break-all",children:Os.solana.programId})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-text-muted mb-1",children:"Token Supply:"}),v.jsx("p",{className:"text-text-primary",children:"1,000 ODX (9 decimals)"})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-text-muted mb-1",children:"Token Price:"}),v.jsx("p",{className:"text-text-primary",children:"$0.10 USD"})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-text-muted mb-1",children:"Lock Duration:"}),v.jsx("p",{className:"text-text-primary",children:"5 minutes"})]})]})]}):v.jsx(p9,{}),v.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[_.hasChecked?v.jsxs(Ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"card",children:[v.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"Make Investment"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-text-muted text-sm mb-2",children:"Investment Amount (SOL)"}),v.jsx("input",{type:"number",value:l,onChange:Y=>u(Y.target.value),placeholder:"0.001",min:"0.001",max:"10",step:"0.001",className:"input",disabled:!t.isConnected}),v.jsxs("p",{className:"text-text-muted text-xs mt-1",children:["Min: 0.001 SOL | Max: 10 SOL | Current SOL: $",_.currentSolPrice.toFixed(0)]})]}),l&&parseFloat(l)>=.001&&v.jsxs(Ee.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-bg-hover rounded-lg p-3 space-y-2 text-sm",children:[v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-text-muted",children:"Investment Amount:"}),v.jsxs("span",{className:"text-text-primary",children:[l," SOL"]})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-text-muted",children:"Tokens to Receive:"}),v.jsxs("span",{className:"text-text-primary",children:[_.calculateTokensForSol(parseFloat(l)).toFixed(2)," ODX"]})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-text-muted",children:"To Project (50%):"}),v.jsxs("span",{className:"text-text-primary",children:[(parseFloat(l)/2).toFixed(4)," SOL"]})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-text-muted",children:"Time-locked (50%):"}),v.jsxs("span",{className:"text-text-primary",children:[(parseFloat(l)/2).toFixed(4)," SOL"]})]})]}),v.jsxs(Ee.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:async()=>{if(!(!l||parseFloat(l)<.001))try{await _.invest(parseFloat(l)),u("")}catch(Y){c(Y.message)}},disabled:!t.isConnected||!l||parseFloat(l)<.001||_.isInvesting,className:"btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[_.isInvesting?v.jsx(P3,{size:16,className:"animate-spin"}):v.jsx(JT,{size:16}),v.jsx("span",{children:_.isInvesting?"Investing...":`Invest ${l||"0"} SOL`})]})]})]}):v.jsx(m9,{}),_.hasChecked?v.jsxs(Ee.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:"space-y-4",children:[v.jsxs("div",{className:"card",children:[v.jsx("h4",{className:"text-lg font-semibold text-text-primary mb-3",children:"Escrow Statistics"}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-text-muted",children:"Available Tokens:"}),v.jsxs("span",{className:"text-text-primary",children:[((A=_.escrowData)==null?void 0:A.totalTokensAvailable)||1e3," ODX"]})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-text-muted",children:"Tokens Sold:"}),v.jsxs("span",{className:"text-text-primary",children:[((I=_.escrowData)==null?void 0:I.tokensSold)||0," ODX"]})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-text-muted",children:"Total SOL Deposited:"}),v.jsxs("span",{className:"text-text-primary",children:[((T=_.escrowData)==null?void 0:T.totalSolDeposited)||0," SOL"]})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-text-muted",children:"Token Price:"}),v.jsx("span",{className:"text-text-primary",children:"$0.10 USD"})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-text-muted",children:"Lock Duration:"}),v.jsxs("span",{className:"text-text-primary",children:[((R=_.escrowData)==null?void 0:R.lockDuration)||300," seconds"]})]})]})]}),v.jsxs("div",{className:"card",children:[v.jsx("h4",{className:"text-lg font-semibold text-text-primary mb-3",children:"Contract Links"}),v.jsxs("div",{className:"space-y-2",children:[v.jsxs(Ee.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>window.open(`https://explorer.solana.com/address/${Os.solana.programId}?cluster=devnet`,"_blank"),className:"w-full text-left p-2 bg-bg-hover border border-border-dark rounded-lg hover:border-accent-green/50 transition-all duration-200 flex items-center justify-between",children:[v.jsx("span",{className:"text-text-primary text-sm",children:"View Program"}),v.jsx(Ni,{size:16,className:"text-text-muted"})]}),v.jsxs(Ee.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>window.open(`https://explorer.solana.com/address/${Os.solana.globalEscrow}?cluster=devnet`,"_blank"),className:"w-full text-left p-2 bg-bg-hover border border-border-dark rounded-lg hover:border-accent-green/50 transition-all duration-200 flex items-center justify-between",children:[v.jsx("span",{className:"text-text-primary text-sm",children:"View Escrow"}),v.jsx(Ni,{size:16,className:"text-text-muted"})]}),v.jsxs(Ee.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>window.open(`https://explorer.solana.com/address/${Os.solana.tokenMint}?cluster=devnet`,"_blank"),className:"w-full text-left p-2 bg-bg-hover border border-border-dark rounded-lg hover:border-accent-green/50 transition-all duration-200 flex items-center justify-between",children:[v.jsx("span",{className:"text-text-primary text-sm",children:"View Token"}),v.jsx(Ni,{size:16,className:"text-text-muted"})]})]})]})]}):v.jsx(g9,{})]}),t.isConnected&&_.hasChecked&&!((B=_.investorData)!=null&&B.isInitialized)&&v.jsx("div",{className:"card mt-6",children:v.jsxs("div",{className:"text-center py-6",children:[v.jsx(Og,{className:"text-text-muted mx-auto mb-4",size:48}),v.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"No Investment Found"}),v.jsx("p",{className:"text-text-muted",children:"This wallet hasn't made any investments yet. Make your first investment to see your statistics here."}),v.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Wallet: ",t.address]})]})}),((O=_.investorData)==null?void 0:O.isInitialized)&&v.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4 mt-6",children:_.hasChecked?v.jsxs(v.Fragment,{children:[v.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-text-muted text-sm",children:"Total Invested"}),v.jsxs("p",{className:"text-xl font-semibold text-text-primary",children:[(_.investorData.solDeposited/1e9).toFixed(4)," SOL"]})]}),v.jsx(JT,{className:"text-accent-green",size:24})]})}),v.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-text-muted text-sm",children:"Tokens Received"}),v.jsxs("p",{className:"text-xl font-semibold text-text-primary",children:[(_.investorData.tokensReceived/1e9).toFixed(2)," ODX"]})]}),v.jsx(Og,{className:"text-accent-green",size:24})]})}),v.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-text-muted text-sm",children:"Locked Amount"}),v.jsxs("p",{className:"text-xl font-semibold text-text-primary",children:[(_.investorData.lockedSolAmount/1e9).toFixed(4)," SOL"]})]}),v.jsx(Ov,{className:"text-warning",size:24})]})}),v.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-text-muted text-sm",children:"Unlock Status"}),v.jsx("p",{className:`text-xl font-semibold ${_.investorData.isUnlocked?"text-success":"text-warning"}`,children:_.investorData.isUnlocked?"Unlocked":"Locked"})]}),_.investorData.isUnlocked?v.jsx(s0,{className:"text-success",size:24}):v.jsx(i0,{className:"text-warning",size:24})]})})]}):v.jsxs(v.Fragment,{children:[v.jsx(Ux,{}),v.jsx(Ux,{}),v.jsx(Ux,{}),v.jsx(Ux,{})]})}),((S=_.investorData)==null?void 0:S.isInitialized)&&v.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card mt-6",children:[v.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"Your Investment Statistics"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"bg-bg-hover rounded-lg p-4 space-y-3",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-text-muted",children:"Total Sent by You:"}),v.jsxs("span",{className:"text-text-primary font-semibold",children:[(_.investorData.solDeposited/1e9).toFixed(4)," SOL"]})]}),v.jsxs("div",{className:"border-l-2 border-accent-green pl-4 space-y-2",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-text-muted text-sm",children:"→ To Project (50%):"}),v.jsxs("span",{className:"text-accent-green font-medium",children:[(_.investorData.solDeposited/1e9/2).toFixed(4)," SOL"]})]}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-text-muted text-sm",children:"→ Time-locked (50%):"}),v.jsxs("span",{className:"text-warning font-medium",children:[(_.investorData.solDeposited/1e9/2).toFixed(4)," SOL"]})]})]})]}),v.jsxs("div",{className:"bg-bg-hover rounded-lg p-4",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-text-muted",children:"Tokens Received:"}),v.jsxs("span",{className:"text-text-primary font-semibold",children:[(_.investorData.tokensReceived/1e9).toFixed(2)," ODX"]})]}),v.jsx("div",{className:"text-text-muted text-xs mt-1",children:"At $0.10 USD fixed price"})]}),v.jsxs("div",{className:"bg-bg-hover rounded-lg p-4",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("span",{className:"text-text-muted",children:"Currently Locked:"}),v.jsxs("span",{className:"text-warning font-semibold",children:[(_.investorData.lockedSolAmount/1e9).toFixed(4)," SOL"]})]}),v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("span",{className:"text-text-muted",children:"Already Released:"}),v.jsxs("span",{className:"text-success font-semibold",children:[(_.investorData.solDeposited/1e9/2-_.investorData.lockedSolAmount/1e9).toFixed(4)," SOL"]})]}),v.jsx("div",{className:"flex items-center space-x-2 mt-3",children:_.investorData.isUnlocked?v.jsxs(v.Fragment,{children:[v.jsx(s0,{className:"text-success",size:16}),v.jsx("span",{className:"text-success text-sm",children:"Funds unlocked - awaiting project withdrawal"})]}):v.jsxs(v.Fragment,{children:[v.jsx(i0,{className:"text-warning",size:16}),v.jsxs("span",{className:"text-warning text-sm",children:["Locked for ",((z=_.escrowData)==null?void 0:z.lockDuration)||300," seconds"]})]})})]}),v.jsx("div",{className:"bg-bg-hover rounded-lg p-4",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-text-muted",children:"Investment Date:"}),v.jsxs("span",{className:"text-text-primary",children:[new Date(_.investorData.depositTimestamp*1e3).toLocaleDateString()," ",new Date(_.investorData.depositTimestamp*1e3).toLocaleTimeString()]})]})})]})]}),v.jsx(nLe,{}),v.jsx(tLe,{}),t.isConnected&&_.investorAddresses&&v.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card mt-6",children:[v.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"Your Investment Addresses"}),v.jsx("p",{className:"text-text-muted text-sm mb-4",children:"These are the blockchain addresses where your investment data and funds are stored. You can verify them on Solscan or other Solana explorers."}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"bg-bg-hover rounded-lg p-4",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("span",{className:"text-text-muted text-sm font-medium",children:"Investment Data Account (PDA)"}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsxs(Ee.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{var Y;return window.open(`https://solscan.io/account/${(Y=_.investorAddresses)==null?void 0:Y.investorPDA}?cluster=devnet`,"_blank")},className:"text-accent-green hover:text-accent-green/80 text-xs flex items-center space-x-1",children:[v.jsx("span",{children:"Solscan"}),v.jsx(Ni,{size:10})]}),v.jsx("span",{className:"text-text-muted",children:"|"}),v.jsxs(Ee.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{var Y;return window.open(`https://solana.fm/address/${(Y=_.investorAddresses)==null?void 0:Y.investorPDA}?cluster=devnet-solana`,"_blank")},className:"text-accent-green hover:text-accent-green/80 text-xs flex items-center space-x-1",children:[v.jsx("span",{children:"SolanaFM"}),v.jsx(Ni,{size:10})]})]})]}),v.jsx("p",{className:"font-mono text-xs text-text-primary break-all bg-bg-secondary p-2 rounded",children:_.investorAddresses.investorPDA}),v.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Contains your investment history, token balance, and lock status"})]}),v.jsxs("div",{className:"bg-bg-hover rounded-lg p-4",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("span",{className:"text-text-muted text-sm font-medium",children:"Locked SOL Vault (PDA)"}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsxs(Ee.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{var Y;return window.open(`https://solscan.io/account/${(Y=_.investorAddresses)==null?void 0:Y.solVaultPDA}?cluster=devnet`,"_blank")},className:"text-accent-green hover:text-accent-green/80 text-xs flex items-center space-x-1",children:[v.jsx("span",{children:"Solscan"}),v.jsx(Ni,{size:10})]}),v.jsx("span",{className:"text-text-muted",children:"|"}),v.jsxs(Ee.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{var Y;return window.open(`https://solana.fm/address/${(Y=_.investorAddresses)==null?void 0:Y.solVaultPDA}?cluster=devnet-solana`,"_blank")},className:"text-accent-green hover:text-accent-green/80 text-xs flex items-center space-x-1",children:[v.jsx("span",{children:"SolanaFM"}),v.jsx(Ni,{size:10})]})]})]}),v.jsx("p",{className:"font-mono text-xs text-text-primary break-all bg-bg-secondary p-2 rounded",children:_.investorAddresses.solVaultPDA}),v.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Holds your time-locked SOL (50% of investment) until unlock time"})]}),_.investorAddresses.tokenAccount&&v.jsxs("div",{className:"bg-bg-hover rounded-lg p-4",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("span",{className:"text-text-muted text-sm font-medium",children:"ODX Token Account (ATA)"}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsxs(Ee.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{var Y;return window.open(`https://solscan.io/account/${(Y=_.investorAddresses)==null?void 0:Y.tokenAccount}?cluster=devnet`,"_blank")},className:"text-accent-green hover:text-accent-green/80 text-xs flex items-center space-x-1",children:[v.jsx("span",{children:"Solscan"}),v.jsx(Ni,{size:10})]}),v.jsx("span",{className:"text-text-muted",children:"|"}),v.jsxs(Ee.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{var Y;return window.open(`https://solana.fm/address/${(Y=_.investorAddresses)==null?void 0:Y.tokenAccount}?cluster=devnet-solana`,"_blank")},className:"text-accent-green hover:text-accent-green/80 text-xs flex items-center space-x-1",children:[v.jsx("span",{children:"SolanaFM"}),v.jsx(Ni,{size:10})]})]})]}),v.jsx("p",{className:"font-mono text-xs text-text-primary break-all bg-bg-secondary p-2 rounded",children:_.investorAddresses.tokenAccount}),v.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Your ODX token balance (received immediately upon investment)"})]}),v.jsx("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-3",children:v.jsxs("p",{className:"text-blue-300 text-xs",children:["💡 ",v.jsx("strong",{children:"Pro tip:"})," These addresses are derived deterministically from your wallet address. You can always reconstruct them and verify your funds independently."]})})]})]}),v.jsx(O3,{isOpen:b,onClose:P,onConfirm:K,currentChain:t.chain,targetChain:w})]})}):v.jsxs("div",{className:"relative max-w-6xl mx-auto px-4 sm:px-6 space-y-6",children:[v.jsx(Rv,{children:a&&v.jsxs(Ee.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2,ease:"easeOut"},className:"bg-error/20 border border-error/30 text-error px-4 py-3 rounded-lg flex items-center justify-between",style:U(),children:[v.jsx("span",{children:a}),v.jsx("button",{onClick:()=>c(null),className:"text-error hover:text-error/70",children:"×"})]})}),i?v.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:[v.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx(m_,{size:36}),v.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-text-primary",children:"BNB Chain Escrow Active"})]}),v.jsxs(Ee.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>H("solana"),className:"px-3 py-1.5 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-sm font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center justify-center space-x-1 w-full sm:w-auto",children:[v.jsx(p_,{size:24}),v.jsx("span",{children:"Switch to Solana"})]})]}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-text-muted mb-1",children:"Escrow Contract:"}),v.jsx("p",{className:"text-text-primary font-mono text-xs break-all",children:Os.bnb.escrow})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-text-muted mb-1",children:"Token Supply:"}),v.jsx("p",{className:"text-text-primary",children:"1,000 ODX (18 decimals)"})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-text-muted mb-1",children:"Token Price:"}),v.jsx("p",{className:"text-text-primary",children:"$0.10 USD"})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-text-muted mb-1",children:"Lock Duration:"}),v.jsx("p",{className:"text-text-primary",children:"5 minutes"})]})]})]}):v.jsx(p9,{}),v.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[i?v.jsxs(Ee.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:F(.1),className:"card",style:U(),children:[v.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"Make Investment"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-text-muted text-sm mb-2",children:"Investment Amount (BNB)"}),v.jsx("input",{type:"number",value:l,onChange:Y=>u(Y.target.value),placeholder:"0.001",min:"0.001",max:"10",step:"0.001",className:"input",disabled:d}),v.jsxs("p",{className:"text-text-muted text-xs mt-1",children:["Min: 0.001 BNB | Max: 10 BNB | Current BNB: $",m.toFixed(0)]})]}),l&&parseFloat(l)>=.001&&v.jsxs(Ee.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.2,ease:"easeOut"},className:"bg-bg-hover rounded-lg p-3 space-y-2 text-sm",style:{willChange:"height, opacity",overflow:"hidden"},children:[v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-text-muted",children:"Investment Amount:"}),v.jsxs("span",{className:"text-text-primary",children:[l," BNB"]})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-text-muted",children:"Tokens (Est.):"}),v.jsxs("span",{className:"text-text-primary",children:[GBe(parseFloat(l),m).toFixed(2)," ODX"]})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-text-muted",children:"To Project:"}),v.jsxs("span",{className:"text-accent-green",children:[(parseFloat(l)/2).toFixed(4)," BNB"]})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-text-muted",children:"Time-locked:"}),v.jsxs("span",{className:"text-warning",children:[(parseFloat(l)/2).toFixed(4)," BNB"]})]})]}),v.jsxs(Ee.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:W,disabled:d||!l||parseFloat(l)<.001,className:"btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[d?v.jsx(P3,{size:16,className:"animate-spin"}):v.jsx(R3,{size:16}),v.jsx("span",{children:d?"Investing...":`Invest ${l||"0"} BNB`})]})]})]}):v.jsx(m9,{}),i?v.jsxs(Ee.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:F(.2),className:"space-y-4",children:[v.jsxs("div",{className:"card",children:[v.jsx("h4",{className:"text-lg font-semibold text-text-primary mb-3",children:"Escrow Statistics"}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-text-muted",children:"Available Tokens:"}),v.jsxs("span",{className:"text-text-primary",children:[r!=null&&r.totalTokensAvailable?parseFloat(r.totalTokensAvailable).toFixed(0):1e3," ODX"]})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-text-muted",children:"Tokens Sold:"}),v.jsxs("span",{className:"text-text-primary",children:[r!=null&&r.tokensSold?parseFloat(r.tokensSold).toFixed(2):0," ODX"]})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-text-muted",children:"Total BNB Deposited:"}),v.jsxs("span",{className:"text-text-primary",children:[r!=null&&r.totalBnbDeposited?parseFloat(r.totalBnbDeposited).toFixed(4):0," BNB"]})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-text-muted",children:"Token Price:"}),v.jsx("span",{className:"text-text-primary",children:"$0.10 USD"})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-text-muted",children:"Lock Duration:"}),v.jsxs("span",{className:"text-text-primary",children:[r!=null&&r.lockDuration?Math.floor(r.lockDuration/60):5," minutes"]})]})]})]}),v.jsxs("div",{className:"card",children:[v.jsx("h4",{className:"text-lg font-semibold text-text-primary mb-3",children:"Contract Links"}),v.jsxs("div",{className:"space-y-2",children:[v.jsxs(Ee.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>window.open(`${Ld.bnb.blockExplorer}/address/${Os.bnb.escrow}`,"_blank"),className:"w-full text-left p-2 bg-bg-hover border border-border-dark rounded-lg hover:border-accent-green/50 transition-all duration-200 flex items-center justify-between",children:[v.jsx("span",{className:"text-text-primary text-sm",children:"View Escrow Contract"}),v.jsx(Ni,{size:16,className:"text-text-muted"})]}),v.jsxs(Ee.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>window.open(`${Ld.bnb.blockExplorer}/address/${Os.bnb.token}`,"_blank"),className:"w-full text-left p-2 bg-bg-hover border border-border-dark rounded-lg hover:border-accent-green/50 transition-all duration-200 flex items-center justify-between",children:[v.jsx("span",{className:"text-text-primary text-sm",children:"View ODX Token"}),v.jsx(Ni,{size:16,className:"text-text-muted"})]}),v.jsxs(Ee.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>window.open(`${Ld.bnb.blockExplorer}/address/${Os.bnb.priceFeed}`,"_blank"),className:"w-full text-left p-2 bg-bg-hover border border-border-dark rounded-lg hover:border-accent-green/50 transition-all duration-200 flex items-center justify-between",children:[v.jsx("span",{className:"text-text-primary text-sm",children:"View Price Feed"}),v.jsx(Ni,{size:16,className:"text-text-muted"})]})]})]})]}):v.jsx(g9,{})]}),t.isConnected&&t.chain==="bnb"&&i&&!(e!=null&&e.isInitialized)&&v.jsx("div",{className:"card mt-6",children:v.jsxs("div",{className:"text-center py-6",children:[v.jsx(Og,{className:"text-text-muted mx-auto mb-4",size:48}),v.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"No Investment Found"}),v.jsx("p",{className:"text-text-muted",children:"This wallet hasn't made any investments yet. Make your first investment to see your statistics here."}),v.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Wallet: ",t.address]})]})}),(e==null?void 0:e.isInitialized)&&v.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4 mt-6",children:[v.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-text-muted text-sm",children:"Total Invested"}),v.jsxs("p",{className:"text-xl font-semibold text-text-primary",children:[parseFloat(e.bnbDeposited).toFixed(4)," BNB"]})]}),v.jsx(JT,{className:"text-accent-green",size:24})]})}),v.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-text-muted text-sm",children:"Tokens Received"}),v.jsxs("p",{className:"text-xl font-semibold text-text-primary",children:[parseFloat(e.tokensReceived).toFixed(2)," ODX"]})]}),v.jsx(Og,{className:"text-accent-green",size:24})]})}),v.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-text-muted text-sm",children:"Locked Amount"}),v.jsxs("p",{className:"text-xl font-semibold text-text-primary",children:[parseFloat(e.lockedBnbAmount).toFixed(4)," BNB"]})]}),v.jsx(Ov,{className:"text-warning",size:24})]})}),v.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-text-muted text-sm",children:"Unlock Status"}),v.jsx("p",{className:`text-xl font-semibold ${e.isUnlocked?"text-success":"text-warning"}`,children:e.isUnlocked?"Unlocked":"Locked"})]}),e.isUnlocked?v.jsx(s0,{className:"text-success",size:24}):v.jsx(i0,{className:"text-warning",size:24})]})})]}),(e==null?void 0:e.isInitialized)&&v.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card mt-6",children:[v.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"Your Investment Statistics"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"bg-bg-hover rounded-lg p-4 space-y-3",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-text-muted",children:"Total Sent by You:"}),v.jsxs("span",{className:"text-text-primary font-semibold",children:[parseFloat(e.bnbDeposited).toFixed(4)," BNB"]})]}),v.jsxs("div",{className:"border-l-2 border-accent-green pl-4 space-y-2",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-text-muted text-sm",children:"→ To Project (50%):"}),v.jsxs("span",{className:"text-accent-green font-medium",children:[(parseFloat(e.bnbDeposited)/2).toFixed(4)," BNB"]})]}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-text-muted text-sm",children:"→ Time-locked (50%):"}),v.jsxs("span",{className:"text-warning font-medium",children:[(parseFloat(e.bnbDeposited)/2).toFixed(4)," BNB"]})]})]})]}),v.jsxs("div",{className:"bg-bg-hover rounded-lg p-4",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-text-muted",children:"Tokens Received:"}),v.jsxs("span",{className:"text-text-primary font-semibold",children:[parseFloat(e.tokensReceived).toFixed(2)," ODX"]})]}),v.jsx("div",{className:"text-text-muted text-xs mt-1",children:"At $0.10 USD fixed price"})]}),v.jsxs("div",{className:"bg-bg-hover rounded-lg p-4",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("span",{className:"text-text-muted",children:"Currently Locked:"}),v.jsxs("span",{className:"text-warning font-semibold",children:[parseFloat(e.lockedBnbAmount).toFixed(4)," BNB"]})]}),v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("span",{className:"text-text-muted",children:"Already Released:"}),v.jsxs("span",{className:"text-success font-semibold",children:[(parseFloat(e.bnbDeposited)/2-parseFloat(e.lockedBnbAmount)).toFixed(4)," BNB"]})]}),v.jsx("div",{className:"flex items-center space-x-2 mt-3",children:e.isUnlocked?v.jsxs(v.Fragment,{children:[v.jsx(s0,{className:"text-success",size:16}),v.jsx("span",{className:"text-success text-sm",children:"Funds unlocked - awaiting project withdrawal"})]}):v.jsxs(v.Fragment,{children:[v.jsx(i0,{className:"text-warning",size:16}),v.jsxs("span",{className:"text-warning text-sm",children:["Unlock in ",f]})]})})]}),v.jsx("div",{className:"bg-bg-hover rounded-lg p-4",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-text-muted",children:"Investment Date:"}),v.jsxs("span",{className:"text-text-primary",children:[new Date(e.depositTimestamp*1e3).toLocaleDateString()," ",new Date(e.depositTimestamp*1e3).toLocaleTimeString()]})]})})]})]}),t.isConnected&&t.chain==="bnb"&&v.jsxs(Ee.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:F(.2),className:"card",style:U(),children:[v.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"Your Investment Addresses"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"bg-bg-hover rounded-lg p-4",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("span",{className:"text-text-muted text-sm font-medium",children:"Locked BNB Vault (Contract)"}),v.jsx("div",{className:"flex items-center space-x-2",children:v.jsxs(Ee.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>window.open(`${Ld.bnb.blockExplorer}/address/${Os.bnb.escrow}`,"_blank"),className:"text-accent-green hover:text-accent-green/80 text-xs flex items-center space-x-1",children:[v.jsx("span",{children:"BSCScan"}),v.jsx(Ni,{size:10})]})})]}),v.jsx("p",{className:"font-mono text-xs text-text-primary break-all bg-bg-secondary p-2 rounded",children:Os.bnb.escrow}),v.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Holds your time-locked BNB (50% of investment) until unlock time"})]}),v.jsxs("div",{className:"bg-bg-hover rounded-lg p-4",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("span",{className:"text-text-muted text-sm font-medium",children:"ODX Token Account (Wallet)"}),v.jsx("div",{className:"flex items-center space-x-2",children:v.jsxs(Ee.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>window.open(`${Ld.bnb.blockExplorer}/address/${t.address}`,"_blank"),className:"text-accent-green hover:text-accent-green/80 text-xs flex items-center space-x-1",children:[v.jsx("span",{children:"BSCScan"}),v.jsx(Ni,{size:10})]})})]}),v.jsx("p",{className:"font-mono text-xs text-text-primary break-all bg-bg-secondary p-2 rounded",children:t.address}),v.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Your ODX token balance (received immediately upon investment)"})]}),v.jsx("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-3",children:v.jsxs("p",{className:"text-blue-300 text-xs",children:["💡 ",v.jsx("strong",{children:"Pro tip:"})," These addresses show where your investment is stored. You can always verify your locked BNB and token balance independently on BSCScan."]})})]})]}),t.isConnected&&t.chain==="bnb"&&i&&!(e!=null&&e.isInitialized)&&v.jsx("div",{className:"card mt-6",children:v.jsxs("div",{className:"text-center py-6",children:[v.jsx(Og,{className:"text-text-muted mx-auto mb-4",size:48}),v.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"No Investment Found"}),v.jsx("p",{className:"text-text-muted",children:"This wallet hasn't made any investments yet. Make your first investment to see your statistics here."}),v.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Wallet: ",t.address]})]})}),v.jsx(O3,{isOpen:b,onClose:P,onConfirm:K,currentChain:t.chain,targetChain:w})]})},sLe=()=>{const t=Dm();return v.jsxs("div",{className:"min-h-screen bg-bg-dark",children:[v.jsx(uEe,{}),v.jsx("main",{className:"container mx-auto px-4 py-8",children:v.jsx(Rv,{mode:"wait",children:!t.isConnected&&!t.isChainSwitching?v.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-8",children:[v.jsxs("div",{className:"text-center space-y-6 mb-12",children:[v.jsxs(Ee.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-4xl md:text-6xl font-bold",children:[v.jsx("span",{className:"gradient-text",children:"Secure"})," ",v.jsx("span",{className:"text-text-primary",children:"Investment"}),v.jsx("br",{}),v.jsx("span",{className:"text-text-primary",children:"Platform"})]}),v.jsx(Ee.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-xl text-text-secondary max-w-2xl mx-auto",children:"Invest in projects with maximum security. 50% goes to the project instantly, 50% is time-locked for your protection."})]}),v.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex flex-col items-center space-y-4 max-w-md mx-auto",children:[v.jsx(FU,{}),v.jsx("div",{className:"w-full",children:v.jsx(c4,{})})]}),v.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:v.jsx(CBe,{})})]},"landing"):v.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[v.jsxs("div",{className:"flex flex-col space-y-4",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-text-primary",children:"Investment Dashboard"}),v.jsx("p",{className:"text-text-secondary mt-2",children:"Manage your investments and track your returns"})]}),v.jsxs("div",{className:"flex flex-col items-center space-y-4 max-w-md mx-auto",children:[v.jsx(FU,{}),v.jsx(c4,{})]})]}),t.isChainSwitching?v.jsx(Ee.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-center py-12",children:v.jsxs("div",{className:"text-center space-y-4",children:[v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-accent-primary border-t-transparent mx-auto"}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Switching Networks"}),v.jsxs("p",{className:"text-text-muted",children:["Loading ",t.chain.toUpperCase()," data..."]})]})]})}):v.jsx(rLe,{})]},"dashboard")})}),v.jsx("footer",{className:"border-t border-border-dark mt-16",children:v.jsx("div",{className:"container mx-auto px-4 py-8",children:v.jsxs("div",{className:"text-center text-text-muted",children:[v.jsx("p",{children:"© 2025 Ondrix Escrow. Secure investment platform."}),v.jsx("p",{className:"text-sm mt-2",children:"Built with security and transparency in mind."})]})})})]})},iLe=()=>v.jsx(Kye,{children:v.jsx(sLe,{})});Xk.createRoot(document.getElementById("root")).render(v.jsx(we.StrictMode,{children:v.jsx(iLe,{})}));export{Pt as $,Fe as A,it as B,q as C,cBe as D,Dt as E,TZ as F,Xe as G,Fb as H,Je as I,et as J,J8e as K,RZ as L,Ot as M,o_e as N,le as O,he as P,Ko as Q,ct as R,yl as S,ro as T,EUe as U,z1 as V,Qr as W,JW as X,ol as Y,aM as Z,Uz as _,Ci as a,nUe as a$,Q8e as a0,wi as a1,Qh as a2,ul as a3,rs as a4,Lf as a5,O2 as a6,fe as a7,ln as a8,q1 as a9,Lg as aA,W_e as aB,Sn as aC,pL as aD,jC as aE,HK as aF,JLe as aG,mL as aH,Y0e as aI,Z0e as aJ,HLe as aK,ZK as aL,D0e as aM,H0e as aN,L0e as aO,QK as aP,YK as aQ,sf as aR,GK as aS,BS as aT,GLe as aU,$0e as aV,lI as aW,Oh as aX,mD as aY,eUe as aZ,s_ as a_,bs as aa,u_e as ab,Wt as ac,Vv as ad,f1 as ae,bO as af,Na as ag,Vo as ah,oFe as ai,kt as aj,Cc as ak,QS as al,g3 as am,rq as an,Zy as ao,ur as ap,oce as aq,Ge as ar,Ol as as,yLe as at,Hp as au,b8 as av,oC as aw,k_ as ax,mr as ay,i4 as az,MZ as b,wv as b$,qy as b0,JK as b1,gD as b2,eye as b3,tye as b4,nye as b5,rye as b6,sye as b7,iye as b8,oye as b9,$h as bA,wL as bB,wye as bC,yL as bD,sUe as bE,rUe as bF,Q0e as bG,hUe as bH,fUe as bI,j0e as bJ,tq as bK,xye as bL,bL as bM,Eye as bN,rx as bO,XA as bP,pUe as bQ,gUe as bR,mUe as bS,yUe as bT,tUe as bU,WLe as bV,qK as bW,U0e as bX,F0e as bY,Cv as bZ,Sv as b_,aye as ba,cye as bb,lye as bc,iUe as bd,KLe as be,dye as bf,oUe as bg,eq as bh,dv as bi,vv as bj,_v as bk,uye as bl,hye as bm,fye as bn,aUe as bo,dUe as bp,cUe as bq,uUe as br,lUe as bs,Cw as bt,tA as bu,s1 as bv,YLe as bw,oM as bx,Dz as by,lLe as bz,Ft as c,Av as c0,uv as c1,cv as c2,pv as c3,Yy as c4,lv as c5,cp as c6,av as c7,yv as c8,ia as c9,hv as ca,fv as cb,Io as cc,bv as cd,Gy as ce,mv as cf,xv as cg,X0e as ch,Ev as ci,gv as cj,Vp as ck,yye as cl,B0e as cm,QLe as cn,z0e as co,q0e as cp,G0e as cq,PUe as d,RUe as e,MUe as f,DUe as g,Be as h,OUe as i,ws as j,iFe as k,cFe as l,US as m,Gd as n,Se as o,zn as p,ie as q,aFe as r,Vs as s,F_e as t,l5 as u,gi as v,oa as w,vUe as x,Ne as y,Ao as z};
